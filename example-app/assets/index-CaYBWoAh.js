(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();var Zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wc(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function ny(s){if(s.__esModule)return s;var t=s.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(s).forEach(function(i){var n=Object.getOwnPropertyDescriptor(s,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return s[i]}})}),e}var lp={exports:{}},So={},hp={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hr=Symbol.for("react.element"),ry=Symbol.for("react.portal"),ay=Symbol.for("react.fragment"),oy=Symbol.for("react.strict_mode"),ly=Symbol.for("react.profiler"),hy=Symbol.for("react.provider"),cy=Symbol.for("react.context"),uy=Symbol.for("react.forward_ref"),dy=Symbol.for("react.suspense"),fy=Symbol.for("react.memo"),py=Symbol.for("react.lazy"),Zu=Symbol.iterator;function gy(s){return s===null||typeof s!="object"?null:(s=Zu&&s[Zu]||s["@@iterator"],typeof s=="function"?s:null)}var cp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},up=Object.assign,dp={};function Mn(s,t,e){this.props=s,this.context=t,this.refs=dp,this.updater=e||cp}Mn.prototype.isReactComponent={};Mn.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};Mn.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function fp(){}fp.prototype=Mn.prototype;function Sc(s,t,e){this.props=s,this.context=t,this.refs=dp,this.updater=e||cp}var Ec=Sc.prototype=new fp;Ec.constructor=Sc;up(Ec,Mn.prototype);Ec.isPureReactComponent=!0;var Ju=Array.isArray,pp=Object.prototype.hasOwnProperty,xc={current:null},gp={key:!0,ref:!0,__self:!0,__source:!0};function mp(s,t,e){var i,n={},r=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(r=""+t.key),t)pp.call(t,i)&&!gp.hasOwnProperty(i)&&(n[i]=t[i]);var o=arguments.length-2;if(o===1)n.children=e;else if(1<o){for(var l=Array(o),h=0;h<o;h++)l[h]=arguments[h+2];n.children=l}if(s&&s.defaultProps)for(i in o=s.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:Hr,type:s,key:r,ref:a,props:n,_owner:xc.current}}function my(s,t){return{$$typeof:Hr,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function Cc(s){return typeof s=="object"&&s!==null&&s.$$typeof===Hr}function vy(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(e){return t[e]})}var $u=/\/+/g;function ll(s,t){return typeof s=="object"&&s!==null&&s.key!=null?vy(""+s.key):t.toString(36)}function _a(s,t,e,i,n){var r=typeof s;(r==="undefined"||r==="boolean")&&(s=null);var a=!1;if(s===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(s.$$typeof){case Hr:case ry:a=!0}}if(a)return a=s,n=n(a),s=i===""?"."+ll(a,0):i,Ju(n)?(e="",s!=null&&(e=s.replace($u,"$&/")+"/"),_a(n,t,e,"",function(h){return h})):n!=null&&(Cc(n)&&(n=my(n,e+(!n.key||a&&a.key===n.key?"":(""+n.key).replace($u,"$&/")+"/")+s)),t.push(n)),1;if(a=0,i=i===""?".":i+":",Ju(s))for(var o=0;o<s.length;o++){r=s[o];var l=i+ll(r,o);a+=_a(r,t,e,l,n)}else if(l=gy(s),typeof l=="function")for(s=l.call(s),o=0;!(r=s.next()).done;)r=r.value,l=i+ll(r,o++),a+=_a(r,t,e,l,n);else if(r==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Jr(s,t,e){if(s==null)return s;var i=[],n=0;return _a(s,i,"","",function(r){return t.call(e,r,n++)}),i}function yy(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(e){(s._status===0||s._status===-1)&&(s._status=1,s._result=e)},function(e){(s._status===0||s._status===-1)&&(s._status=2,s._result=e)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var pe={current:null},Ma={transition:null},Ay={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:Ma,ReactCurrentOwner:xc};function vp(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:Jr,forEach:function(s,t,e){Jr(s,function(){t.apply(this,arguments)},e)},count:function(s){var t=0;return Jr(s,function(){t++}),t},toArray:function(s){return Jr(s,function(t){return t})||[]},only:function(s){if(!Cc(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};et.Component=Mn;et.Fragment=ay;et.Profiler=ly;et.PureComponent=Sc;et.StrictMode=oy;et.Suspense=dy;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ay;et.act=vp;et.cloneElement=function(s,t,e){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var i=up({},s.props),n=s.key,r=s.ref,a=s._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,a=xc.current),t.key!==void 0&&(n=""+t.key),s.type&&s.type.defaultProps)var o=s.type.defaultProps;for(l in t)pp.call(t,l)&&!gp.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=e;else if(1<l){o=Array(l);for(var h=0;h<l;h++)o[h]=arguments[h+2];i.children=o}return{$$typeof:Hr,type:s.type,key:n,ref:r,props:i,_owner:a}};et.createContext=function(s){return s={$$typeof:cy,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:hy,_context:s},s.Consumer=s};et.createElement=mp;et.createFactory=function(s){var t=mp.bind(null,s);return t.type=s,t};et.createRef=function(){return{current:null}};et.forwardRef=function(s){return{$$typeof:uy,render:s}};et.isValidElement=Cc;et.lazy=function(s){return{$$typeof:py,_payload:{_status:-1,_result:s},_init:yy}};et.memo=function(s,t){return{$$typeof:fy,type:s,compare:t===void 0?null:t}};et.startTransition=function(s){var t=Ma.transition;Ma.transition={};try{s()}finally{Ma.transition=t}};et.unstable_act=vp;et.useCallback=function(s,t){return pe.current.useCallback(s,t)};et.useContext=function(s){return pe.current.useContext(s)};et.useDebugValue=function(){};et.useDeferredValue=function(s){return pe.current.useDeferredValue(s)};et.useEffect=function(s,t){return pe.current.useEffect(s,t)};et.useId=function(){return pe.current.useId()};et.useImperativeHandle=function(s,t,e){return pe.current.useImperativeHandle(s,t,e)};et.useInsertionEffect=function(s,t){return pe.current.useInsertionEffect(s,t)};et.useLayoutEffect=function(s,t){return pe.current.useLayoutEffect(s,t)};et.useMemo=function(s,t){return pe.current.useMemo(s,t)};et.useReducer=function(s,t,e){return pe.current.useReducer(s,t,e)};et.useRef=function(s){return pe.current.useRef(s)};et.useState=function(s){return pe.current.useState(s)};et.useSyncExternalStore=function(s,t,e){return pe.current.useSyncExternalStore(s,t,e)};et.useTransition=function(){return pe.current.useTransition()};et.version="18.3.1";hp.exports=et;var N=hp.exports;const by=wc(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy=N,Sy=Symbol.for("react.element"),Ey=Symbol.for("react.fragment"),xy=Object.prototype.hasOwnProperty,Cy=wy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ty={key:!0,ref:!0,__self:!0,__source:!0};function yp(s,t,e){var i,n={},r=null,a=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)xy.call(t,i)&&!Ty.hasOwnProperty(i)&&(n[i]=t[i]);if(s&&s.defaultProps)for(i in t=s.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:Sy,type:s,key:r,ref:a,props:n,_owner:Cy.current}}So.Fragment=Ey;So.jsx=yp;So.jsxs=yp;lp.exports=So;var D=lp.exports;const Ap=({onSubmit:s,placeHolder:t})=>{const[e,i]=N.useState("");return D.jsxs("form",{className:"Tip__card",onSubmit:n=>{n.preventDefault(),s(e)},children:[D.jsx("div",{children:D.jsx("textarea",{placeholder:t,autoFocus:!0,onChange:n=>{i(n.target.value)}})}),D.jsx("div",{children:D.jsx("input",{type:"submit",value:"Save"})})]})},ky=({xPos:s,yPos:t,editComment:e,deleteHighlight:i})=>D.jsxs("div",{className:"context-menu",style:{top:t+2,left:s+2},children:[D.jsx("button",{onClick:e,children:"Edit Comment"}),D.jsx("button",{onClick:i,children:"Delete"})]}),Ry="modulepreload",Py=function(s){return"/Pdf_Highlighter_React/example-app/"+s},td={},Ni=function(t,e,i){let n=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");n=Promise.allSettled(e.map(l=>{if(l=Py(l),l in td)return;td[l]=!0;const h=l.endsWith(".css"),c=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":Ry,h||(u.as="script"),u.crossOrigin="",u.href=l,o&&u.setAttribute("nonce",o),document.head.appendChild(u),h)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})};var _y="Expected a function",ed=NaN,My="[object Symbol]",Ly=/^\s+|\s+$/g,Dy=/^[-+]0x[0-9a-f]+$/i,Iy=/^0b[01]+$/i,Fy=/^0o[0-7]+$/i,Ny=parseInt,Oy=typeof Zr=="object"&&Zr&&Zr.Object===Object&&Zr,By=typeof self=="object"&&self&&self.Object===Object&&self,Hy=Oy||By||Function("return this")(),zy=Object.prototype,jy=zy.toString,Uy=Math.max,Wy=Math.min,hl=function(){return Hy.Date.now()};function Gy(s,t,e){var i,n,r,a,o,l,h=0,c=!1,u=!1,d=!0;if(typeof s!="function")throw new TypeError(_y);t=id(t)||0,$l(e)&&(c=!!e.leading,u="maxWait"in e,r=u?Uy(id(e.maxWait)||0,t):r,d="trailing"in e?!!e.trailing:d);function f(S){var E=i,x=n;return i=n=void 0,h=S,a=s.apply(x,E),a}function p(S){return h=S,o=setTimeout(g,t),c?f(S):a}function m(S){var E=S-l,x=S-h,C=t-E;return u?Wy(C,r-x):C}function A(S){var E=S-l,x=S-h;return l===void 0||E>=t||E<0||u&&x>=r}function g(){var S=hl();if(A(S))return v(S);o=setTimeout(g,m(S))}function v(S){return o=void 0,d&&i?f(S):(i=n=void 0,a)}function y(){o!==void 0&&clearTimeout(o),h=0,i=l=n=o=void 0}function b(){return o===void 0?a:v(hl())}function w(){var S=hl(),E=A(S);if(i=arguments,n=this,l=S,E){if(o===void 0)return p(l);if(u)return o=setTimeout(g,t),f(l)}return o===void 0&&(o=setTimeout(g,t)),a}return w.cancel=y,w.flush=b,w}function $l(s){var t=typeof s;return!!s&&(t=="object"||t=="function")}function Yy(s){return!!s&&typeof s=="object"}function Vy(s){return typeof s=="symbol"||Yy(s)&&jy.call(s)==My}function id(s){if(typeof s=="number")return s;if(Vy(s))return ed;if($l(s)){var t=typeof s.valueOf=="function"?s.valueOf():s;s=$l(t)?t+"":t}if(typeof s!="string")return s===0?s:+s;s=s.replace(Ly,"");var e=Iy.test(s);return e||Fy.test(s)?Ny(s.slice(2),e?2:8):Dy.test(s)?ed:+s}var Xy=Gy;const qy=wc(Xy);var th={},bp={exports:{}},ze={},wp={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(k,O){var F=k.length;k.push(O);t:for(;0<F;){var J=F-1>>>1,W=k[J];if(0<n(W,O))k[J]=O,k[F]=W,F=J;else break t}}function e(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var O=k[0],F=k.pop();if(F!==O){k[0]=F;t:for(var J=0,W=k.length,V=W>>>1;J<V;){var gt=2*(J+1)-1,wt=k[gt],nt=gt+1,M=k[nt];if(0>n(wt,F))nt<W&&0>n(M,wt)?(k[J]=M,k[nt]=F,J=nt):(k[J]=wt,k[gt]=F,J=gt);else if(nt<W&&0>n(M,F))k[J]=M,k[nt]=F,J=nt;else break t}}return O}function n(k,O){var F=k.sortIndex-O.sortIndex;return F!==0?F:k.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();s.unstable_now=function(){return a.now()-o}}var l=[],h=[],c=1,u=null,d=3,f=!1,p=!1,m=!1,A=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(k){for(var O=e(h);O!==null;){if(O.callback===null)i(h);else if(O.startTime<=k)i(h),O.sortIndex=O.expirationTime,t(l,O);else break;O=e(h)}}function b(k){if(m=!1,y(k),!p)if(e(l)!==null)p=!0,H(w);else{var O=e(h);O!==null&&P(b,O.startTime-k)}}function w(k,O){p=!1,m&&(m=!1,g(x),x=-1),f=!0;var F=d;try{for(y(O),u=e(l);u!==null&&(!(u.expirationTime>O)||k&&!R());){var J=u.callback;if(typeof J=="function"){u.callback=null,d=u.priorityLevel;var W=J(u.expirationTime<=O);O=s.unstable_now(),typeof W=="function"?u.callback=W:u===e(l)&&i(l),y(O)}else i(l);u=e(l)}if(u!==null)var V=!0;else{var gt=e(h);gt!==null&&P(b,gt.startTime-O),V=!1}return V}finally{u=null,d=F,f=!1}}var S=!1,E=null,x=-1,C=5,T=-1;function R(){return!(s.unstable_now()-T<C)}function I(){if(E!==null){var k=s.unstable_now();T=k;var O=!0;try{O=E(!0,k)}finally{O?L():(S=!1,E=null)}}else S=!1}var L;if(typeof v=="function")L=function(){v(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,z=G.port2;G.port1.onmessage=I,L=function(){z.postMessage(null)}}else L=function(){A(I,0)};function H(k){E=k,S||(S=!0,L())}function P(k,O){x=A(function(){k(s.unstable_now())},O)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(k){k.callback=null},s.unstable_continueExecution=function(){p||f||(p=!0,H(w))},s.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<k?Math.floor(1e3/k):5},s.unstable_getCurrentPriorityLevel=function(){return d},s.unstable_getFirstCallbackNode=function(){return e(l)},s.unstable_next=function(k){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var F=d;d=O;try{return k()}finally{d=F}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(k,O){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var F=d;d=k;try{return O()}finally{d=F}},s.unstable_scheduleCallback=function(k,O,F){var J=s.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?J+F:J):F=J,k){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,k={id:c++,callback:O,priorityLevel:k,startTime:F,expirationTime:W,sortIndex:-1},F>J?(k.sortIndex=F,t(h,k),e(l)===null&&k===e(h)&&(m?(g(x),x=-1):m=!0,P(b,F-J))):(k.sortIndex=W,t(l,k),p||f||(p=!0,H(w))),k},s.unstable_shouldYield=R,s.unstable_wrapCallback=function(k){var O=d;return function(){var F=d;d=O;try{return k.apply(this,arguments)}finally{d=F}}}})(Sp);wp.exports=Sp;var Ky=wp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy=N,He=Ky;function _(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ep=new Set,yr={};function Ws(s,t){Sn(s,t),Sn(s+"Capture",t)}function Sn(s,t){for(yr[s]=t,s=0;s<t.length;s++)Ep.add(t[s])}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eh=Object.prototype.hasOwnProperty,Zy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sd={},nd={};function Jy(s){return eh.call(nd,s)?!0:eh.call(sd,s)?!1:Zy.test(s)?nd[s]=!0:(sd[s]=!0,!1)}function $y(s,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function tA(s,t,e,i){if(t===null||typeof t>"u"||$y(s,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ge(s,t,e,i,n,r,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=e,this.propertyName=s,this.type=t,this.sanitizeURL=r,this.removeEmptyString=a}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Qt[s]=new ge(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];Qt[t]=new ge(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Qt[s]=new ge(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Qt[s]=new ge(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Qt[s]=new ge(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Qt[s]=new ge(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Qt[s]=new ge(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Qt[s]=new ge(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Qt[s]=new ge(s,5,!1,s.toLowerCase(),null,!1,!1)});var Tc=/[\-:]([a-z])/g;function kc(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace(Tc,kc);Qt[t]=new ge(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace(Tc,kc);Qt[t]=new ge(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace(Tc,kc);Qt[t]=new ge(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Qt[s]=new ge(s,1,!1,s.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Qt[s]=new ge(s,1,!1,s.toLowerCase(),null,!0,!0)});function Rc(s,t,e,i){var n=Qt.hasOwnProperty(t)?Qt[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tA(t,e,n,i)&&(e=null),i||n===null?Jy(t)&&(e===null?s.removeAttribute(t):s.setAttribute(t,""+e)):n.mustUseProperty?s[n.propertyName]=e===null?n.type===3?!1:"":e:(t=n.attributeName,i=n.attributeNamespace,e===null?s.removeAttribute(t):(n=n.type,e=n===3||n===4&&e===!0?"":""+e,i?s.setAttributeNS(i,t,e):s.setAttribute(t,e))))}var Vi=Qy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$r=Symbol.for("react.element"),tn=Symbol.for("react.portal"),en=Symbol.for("react.fragment"),Pc=Symbol.for("react.strict_mode"),ih=Symbol.for("react.profiler"),xp=Symbol.for("react.provider"),Cp=Symbol.for("react.context"),_c=Symbol.for("react.forward_ref"),sh=Symbol.for("react.suspense"),nh=Symbol.for("react.suspense_list"),Mc=Symbol.for("react.memo"),ts=Symbol.for("react.lazy"),Tp=Symbol.for("react.offscreen"),rd=Symbol.iterator;function In(s){return s===null||typeof s!="object"?null:(s=rd&&s[rd]||s["@@iterator"],typeof s=="function"?s:null)}var bt=Object.assign,cl;function Kn(s){if(cl===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);cl=t&&t[1]||""}return`
`+cl+s}var ul=!1;function dl(s,t){if(!s||ul)return"";ul=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var i=h}Reflect.construct(s,[],t)}else{try{t.call()}catch(h){i=h}s.call(t.prototype)}else{try{throw Error()}catch(h){i=h}s()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var n=h.stack.split(`
`),r=i.stack.split(`
`),a=n.length-1,o=r.length-1;1<=a&&0<=o&&n[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==r[o]){var l=`
`+n[a].replace(" at new "," at ");return s.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",s.displayName)),l}while(1<=a&&0<=o);break}}}finally{ul=!1,Error.prepareStackTrace=e}return(s=s?s.displayName||s.name:"")?Kn(s):""}function eA(s){switch(s.tag){case 5:return Kn(s.type);case 16:return Kn("Lazy");case 13:return Kn("Suspense");case 19:return Kn("SuspenseList");case 0:case 2:case 15:return s=dl(s.type,!1),s;case 11:return s=dl(s.type.render,!1),s;case 1:return s=dl(s.type,!0),s;default:return""}}function rh(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case en:return"Fragment";case tn:return"Portal";case ih:return"Profiler";case Pc:return"StrictMode";case sh:return"Suspense";case nh:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Cp:return(s.displayName||"Context")+".Consumer";case xp:return(s._context.displayName||"Context")+".Provider";case _c:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Mc:return t=s.displayName||null,t!==null?t:rh(s.type)||"Memo";case ts:t=s._payload,s=s._init;try{return rh(s(t))}catch{}}return null}function iA(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rh(t);case 8:return t===Pc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ms(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function kp(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sA(s){var t=kp(s)?"checked":"value",e=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),i=""+s[t];if(!s.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var n=e.get,r=e.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(s,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function ta(s){s._valueTracker||(s._valueTracker=sA(s))}function Rp(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return s&&(i=kp(s)?s.checked?"true":"false":s.value),s=i,s!==e?(t.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function ah(s,t){var e=t.checked;return bt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??s._wrapperState.initialChecked})}function ad(s,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=ms(t.value!=null?t.value:e),s._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Pp(s,t){t=t.checked,t!=null&&Rc(s,"checked",t,!1)}function oh(s,t){Pp(s,t);var e=ms(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&s.value===""||s.value!=e)&&(s.value=""+e):s.value!==""+e&&(s.value=""+e);else if(i==="submit"||i==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?lh(s,t.type,e):t.hasOwnProperty("defaultValue")&&lh(s,t.type,ms(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function od(s,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,e||t===s.value||(s.value=t),s.defaultValue=t}e=s.name,e!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,e!==""&&(s.name=e)}function lh(s,t,e){(t!=="number"||Xa(s.ownerDocument)!==s)&&(e==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+e&&(s.defaultValue=""+e))}var Qn=Array.isArray;function gn(s,t,e,i){if(s=s.options,t){t={};for(var n=0;n<e.length;n++)t["$"+e[n]]=!0;for(e=0;e<s.length;e++)n=t.hasOwnProperty("$"+s[e].value),s[e].selected!==n&&(s[e].selected=n),n&&i&&(s[e].defaultSelected=!0)}else{for(e=""+ms(e),t=null,n=0;n<s.length;n++){if(s[n].value===e){s[n].selected=!0,i&&(s[n].defaultSelected=!0);return}t!==null||s[n].disabled||(t=s[n])}t!==null&&(t.selected=!0)}}function hh(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_(91));return bt({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ld(s,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(_(92));if(Qn(e)){if(1<e.length)throw Error(_(93));e=e[0]}t=e}t==null&&(t=""),e=t}s._wrapperState={initialValue:ms(e)}}function _p(s,t){var e=ms(t.value),i=ms(t.defaultValue);e!=null&&(e=""+e,e!==s.value&&(s.value=e),t.defaultValue==null&&s.defaultValue!==e&&(s.defaultValue=e)),i!=null&&(s.defaultValue=""+i)}function hd(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function Mp(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ch(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?Mp(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ea,Lp=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,n){MSApp.execUnsafeLocalFunction(function(){return s(t,e,i,n)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for(ea=ea||document.createElement("div"),ea.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ea.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function Ar(s,t){if(t){var e=s.firstChild;if(e&&e===s.lastChild&&e.nodeType===3){e.nodeValue=t;return}}s.textContent=t}var rr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nA=["Webkit","ms","Moz","O"];Object.keys(rr).forEach(function(s){nA.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),rr[t]=rr[s]})});function Dp(s,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||rr.hasOwnProperty(s)&&rr[s]?(""+t).trim():t+"px"}function Ip(s,t){s=s.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,n=Dp(e,t[e],i);e==="float"&&(e="cssFloat"),i?s.setProperty(e,n):s[e]=n}}var rA=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uh(s,t){if(t){if(rA[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_(62))}}function dh(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fh=null;function Lc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ph=null,mn=null,vn=null;function cd(s){if(s=Ur(s)){if(typeof ph!="function")throw Error(_(280));var t=s.stateNode;t&&(t=ko(t),ph(s.stateNode,s.type,t))}}function Fp(s){mn?vn?vn.push(s):vn=[s]:mn=s}function Np(){if(mn){var s=mn,t=vn;if(vn=mn=null,cd(s),t)for(s=0;s<t.length;s++)cd(t[s])}}function Op(s,t){return s(t)}function Bp(){}var fl=!1;function Hp(s,t,e){if(fl)return s(t,e);fl=!0;try{return Op(s,t,e)}finally{fl=!1,(mn!==null||vn!==null)&&(Bp(),Np())}}function br(s,t){var e=s.stateNode;if(e===null)return null;var i=ko(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(s=s.type,i=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!i;break t;default:s=!1}if(s)return null;if(e&&typeof e!="function")throw Error(_(231,t,typeof e));return e}var gh=!1;if(Ui)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){gh=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{gh=!1}function aA(s,t,e,i,n,r,a,o,l){var h=Array.prototype.slice.call(arguments,3);try{t.apply(e,h)}catch(c){this.onError(c)}}var ar=!1,qa=null,Ka=!1,mh=null,oA={onError:function(s){ar=!0,qa=s}};function lA(s,t,e,i,n,r,a,o,l){ar=!1,qa=null,aA.apply(oA,arguments)}function hA(s,t,e,i,n,r,a,o,l){if(lA.apply(this,arguments),ar){if(ar){var h=qa;ar=!1,qa=null}else throw Error(_(198));Ka||(Ka=!0,mh=h)}}function Gs(s){var t=s,e=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(e=t.return),s=t.return;while(s)}return t.tag===3?e:null}function zp(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function ud(s){if(Gs(s)!==s)throw Error(_(188))}function cA(s){var t=s.alternate;if(!t){if(t=Gs(s),t===null)throw Error(_(188));return t!==s?null:s}for(var e=s,i=t;;){var n=e.return;if(n===null)break;var r=n.alternate;if(r===null){if(i=n.return,i!==null){e=i;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===e)return ud(n),s;if(r===i)return ud(n),t;r=r.sibling}throw Error(_(188))}if(e.return!==i.return)e=n,i=r;else{for(var a=!1,o=n.child;o;){if(o===e){a=!0,e=n,i=r;break}if(o===i){a=!0,i=n,e=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===e){a=!0,e=r,i=n;break}if(o===i){a=!0,i=r,e=n;break}o=o.sibling}if(!a)throw Error(_(189))}}if(e.alternate!==i)throw Error(_(190))}if(e.tag!==3)throw Error(_(188));return e.stateNode.current===e?s:t}function jp(s){return s=cA(s),s!==null?Up(s):null}function Up(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=Up(s);if(t!==null)return t;s=s.sibling}return null}var Wp=He.unstable_scheduleCallback,dd=He.unstable_cancelCallback,uA=He.unstable_shouldYield,dA=He.unstable_requestPaint,xt=He.unstable_now,fA=He.unstable_getCurrentPriorityLevel,Dc=He.unstable_ImmediatePriority,Gp=He.unstable_UserBlockingPriority,Qa=He.unstable_NormalPriority,pA=He.unstable_LowPriority,Yp=He.unstable_IdlePriority,Eo=null,wi=null;function gA(s){if(wi&&typeof wi.onCommitFiberRoot=="function")try{wi.onCommitFiberRoot(Eo,s,void 0,(s.current.flags&128)===128)}catch{}}var hi=Math.clz32?Math.clz32:yA,mA=Math.log,vA=Math.LN2;function yA(s){return s>>>=0,s===0?32:31-(mA(s)/vA|0)|0}var ia=64,sa=4194304;function Zn(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Za(s,t){var e=s.pendingLanes;if(e===0)return 0;var i=0,n=s.suspendedLanes,r=s.pingedLanes,a=e&268435455;if(a!==0){var o=a&~n;o!==0?i=Zn(o):(r&=a,r!==0&&(i=Zn(r)))}else a=e&~n,a!==0?i=Zn(a):r!==0&&(i=Zn(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,r=t&-t,n>=r||n===16&&(r&4194240)!==0))return t;if(i&4&&(i|=e&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=i;0<t;)e=31-hi(t),n=1<<e,i|=s[e],t&=~n;return i}function AA(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bA(s,t){for(var e=s.suspendedLanes,i=s.pingedLanes,n=s.expirationTimes,r=s.pendingLanes;0<r;){var a=31-hi(r),o=1<<a,l=n[a];l===-1?(!(o&e)||o&i)&&(n[a]=AA(o,t)):l<=t&&(s.expiredLanes|=o),r&=~o}}function vh(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Vp(){var s=ia;return ia<<=1,!(ia&4194240)&&(ia=64),s}function pl(s){for(var t=[],e=0;31>e;e++)t.push(s);return t}function zr(s,t,e){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-hi(t),s[t]=e}function wA(s,t){var e=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var i=s.eventTimes;for(s=s.expirationTimes;0<e;){var n=31-hi(e),r=1<<n;t[n]=0,i[n]=-1,s[n]=-1,e&=~r}}function Ic(s,t){var e=s.entangledLanes|=t;for(s=s.entanglements;e;){var i=31-hi(e),n=1<<i;n&t|s[i]&t&&(s[i]|=t),e&=~n}}var lt=0;function Xp(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var qp,Fc,Kp,Qp,Zp,yh=!1,na=[],ls=null,hs=null,cs=null,wr=new Map,Sr=new Map,is=[],SA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fd(s,t){switch(s){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":wr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(t.pointerId)}}function Nn(s,t,e,i,n,r){return s===null||s.nativeEvent!==r?(s={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:r,targetContainers:[n]},t!==null&&(t=Ur(t),t!==null&&Fc(t)),s):(s.eventSystemFlags|=i,t=s.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),s)}function EA(s,t,e,i,n){switch(t){case"focusin":return ls=Nn(ls,s,t,e,i,n),!0;case"dragenter":return hs=Nn(hs,s,t,e,i,n),!0;case"mouseover":return cs=Nn(cs,s,t,e,i,n),!0;case"pointerover":var r=n.pointerId;return wr.set(r,Nn(wr.get(r)||null,s,t,e,i,n)),!0;case"gotpointercapture":return r=n.pointerId,Sr.set(r,Nn(Sr.get(r)||null,s,t,e,i,n)),!0}return!1}function Jp(s){var t=ks(s.target);if(t!==null){var e=Gs(t);if(e!==null){if(t=e.tag,t===13){if(t=zp(e),t!==null){s.blockedOn=t,Zp(s.priority,function(){Kp(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){s.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}s.blockedOn=null}function La(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var e=Ah(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(e===null){e=s.nativeEvent;var i=new e.constructor(e.type,e);fh=i,e.target.dispatchEvent(i),fh=null}else return t=Ur(e),t!==null&&Fc(t),s.blockedOn=e,!1;t.shift()}return!0}function pd(s,t,e){La(s)&&e.delete(t)}function xA(){yh=!1,ls!==null&&La(ls)&&(ls=null),hs!==null&&La(hs)&&(hs=null),cs!==null&&La(cs)&&(cs=null),wr.forEach(pd),Sr.forEach(pd)}function On(s,t){s.blockedOn===t&&(s.blockedOn=null,yh||(yh=!0,He.unstable_scheduleCallback(He.unstable_NormalPriority,xA)))}function Er(s){function t(n){return On(n,s)}if(0<na.length){On(na[0],s);for(var e=1;e<na.length;e++){var i=na[e];i.blockedOn===s&&(i.blockedOn=null)}}for(ls!==null&&On(ls,s),hs!==null&&On(hs,s),cs!==null&&On(cs,s),wr.forEach(t),Sr.forEach(t),e=0;e<is.length;e++)i=is[e],i.blockedOn===s&&(i.blockedOn=null);for(;0<is.length&&(e=is[0],e.blockedOn===null);)Jp(e),e.blockedOn===null&&is.shift()}var yn=Vi.ReactCurrentBatchConfig,Ja=!0;function CA(s,t,e,i){var n=lt,r=yn.transition;yn.transition=null;try{lt=1,Nc(s,t,e,i)}finally{lt=n,yn.transition=r}}function TA(s,t,e,i){var n=lt,r=yn.transition;yn.transition=null;try{lt=4,Nc(s,t,e,i)}finally{lt=n,yn.transition=r}}function Nc(s,t,e,i){if(Ja){var n=Ah(s,t,e,i);if(n===null)xl(s,t,i,$a,e),fd(s,i);else if(EA(n,s,t,e,i))i.stopPropagation();else if(fd(s,i),t&4&&-1<SA.indexOf(s)){for(;n!==null;){var r=Ur(n);if(r!==null&&qp(r),r=Ah(s,t,e,i),r===null&&xl(s,t,i,$a,e),r===n)break;n=r}n!==null&&i.stopPropagation()}else xl(s,t,i,null,e)}}var $a=null;function Ah(s,t,e,i){if($a=null,s=Lc(i),s=ks(s),s!==null)if(t=Gs(s),t===null)s=null;else if(e=t.tag,e===13){if(s=zp(t),s!==null)return s;s=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return $a=s,null}function $p(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fA()){case Dc:return 1;case Gp:return 4;case Qa:case pA:return 16;case Yp:return 536870912;default:return 16}default:return 16}}var as=null,Oc=null,Da=null;function tg(){if(Da)return Da;var s,t=Oc,e=t.length,i,n="value"in as?as.value:as.textContent,r=n.length;for(s=0;s<e&&t[s]===n[s];s++);var a=e-s;for(i=1;i<=a&&t[e-i]===n[r-i];i++);return Da=n.slice(s,1<i?1-i:void 0)}function Ia(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function ra(){return!0}function gd(){return!1}function je(s){function t(e,i,n,r,a){this._reactName=e,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in s)s.hasOwnProperty(o)&&(e=s[o],this[o]=e?e(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ra:gd,this.isPropagationStopped=gd,this}return bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),t}var Ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=je(Ln),jr=bt({},Ln,{view:0,detail:0}),kA=je(jr),gl,ml,Bn,xo=bt({},jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Bn&&(Bn&&s.type==="mousemove"?(gl=s.screenX-Bn.screenX,ml=s.screenY-Bn.screenY):ml=gl=0,Bn=s),gl)},movementY:function(s){return"movementY"in s?s.movementY:ml}}),md=je(xo),RA=bt({},xo,{dataTransfer:0}),PA=je(RA),_A=bt({},jr,{relatedTarget:0}),vl=je(_A),MA=bt({},Ln,{animationName:0,elapsedTime:0,pseudoElement:0}),LA=je(MA),DA=bt({},Ln,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),IA=je(DA),FA=bt({},Ln,{data:0}),vd=je(FA),NA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HA(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=BA[s])?!!t[s]:!1}function Hc(){return HA}var zA=bt({},jr,{key:function(s){if(s.key){var t=NA[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=Ia(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?OA[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hc,charCode:function(s){return s.type==="keypress"?Ia(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ia(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),jA=je(zA),UA=bt({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yd=je(UA),WA=bt({},jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hc}),GA=je(WA),YA=bt({},Ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),VA=je(YA),XA=bt({},xo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),qA=je(XA),KA=[9,13,27,32],zc=Ui&&"CompositionEvent"in window,or=null;Ui&&"documentMode"in document&&(or=document.documentMode);var QA=Ui&&"TextEvent"in window&&!or,eg=Ui&&(!zc||or&&8<or&&11>=or),Ad=" ",bd=!1;function ig(s,t){switch(s){case"keyup":return KA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var sn=!1;function ZA(s,t){switch(s){case"compositionend":return sg(t);case"keypress":return t.which!==32?null:(bd=!0,Ad);case"textInput":return s=t.data,s===Ad&&bd?null:s;default:return null}}function JA(s,t){if(sn)return s==="compositionend"||!zc&&ig(s,t)?(s=tg(),Da=Oc=as=null,sn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eg&&t.locale!=="ko"?null:t.data;default:return null}}var $A={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wd(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!$A[s.type]:t==="textarea"}function ng(s,t,e,i){Fp(i),t=to(t,"onChange"),0<t.length&&(e=new Bc("onChange","change",null,e,i),s.push({event:e,listeners:t}))}var lr=null,xr=null;function t0(s){gg(s,0)}function Co(s){var t=an(s);if(Rp(t))return s}function e0(s,t){if(s==="change")return t}var rg=!1;if(Ui){var yl;if(Ui){var Al="oninput"in document;if(!Al){var Sd=document.createElement("div");Sd.setAttribute("oninput","return;"),Al=typeof Sd.oninput=="function"}yl=Al}else yl=!1;rg=yl&&(!document.documentMode||9<document.documentMode)}function Ed(){lr&&(lr.detachEvent("onpropertychange",ag),xr=lr=null)}function ag(s){if(s.propertyName==="value"&&Co(xr)){var t=[];ng(t,xr,s,Lc(s)),Hp(t0,t)}}function i0(s,t,e){s==="focusin"?(Ed(),lr=t,xr=e,lr.attachEvent("onpropertychange",ag)):s==="focusout"&&Ed()}function s0(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Co(xr)}function n0(s,t){if(s==="click")return Co(t)}function r0(s,t){if(s==="input"||s==="change")return Co(t)}function a0(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var ui=typeof Object.is=="function"?Object.is:a0;function Cr(s,t){if(ui(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var e=Object.keys(s),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var n=e[i];if(!eh.call(t,n)||!ui(s[n],t[n]))return!1}return!0}function xd(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Cd(s,t){var e=xd(s);s=0;for(var i;e;){if(e.nodeType===3){if(i=s+e.textContent.length,s<=t&&i>=t)return{node:e,offset:t-s};s=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=xd(e)}}function og(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?og(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function lg(){for(var s=window,t=Xa();t instanceof s.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)s=t.contentWindow;else break;t=Xa(s.document)}return t}function jc(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function o0(s){var t=lg(),e=s.focusedElem,i=s.selectionRange;if(t!==e&&e&&e.ownerDocument&&og(e.ownerDocument.documentElement,e)){if(i!==null&&jc(e)){if(t=i.start,s=i.end,s===void 0&&(s=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(s,e.value.length);else if(s=(t=e.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var n=e.textContent.length,r=Math.min(i.start,n);i=i.end===void 0?r:Math.min(i.end,n),!s.extend&&r>i&&(n=i,i=r,r=n),n=Cd(e,r);var a=Cd(e,i);n&&a&&(s.rangeCount!==1||s.anchorNode!==n.node||s.anchorOffset!==n.offset||s.focusNode!==a.node||s.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),s.removeAllRanges(),r>i?(s.addRange(t),s.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),s.addRange(t)))}}for(t=[],s=e;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)s=t[e],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var l0=Ui&&"documentMode"in document&&11>=document.documentMode,nn=null,bh=null,hr=null,wh=!1;function Td(s,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;wh||nn==null||nn!==Xa(i)||(i=nn,"selectionStart"in i&&jc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hr&&Cr(hr,i)||(hr=i,i=to(bh,"onSelect"),0<i.length&&(t=new Bc("onSelect","select",null,t,e),s.push({event:t,listeners:i}),t.target=nn)))}function aa(s,t){var e={};return e[s.toLowerCase()]=t.toLowerCase(),e["Webkit"+s]="webkit"+t,e["Moz"+s]="moz"+t,e}var rn={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionend:aa("Transition","TransitionEnd")},bl={},hg={};Ui&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete rn.animationend.animation,delete rn.animationiteration.animation,delete rn.animationstart.animation),"TransitionEvent"in window||delete rn.transitionend.transition);function To(s){if(bl[s])return bl[s];if(!rn[s])return s;var t=rn[s],e;for(e in t)if(t.hasOwnProperty(e)&&e in hg)return bl[s]=t[e];return s}var cg=To("animationend"),ug=To("animationiteration"),dg=To("animationstart"),fg=To("transitionend"),pg=new Map,kd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(s,t){pg.set(s,t),Ws(t,[s])}for(var wl=0;wl<kd.length;wl++){var Sl=kd[wl],h0=Sl.toLowerCase(),c0=Sl[0].toUpperCase()+Sl.slice(1);bs(h0,"on"+c0)}bs(cg,"onAnimationEnd");bs(ug,"onAnimationIteration");bs(dg,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(fg,"onTransitionEnd");Sn("onMouseEnter",["mouseout","mouseover"]);Sn("onMouseLeave",["mouseout","mouseover"]);Sn("onPointerEnter",["pointerout","pointerover"]);Sn("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jn));function Rd(s,t,e){var i=s.type||"unknown-event";s.currentTarget=e,hA(i,t,void 0,s),s.currentTarget=null}function gg(s,t){t=(t&4)!==0;for(var e=0;e<s.length;e++){var i=s[e],n=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,h=o.currentTarget;if(o=o.listener,l!==r&&n.isPropagationStopped())break t;Rd(n,o,h),r=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,h=o.currentTarget,o=o.listener,l!==r&&n.isPropagationStopped())break t;Rd(n,o,h),r=l}}}if(Ka)throw s=mh,Ka=!1,mh=null,s}function dt(s,t){var e=t[Th];e===void 0&&(e=t[Th]=new Set);var i=s+"__bubble";e.has(i)||(mg(t,s,2,!1),e.add(i))}function El(s,t,e){var i=0;t&&(i|=4),mg(e,s,i,t)}var oa="_reactListening"+Math.random().toString(36).slice(2);function Tr(s){if(!s[oa]){s[oa]=!0,Ep.forEach(function(e){e!=="selectionchange"&&(u0.has(e)||El(e,!1,s),El(e,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[oa]||(t[oa]=!0,El("selectionchange",!1,t))}}function mg(s,t,e,i){switch($p(t)){case 1:var n=CA;break;case 4:n=TA;break;default:n=Nc}e=n.bind(null,t,e,s),n=void 0,!gh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?s.addEventListener(t,e,{capture:!0,passive:n}):s.addEventListener(t,e,!0):n!==void 0?s.addEventListener(t,e,{passive:n}):s.addEventListener(t,e,!1)}function xl(s,t,e,i,n){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;a=a.return}for(;o!==null;){if(a=ks(o),a===null)return;if(l=a.tag,l===5||l===6){i=r=a;continue t}o=o.parentNode}}i=i.return}Hp(function(){var h=r,c=Lc(e),u=[];t:{var d=pg.get(s);if(d!==void 0){var f=Bc,p=s;switch(s){case"keypress":if(Ia(e)===0)break t;case"keydown":case"keyup":f=jA;break;case"focusin":p="focus",f=vl;break;case"focusout":p="blur",f=vl;break;case"beforeblur":case"afterblur":f=vl;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=PA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=GA;break;case cg:case ug:case dg:f=LA;break;case fg:f=VA;break;case"scroll":f=kA;break;case"wheel":f=qA;break;case"copy":case"cut":case"paste":f=IA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=yd}var m=(t&4)!==0,A=!m&&s==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var v=h,y;v!==null;){y=v;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,g!==null&&(b=br(v,g),b!=null&&m.push(kr(v,b,y)))),A)break;v=v.return}0<m.length&&(d=new f(d,p,null,e,c),u.push({event:d,listeners:m}))}}if(!(t&7)){t:{if(d=s==="mouseover"||s==="pointerover",f=s==="mouseout"||s==="pointerout",d&&e!==fh&&(p=e.relatedTarget||e.fromElement)&&(ks(p)||p[Wi]))break t;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=e.relatedTarget||e.toElement,f=h,p=p?ks(p):null,p!==null&&(A=Gs(p),p!==A||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=h),f!==p)){if(m=md,b="onMouseLeave",g="onMouseEnter",v="mouse",(s==="pointerout"||s==="pointerover")&&(m=yd,b="onPointerLeave",g="onPointerEnter",v="pointer"),A=f==null?d:an(f),y=p==null?d:an(p),d=new m(b,v+"leave",f,e,c),d.target=A,d.relatedTarget=y,b=null,ks(c)===h&&(m=new m(g,v+"enter",p,e,c),m.target=y,m.relatedTarget=A,b=m),A=b,f&&p)e:{for(m=f,g=p,v=0,y=m;y;y=Js(y))v++;for(y=0,b=g;b;b=Js(b))y++;for(;0<v-y;)m=Js(m),v--;for(;0<y-v;)g=Js(g),y--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break e;m=Js(m),g=Js(g)}m=null}else m=null;f!==null&&Pd(u,d,f,m,!1),p!==null&&A!==null&&Pd(u,A,p,m,!0)}}t:{if(d=h?an(h):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=e0;else if(wd(d))if(rg)w=r0;else{w=s0;var S=i0}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=n0);if(w&&(w=w(s,h))){ng(u,w,e,c);break t}S&&S(s,d,h),s==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&lh(d,"number",d.value)}switch(S=h?an(h):window,s){case"focusin":(wd(S)||S.contentEditable==="true")&&(nn=S,bh=h,hr=null);break;case"focusout":hr=bh=nn=null;break;case"mousedown":wh=!0;break;case"contextmenu":case"mouseup":case"dragend":wh=!1,Td(u,e,c);break;case"selectionchange":if(l0)break;case"keydown":case"keyup":Td(u,e,c)}var E;if(zc)t:{switch(s){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else sn?ig(s,e)&&(x="onCompositionEnd"):s==="keydown"&&e.keyCode===229&&(x="onCompositionStart");x&&(eg&&e.locale!=="ko"&&(sn||x!=="onCompositionStart"?x==="onCompositionEnd"&&sn&&(E=tg()):(as=c,Oc="value"in as?as.value:as.textContent,sn=!0)),S=to(h,x),0<S.length&&(x=new vd(x,s,null,e,c),u.push({event:x,listeners:S}),E?x.data=E:(E=sg(e),E!==null&&(x.data=E)))),(E=QA?ZA(s,e):JA(s,e))&&(h=to(h,"onBeforeInput"),0<h.length&&(c=new vd("onBeforeInput","beforeinput",null,e,c),u.push({event:c,listeners:h}),c.data=E))}gg(u,t)})}function kr(s,t,e){return{instance:s,listener:t,currentTarget:e}}function to(s,t){for(var e=t+"Capture",i=[];s!==null;){var n=s,r=n.stateNode;n.tag===5&&r!==null&&(n=r,r=br(s,e),r!=null&&i.unshift(kr(s,r,n)),r=br(s,t),r!=null&&i.push(kr(s,r,n))),s=s.return}return i}function Js(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Pd(s,t,e,i,n){for(var r=t._reactName,a=[];e!==null&&e!==i;){var o=e,l=o.alternate,h=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&h!==null&&(o=h,n?(l=br(e,r),l!=null&&a.unshift(kr(e,l,o))):n||(l=br(e,r),l!=null&&a.push(kr(e,l,o)))),e=e.return}a.length!==0&&s.push({event:t,listeners:a})}var d0=/\r\n?/g,f0=/\u0000|\uFFFD/g;function _d(s){return(typeof s=="string"?s:""+s).replace(d0,`
`).replace(f0,"")}function la(s,t,e){if(t=_d(t),_d(s)!==t&&e)throw Error(_(425))}function eo(){}var Sh=null,Eh=null;function xh(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ch=typeof setTimeout=="function"?setTimeout:void 0,p0=typeof clearTimeout=="function"?clearTimeout:void 0,Md=typeof Promise=="function"?Promise:void 0,g0=typeof queueMicrotask=="function"?queueMicrotask:typeof Md<"u"?function(s){return Md.resolve(null).then(s).catch(m0)}:Ch;function m0(s){setTimeout(function(){throw s})}function Cl(s,t){var e=t,i=0;do{var n=e.nextSibling;if(s.removeChild(e),n&&n.nodeType===8)if(e=n.data,e==="/$"){if(i===0){s.removeChild(n),Er(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=n}while(e);Er(t)}function us(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function Ld(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var e=s.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return s;t--}else e==="/$"&&t++}s=s.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),Ai="__reactFiber$"+Dn,Rr="__reactProps$"+Dn,Wi="__reactContainer$"+Dn,Th="__reactEvents$"+Dn,v0="__reactListeners$"+Dn,y0="__reactHandles$"+Dn;function ks(s){var t=s[Ai];if(t)return t;for(var e=s.parentNode;e;){if(t=e[Wi]||e[Ai]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(s=Ld(s);s!==null;){if(e=s[Ai])return e;s=Ld(s)}return t}s=e,e=s.parentNode}return null}function Ur(s){return s=s[Ai]||s[Wi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function an(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(_(33))}function ko(s){return s[Rr]||null}var kh=[],on=-1;function ws(s){return{current:s}}function ft(s){0>on||(s.current=kh[on],kh[on]=null,on--)}function ut(s,t){on++,kh[on]=s.current,s.current=t}var vs={},oe=ws(vs),Te=ws(!1),Is=vs;function En(s,t){var e=s.type.contextTypes;if(!e)return vs;var i=s.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},r;for(r in e)n[r]=t[r];return i&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=n),n}function ke(s){return s=s.childContextTypes,s!=null}function io(){ft(Te),ft(oe)}function Dd(s,t,e){if(oe.current!==vs)throw Error(_(168));ut(oe,t),ut(Te,e)}function vg(s,t,e){var i=s.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(_(108,iA(s)||"Unknown",n));return bt({},e,i)}function so(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||vs,Is=oe.current,ut(oe,s),ut(Te,Te.current),!0}function Id(s,t,e){var i=s.stateNode;if(!i)throw Error(_(169));e?(s=vg(s,t,Is),i.__reactInternalMemoizedMergedChildContext=s,ft(Te),ft(oe),ut(oe,s)):ft(Te),ut(Te,e)}var Ii=null,Ro=!1,Tl=!1;function yg(s){Ii===null?Ii=[s]:Ii.push(s)}function A0(s){Ro=!0,yg(s)}function Ss(){if(!Tl&&Ii!==null){Tl=!0;var s=0,t=lt;try{var e=Ii;for(lt=1;s<e.length;s++){var i=e[s];do i=i(!0);while(i!==null)}Ii=null,Ro=!1}catch(n){throw Ii!==null&&(Ii=Ii.slice(s+1)),Wp(Dc,Ss),n}finally{lt=t,Tl=!1}}return null}var ln=[],hn=0,no=null,ro=0,qe=[],Ke=0,Fs=null,Oi=1,Bi="";function Cs(s,t){ln[hn++]=ro,ln[hn++]=no,no=s,ro=t}function Ag(s,t,e){qe[Ke++]=Oi,qe[Ke++]=Bi,qe[Ke++]=Fs,Fs=s;var i=Oi;s=Bi;var n=32-hi(i)-1;i&=~(1<<n),e+=1;var r=32-hi(t)+n;if(30<r){var a=n-n%5;r=(i&(1<<a)-1).toString(32),i>>=a,n-=a,Oi=1<<32-hi(t)+n|e<<n|i,Bi=r+s}else Oi=1<<r|e<<n|i,Bi=s}function Uc(s){s.return!==null&&(Cs(s,1),Ag(s,1,0))}function Wc(s){for(;s===no;)no=ln[--hn],ln[hn]=null,ro=ln[--hn],ln[hn]=null;for(;s===Fs;)Fs=qe[--Ke],qe[Ke]=null,Bi=qe[--Ke],qe[Ke]=null,Oi=qe[--Ke],qe[Ke]=null}var Oe=null,Ne=null,pt=!1,li=null;function bg(s,t){var e=Qe(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=s,t=s.deletions,t===null?(s.deletions=[e],s.flags|=16):t.push(e)}function Fd(s,t){switch(s.tag){case 5:var e=s.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,Oe=s,Ne=us(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,Oe=s,Ne=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=Fs!==null?{id:Oi,overflow:Bi}:null,s.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Qe(18,null,null,0),e.stateNode=t,e.return=s,s.child=e,Oe=s,Ne=null,!0):!1;default:return!1}}function Rh(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ph(s){if(pt){var t=Ne;if(t){var e=t;if(!Fd(s,t)){if(Rh(s))throw Error(_(418));t=us(e.nextSibling);var i=Oe;t&&Fd(s,t)?bg(i,e):(s.flags=s.flags&-4097|2,pt=!1,Oe=s)}}else{if(Rh(s))throw Error(_(418));s.flags=s.flags&-4097|2,pt=!1,Oe=s}}}function Nd(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Oe=s}function ha(s){if(s!==Oe)return!1;if(!pt)return Nd(s),pt=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!xh(s.type,s.memoizedProps)),t&&(t=Ne)){if(Rh(s))throw wg(),Error(_(418));for(;t;)bg(s,t),t=us(t.nextSibling)}if(Nd(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_(317));t:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var e=s.data;if(e==="/$"){if(t===0){Ne=us(s.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}s=s.nextSibling}Ne=null}}else Ne=Oe?us(s.stateNode.nextSibling):null;return!0}function wg(){for(var s=Ne;s;)s=us(s.nextSibling)}function xn(){Ne=Oe=null,pt=!1}function Gc(s){li===null?li=[s]:li.push(s)}var b0=Vi.ReactCurrentBatchConfig;function Hn(s,t,e){if(s=e.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(_(309));var i=e.stateNode}if(!i)throw Error(_(147,s));var n=i,r=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(a){var o=n.refs;a===null?delete o[r]:o[r]=a},t._stringRef=r,t)}if(typeof s!="string")throw Error(_(284));if(!e._owner)throw Error(_(290,s))}return s}function ca(s,t){throw s=Object.prototype.toString.call(t),Error(_(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function Od(s){var t=s._init;return t(s._payload)}function Sg(s){function t(g,v){if(s){var y=g.deletions;y===null?(g.deletions=[v],g.flags|=16):y.push(v)}}function e(g,v){if(!s)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function i(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function n(g,v){return g=gs(g,v),g.index=0,g.sibling=null,g}function r(g,v,y){return g.index=y,s?(y=g.alternate,y!==null?(y=y.index,y<v?(g.flags|=2,v):y):(g.flags|=2,v)):(g.flags|=1048576,v)}function a(g){return s&&g.alternate===null&&(g.flags|=2),g}function o(g,v,y,b){return v===null||v.tag!==6?(v=Dl(y,g.mode,b),v.return=g,v):(v=n(v,y),v.return=g,v)}function l(g,v,y,b){var w=y.type;return w===en?c(g,v,y.props.children,b,y.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ts&&Od(w)===v.type)?(b=n(v,y.props),b.ref=Hn(g,v,y),b.return=g,b):(b=ja(y.type,y.key,y.props,null,g.mode,b),b.ref=Hn(g,v,y),b.return=g,b)}function h(g,v,y,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=Il(y,g.mode,b),v.return=g,v):(v=n(v,y.children||[]),v.return=g,v)}function c(g,v,y,b,w){return v===null||v.tag!==7?(v=Ds(y,g.mode,b,w),v.return=g,v):(v=n(v,y),v.return=g,v)}function u(g,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Dl(""+v,g.mode,y),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $r:return y=ja(v.type,v.key,v.props,null,g.mode,y),y.ref=Hn(g,null,v),y.return=g,y;case tn:return v=Il(v,g.mode,y),v.return=g,v;case ts:var b=v._init;return u(g,b(v._payload),y)}if(Qn(v)||In(v))return v=Ds(v,g.mode,y,null),v.return=g,v;ca(g,v)}return null}function d(g,v,y,b){var w=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:o(g,v,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $r:return y.key===w?l(g,v,y,b):null;case tn:return y.key===w?h(g,v,y,b):null;case ts:return w=y._init,d(g,v,w(y._payload),b)}if(Qn(y)||In(y))return w!==null?null:c(g,v,y,b,null);ca(g,y)}return null}function f(g,v,y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(y)||null,o(v,g,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $r:return g=g.get(b.key===null?y:b.key)||null,l(v,g,b,w);case tn:return g=g.get(b.key===null?y:b.key)||null,h(v,g,b,w);case ts:var S=b._init;return f(g,v,y,S(b._payload),w)}if(Qn(b)||In(b))return g=g.get(y)||null,c(v,g,b,w,null);ca(v,b)}return null}function p(g,v,y,b){for(var w=null,S=null,E=v,x=v=0,C=null;E!==null&&x<y.length;x++){E.index>x?(C=E,E=null):C=E.sibling;var T=d(g,E,y[x],b);if(T===null){E===null&&(E=C);break}s&&E&&T.alternate===null&&t(g,E),v=r(T,v,x),S===null?w=T:S.sibling=T,S=T,E=C}if(x===y.length)return e(g,E),pt&&Cs(g,x),w;if(E===null){for(;x<y.length;x++)E=u(g,y[x],b),E!==null&&(v=r(E,v,x),S===null?w=E:S.sibling=E,S=E);return pt&&Cs(g,x),w}for(E=i(g,E);x<y.length;x++)C=f(E,g,x,y[x],b),C!==null&&(s&&C.alternate!==null&&E.delete(C.key===null?x:C.key),v=r(C,v,x),S===null?w=C:S.sibling=C,S=C);return s&&E.forEach(function(R){return t(g,R)}),pt&&Cs(g,x),w}function m(g,v,y,b){var w=In(y);if(typeof w!="function")throw Error(_(150));if(y=w.call(y),y==null)throw Error(_(151));for(var S=w=null,E=v,x=v=0,C=null,T=y.next();E!==null&&!T.done;x++,T=y.next()){E.index>x?(C=E,E=null):C=E.sibling;var R=d(g,E,T.value,b);if(R===null){E===null&&(E=C);break}s&&E&&R.alternate===null&&t(g,E),v=r(R,v,x),S===null?w=R:S.sibling=R,S=R,E=C}if(T.done)return e(g,E),pt&&Cs(g,x),w;if(E===null){for(;!T.done;x++,T=y.next())T=u(g,T.value,b),T!==null&&(v=r(T,v,x),S===null?w=T:S.sibling=T,S=T);return pt&&Cs(g,x),w}for(E=i(g,E);!T.done;x++,T=y.next())T=f(E,g,x,T.value,b),T!==null&&(s&&T.alternate!==null&&E.delete(T.key===null?x:T.key),v=r(T,v,x),S===null?w=T:S.sibling=T,S=T);return s&&E.forEach(function(I){return t(g,I)}),pt&&Cs(g,x),w}function A(g,v,y,b){if(typeof y=="object"&&y!==null&&y.type===en&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case $r:t:{for(var w=y.key,S=v;S!==null;){if(S.key===w){if(w=y.type,w===en){if(S.tag===7){e(g,S.sibling),v=n(S,y.props.children),v.return=g,g=v;break t}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ts&&Od(w)===S.type){e(g,S.sibling),v=n(S,y.props),v.ref=Hn(g,S,y),v.return=g,g=v;break t}e(g,S);break}else t(g,S);S=S.sibling}y.type===en?(v=Ds(y.props.children,g.mode,b,y.key),v.return=g,g=v):(b=ja(y.type,y.key,y.props,null,g.mode,b),b.ref=Hn(g,v,y),b.return=g,g=b)}return a(g);case tn:t:{for(S=y.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){e(g,v.sibling),v=n(v,y.children||[]),v.return=g,g=v;break t}else{e(g,v);break}else t(g,v);v=v.sibling}v=Il(y,g.mode,b),v.return=g,g=v}return a(g);case ts:return S=y._init,A(g,v,S(y._payload),b)}if(Qn(y))return p(g,v,y,b);if(In(y))return m(g,v,y,b);ca(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(e(g,v.sibling),v=n(v,y),v.return=g,g=v):(e(g,v),v=Dl(y,g.mode,b),v.return=g,g=v),a(g)):e(g,v)}return A}var Cn=Sg(!0),Eg=Sg(!1),ao=ws(null),oo=null,cn=null,Yc=null;function Vc(){Yc=cn=oo=null}function Xc(s){var t=ao.current;ft(ao),s._currentValue=t}function _h(s,t,e){for(;s!==null;){var i=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),s===e)break;s=s.return}}function An(s,t){oo=s,Yc=cn=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(xe=!0),s.firstContext=null)}function Je(s){var t=s._currentValue;if(Yc!==s)if(s={context:s,memoizedValue:t,next:null},cn===null){if(oo===null)throw Error(_(308));cn=s,oo.dependencies={lanes:0,firstContext:s}}else cn=cn.next=s;return t}var Rs=null;function qc(s){Rs===null?Rs=[s]:Rs.push(s)}function xg(s,t,e,i){var n=t.interleaved;return n===null?(e.next=e,qc(t)):(e.next=n.next,n.next=e),t.interleaved=e,Gi(s,i)}function Gi(s,t){s.lanes|=t;var e=s.alternate;for(e!==null&&(e.lanes|=t),e=s,s=s.return;s!==null;)s.childLanes|=t,e=s.alternate,e!==null&&(e.childLanes|=t),e=s,s=s.return;return e.tag===3?e.stateNode:null}var es=!1;function Kc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cg(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Hi(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function ds(s,t,e){var i=s.updateQueue;if(i===null)return null;if(i=i.shared,ot&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,Gi(s,e)}return n=i.interleaved,n===null?(t.next=t,qc(i)):(t.next=n.next,n.next=t),i.interleaved=t,Gi(s,e)}function Fa(s,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=s.pendingLanes,e|=i,t.lanes=e,Ic(s,e)}}function Bd(s,t){var e=s.updateQueue,i=s.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var n=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?n=r=a:r=r.next=a,e=e.next}while(e!==null);r===null?n=r=t:r=r.next=t}else n=r=t;e={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:i.shared,effects:i.effects},s.updateQueue=e;return}s=e.lastBaseUpdate,s===null?e.firstBaseUpdate=t:s.next=t,e.lastBaseUpdate=t}function lo(s,t,e,i){var n=s.updateQueue;es=!1;var r=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var l=o,h=l.next;l.next=null,a===null?r=h:a.next=h,a=l;var c=s.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=h:o.next=h,c.lastBaseUpdate=l))}if(r!==null){var u=n.baseState;a=0,c=h=l=null,o=r;do{var d=o.lane,f=o.eventTime;if((i&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var p=s,m=o;switch(d=t,f=e,m.tag){case 1:if(p=m.payload,typeof p=="function"){u=p.call(f,u,d);break t}u=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(f,u,d):p,d==null)break t;u=bt({},u,d);break t;case 2:es=!0}}o.callback!==null&&o.lane!==0&&(s.flags|=64,d=n.effects,d===null?n.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(h=c=f,l=u):c=c.next=f,a|=d;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;d=o,o=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(!0);if(c===null&&(l=u),n.baseState=l,n.firstBaseUpdate=h,n.lastBaseUpdate=c,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else r===null&&(n.shared.lanes=0);Os|=a,s.lanes=a,s.memoizedState=u}}function Hd(s,t,e){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var i=s[t],n=i.callback;if(n!==null){if(i.callback=null,i=e,typeof n!="function")throw Error(_(191,n));n.call(i)}}}var Wr={},Si=ws(Wr),Pr=ws(Wr),_r=ws(Wr);function Ps(s){if(s===Wr)throw Error(_(174));return s}function Qc(s,t){switch(ut(_r,t),ut(Pr,s),ut(Si,Wr),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ch(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=ch(t,s)}ft(Si),ut(Si,t)}function Tn(){ft(Si),ft(Pr),ft(_r)}function Tg(s){Ps(_r.current);var t=Ps(Si.current),e=ch(t,s.type);t!==e&&(ut(Pr,s),ut(Si,e))}function Zc(s){Pr.current===s&&(ft(Si),ft(Pr))}var yt=ws(0);function ho(s){for(var t=s;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var kl=[];function Jc(){for(var s=0;s<kl.length;s++)kl[s]._workInProgressVersionPrimary=null;kl.length=0}var Na=Vi.ReactCurrentDispatcher,Rl=Vi.ReactCurrentBatchConfig,Ns=0,At=null,Bt=null,Yt=null,co=!1,cr=!1,Mr=0,w0=0;function Zt(){throw Error(_(321))}function $c(s,t){if(t===null)return!1;for(var e=0;e<t.length&&e<s.length;e++)if(!ui(s[e],t[e]))return!1;return!0}function tu(s,t,e,i,n,r){if(Ns=r,At=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Na.current=s===null||s.memoizedState===null?C0:T0,s=e(i,n),cr){r=0;do{if(cr=!1,Mr=0,25<=r)throw Error(_(301));r+=1,Yt=Bt=null,t.updateQueue=null,Na.current=k0,s=e(i,n)}while(cr)}if(Na.current=uo,t=Bt!==null&&Bt.next!==null,Ns=0,Yt=Bt=At=null,co=!1,t)throw Error(_(300));return s}function eu(){var s=Mr!==0;return Mr=0,s}function mi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?At.memoizedState=Yt=s:Yt=Yt.next=s,Yt}function $e(){if(Bt===null){var s=At.alternate;s=s!==null?s.memoizedState:null}else s=Bt.next;var t=Yt===null?At.memoizedState:Yt.next;if(t!==null)Yt=t,Bt=s;else{if(s===null)throw Error(_(310));Bt=s,s={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Yt===null?At.memoizedState=Yt=s:Yt=Yt.next=s}return Yt}function Lr(s,t){return typeof t=="function"?t(s):t}function Pl(s){var t=$e(),e=t.queue;if(e===null)throw Error(_(311));e.lastRenderedReducer=s;var i=Bt,n=i.baseQueue,r=e.pending;if(r!==null){if(n!==null){var a=n.next;n.next=r.next,r.next=a}i.baseQueue=n=r,e.pending=null}if(n!==null){r=n.next,i=i.baseState;var o=a=null,l=null,h=r;do{var c=h.lane;if((Ns&c)===c)l!==null&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:s(i,h.action);else{var u={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};l===null?(o=l=u,a=i):l=l.next=u,At.lanes|=c,Os|=c}h=h.next}while(h!==null&&h!==r);l===null?a=i:l.next=o,ui(i,t.memoizedState)||(xe=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,e.lastRenderedState=i}if(s=e.interleaved,s!==null){n=s;do r=n.lane,At.lanes|=r,Os|=r,n=n.next;while(n!==s)}else n===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function _l(s){var t=$e(),e=t.queue;if(e===null)throw Error(_(311));e.lastRenderedReducer=s;var i=e.dispatch,n=e.pending,r=t.memoizedState;if(n!==null){e.pending=null;var a=n=n.next;do r=s(r,a.action),a=a.next;while(a!==n);ui(r,t.memoizedState)||(xe=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,i]}function kg(){}function Rg(s,t){var e=At,i=$e(),n=t(),r=!ui(i.memoizedState,n);if(r&&(i.memoizedState=n,xe=!0),i=i.queue,iu(Mg.bind(null,e,i,s),[s]),i.getSnapshot!==t||r||Yt!==null&&Yt.memoizedState.tag&1){if(e.flags|=2048,Dr(9,_g.bind(null,e,i,n,t),void 0,null),Vt===null)throw Error(_(349));Ns&30||Pg(e,t,n)}return n}function Pg(s,t,e){s.flags|=16384,s={getSnapshot:t,value:e},t=At.updateQueue,t===null?(t={lastEffect:null,stores:null},At.updateQueue=t,t.stores=[s]):(e=t.stores,e===null?t.stores=[s]:e.push(s))}function _g(s,t,e,i){t.value=e,t.getSnapshot=i,Lg(t)&&Dg(s)}function Mg(s,t,e){return e(function(){Lg(t)&&Dg(s)})}function Lg(s){var t=s.getSnapshot;s=s.value;try{var e=t();return!ui(s,e)}catch{return!0}}function Dg(s){var t=Gi(s,1);t!==null&&ci(t,s,1,-1)}function zd(s){var t=mi();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:s},t.queue=s,s=s.dispatch=x0.bind(null,At,s),[t.memoizedState,s]}function Dr(s,t,e,i){return s={tag:s,create:t,destroy:e,deps:i,next:null},t=At.updateQueue,t===null?(t={lastEffect:null,stores:null},At.updateQueue=t,t.lastEffect=s.next=s):(e=t.lastEffect,e===null?t.lastEffect=s.next=s:(i=e.next,e.next=s,s.next=i,t.lastEffect=s)),s}function Ig(){return $e().memoizedState}function Oa(s,t,e,i){var n=mi();At.flags|=s,n.memoizedState=Dr(1|t,e,void 0,i===void 0?null:i)}function Po(s,t,e,i){var n=$e();i=i===void 0?null:i;var r=void 0;if(Bt!==null){var a=Bt.memoizedState;if(r=a.destroy,i!==null&&$c(i,a.deps)){n.memoizedState=Dr(t,e,r,i);return}}At.flags|=s,n.memoizedState=Dr(1|t,e,r,i)}function jd(s,t){return Oa(8390656,8,s,t)}function iu(s,t){return Po(2048,8,s,t)}function Fg(s,t){return Po(4,2,s,t)}function Ng(s,t){return Po(4,4,s,t)}function Og(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function Bg(s,t,e){return e=e!=null?e.concat([s]):null,Po(4,4,Og.bind(null,t,s),e)}function su(){}function Hg(s,t){var e=$e();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&$c(t,i[1])?i[0]:(e.memoizedState=[s,t],s)}function zg(s,t){var e=$e();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&$c(t,i[1])?i[0]:(s=s(),e.memoizedState=[s,t],s)}function jg(s,t,e){return Ns&21?(ui(e,t)||(e=Vp(),At.lanes|=e,Os|=e,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,xe=!0),s.memoizedState=e)}function S0(s,t){var e=lt;lt=e!==0&&4>e?e:4,s(!0);var i=Rl.transition;Rl.transition={};try{s(!1),t()}finally{lt=e,Rl.transition=i}}function Ug(){return $e().memoizedState}function E0(s,t,e){var i=ps(s);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},Wg(s))Gg(t,e);else if(e=xg(s,t,e,i),e!==null){var n=fe();ci(e,s,i,n),Yg(e,t,i)}}function x0(s,t,e){var i=ps(s),n={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(Wg(s))Gg(t,n);else{var r=s.alternate;if(s.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,o=r(a,e);if(n.hasEagerState=!0,n.eagerState=o,ui(o,a)){var l=t.interleaved;l===null?(n.next=n,qc(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}e=xg(s,t,n,i),e!==null&&(n=fe(),ci(e,s,i,n),Yg(e,t,i))}}function Wg(s){var t=s.alternate;return s===At||t!==null&&t===At}function Gg(s,t){cr=co=!0;var e=s.pending;e===null?t.next=t:(t.next=e.next,e.next=t),s.pending=t}function Yg(s,t,e){if(e&4194240){var i=t.lanes;i&=s.pendingLanes,e|=i,t.lanes=e,Ic(s,e)}}var uo={readContext:Je,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useInsertionEffect:Zt,useLayoutEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useMutableSource:Zt,useSyncExternalStore:Zt,useId:Zt,unstable_isNewReconciler:!1},C0={readContext:Je,useCallback:function(s,t){return mi().memoizedState=[s,t===void 0?null:t],s},useContext:Je,useEffect:jd,useImperativeHandle:function(s,t,e){return e=e!=null?e.concat([s]):null,Oa(4194308,4,Og.bind(null,t,s),e)},useLayoutEffect:function(s,t){return Oa(4194308,4,s,t)},useInsertionEffect:function(s,t){return Oa(4,2,s,t)},useMemo:function(s,t){var e=mi();return t=t===void 0?null:t,s=s(),e.memoizedState=[s,t],s},useReducer:function(s,t,e){var i=mi();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},i.queue=s,s=s.dispatch=E0.bind(null,At,s),[i.memoizedState,s]},useRef:function(s){var t=mi();return s={current:s},t.memoizedState=s},useState:zd,useDebugValue:su,useDeferredValue:function(s){return mi().memoizedState=s},useTransition:function(){var s=zd(!1),t=s[0];return s=S0.bind(null,s[1]),mi().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,e){var i=At,n=mi();if(pt){if(e===void 0)throw Error(_(407));e=e()}else{if(e=t(),Vt===null)throw Error(_(349));Ns&30||Pg(i,t,e)}n.memoizedState=e;var r={value:e,getSnapshot:t};return n.queue=r,jd(Mg.bind(null,i,r,s),[s]),i.flags|=2048,Dr(9,_g.bind(null,i,r,e,t),void 0,null),e},useId:function(){var s=mi(),t=Vt.identifierPrefix;if(pt){var e=Bi,i=Oi;e=(i&~(1<<32-hi(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=Mr++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=w0++,t=":"+t+"r"+e.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},T0={readContext:Je,useCallback:Hg,useContext:Je,useEffect:iu,useImperativeHandle:Bg,useInsertionEffect:Fg,useLayoutEffect:Ng,useMemo:zg,useReducer:Pl,useRef:Ig,useState:function(){return Pl(Lr)},useDebugValue:su,useDeferredValue:function(s){var t=$e();return jg(t,Bt.memoizedState,s)},useTransition:function(){var s=Pl(Lr)[0],t=$e().memoizedState;return[s,t]},useMutableSource:kg,useSyncExternalStore:Rg,useId:Ug,unstable_isNewReconciler:!1},k0={readContext:Je,useCallback:Hg,useContext:Je,useEffect:iu,useImperativeHandle:Bg,useInsertionEffect:Fg,useLayoutEffect:Ng,useMemo:zg,useReducer:_l,useRef:Ig,useState:function(){return _l(Lr)},useDebugValue:su,useDeferredValue:function(s){var t=$e();return Bt===null?t.memoizedState=s:jg(t,Bt.memoizedState,s)},useTransition:function(){var s=_l(Lr)[0],t=$e().memoizedState;return[s,t]},useMutableSource:kg,useSyncExternalStore:Rg,useId:Ug,unstable_isNewReconciler:!1};function ni(s,t){if(s&&s.defaultProps){t=bt({},t),s=s.defaultProps;for(var e in s)t[e]===void 0&&(t[e]=s[e]);return t}return t}function Mh(s,t,e,i){t=s.memoizedState,e=e(i,t),e=e==null?t:bt({},t,e),s.memoizedState=e,s.lanes===0&&(s.updateQueue.baseState=e)}var _o={isMounted:function(s){return(s=s._reactInternals)?Gs(s)===s:!1},enqueueSetState:function(s,t,e){s=s._reactInternals;var i=fe(),n=ps(s),r=Hi(i,n);r.payload=t,e!=null&&(r.callback=e),t=ds(s,r,n),t!==null&&(ci(t,s,n,i),Fa(t,s,n))},enqueueReplaceState:function(s,t,e){s=s._reactInternals;var i=fe(),n=ps(s),r=Hi(i,n);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=ds(s,r,n),t!==null&&(ci(t,s,n,i),Fa(t,s,n))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var e=fe(),i=ps(s),n=Hi(e,i);n.tag=2,t!=null&&(n.callback=t),t=ds(s,n,i),t!==null&&(ci(t,s,i,e),Fa(t,s,i))}};function Ud(s,t,e,i,n,r,a){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!Cr(e,i)||!Cr(n,r):!0}function Vg(s,t,e){var i=!1,n=vs,r=t.contextType;return typeof r=="object"&&r!==null?r=Je(r):(n=ke(t)?Is:oe.current,i=t.contextTypes,r=(i=i!=null)?En(s,n):vs),t=new t(e,r),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_o,s.stateNode=t,t._reactInternals=s,i&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=n,s.__reactInternalMemoizedMaskedChildContext=r),t}function Wd(s,t,e,i){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==s&&_o.enqueueReplaceState(t,t.state,null)}function Lh(s,t,e,i){var n=s.stateNode;n.props=e,n.state=s.memoizedState,n.refs={},Kc(s);var r=t.contextType;typeof r=="object"&&r!==null?n.context=Je(r):(r=ke(t)?Is:oe.current,n.context=En(s,r)),n.state=s.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(Mh(s,t,r,e),n.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&_o.enqueueReplaceState(n,n.state,null),lo(s,e,n,i),n.state=s.memoizedState),typeof n.componentDidMount=="function"&&(s.flags|=4194308)}function kn(s,t){try{var e="",i=t;do e+=eA(i),i=i.return;while(i);var n=e}catch(r){n=`
Error generating stack: `+r.message+`
`+r.stack}return{value:s,source:t,stack:n,digest:null}}function Ml(s,t,e){return{value:s,source:null,stack:e??null,digest:t??null}}function Dh(s,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var R0=typeof WeakMap=="function"?WeakMap:Map;function Xg(s,t,e){e=Hi(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){po||(po=!0,Wh=i),Dh(s,t)},e}function qg(s,t,e){e=Hi(-1,e),e.tag=3;var i=s.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;e.payload=function(){return i(n)},e.callback=function(){Dh(s,t)}}var r=s.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Dh(s,t),typeof i!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),e}function Gd(s,t,e){var i=s.pingCache;if(i===null){i=s.pingCache=new R0;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(e)||(n.add(e),s=U0.bind(null,s,t,e),t.then(s,s))}function Yd(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function Vd(s,t,e,i,n){return s.mode&1?(s.flags|=65536,s.lanes=n,s):(s===t?s.flags|=65536:(s.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Hi(-1,1),t.tag=2,ds(e,t,1))),e.lanes|=1),s)}var P0=Vi.ReactCurrentOwner,xe=!1;function ce(s,t,e,i){t.child=s===null?Eg(t,null,e,i):Cn(t,s.child,e,i)}function Xd(s,t,e,i,n){e=e.render;var r=t.ref;return An(t,n),i=tu(s,t,e,i,r,n),e=eu(),s!==null&&!xe?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~n,Yi(s,t,n)):(pt&&e&&Uc(t),t.flags|=1,ce(s,t,i,n),t.child)}function qd(s,t,e,i,n){if(s===null){var r=e.type;return typeof r=="function"&&!uu(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,Kg(s,t,r,i,n)):(s=ja(e.type,null,i,t,t.mode,n),s.ref=t.ref,s.return=t,t.child=s)}if(r=s.child,!(s.lanes&n)){var a=r.memoizedProps;if(e=e.compare,e=e!==null?e:Cr,e(a,i)&&s.ref===t.ref)return Yi(s,t,n)}return t.flags|=1,s=gs(r,i),s.ref=t.ref,s.return=t,t.child=s}function Kg(s,t,e,i,n){if(s!==null){var r=s.memoizedProps;if(Cr(r,i)&&s.ref===t.ref)if(xe=!1,t.pendingProps=i=r,(s.lanes&n)!==0)s.flags&131072&&(xe=!0);else return t.lanes=s.lanes,Yi(s,t,n)}return Ih(s,t,e,i,n)}function Qg(s,t,e){var i=t.pendingProps,n=i.children,r=s!==null?s.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(dn,Fe),Fe|=e;else{if(!(e&1073741824))return s=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,ut(dn,Fe),Fe|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:e,ut(dn,Fe),Fe|=i}else r!==null?(i=r.baseLanes|e,t.memoizedState=null):i=e,ut(dn,Fe),Fe|=i;return ce(s,t,n,e),t.child}function Zg(s,t){var e=t.ref;(s===null&&e!==null||s!==null&&s.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function Ih(s,t,e,i,n){var r=ke(e)?Is:oe.current;return r=En(t,r),An(t,n),e=tu(s,t,e,i,r,n),i=eu(),s!==null&&!xe?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~n,Yi(s,t,n)):(pt&&i&&Uc(t),t.flags|=1,ce(s,t,e,n),t.child)}function Kd(s,t,e,i,n){if(ke(e)){var r=!0;so(t)}else r=!1;if(An(t,n),t.stateNode===null)Ba(s,t),Vg(t,e,i),Lh(t,e,i,n),i=!0;else if(s===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,h=e.contextType;typeof h=="object"&&h!==null?h=Je(h):(h=ke(e)?Is:oe.current,h=En(t,h));var c=e.getDerivedStateFromProps,u=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==h)&&Wd(t,a,i,h),es=!1;var d=t.memoizedState;a.state=d,lo(t,i,a,n),l=t.memoizedState,o!==i||d!==l||Te.current||es?(typeof c=="function"&&(Mh(t,e,c,i),l=t.memoizedState),(o=es||Ud(t,e,o,i,d,l,h))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=h,i=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Cg(s,t),o=t.memoizedProps,h=t.type===t.elementType?o:ni(t.type,o),a.props=h,u=t.pendingProps,d=a.context,l=e.contextType,typeof l=="object"&&l!==null?l=Je(l):(l=ke(e)?Is:oe.current,l=En(t,l));var f=e.getDerivedStateFromProps;(c=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==u||d!==l)&&Wd(t,a,i,l),es=!1,d=t.memoizedState,a.state=d,lo(t,i,a,n);var p=t.memoizedState;o!==u||d!==p||Te.current||es?(typeof f=="function"&&(Mh(t,e,f,i),p=t.memoizedState),(h=es||Ud(t,e,h,i,d,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,p,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===s.memoizedProps&&d===s.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===s.memoizedProps&&d===s.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),a.props=i,a.state=p,a.context=l,i=h):(typeof a.componentDidUpdate!="function"||o===s.memoizedProps&&d===s.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===s.memoizedProps&&d===s.memoizedState||(t.flags|=1024),i=!1)}return Fh(s,t,e,i,r,n)}function Fh(s,t,e,i,n,r){Zg(s,t);var a=(t.flags&128)!==0;if(!i&&!a)return n&&Id(t,e,!1),Yi(s,t,r);i=t.stateNode,P0.current=t;var o=a&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,s!==null&&a?(t.child=Cn(t,s.child,null,r),t.child=Cn(t,null,o,r)):ce(s,t,o,r),t.memoizedState=i.state,n&&Id(t,e,!0),t.child}function Jg(s){var t=s.stateNode;t.pendingContext?Dd(s,t.pendingContext,t.pendingContext!==t.context):t.context&&Dd(s,t.context,!1),Qc(s,t.containerInfo)}function Qd(s,t,e,i,n){return xn(),Gc(n),t.flags|=256,ce(s,t,e,i),t.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function Oh(s){return{baseLanes:s,cachePool:null,transitions:null}}function $g(s,t,e){var i=t.pendingProps,n=yt.current,r=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=s!==null&&s.memoizedState===null?!1:(n&2)!==0),o?(r=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(n|=1),ut(yt,n&1),s===null)return Ph(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,s=i.fallback,r?(i=t.mode,r=t.child,a={mode:"hidden",children:a},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=Do(a,i,0,null),s=Ds(s,i,e,null),r.return=t,s.return=t,r.sibling=s,t.child=r,t.child.memoizedState=Oh(e),t.memoizedState=Nh,s):nu(t,a));if(n=s.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return _0(s,t,a,i,o,n,e);if(r){r=i.fallback,a=t.mode,n=s.child,o=n.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=gs(n,l),i.subtreeFlags=n.subtreeFlags&14680064),o!==null?r=gs(o,r):(r=Ds(r,a,e,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,a=s.child.memoizedState,a=a===null?Oh(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=s.childLanes&~e,t.memoizedState=Nh,i}return r=s.child,s=r.sibling,i=gs(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,s!==null&&(e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)),t.child=i,t.memoizedState=null,i}function nu(s,t){return t=Do({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function ua(s,t,e,i){return i!==null&&Gc(i),Cn(t,s.child,null,e),s=nu(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function _0(s,t,e,i,n,r,a){if(e)return t.flags&256?(t.flags&=-257,i=Ml(Error(_(422))),ua(s,t,a,i)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(r=i.fallback,n=t.mode,i=Do({mode:"visible",children:i.children},n,0,null),r=Ds(r,n,a,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&Cn(t,s.child,null,a),t.child.memoizedState=Oh(a),t.memoizedState=Nh,r);if(!(t.mode&1))return ua(s,t,a,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var o=i.dgst;return i=o,r=Error(_(419)),i=Ml(r,i,void 0),ua(s,t,a,i)}if(o=(a&s.childLanes)!==0,xe||o){if(i=Vt,i!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|a)?0:n,n!==0&&n!==r.retryLane&&(r.retryLane=n,Gi(s,n),ci(i,s,n,-1))}return cu(),i=Ml(Error(_(421))),ua(s,t,a,i)}return n.data==="$?"?(t.flags|=128,t.child=s.child,t=W0.bind(null,s),n._reactRetry=t,null):(s=r.treeContext,Ne=us(n.nextSibling),Oe=t,pt=!0,li=null,s!==null&&(qe[Ke++]=Oi,qe[Ke++]=Bi,qe[Ke++]=Fs,Oi=s.id,Bi=s.overflow,Fs=t),t=nu(t,i.children),t.flags|=4096,t)}function Zd(s,t,e){s.lanes|=t;var i=s.alternate;i!==null&&(i.lanes|=t),_h(s.return,t,e)}function Ll(s,t,e,i,n){var r=s.memoizedState;r===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=e,r.tailMode=n)}function tm(s,t,e){var i=t.pendingProps,n=i.revealOrder,r=i.tail;if(ce(s,t,i.children,e),i=yt.current,i&2)i=i&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)t:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Zd(s,e,t);else if(s.tag===19)Zd(s,e,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}i&=1}if(ut(yt,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(e=t.child,n=null;e!==null;)s=e.alternate,s!==null&&ho(s)===null&&(n=e),e=e.sibling;e=n,e===null?(n=t.child,t.child=null):(n=e.sibling,e.sibling=null),Ll(t,!1,n,e,r);break;case"backwards":for(e=null,n=t.child,t.child=null;n!==null;){if(s=n.alternate,s!==null&&ho(s)===null){t.child=n;break}s=n.sibling,n.sibling=e,e=n,n=s}Ll(t,!0,e,null,r);break;case"together":Ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function Yi(s,t,e){if(s!==null&&(t.dependencies=s.dependencies),Os|=t.lanes,!(e&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(_(153));if(t.child!==null){for(s=t.child,e=gs(s,s.pendingProps),t.child=e,e.return=t;s.sibling!==null;)s=s.sibling,e=e.sibling=gs(s,s.pendingProps),e.return=t;e.sibling=null}return t.child}function M0(s,t,e){switch(t.tag){case 3:Jg(t),xn();break;case 5:Tg(t);break;case 1:ke(t.type)&&so(t);break;case 4:Qc(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;ut(ao,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ut(yt,yt.current&1),t.flags|=128,null):e&t.child.childLanes?$g(s,t,e):(ut(yt,yt.current&1),s=Yi(s,t,e),s!==null?s.sibling:null);ut(yt,yt.current&1);break;case 19:if(i=(e&t.childLanes)!==0,s.flags&128){if(i)return tm(s,t,e);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ut(yt,yt.current),i)break;return null;case 22:case 23:return t.lanes=0,Qg(s,t,e)}return Yi(s,t,e)}var em,Bh,im,sm;em=function(s,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)s.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Bh=function(){};im=function(s,t,e,i){var n=s.memoizedProps;if(n!==i){s=t.stateNode,Ps(Si.current);var r=null;switch(e){case"input":n=ah(s,n),i=ah(s,i),r=[];break;case"select":n=bt({},n,{value:void 0}),i=bt({},i,{value:void 0}),r=[];break;case"textarea":n=hh(s,n),i=hh(s,i),r=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(s.onclick=eo)}uh(e,i);var a;e=null;for(h in n)if(!i.hasOwnProperty(h)&&n.hasOwnProperty(h)&&n[h]!=null)if(h==="style"){var o=n[h];for(a in o)o.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(yr.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in i){var l=i[h];if(o=n?.[h],i.hasOwnProperty(h)&&l!==o&&(l!=null||o!=null))if(h==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(e||(e={}),e[a]=l[a])}else e||(r||(r=[]),r.push(h,e)),e=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(r=r||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(yr.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&dt("scroll",s),r||o===l||(r=[])):(r=r||[]).push(h,l))}e&&(r=r||[]).push("style",e);var h=r;(t.updateQueue=h)&&(t.flags|=4)}};sm=function(s,t,e,i){e!==i&&(t.flags|=4)};function zn(s,t){if(!pt)switch(s.tailMode){case"hidden":t=s.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?s.tail=null:e.sibling=null;break;case"collapsed":e=s.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:i.sibling=null}}function Jt(s){var t=s.alternate!==null&&s.alternate.child===s.child,e=0,i=0;if(t)for(var n=s.child;n!==null;)e|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=s,n=n.sibling;else for(n=s.child;n!==null;)e|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=s,n=n.sibling;return s.subtreeFlags|=i,s.childLanes=e,t}function L0(s,t,e){var i=t.pendingProps;switch(Wc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(t),null;case 1:return ke(t.type)&&io(),Jt(t),null;case 3:return i=t.stateNode,Tn(),ft(Te),ft(oe),Jc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(s===null||s.child===null)&&(ha(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,li!==null&&(Vh(li),li=null))),Bh(s,t),Jt(t),null;case 5:Zc(t);var n=Ps(_r.current);if(e=t.type,s!==null&&t.stateNode!=null)im(s,t,e,i,n),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(_(166));return Jt(t),null}if(s=Ps(Si.current),ha(t)){i=t.stateNode,e=t.type;var r=t.memoizedProps;switch(i[Ai]=t,i[Rr]=r,s=(t.mode&1)!==0,e){case"dialog":dt("cancel",i),dt("close",i);break;case"iframe":case"object":case"embed":dt("load",i);break;case"video":case"audio":for(n=0;n<Jn.length;n++)dt(Jn[n],i);break;case"source":dt("error",i);break;case"img":case"image":case"link":dt("error",i),dt("load",i);break;case"details":dt("toggle",i);break;case"input":ad(i,r),dt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},dt("invalid",i);break;case"textarea":ld(i,r),dt("invalid",i)}uh(e,r),n=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?i.textContent!==o&&(r.suppressHydrationWarning!==!0&&la(i.textContent,o,s),n=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&la(i.textContent,o,s),n=["children",""+o]):yr.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&dt("scroll",i)}switch(e){case"input":ta(i),od(i,r,!0);break;case"textarea":ta(i),hd(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=eo)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Mp(e)),s==="http://www.w3.org/1999/xhtml"?e==="script"?(s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof i.is=="string"?s=a.createElement(e,{is:i.is}):(s=a.createElement(e),e==="select"&&(a=s,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):s=a.createElementNS(s,e),s[Ai]=t,s[Rr]=i,em(s,t,!1,!1),t.stateNode=s;t:{switch(a=dh(e,i),e){case"dialog":dt("cancel",s),dt("close",s),n=i;break;case"iframe":case"object":case"embed":dt("load",s),n=i;break;case"video":case"audio":for(n=0;n<Jn.length;n++)dt(Jn[n],s);n=i;break;case"source":dt("error",s),n=i;break;case"img":case"image":case"link":dt("error",s),dt("load",s),n=i;break;case"details":dt("toggle",s),n=i;break;case"input":ad(s,i),n=ah(s,i),dt("invalid",s);break;case"option":n=i;break;case"select":s._wrapperState={wasMultiple:!!i.multiple},n=bt({},i,{value:void 0}),dt("invalid",s);break;case"textarea":ld(s,i),n=hh(s,i),dt("invalid",s);break;default:n=i}uh(e,n),o=n;for(r in o)if(o.hasOwnProperty(r)){var l=o[r];r==="style"?Ip(s,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Lp(s,l)):r==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&Ar(s,l):typeof l=="number"&&Ar(s,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(yr.hasOwnProperty(r)?l!=null&&r==="onScroll"&&dt("scroll",s):l!=null&&Rc(s,r,l,a))}switch(e){case"input":ta(s),od(s,i,!1);break;case"textarea":ta(s),hd(s);break;case"option":i.value!=null&&s.setAttribute("value",""+ms(i.value));break;case"select":s.multiple=!!i.multiple,r=i.value,r!=null?gn(s,!!i.multiple,r,!1):i.defaultValue!=null&&gn(s,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(s.onclick=eo)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jt(t),null;case 6:if(s&&t.stateNode!=null)sm(s,t,s.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(_(166));if(e=Ps(_r.current),Ps(Si.current),ha(t)){if(i=t.stateNode,e=t.memoizedProps,i[Ai]=t,(r=i.nodeValue!==e)&&(s=Oe,s!==null))switch(s.tag){case 3:la(i.nodeValue,e,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&la(i.nodeValue,e,(s.mode&1)!==0)}r&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[Ai]=t,t.stateNode=i}return Jt(t),null;case 13:if(ft(yt),i=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(pt&&Ne!==null&&t.mode&1&&!(t.flags&128))wg(),xn(),t.flags|=98560,r=!1;else if(r=ha(t),i!==null&&i.dehydrated!==null){if(s===null){if(!r)throw Error(_(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(_(317));r[Ai]=t}else xn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jt(t),r=!1}else li!==null&&(Vh(li),li=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(s!==null&&s.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(s===null||yt.current&1?jt===0&&(jt=3):cu())),t.updateQueue!==null&&(t.flags|=4),Jt(t),null);case 4:return Tn(),Bh(s,t),s===null&&Tr(t.stateNode.containerInfo),Jt(t),null;case 10:return Xc(t.type._context),Jt(t),null;case 17:return ke(t.type)&&io(),Jt(t),null;case 19:if(ft(yt),r=t.memoizedState,r===null)return Jt(t),null;if(i=(t.flags&128)!==0,a=r.rendering,a===null)if(i)zn(r,!1);else{if(jt!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(a=ho(s),a!==null){for(t.flags|=128,zn(r,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)r=e,s=i,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,s=a.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e=e.sibling;return ut(yt,yt.current&1|2),t.child}s=s.sibling}r.tail!==null&&xt()>Rn&&(t.flags|=128,i=!0,zn(r,!1),t.lanes=4194304)}else{if(!i)if(s=ho(a),s!==null){if(t.flags|=128,i=!0,e=s.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),zn(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!pt)return Jt(t),null}else 2*xt()-r.renderingStartTime>Rn&&e!==1073741824&&(t.flags|=128,i=!0,zn(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e!==null?e.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=xt(),t.sibling=null,e=yt.current,ut(yt,i?e&1|2:e&1),t):(Jt(t),null);case 22:case 23:return hu(),i=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Fe&1073741824&&(Jt(t),t.subtreeFlags&6&&(t.flags|=8192)):Jt(t),null;case 24:return null;case 25:return null}throw Error(_(156,t.tag))}function D0(s,t){switch(Wc(t),t.tag){case 1:return ke(t.type)&&io(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return Tn(),ft(Te),ft(oe),Jc(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return Zc(t),null;case 13:if(ft(yt),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(_(340));xn()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return ft(yt),null;case 4:return Tn(),null;case 10:return Xc(t.type._context),null;case 22:case 23:return hu(),null;case 24:return null;default:return null}}var da=!1,ne=!1,I0=typeof WeakSet=="function"?WeakSet:Set,B=null;function un(s,t){var e=s.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){St(s,t,i)}else e.current=null}function Hh(s,t,e){try{e()}catch(i){St(s,t,i)}}var Jd=!1;function F0(s,t){if(Sh=Ja,s=lg(),jc(s)){if("selectionStart"in s)var e={start:s.selectionStart,end:s.selectionEnd};else t:{e=(e=s.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var n=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var a=0,o=-1,l=-1,h=0,c=0,u=s,d=null;e:for(;;){for(var f;u!==e||n!==0&&u.nodeType!==3||(o=a+n),u!==r||i!==0&&u.nodeType!==3||(l=a+i),u.nodeType===3&&(a+=u.nodeValue.length),(f=u.firstChild)!==null;)d=u,u=f;for(;;){if(u===s)break e;if(d===e&&++h===n&&(o=a),d===r&&++c===i&&(l=a),(f=u.nextSibling)!==null)break;u=d,d=u.parentNode}u=f}e=o===-1||l===-1?null:{start:o,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(Eh={focusedElem:s,selectionRange:e},Ja=!1,B=t;B!==null;)if(t=B,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,B=s;else for(;B!==null;){t=B;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,A=p.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ni(t.type,m),A);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(b){St(t,t.return,b)}if(s=t.sibling,s!==null){s.return=t.return,B=s;break}B=t.return}return p=Jd,Jd=!1,p}function ur(s,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&s)===s){var r=n.destroy;n.destroy=void 0,r!==void 0&&Hh(t,e,r)}n=n.next}while(n!==i)}}function Mo(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&s)===s){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function zh(s){var t=s.ref;if(t!==null){var e=s.stateNode;switch(s.tag){case 5:s=e;break;default:s=e}typeof t=="function"?t(s):t.current=s}}function nm(s){var t=s.alternate;t!==null&&(s.alternate=null,nm(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[Ai],delete t[Rr],delete t[Th],delete t[v0],delete t[y0])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function rm(s){return s.tag===5||s.tag===3||s.tag===4}function $d(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||rm(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function jh(s,t,e){var i=s.tag;if(i===5||i===6)s=s.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(s,t):e.insertBefore(s,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(s,e)):(t=e,t.appendChild(s)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=eo));else if(i!==4&&(s=s.child,s!==null))for(jh(s,t,e),s=s.sibling;s!==null;)jh(s,t,e),s=s.sibling}function Uh(s,t,e){var i=s.tag;if(i===5||i===6)s=s.stateNode,t?e.insertBefore(s,t):e.appendChild(s);else if(i!==4&&(s=s.child,s!==null))for(Uh(s,t,e),s=s.sibling;s!==null;)Uh(s,t,e),s=s.sibling}var qt=null,oi=!1;function qi(s,t,e){for(e=e.child;e!==null;)am(s,t,e),e=e.sibling}function am(s,t,e){if(wi&&typeof wi.onCommitFiberUnmount=="function")try{wi.onCommitFiberUnmount(Eo,e)}catch{}switch(e.tag){case 5:ne||un(e,t);case 6:var i=qt,n=oi;qt=null,qi(s,t,e),qt=i,oi=n,qt!==null&&(oi?(s=qt,e=e.stateNode,s.nodeType===8?s.parentNode.removeChild(e):s.removeChild(e)):qt.removeChild(e.stateNode));break;case 18:qt!==null&&(oi?(s=qt,e=e.stateNode,s.nodeType===8?Cl(s.parentNode,e):s.nodeType===1&&Cl(s,e),Er(s)):Cl(qt,e.stateNode));break;case 4:i=qt,n=oi,qt=e.stateNode.containerInfo,oi=!0,qi(s,t,e),qt=i,oi=n;break;case 0:case 11:case 14:case 15:if(!ne&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var r=n,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&Hh(e,t,a),n=n.next}while(n!==i)}qi(s,t,e);break;case 1:if(!ne&&(un(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(o){St(e,t,o)}qi(s,t,e);break;case 21:qi(s,t,e);break;case 22:e.mode&1?(ne=(i=ne)||e.memoizedState!==null,qi(s,t,e),ne=i):qi(s,t,e);break;default:qi(s,t,e)}}function tf(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var e=s.stateNode;e===null&&(e=s.stateNode=new I0),t.forEach(function(i){var n=G0.bind(null,s,i);e.has(i)||(e.add(i),i.then(n,n))})}}function ei(s,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var n=e[i];try{var r=s,a=t,o=a;t:for(;o!==null;){switch(o.tag){case 5:qt=o.stateNode,oi=!1;break t;case 3:qt=o.stateNode.containerInfo,oi=!0;break t;case 4:qt=o.stateNode.containerInfo,oi=!0;break t}o=o.return}if(qt===null)throw Error(_(160));am(r,a,n),qt=null,oi=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(h){St(n,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)om(t,s),t=t.sibling}function om(s,t){var e=s.alternate,i=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ei(t,s),di(s),i&4){try{ur(3,s,s.return),Mo(3,s)}catch(m){St(s,s.return,m)}try{ur(5,s,s.return)}catch(m){St(s,s.return,m)}}break;case 1:ei(t,s),di(s),i&512&&e!==null&&un(e,e.return);break;case 5:if(ei(t,s),di(s),i&512&&e!==null&&un(e,e.return),s.flags&32){var n=s.stateNode;try{Ar(n,"")}catch(m){St(s,s.return,m)}}if(i&4&&(n=s.stateNode,n!=null)){var r=s.memoizedProps,a=e!==null?e.memoizedProps:r,o=s.type,l=s.updateQueue;if(s.updateQueue=null,l!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&Pp(n,r),dh(o,a);var h=dh(o,r);for(a=0;a<l.length;a+=2){var c=l[a],u=l[a+1];c==="style"?Ip(n,u):c==="dangerouslySetInnerHTML"?Lp(n,u):c==="children"?Ar(n,u):Rc(n,c,u,h)}switch(o){case"input":oh(n,r);break;case"textarea":_p(n,r);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?gn(n,!!r.multiple,f,!1):d!==!!r.multiple&&(r.defaultValue!=null?gn(n,!!r.multiple,r.defaultValue,!0):gn(n,!!r.multiple,r.multiple?[]:"",!1))}n[Rr]=r}catch(m){St(s,s.return,m)}}break;case 6:if(ei(t,s),di(s),i&4){if(s.stateNode===null)throw Error(_(162));n=s.stateNode,r=s.memoizedProps;try{n.nodeValue=r}catch(m){St(s,s.return,m)}}break;case 3:if(ei(t,s),di(s),i&4&&e!==null&&e.memoizedState.isDehydrated)try{Er(t.containerInfo)}catch(m){St(s,s.return,m)}break;case 4:ei(t,s),di(s);break;case 13:ei(t,s),di(s),n=s.child,n.flags&8192&&(r=n.memoizedState!==null,n.stateNode.isHidden=r,!r||n.alternate!==null&&n.alternate.memoizedState!==null||(ou=xt())),i&4&&tf(s);break;case 22:if(c=e!==null&&e.memoizedState!==null,s.mode&1?(ne=(h=ne)||c,ei(t,s),ne=h):ei(t,s),di(s),i&8192){if(h=s.memoizedState!==null,(s.stateNode.isHidden=h)&&!c&&s.mode&1)for(B=s,c=s.child;c!==null;){for(u=B=c;B!==null;){switch(d=B,f=d.child,d.tag){case 0:case 11:case 14:case 15:ur(4,d,d.return);break;case 1:un(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,e=d.return;try{t=i,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){St(i,e,m)}}break;case 5:un(d,d.return);break;case 22:if(d.memoizedState!==null){sf(u);continue}}f!==null?(f.return=d,B=f):sf(u)}c=c.sibling}t:for(c=null,u=s;;){if(u.tag===5){if(c===null){c=u;try{n=u.stateNode,h?(r=n.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=u.stateNode,l=u.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Dp("display",a))}catch(m){St(s,s.return,m)}}}else if(u.tag===6){if(c===null)try{u.stateNode.nodeValue=h?"":u.memoizedProps}catch(m){St(s,s.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break t;for(;u.sibling===null;){if(u.return===null||u.return===s)break t;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:ei(t,s),di(s),i&4&&tf(s);break;case 21:break;default:ei(t,s),di(s)}}function di(s){var t=s.flags;if(t&2){try{t:{for(var e=s.return;e!==null;){if(rm(e)){var i=e;break t}e=e.return}throw Error(_(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Ar(n,""),i.flags&=-33);var r=$d(s);Uh(s,r,n);break;case 3:case 4:var a=i.stateNode.containerInfo,o=$d(s);jh(s,o,a);break;default:throw Error(_(161))}}catch(l){St(s,s.return,l)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function N0(s,t,e){B=s,lm(s)}function lm(s,t,e){for(var i=(s.mode&1)!==0;B!==null;){var n=B,r=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||da;if(!a){var o=n.alternate,l=o!==null&&o.memoizedState!==null||ne;o=da;var h=ne;if(da=a,(ne=l)&&!h)for(B=n;B!==null;)a=B,l=a.child,a.tag===22&&a.memoizedState!==null?nf(n):l!==null?(l.return=a,B=l):nf(n);for(;r!==null;)B=r,lm(r),r=r.sibling;B=n,da=o,ne=h}ef(s)}else n.subtreeFlags&8772&&r!==null?(r.return=n,B=r):ef(s)}}function ef(s){for(;B!==null;){var t=B;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ne||Mo(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ne)if(e===null)i.componentDidMount();else{var n=t.elementType===t.type?e.memoizedProps:ni(t.type,e.memoizedProps);i.componentDidUpdate(n,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&Hd(t,r,i);break;case 3:var a=t.updateQueue;if(a!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Hd(t,a,e)}break;case 5:var o=t.stateNode;if(e===null&&t.flags&4){e=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var c=h.memoizedState;if(c!==null){var u=c.dehydrated;u!==null&&Er(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}ne||t.flags&512&&zh(t)}catch(d){St(t,t.return,d)}}if(t===s){B=null;break}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}}function sf(s){for(;B!==null;){var t=B;if(t===s){B=null;break}var e=t.sibling;if(e!==null){e.return=t.return,B=e;break}B=t.return}}function nf(s){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Mo(4,t)}catch(l){St(t,e,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){St(t,n,l)}}var r=t.return;try{zh(t)}catch(l){St(t,r,l)}break;case 5:var a=t.return;try{zh(t)}catch(l){St(t,a,l)}}}catch(l){St(t,t.return,l)}if(t===s){B=null;break}var o=t.sibling;if(o!==null){o.return=t.return,B=o;break}B=t.return}}var O0=Math.ceil,fo=Vi.ReactCurrentDispatcher,ru=Vi.ReactCurrentOwner,Ze=Vi.ReactCurrentBatchConfig,ot=0,Vt=null,_t=null,Kt=0,Fe=0,dn=ws(0),jt=0,Ir=null,Os=0,Lo=0,au=0,dr=null,Ee=null,ou=0,Rn=1/0,Li=null,po=!1,Wh=null,fs=null,fa=!1,os=null,go=0,fr=0,Gh=null,Ha=-1,za=0;function fe(){return ot&6?xt():Ha!==-1?Ha:Ha=xt()}function ps(s){return s.mode&1?ot&2&&Kt!==0?Kt&-Kt:b0.transition!==null?(za===0&&(za=Vp()),za):(s=lt,s!==0||(s=window.event,s=s===void 0?16:$p(s.type)),s):1}function ci(s,t,e,i){if(50<fr)throw fr=0,Gh=null,Error(_(185));zr(s,e,i),(!(ot&2)||s!==Vt)&&(s===Vt&&(!(ot&2)&&(Lo|=e),jt===4&&ss(s,Kt)),Re(s,i),e===1&&ot===0&&!(t.mode&1)&&(Rn=xt()+500,Ro&&Ss()))}function Re(s,t){var e=s.callbackNode;bA(s,t);var i=Za(s,s===Vt?Kt:0);if(i===0)e!==null&&dd(e),s.callbackNode=null,s.callbackPriority=0;else if(t=i&-i,s.callbackPriority!==t){if(e!=null&&dd(e),t===1)s.tag===0?A0(rf.bind(null,s)):yg(rf.bind(null,s)),g0(function(){!(ot&6)&&Ss()}),e=null;else{switch(Xp(i)){case 1:e=Dc;break;case 4:e=Gp;break;case 16:e=Qa;break;case 536870912:e=Yp;break;default:e=Qa}e=mm(e,hm.bind(null,s))}s.callbackPriority=t,s.callbackNode=e}}function hm(s,t){if(Ha=-1,za=0,ot&6)throw Error(_(327));var e=s.callbackNode;if(bn()&&s.callbackNode!==e)return null;var i=Za(s,s===Vt?Kt:0);if(i===0)return null;if(i&30||i&s.expiredLanes||t)t=mo(s,i);else{t=i;var n=ot;ot|=2;var r=um();(Vt!==s||Kt!==t)&&(Li=null,Rn=xt()+500,Ls(s,t));do try{z0();break}catch(o){cm(s,o)}while(!0);Vc(),fo.current=r,ot=n,_t!==null?t=0:(Vt=null,Kt=0,t=jt)}if(t!==0){if(t===2&&(n=vh(s),n!==0&&(i=n,t=Yh(s,n))),t===1)throw e=Ir,Ls(s,0),ss(s,i),Re(s,xt()),e;if(t===6)ss(s,i);else{if(n=s.current.alternate,!(i&30)&&!B0(n)&&(t=mo(s,i),t===2&&(r=vh(s),r!==0&&(i=r,t=Yh(s,r))),t===1))throw e=Ir,Ls(s,0),ss(s,i),Re(s,xt()),e;switch(s.finishedWork=n,s.finishedLanes=i,t){case 0:case 1:throw Error(_(345));case 2:Ts(s,Ee,Li);break;case 3:if(ss(s,i),(i&130023424)===i&&(t=ou+500-xt(),10<t)){if(Za(s,0)!==0)break;if(n=s.suspendedLanes,(n&i)!==i){fe(),s.pingedLanes|=s.suspendedLanes&n;break}s.timeoutHandle=Ch(Ts.bind(null,s,Ee,Li),t);break}Ts(s,Ee,Li);break;case 4:if(ss(s,i),(i&4194240)===i)break;for(t=s.eventTimes,n=-1;0<i;){var a=31-hi(i);r=1<<a,a=t[a],a>n&&(n=a),i&=~r}if(i=n,i=xt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*O0(i/1960))-i,10<i){s.timeoutHandle=Ch(Ts.bind(null,s,Ee,Li),i);break}Ts(s,Ee,Li);break;case 5:Ts(s,Ee,Li);break;default:throw Error(_(329))}}}return Re(s,xt()),s.callbackNode===e?hm.bind(null,s):null}function Yh(s,t){var e=dr;return s.current.memoizedState.isDehydrated&&(Ls(s,t).flags|=256),s=mo(s,t),s!==2&&(t=Ee,Ee=e,t!==null&&Vh(t)),s}function Vh(s){Ee===null?Ee=s:Ee.push.apply(Ee,s)}function B0(s){for(var t=s;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var n=e[i],r=n.getSnapshot;n=n.value;try{if(!ui(r(),n))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ss(s,t){for(t&=~au,t&=~Lo,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var e=31-hi(t),i=1<<e;s[e]=-1,t&=~i}}function rf(s){if(ot&6)throw Error(_(327));bn();var t=Za(s,0);if(!(t&1))return Re(s,xt()),null;var e=mo(s,t);if(s.tag!==0&&e===2){var i=vh(s);i!==0&&(t=i,e=Yh(s,i))}if(e===1)throw e=Ir,Ls(s,0),ss(s,t),Re(s,xt()),e;if(e===6)throw Error(_(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,Ts(s,Ee,Li),Re(s,xt()),null}function lu(s,t){var e=ot;ot|=1;try{return s(t)}finally{ot=e,ot===0&&(Rn=xt()+500,Ro&&Ss())}}function Bs(s){os!==null&&os.tag===0&&!(ot&6)&&bn();var t=ot;ot|=1;var e=Ze.transition,i=lt;try{if(Ze.transition=null,lt=1,s)return s()}finally{lt=i,Ze.transition=e,ot=t,!(ot&6)&&Ss()}}function hu(){Fe=dn.current,ft(dn)}function Ls(s,t){s.finishedWork=null,s.finishedLanes=0;var e=s.timeoutHandle;if(e!==-1&&(s.timeoutHandle=-1,p0(e)),_t!==null)for(e=_t.return;e!==null;){var i=e;switch(Wc(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&io();break;case 3:Tn(),ft(Te),ft(oe),Jc();break;case 5:Zc(i);break;case 4:Tn();break;case 13:ft(yt);break;case 19:ft(yt);break;case 10:Xc(i.type._context);break;case 22:case 23:hu()}e=e.return}if(Vt=s,_t=s=gs(s.current,null),Kt=Fe=t,jt=0,Ir=null,au=Lo=Os=0,Ee=dr=null,Rs!==null){for(t=0;t<Rs.length;t++)if(e=Rs[t],i=e.interleaved,i!==null){e.interleaved=null;var n=i.next,r=e.pending;if(r!==null){var a=r.next;r.next=n,i.next=a}e.pending=i}Rs=null}return s}function cm(s,t){do{var e=_t;try{if(Vc(),Na.current=uo,co){for(var i=At.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}co=!1}if(Ns=0,Yt=Bt=At=null,cr=!1,Mr=0,ru.current=null,e===null||e.return===null){jt=1,Ir=t,_t=null;break}t:{var r=s,a=e.return,o=e,l=t;if(t=Kt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l,c=o,u=c.tag;if(!(c.mode&1)&&(u===0||u===11||u===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Yd(a);if(f!==null){f.flags&=-257,Vd(f,a,o,r,t),f.mode&1&&Gd(r,h,t),t=f,l=h;var p=t.updateQueue;if(p===null){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break t}else{if(!(t&1)){Gd(r,h,t),cu();break t}l=Error(_(426))}}else if(pt&&o.mode&1){var A=Yd(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Vd(A,a,o,r,t),Gc(kn(l,o));break t}}r=l=kn(l,o),jt!==4&&(jt=2),dr===null?dr=[r]:dr.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var g=Xg(r,l,t);Bd(r,g);break t;case 1:o=l;var v=r.type,y=r.stateNode;if(!(r.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(fs===null||!fs.has(y)))){r.flags|=65536,t&=-t,r.lanes|=t;var b=qg(r,o,t);Bd(r,b);break t}}r=r.return}while(r!==null)}fm(e)}catch(w){t=w,_t===e&&e!==null&&(_t=e=e.return);continue}break}while(!0)}function um(){var s=fo.current;return fo.current=uo,s===null?uo:s}function cu(){(jt===0||jt===3||jt===2)&&(jt=4),Vt===null||!(Os&268435455)&&!(Lo&268435455)||ss(Vt,Kt)}function mo(s,t){var e=ot;ot|=2;var i=um();(Vt!==s||Kt!==t)&&(Li=null,Ls(s,t));do try{H0();break}catch(n){cm(s,n)}while(!0);if(Vc(),ot=e,fo.current=i,_t!==null)throw Error(_(261));return Vt=null,Kt=0,jt}function H0(){for(;_t!==null;)dm(_t)}function z0(){for(;_t!==null&&!uA();)dm(_t)}function dm(s){var t=gm(s.alternate,s,Fe);s.memoizedProps=s.pendingProps,t===null?fm(s):_t=t,ru.current=null}function fm(s){var t=s;do{var e=t.alternate;if(s=t.return,t.flags&32768){if(e=D0(e,t),e!==null){e.flags&=32767,_t=e;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{jt=6,_t=null;return}}else if(e=L0(e,t,Fe),e!==null){_t=e;return}if(t=t.sibling,t!==null){_t=t;return}_t=t=s}while(t!==null);jt===0&&(jt=5)}function Ts(s,t,e){var i=lt,n=Ze.transition;try{Ze.transition=null,lt=1,j0(s,t,e,i)}finally{Ze.transition=n,lt=i}return null}function j0(s,t,e,i){do bn();while(os!==null);if(ot&6)throw Error(_(327));e=s.finishedWork;var n=s.finishedLanes;if(e===null)return null;if(s.finishedWork=null,s.finishedLanes=0,e===s.current)throw Error(_(177));s.callbackNode=null,s.callbackPriority=0;var r=e.lanes|e.childLanes;if(wA(s,r),s===Vt&&(_t=Vt=null,Kt=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||fa||(fa=!0,mm(Qa,function(){return bn(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=Ze.transition,Ze.transition=null;var a=lt;lt=1;var o=ot;ot|=4,ru.current=null,F0(s,e),om(e,s),o0(Eh),Ja=!!Sh,Eh=Sh=null,s.current=e,N0(e),dA(),ot=o,lt=a,Ze.transition=r}else s.current=e;if(fa&&(fa=!1,os=s,go=n),r=s.pendingLanes,r===0&&(fs=null),gA(e.stateNode),Re(s,xt()),t!==null)for(i=s.onRecoverableError,e=0;e<t.length;e++)n=t[e],i(n.value,{componentStack:n.stack,digest:n.digest});if(po)throw po=!1,s=Wh,Wh=null,s;return go&1&&s.tag!==0&&bn(),r=s.pendingLanes,r&1?s===Gh?fr++:(fr=0,Gh=s):fr=0,Ss(),null}function bn(){if(os!==null){var s=Xp(go),t=Ze.transition,e=lt;try{if(Ze.transition=null,lt=16>s?16:s,os===null)var i=!1;else{if(s=os,os=null,go=0,ot&6)throw Error(_(331));var n=ot;for(ot|=4,B=s.current;B!==null;){var r=B,a=r.child;if(B.flags&16){var o=r.deletions;if(o!==null){for(var l=0;l<o.length;l++){var h=o[l];for(B=h;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:ur(8,c,r)}var u=c.child;if(u!==null)u.return=c,B=u;else for(;B!==null;){c=B;var d=c.sibling,f=c.return;if(nm(c),c===h){B=null;break}if(d!==null){d.return=f,B=d;break}B=f}}}var p=r.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var A=m.sibling;m.sibling=null,m=A}while(m!==null)}}B=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,B=a;else t:for(;B!==null;){if(r=B,r.flags&2048)switch(r.tag){case 0:case 11:case 15:ur(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,B=g;break t}B=r.return}}var v=s.current;for(B=v;B!==null;){a=B;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,B=y;else t:for(a=v;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Mo(9,o)}}catch(w){St(o,o.return,w)}if(o===a){B=null;break t}var b=o.sibling;if(b!==null){b.return=o.return,B=b;break t}B=o.return}}if(ot=n,Ss(),wi&&typeof wi.onPostCommitFiberRoot=="function")try{wi.onPostCommitFiberRoot(Eo,s)}catch{}i=!0}return i}finally{lt=e,Ze.transition=t}}return!1}function af(s,t,e){t=kn(e,t),t=Xg(s,t,1),s=ds(s,t,1),t=fe(),s!==null&&(zr(s,1,t),Re(s,t))}function St(s,t,e){if(s.tag===3)af(s,s,e);else for(;t!==null;){if(t.tag===3){af(t,s,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fs===null||!fs.has(i))){s=kn(e,s),s=qg(t,s,1),t=ds(t,s,1),s=fe(),t!==null&&(zr(t,1,s),Re(t,s));break}}t=t.return}}function U0(s,t,e){var i=s.pingCache;i!==null&&i.delete(t),t=fe(),s.pingedLanes|=s.suspendedLanes&e,Vt===s&&(Kt&e)===e&&(jt===4||jt===3&&(Kt&130023424)===Kt&&500>xt()-ou?Ls(s,0):au|=e),Re(s,t)}function pm(s,t){t===0&&(s.mode&1?(t=sa,sa<<=1,!(sa&130023424)&&(sa=4194304)):t=1);var e=fe();s=Gi(s,t),s!==null&&(zr(s,t,e),Re(s,e))}function W0(s){var t=s.memoizedState,e=0;t!==null&&(e=t.retryLane),pm(s,e)}function G0(s,t){var e=0;switch(s.tag){case 13:var i=s.stateNode,n=s.memoizedState;n!==null&&(e=n.retryLane);break;case 19:i=s.stateNode;break;default:throw Error(_(314))}i!==null&&i.delete(t),pm(s,e)}var gm;gm=function(s,t,e){if(s!==null)if(s.memoizedProps!==t.pendingProps||Te.current)xe=!0;else{if(!(s.lanes&e)&&!(t.flags&128))return xe=!1,M0(s,t,e);xe=!!(s.flags&131072)}else xe=!1,pt&&t.flags&1048576&&Ag(t,ro,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ba(s,t),s=t.pendingProps;var n=En(t,oe.current);An(t,e),n=tu(null,t,i,s,n,e);var r=eu();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ke(i)?(r=!0,so(t)):r=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Kc(t),n.updater=_o,t.stateNode=n,n._reactInternals=t,Lh(t,i,s,e),t=Fh(null,t,i,!0,r,e)):(t.tag=0,pt&&r&&Uc(t),ce(null,t,n,e),t=t.child),t;case 16:i=t.elementType;t:{switch(Ba(s,t),s=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=V0(i),s=ni(i,s),n){case 0:t=Ih(null,t,i,s,e);break t;case 1:t=Kd(null,t,i,s,e);break t;case 11:t=Xd(null,t,i,s,e);break t;case 14:t=qd(null,t,i,ni(i.type,s),e);break t}throw Error(_(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),Ih(s,t,i,n,e);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),Kd(s,t,i,n,e);case 3:t:{if(Jg(t),s===null)throw Error(_(387));i=t.pendingProps,r=t.memoizedState,n=r.element,Cg(s,t),lo(t,i,null,e);var a=t.memoizedState;if(i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){n=kn(Error(_(423)),t),t=Qd(s,t,i,e,n);break t}else if(i!==n){n=kn(Error(_(424)),t),t=Qd(s,t,i,e,n);break t}else for(Ne=us(t.stateNode.containerInfo.firstChild),Oe=t,pt=!0,li=null,e=Eg(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(xn(),i===n){t=Yi(s,t,e);break t}ce(s,t,i,e)}t=t.child}return t;case 5:return Tg(t),s===null&&Ph(t),i=t.type,n=t.pendingProps,r=s!==null?s.memoizedProps:null,a=n.children,xh(i,n)?a=null:r!==null&&xh(i,r)&&(t.flags|=32),Zg(s,t),ce(s,t,a,e),t.child;case 6:return s===null&&Ph(t),null;case 13:return $g(s,t,e);case 4:return Qc(t,t.stateNode.containerInfo),i=t.pendingProps,s===null?t.child=Cn(t,null,i,e):ce(s,t,i,e),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),Xd(s,t,i,n,e);case 7:return ce(s,t,t.pendingProps,e),t.child;case 8:return ce(s,t,t.pendingProps.children,e),t.child;case 12:return ce(s,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,n=t.pendingProps,r=t.memoizedProps,a=n.value,ut(ao,i._currentValue),i._currentValue=a,r!==null)if(ui(r.value,a)){if(r.children===n.children&&!Te.current){t=Yi(s,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Hi(-1,e&-e),l.tag=2;var h=r.updateQueue;if(h!==null){h=h.shared;var c=h.pending;c===null?l.next=l:(l.next=c.next,c.next=l),h.pending=l}}r.lanes|=e,l=r.alternate,l!==null&&(l.lanes|=e),_h(r.return,e,t),o.lanes|=e;break}l=l.next}}else if(r.tag===10)a=r.type===t.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(_(341));a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),_h(a,e,t),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}ce(s,t,n.children,e),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,An(t,e),n=Je(n),i=i(n),t.flags|=1,ce(s,t,i,e),t.child;case 14:return i=t.type,n=ni(i,t.pendingProps),n=ni(i.type,n),qd(s,t,i,n,e);case 15:return Kg(s,t,t.type,t.pendingProps,e);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),Ba(s,t),t.tag=1,ke(i)?(s=!0,so(t)):s=!1,An(t,e),Vg(t,i,n),Lh(t,i,n,e),Fh(null,t,i,!0,s,e);case 19:return tm(s,t,e);case 22:return Qg(s,t,e)}throw Error(_(156,t.tag))};function mm(s,t){return Wp(s,t)}function Y0(s,t,e,i){this.tag=s,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(s,t,e,i){return new Y0(s,t,e,i)}function uu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function V0(s){if(typeof s=="function")return uu(s)?1:0;if(s!=null){if(s=s.$$typeof,s===_c)return 11;if(s===Mc)return 14}return 2}function gs(s,t){var e=s.alternate;return e===null?(e=Qe(s.tag,t,s.key,s.mode),e.elementType=s.elementType,e.type=s.type,e.stateNode=s.stateNode,e.alternate=s,s.alternate=e):(e.pendingProps=t,e.type=s.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=s.flags&14680064,e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=s.sibling,e.index=s.index,e.ref=s.ref,e}function ja(s,t,e,i,n,r){var a=2;if(i=s,typeof s=="function")uu(s)&&(a=1);else if(typeof s=="string")a=5;else t:switch(s){case en:return Ds(e.children,n,r,t);case Pc:a=8,n|=8;break;case ih:return s=Qe(12,e,t,n|2),s.elementType=ih,s.lanes=r,s;case sh:return s=Qe(13,e,t,n),s.elementType=sh,s.lanes=r,s;case nh:return s=Qe(19,e,t,n),s.elementType=nh,s.lanes=r,s;case Tp:return Do(e,n,r,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case xp:a=10;break t;case Cp:a=9;break t;case _c:a=11;break t;case Mc:a=14;break t;case ts:a=16,i=null;break t}throw Error(_(130,s==null?s:typeof s,""))}return t=Qe(a,e,t,n),t.elementType=s,t.type=i,t.lanes=r,t}function Ds(s,t,e,i){return s=Qe(7,s,i,t),s.lanes=e,s}function Do(s,t,e,i){return s=Qe(22,s,i,t),s.elementType=Tp,s.lanes=e,s.stateNode={isHidden:!1},s}function Dl(s,t,e){return s=Qe(6,s,null,t),s.lanes=e,s}function Il(s,t,e){return t=Qe(4,s.children!==null?s.children:[],s.key,t),t.lanes=e,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function X0(s,t,e,i,n){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pl(0),this.expirationTimes=pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pl(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function du(s,t,e,i,n,r,a,o,l){return s=new X0(s,t,e,o,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Qe(3,null,null,t),s.current=r,r.stateNode=s,r.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kc(r),s}function q0(s,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tn,key:i==null?null:""+i,children:s,containerInfo:t,implementation:e}}function vm(s){if(!s)return vs;s=s._reactInternals;t:{if(Gs(s)!==s||s.tag!==1)throw Error(_(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(ke(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(_(171))}if(s.tag===1){var e=s.type;if(ke(e))return vg(s,e,t)}return t}function ym(s,t,e,i,n,r,a,o,l){return s=du(e,i,!0,s,n,r,a,o,l),s.context=vm(null),e=s.current,i=fe(),n=ps(e),r=Hi(i,n),r.callback=t??null,ds(e,r,n),s.current.lanes=n,zr(s,n,i),Re(s,i),s}function Io(s,t,e,i){var n=t.current,r=fe(),a=ps(n);return e=vm(e),t.context===null?t.context=e:t.pendingContext=e,t=Hi(r,a),t.payload={element:s},i=i===void 0?null:i,i!==null&&(t.callback=i),s=ds(n,t,a),s!==null&&(ci(s,n,a,r),Fa(s,n,a)),a}function vo(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function of(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var e=s.retryLane;s.retryLane=e!==0&&e<t?e:t}}function fu(s,t){of(s,t),(s=s.alternate)&&of(s,t)}function K0(){return null}var Am=typeof reportError=="function"?reportError:function(s){console.error(s)};function pu(s){this._internalRoot=s}Fo.prototype.render=pu.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(_(409));Io(s,t,null,null)};Fo.prototype.unmount=pu.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;Bs(function(){Io(null,s,null,null)}),t[Wi]=null}};function Fo(s){this._internalRoot=s}Fo.prototype.unstable_scheduleHydration=function(s){if(s){var t=Qp();s={blockedOn:null,target:s,priority:t};for(var e=0;e<is.length&&t!==0&&t<is[e].priority;e++);is.splice(e,0,s),e===0&&Jp(s)}};function gu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function No(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function lf(){}function Q0(s,t,e,i,n){if(n){if(typeof i=="function"){var r=i;i=function(){var h=vo(a);r.call(h)}}var a=ym(t,i,s,0,null,!1,!1,"",lf);return s._reactRootContainer=a,s[Wi]=a.current,Tr(s.nodeType===8?s.parentNode:s),Bs(),a}for(;n=s.lastChild;)s.removeChild(n);if(typeof i=="function"){var o=i;i=function(){var h=vo(l);o.call(h)}}var l=du(s,0,!1,null,null,!1,!1,"",lf);return s._reactRootContainer=l,s[Wi]=l.current,Tr(s.nodeType===8?s.parentNode:s),Bs(function(){Io(t,l,e,i)}),l}function Oo(s,t,e,i,n){var r=e._reactRootContainer;if(r){var a=r;if(typeof n=="function"){var o=n;n=function(){var l=vo(a);o.call(l)}}Io(t,a,s,n)}else a=Q0(e,t,s,n,i);return vo(a)}qp=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var e=Zn(t.pendingLanes);e!==0&&(Ic(t,e|1),Re(t,xt()),!(ot&6)&&(Rn=xt()+500,Ss()))}break;case 13:Bs(function(){var i=Gi(s,1);if(i!==null){var n=fe();ci(i,s,1,n)}}),fu(s,1)}};Fc=function(s){if(s.tag===13){var t=Gi(s,134217728);if(t!==null){var e=fe();ci(t,s,134217728,e)}fu(s,134217728)}};Kp=function(s){if(s.tag===13){var t=ps(s),e=Gi(s,t);if(e!==null){var i=fe();ci(e,s,t,i)}fu(s,t)}};Qp=function(){return lt};Zp=function(s,t){var e=lt;try{return lt=s,t()}finally{lt=e}};ph=function(s,t,e){switch(t){case"input":if(oh(s,e),t=e.name,e.type==="radio"&&t!=null){for(e=s;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==s&&i.form===s.form){var n=ko(i);if(!n)throw Error(_(90));Rp(i),oh(i,n)}}}break;case"textarea":_p(s,e);break;case"select":t=e.value,t!=null&&gn(s,!!e.multiple,t,!1)}};Op=lu;Bp=Bs;var Z0={usingClientEntryPoint:!1,Events:[Ur,an,ko,Fp,Np,lu]},jn={findFiberByHostInstance:ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J0={bundleType:jn.bundleType,version:jn.version,rendererPackageName:jn.rendererPackageName,rendererConfig:jn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vi.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=jp(s),s===null?null:s.stateNode},findFiberByHostInstance:jn.findFiberByHostInstance||K0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pa.isDisabled&&pa.supportsFiber)try{Eo=pa.inject(J0),wi=pa}catch{}}ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z0;ze.createPortal=function(s,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gu(t))throw Error(_(200));return q0(s,t,null,e)};ze.createRoot=function(s,t){if(!gu(s))throw Error(_(299));var e=!1,i="",n=Am;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=du(s,1,!1,null,null,e,!1,i,n),s[Wi]=t.current,Tr(s.nodeType===8?s.parentNode:s),new pu(t)};ze.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(_(188)):(s=Object.keys(s).join(","),Error(_(268,s)));return s=jp(t),s=s===null?null:s.stateNode,s};ze.flushSync=function(s){return Bs(s)};ze.hydrate=function(s,t,e){if(!No(t))throw Error(_(200));return Oo(null,s,t,!0,e)};ze.hydrateRoot=function(s,t,e){if(!gu(s))throw Error(_(405));var i=e!=null&&e.hydratedSources||null,n=!1,r="",a=Am;if(e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),t=ym(t,null,s,1,e??null,n,!1,r,a),s[Wi]=t.current,Tr(s),i)for(s=0;s<i.length;s++)e=i[s],n=e._getVersion,n=n(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n);return new Fo(t)};ze.render=function(s,t,e){if(!No(t))throw Error(_(200));return Oo(null,s,t,!1,e)};ze.unmountComponentAtNode=function(s){if(!No(s))throw Error(_(40));return s._reactRootContainer?(Bs(function(){Oo(null,null,s,!1,function(){s._reactRootContainer=null,s[Wi]=null})}),!0):!1};ze.unstable_batchedUpdates=lu;ze.unstable_renderSubtreeIntoContainer=function(s,t,e,i){if(!No(e))throw Error(_(200));if(s==null||s._reactInternals===void 0)throw Error(_(38));return Oo(s,t,e,!1,i)};ze.version="18.3.1-next-f1338f8080-20240426";function bm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bm)}catch(s){console.error(s)}}bm(),bp.exports=ze;var Gr=bp.exports,wm,hf=Gr;wm=th.createRoot=hf.createRoot,th.hydrateRoot=hf.hydrateRoot;const Xh=N.createContext(void 0),Bo=()=>{const s=N.useContext(Xh);if(s===void 0)throw new Error("usePdfHighlighterContext must be used within PdfHighlighter!");return s},Sm=(s,{width:t,height:e})=>({x1:s.left,y1:s.top,x2:s.left+s.width,y2:s.top+s.height,width:t,height:e,pageNumber:s.pageNumber}),Em=({boundingRect:s,rects:t},e)=>{const i=s.pageNumber,n=e.getPageView(i-1).viewport,r=a=>Sm(a,n);return{boundingRect:r(s),rects:(t||[]).map(r)}},$0=(s,t)=>{const[e,i,n,r]=t.convertToViewportRectangle([s.x1,s.y1,s.x2,s.y2]);return{left:Math.min(e,n),top:Math.min(i,r),width:Math.abs(n-e),height:Math.abs(i-r),pageNumber:s.pageNumber}},xm=(s,t,e=!1)=>{const{width:i,height:n}=t;if(e)return $0(s,t);if(s.x1===void 0)throw new Error("You are using old position format, please update");const r=i*s.x1/s.width,a=n*s.y1/s.height,o=i*s.x2/s.width,l=n*s.y2/s.height;return{left:r,top:a,width:o-r,height:l-a,pageNumber:s.pageNumber}},tb=({boundingRect:s,rects:t,usePdfCoordinates:e},i)=>{const n=s.pageNumber,r=i.getPageView(n-1).viewport,a=o=>xm(o,r,e);return{boundingRect:a(s),rects:(t||[]).map(a)}},eb=s=>{const t=Array.from(s).map(c=>{const{left:u,top:d,width:f,height:p,pageNumber:m}=c,A=u,g=u+f,v=d,y=d+p;return{X0:A,X1:g,Y0:v,Y1:y,pageNumber:m}});let e=Number.MAX_SAFE_INTEGER;t.forEach(c=>{e=Math.min(e,c.pageNumber??e)});const i=t.filter(c=>(c.X0>0||c.X1>0||c.Y0>0||c.Y1>0)&&c.pageNumber===e),n=i.reduce((c,u)=>({X0:Math.min(c.X0,u.X0),X1:Math.max(c.X1,u.X1),Y0:Math.min(c.Y0,u.Y0),Y1:Math.max(c.Y1,u.Y1),pageNumber:e}),i[0]),{X0:r,X1:a,Y0:o,Y1:l,pageNumber:h}=n;return{left:r,top:o,width:a-r,height:l-o,pageNumber:h}},ib=s=>s.sort((t,e)=>{const i=(t.pageNumber||0)*t.top-(e.pageNumber||0)*e.top;return i===0?t.left-e.left:i}),sb=(s,t)=>s.pageNumber===t.pageNumber&&s.left<=t.left&&t.left<=s.left+s.width,nb=(s,t,e=5)=>s.pageNumber===t.pageNumber&&Math.abs(s.top-t.top)<e&&Math.abs(s.height-t.height)<e,rb=(s,t)=>s.pageNumber===t.pageNumber&&s.top>t.top&&s.left>t.left&&s.top+s.height<t.top+t.height&&s.left+s.width<t.left+t.width,ab=(s,t,e=10)=>{const i=s.left+s.width,n=t.left+t.width;return s.pageNumber===t.pageNumber&&s.left<=t.left&&i<=n&&t.left-i<=e},cf=(s,t)=>{s.width=Math.max(t.width-s.left+t.left,s.width)},ob=s=>{const t=ib(s),e=new Set,i=t.filter(r=>t.every(a=>!rb(r,a)));let n=0;for(;n<=2;)i.forEach(r=>{i.forEach(a=>{r===a||e.has(r)||e.has(a)||nb(r,a)&&(sb(r,a)&&(cf(r,a),r.height=Math.max(r.height,a.height),e.add(a)),ab(r,a)&&(cf(r,a),e.add(a)))})}),n+=1;return i.filter(r=>!e.has(r))},lb=(s,t)=>!(s.top<t.top||s.bottom>t.bottom||s.right>t.right||s.left<t.left),hb=(s,t,e=!0)=>{const i=Array.from(s.getClientRects()),n=[];for(const r of i)for(const a of t){const o=a.node.getBoundingClientRect();if(lb(r,o)&&r.width>0&&r.height>0&&r.width<o.width&&r.left>o.left&&r.height<o.height){const l={top:r.top+a.node.scrollTop-o.top,left:r.left+a.node.scrollLeft-o.left,width:r.width,height:r.height,pageNumber:a.number};n.push(l)}}return e?ob(n):n},cb=s=>s.reduce((t,e)=>(e&&[e.position.boundingRect.pageNumber,...e.position.rects.map(n=>n.pageNumber||0)].forEach(n=>{t[n]||=[];const r={...e,position:{...e.position,rects:e.position.rects.filter(a=>n===a.pageNumber)}};t[n].push(r)}),t),{}),Cm=s=>(s||{}).ownerDocument||document,yo=s=>(Cm(s)||{}).defaultView||window,Fr=s=>s instanceof HTMLElement||s instanceof yo(s).HTMLElement,ub=s=>s instanceof HTMLCanvasElement||s instanceof yo(s).HTMLCanvasElement,bi=s=>s,pr=s=>{const t=bi(s.closest(".page"));if(!t||!Fr(t))return null;const e=Number(bi(t).dataset.pageNumber);return{node:t,number:e}},db=s=>{const t=s.startContainer.parentElement,e=s.endContainer.parentElement;if(!Fr(t)||!Fr(e))return[];const i=pr(bi(t)),n=pr(bi(e));if(!i?.number||!n?.number)return[];if(i.number===n.number)return[i];if(i.number===n.number-1)return[i,n];const r=[];let a=i.number;const o=i.node.ownerDocument;for(;a<=n.number;){const l=pr(o.querySelector(`[data-page-number='${a}'`));l&&r.push(l),a++}return r},fb=(s,t)=>{const e=Cm(s);let i=s.querySelector(`.${t}`);return!i&&s.children.length&&(i=e.createElement("div"),i.className=t,s.appendChild(i)),i},Tm=N.createContext(void 0),pb=()=>{const s=N.useContext(Tm);if(s===void 0)throw new Error("useHighlightContainerContext must be used within a child of PdfHighlighter!");return s},gb=(s,t)=>{const{left:e,top:i,width:n,height:r}=t,a=s?s.ownerDocument:null,o=a&&a.createElement("canvas");if(!o||!ub(o))return"";o.width=n,o.height=r;const l=o.getContext("2d");if(!l||!s)return"";const h=window.devicePixelRatio;return l.drawImage(s,e*h,i*h,n*h,r*h,0,0,n,r),o.toDataURL("image/png")},km=(s,t,e)=>gb(e.getPageView(t-1).canvas,s),mb="empty-id",vb=({highlightsByPage:s,pageNumber:t,scrolledToHighlightId:e,viewer:i,highlightBindings:n,children:r})=>{const a=s[t]||[];return D.jsx("div",{children:a.map((o,l)=>{const h={...o,id:"id"in o?o.id:mb,position:tb(o.position,i)},c=e===h.id,u={highlight:h,viewportToScaled:d=>{const f=i.getPageView((d.pageNumber||t)-1).viewport;return Sm(d,f)},screenshot:d=>km(d,t,i),isScrolledTo:c,highlightBindings:n};return D.jsx(Tm.Provider,{value:u,children:r},l)})})},uf=(s,t)=>({left:Math.min(t.x,s.x),top:Math.min(t.y,s.y),width:Math.abs(t.x-s.x),height:Math.abs(t.y-s.y)}),df=(s,t,e)=>{const i=s.getBoundingClientRect();return{x:t-i.left+s.scrollLeft,y:e-i.top+s.scrollTop-window.scrollY}},yb=({viewer:s,onSelection:t,onReset:e,onDragStart:i,enableAreaSelection:n,onChange:r,style:a})=>{const[o,l]=N.useState(null),[h,c]=N.useState(null),[u,d]=N.useState(!1),f=N.useRef(null),p=N.useRef(null),m=()=>{e&&e(),l(null),c(null),d(!1)};return N.useEffect(()=>{if(r&&r(!!(o&&h)),!f.current)return;const A=bi(f.current.parentElement),g=b=>{if(!o||!h||!p.current)return;const w=uf(o,h),S=w.width>=1&&w.height>=1;if(!A.contains(bi(b.target))||!S){m();return}d(!0);const E=pr(p.current);if(!E)return;const x={...w,top:w.top-E.node.offsetTop,left:w.left-E.node.offsetLeft,pageNumber:E.number},C={boundingRect:x,rects:[]},T=Em(C,s),R=km(x,x.pageNumber,s);t&&t(C,T,R,m,b)},v=b=>{!f.current||!o||u||c(df(A,b.pageX,b.pageY))},y=b=>{const w=E=>n(E)&&Fr(E.target)&&!!bi(E.target).closest(".page"),S=E=>o&&!bi(E.target).closest(".PdfHighlighter__tip-container");if(!w(b)){S(b)&&m();return}p.current=bi(b.target),i&&i(b),l(df(A,b.pageX,b.pageY)),c(null),d(!1)};return A.addEventListener("mousemove",v),A.addEventListener("mousedown",y),document.addEventListener("mouseup",g),()=>{A.removeEventListener("mousemove",v),A.removeEventListener("mousedown",y),document.removeEventListener("mouseup",g)}},[o,h]),D.jsx("div",{className:"MouseSelection-container",ref:f,children:o&&h&&D.jsx("div",{className:"MouseSelection",style:{...uf(o,h),...a}})})},Ab=(s,t,e)=>Math.min(Math.max(s,t),e),Fl=5,bb=({viewer:s,updateTipPositionRef:t})=>{const[e,i]=N.useState(0),[n,r]=N.useState(0),a=N.useRef(null),o=()=>{if(!a.current)return;const{offsetHeight:C,offsetWidth:T}=a.current;i(C),r(T)};t.current=o,N.useLayoutEffect(()=>{o()},[o]);const{getTip:l}=Bo(),h=l();if(!h)return null;const{position:c,content:u}=h,{boundingRect:d}=c,f=d.pageNumber,p=s.getPageView(f-1).div,m=p.getBoundingClientRect(),{left:A,width:g}=m,v=s.container.scrollTop,y=p.offsetLeft+d.left+d.width/2,b=d.top+p.offsetTop,w=b+d.height,E=b-e-Fl<v?w+Fl:b-e-Fl,x=Ab(y-n/2,0,A+g-n);return D.jsx("div",{className:"PdfHighlighter__tip-container",style:{top:E,left:x,height:"max-content",width:"max-content"},ref:a,children:u})};let Rm,Pm,_m;(async()=>{const s=await Ni(()=>import("./pdf_viewer-8NZWA5Fp.js"),[]);Rm=s.EventBus,Pm=s.PDFLinkService,_m=s.PDFViewer})();const wb=10,Sb="auto",Eb="rgba(153,193,218,255)",xb=s=>fb(s,"PdfHighlighter__highlight-layer"),ff=(s,t)=>{s.viewer?.classList.toggle("PdfHighlighter--disable-selection",t)},Cb=({highlights:s,onScrollAway:t,pdfScaleValue:e=Sb,onSelection:i,onCreateGhostHighlight:n,onRemoveGhostHighlight:r,selectionTip:a,enableAreaSelection:o,mouseSelectionStyle:l,pdfDocument:h,children:c,textSelectionColor:u=Eb,utilsRef:d,style:f})=>{const[p,m]=N.useState(null),[A,g]=N.useState(!1),v=N.useRef(null),y=N.useRef({}),b=N.useRef(null),w=N.useRef(null),S=N.useRef(null),E=N.useRef(!1),x=N.useRef(!1),C=N.useRef(()=>{}),T=N.useRef(new Rm),R=N.useRef(new Pm({eventBus:T.current,externalLinkTarget:2})),I=N.useRef(null),L=N.useRef(null);N.useLayoutEffect(()=>{if(!v.current)return;const M=qy(()=>{L.current=L.current||new _m({container:v.current,eventBus:T.current,textLayerMode:2,removePageBorders:!0,linkService:R.current}),L.current.setDocument(h),R.current.setDocument(h),R.current.setViewer(L.current),g(!0)},100);return M(),()=>{M.cancel()}},[document]),N.useLayoutEffect(()=>{if(!v.current)return;I.current=new ResizeObserver(k),I.current.observe(v.current);const M=v.current.ownerDocument;return T.current.on("textlayerrendered",F),T.current.on("pagesinit",k),M.addEventListener("keydown",P),F(),()=>{T.current.off("pagesinit",k),T.current.off("textlayerrendered",F),M.removeEventListener("keydown",P),I.current?.disconnect()}},[a,s,i]);const G=()=>{t&&t(),S.current=null,F()},z=()=>{const M=v.current,rt=yo(M).getSelection();if(!M||!rt||rt.isCollapsed||!L.current)return;const Wt=rt.rangeCount>0?rt.getRangeAt(0):null;if(!Wt||!M.contains(Wt.commonAncestorContainer))return;const Ue=db(Wt);if(!Ue||Ue.length===0)return;const Xi=hb(Wt,Ue);if(Xi.length===0)return;const qu={boundingRect:eb(Xi),rects:Xi},Ku=Em(qu,L.current),Qu={text:rt.toString().split(`
`).join(" ")};w.current={content:Qu,type:"text",position:Ku,makeGhostHighlight:()=>(b.current={content:Qu,type:"text",position:Ku},n&&n(b.current),gt(),F(),b.current)},i&&i(w.current),a&&m({position:qu,content:a})},H=M=>{!Fr(M.target)||bi(M.target).closest(".PdfHighlighter__tip-container")||(m(null),gt(),V(),W(!1))},P=M=>{M.code==="Escape"&&(gt(),V(),m(null))},k=()=>{L.current&&(L.current.currentScaleValue=e.toString())},O=(M,rt)=>{L.current&&M.reactRoot.render(D.jsx(Xh.Provider,{value:nt,children:D.jsx(vb,{highlightsByPage:cb([...s,b.current]),pageNumber:rt,scrolledToHighlightId:S.current,viewer:L.current,highlightBindings:M,children:c})}))},F=()=>{if(L.current)for(let M=1;M<=h.numPages;M++){const rt=y.current[M];if(rt?.container?.isConnected)O(rt,M);else{const{textLayer:Wt}=L.current.getPageView(M-1)||{};if(!Wt)continue;const Ue=xb(Wt.div);if(Ue){const Xi=wm(Ue);y.current[M]={reactRoot:Xi,container:Ue,textLayer:Wt.div},O(y.current[M],M)}}}},J=()=>!!w.current||!!b.current||E.current||x.current,W=M=>{M!==void 0?x.current=M:x.current=!x.current,L.current&&L.current.viewer?.classList.toggle("PdfHighlighter--disable-selection",x.current)},V=()=>{r&&b.current&&r(b.current),b.current=null,F()},gt=()=>{w.current=null;const M=v.current,rt=yo(M).getSelection();!M||!rt||rt.removeAllRanges()},nt={isEditingOrHighlighting:J,getCurrentSelection:()=>w.current,getGhostHighlight:()=>b.current,removeGhostHighlight:V,toggleEditInProgress:W,isEditInProgress:()=>x.current,isSelectionInProgress:()=>!!w.current||E.current,scrollToHighlight:M=>{const{boundingRect:rt,usePdfCoordinates:Wt}=M.position,Ue=rt.pageNumber;L.current.container.removeEventListener("scroll",G);const Xi=L.current.getPageView(Ue-1).viewport;L.current.scrollPageIntoView({pageNumber:Ue,destArray:[null,{name:"XYZ"},...Xi.convertToPdfPoint(0,xm(rt,Xi,Wt).top-wb),0]}),S.current=M.id,F(),setTimeout(()=>{L.current.container.addEventListener("scroll",G,{once:!0})},100)},getViewer:()=>L.current,getTip:()=>p,setTip:m,updateTipPosition:C.current};return d(nt),D.jsx(Xh.Provider,{value:nt,children:D.jsxs("div",{ref:v,className:"PdfHighlighter",onPointerDown:H,onPointerUp:z,style:f,children:[D.jsx("div",{className:"pdfViewer"}),D.jsx("style",{children:`
          .textLayer ::selection {
            background: ${u};
          }
        `}),A&&D.jsx(bb,{viewer:L.current,updateTipPositionRef:C}),A&&o&&D.jsx(yb,{viewer:L.current,onChange:M=>E.current=M,enableAreaSelection:o,style:l,onDragStart:()=>ff(L.current,!0),onReset:()=>{w.current=null,ff(L.current,!1)},onSelection:(M,rt,Wt,Ue)=>{w.current={content:{image:Wt},type:"area",position:rt,makeGhostHighlight:()=>(b.current={position:rt,type:"area",content:{image:Wt}},n&&n(b.current),Ue(),F(),b.current)},i&&i(w.current),a&&m({position:M,content:a})}})]})})},Tb=({highlight:s,onClick:t,onMouseOver:e,onMouseOut:i,isScrolledTo:n,onContextMenu:r,style:a})=>{const o=n?"TextHighlight--scrolledTo":"",{rects:l}=s.position;return D.jsx("div",{className:`TextHighlight ${o}`,onContextMenu:r,children:D.jsx("div",{className:"TextHighlight__parts",children:l.map((h,c)=>D.jsx("div",{onMouseOver:e,onMouseOut:i,onClick:t,style:{...h,...a},className:"TextHighlight__part"},c))})})},kb=({onMoveAway:s,paddingX:t,paddingY:e,children:i})=>{const n=N.useRef(null),r=a=>{if(!n.current)return;const{clientX:o,clientY:l}=a,{left:h,top:c,width:u,height:d}=n.current.getBoundingClientRect(),f=o>h-t&&o<h+u+t,p=l>c-e&&l<c+d+e;f&&p||s()};return N.useEffect(()=>(document.addEventListener("mousemove",r),()=>{document.removeEventListener("mousemove",r)}),[]),D.jsx("div",{ref:n,children:i})},Rb=({onMouseEnter:s,highlightTip:t,onMouseLeave:e,children:i})=>{const n=N.useRef(!1),{setTip:r,isEditingOrHighlighting:a}=Bo();return D.jsx("div",{onMouseEnter:()=>{if(n.current=!0,s&&s(),!a()&&t){const o=D.jsx(kb,{onMoveAway:()=>{n.current||(r(null),e&&e())},paddingX:60,paddingY:30,children:t.content});r({position:t.position,content:o})}},onMouseLeave:()=>{n.current=!1,!t&&e&&e()},children:i})};var Ho={exports:{}},Mm={},Lm={exports:{}},Pb="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_b=Pb,Mb=_b;function Dm(){}function Im(){}Im.resetWarningCache=Dm;var Lb=function(){function s(i,n,r,a,o,l){if(l!==Mb){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}s.isRequired=s;function t(){return s}var e={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:t,element:s,elementType:s,instanceOf:t,node:s,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Im,resetWarningCache:Dm};return e.PropTypes=e,e};Lm.exports=Lb();var Fm=Lm.exports;function Nm(s){var t,e,i="";if(typeof s=="string"||typeof s=="number")i+=s;else if(typeof s=="object")if(Array.isArray(s))for(t=0;t<s.length;t++)s[t]&&(e=Nm(s[t]))&&(i&&(i+=" "),i+=e);else for(t in s)s[t]&&(i&&(i+=" "),i+=t);return i}function pf(){for(var s,t,e=0,i="";e<arguments.length;)(s=arguments[e++])&&(t=Nm(s))&&(i&&(i+=" "),i+=t);return i}const Db=Object.freeze(Object.defineProperty({__proto__:null,clsx:pf,default:pf},Symbol.toStringTag,{value:"Module"})),Ib=ny(Db);var Et={},xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.dontSetMe=Hb;xi.findInArray=Fb;xi.int=Bb;xi.isFunction=Nb;xi.isNum=Ob;function Fb(s,t){for(let e=0,i=s.length;e<i;e++)if(t.apply(t,[s[e],e,s]))return s[e]}function Nb(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Function]"}function Ob(s){return typeof s=="number"&&!isNaN(s)}function Bb(s){return parseInt(s,10)}function Hb(s,t,e){if(s[t])return new Error("Invalid prop ".concat(t," passed to ").concat(e," - do not set this, set it on the child."))}var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.browserPrefixToKey=Bm;Ys.browserPrefixToStyle=zb;Ys.default=void 0;Ys.getPrefix=Om;const Nl=["Moz","Webkit","O","ms"];function Om(){var s;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(s=window.document)===null||s===void 0||(s=s.documentElement)===null||s===void 0?void 0:s.style;if(!e||t in e)return"";for(let i=0;i<Nl.length;i++)if(Bm(t,Nl[i])in e)return Nl[i];return""}function Bm(s,t){return t?"".concat(t).concat(jb(s)):s}function zb(s,t){return t?"-".concat(t.toLowerCase(),"-").concat(s):s}function jb(s){let t="",e=!0;for(let i=0;i<s.length;i++)e?(t+=s[i].toUpperCase(),e=!1):s[i]==="-"?e=!0:t+=s[i];return t}Ys.default=Om();Object.defineProperty(Et,"__esModule",{value:!0});Et.addClassName=jm;Et.addEvent=Gb;Et.addUserSelectStyles=ew;Et.createCSSTransform=Zb;Et.createSVGTransform=Jb;Et.getTouch=$b;Et.getTouchIdentifier=tw;Et.getTranslation=mu;Et.innerHeight=qb;Et.innerWidth=Kb;Et.matchesSelector=zm;Et.matchesSelectorAndParentsTo=Wb;Et.offsetXYFromParent=Qb;Et.outerHeight=Vb;Et.outerWidth=Xb;Et.removeClassName=Um;Et.removeEvent=Yb;Et.removeUserSelectStyles=iw;var Be=xi,gf=Ub(Ys);function Hm(s){if(typeof WeakMap!="function")return null;var t=new WeakMap,e=new WeakMap;return(Hm=function(i){return i?e:t})(s)}function Ub(s,t){if(s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var e=Hm(t);if(e&&e.has(s))return e.get(s);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in s)if(r!=="default"&&Object.prototype.hasOwnProperty.call(s,r)){var a=n?Object.getOwnPropertyDescriptor(s,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=s[r]}return i.default=s,e&&e.set(s,i),i}let ga="";function zm(s,t){return ga||(ga=(0,Be.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(e){return(0,Be.isFunction)(s[e])})),(0,Be.isFunction)(s[ga])?s[ga](t):!1}function Wb(s,t,e){let i=s;do{if(zm(i,t))return!0;if(i===e)return!1;i=i.parentNode}while(i);return!1}function Gb(s,t,e,i){if(!s)return;const n={capture:!0,...i};s.addEventListener?s.addEventListener(t,e,n):s.attachEvent?s.attachEvent("on"+t,e):s["on"+t]=e}function Yb(s,t,e,i){if(!s)return;const n={capture:!0,...i};s.removeEventListener?s.removeEventListener(t,e,n):s.detachEvent?s.detachEvent("on"+t,e):s["on"+t]=null}function Vb(s){let t=s.clientHeight;const e=s.ownerDocument.defaultView.getComputedStyle(s);return t+=(0,Be.int)(e.borderTopWidth),t+=(0,Be.int)(e.borderBottomWidth),t}function Xb(s){let t=s.clientWidth;const e=s.ownerDocument.defaultView.getComputedStyle(s);return t+=(0,Be.int)(e.borderLeftWidth),t+=(0,Be.int)(e.borderRightWidth),t}function qb(s){let t=s.clientHeight;const e=s.ownerDocument.defaultView.getComputedStyle(s);return t-=(0,Be.int)(e.paddingTop),t-=(0,Be.int)(e.paddingBottom),t}function Kb(s){let t=s.clientWidth;const e=s.ownerDocument.defaultView.getComputedStyle(s);return t-=(0,Be.int)(e.paddingLeft),t-=(0,Be.int)(e.paddingRight),t}function Qb(s,t,e){const n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),r=(s.clientX+t.scrollLeft-n.left)/e,a=(s.clientY+t.scrollTop-n.top)/e;return{x:r,y:a}}function Zb(s,t){const e=mu(s,t,"px");return{[(0,gf.browserPrefixToKey)("transform",gf.default)]:e}}function Jb(s,t){return mu(s,t,"")}function mu(s,t,e){let{x:i,y:n}=s,r="translate(".concat(i).concat(e,",").concat(n).concat(e,")");if(t){const a="".concat(typeof t.x=="string"?t.x:t.x+e),o="".concat(typeof t.y=="string"?t.y:t.y+e);r="translate(".concat(a,", ").concat(o,")")+r}return r}function $b(s,t){return s.targetTouches&&(0,Be.findInArray)(s.targetTouches,e=>t===e.identifier)||s.changedTouches&&(0,Be.findInArray)(s.changedTouches,e=>t===e.identifier)}function tw(s){if(s.targetTouches&&s.targetTouches[0])return s.targetTouches[0].identifier;if(s.changedTouches&&s.changedTouches[0])return s.changedTouches[0].identifier}function ew(s){if(!s)return;let t=s.getElementById("react-draggable-style-el");t||(t=s.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,s.getElementsByTagName("head")[0].appendChild(t)),s.body&&jm(s.body,"react-draggable-transparent-selection")}function iw(s){if(s)try{if(s.body&&Um(s.body,"react-draggable-transparent-selection"),s.selection)s.selection.empty();else{const t=(s.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function jm(s,t){s.classList?s.classList.add(t):s.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(s.className+=" ".concat(t))}function Um(s,t){s.classList?s.classList.remove(t):s.className=s.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.canDragX=rw;Ci.canDragY=aw;Ci.createCoreData=lw;Ci.createDraggableData=hw;Ci.getBoundPosition=sw;Ci.getControlPosition=ow;Ci.snapToGrid=nw;var De=xi,fn=Et;function sw(s,t,e){if(!s.props.bounds)return[t,e];let{bounds:i}=s.props;i=typeof i=="string"?i:cw(i);const n=vu(s);if(typeof i=="string"){const{ownerDocument:r}=n,a=r.defaultView;let o;if(i==="parent"?o=n.parentNode:o=r.querySelector(i),!(o instanceof a.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');const l=o,h=a.getComputedStyle(n),c=a.getComputedStyle(l);i={left:-n.offsetLeft+(0,De.int)(c.paddingLeft)+(0,De.int)(h.marginLeft),top:-n.offsetTop+(0,De.int)(c.paddingTop)+(0,De.int)(h.marginTop),right:(0,fn.innerWidth)(l)-(0,fn.outerWidth)(n)-n.offsetLeft+(0,De.int)(c.paddingRight)-(0,De.int)(h.marginRight),bottom:(0,fn.innerHeight)(l)-(0,fn.outerHeight)(n)-n.offsetTop+(0,De.int)(c.paddingBottom)-(0,De.int)(h.marginBottom)}}return(0,De.isNum)(i.right)&&(t=Math.min(t,i.right)),(0,De.isNum)(i.bottom)&&(e=Math.min(e,i.bottom)),(0,De.isNum)(i.left)&&(t=Math.max(t,i.left)),(0,De.isNum)(i.top)&&(e=Math.max(e,i.top)),[t,e]}function nw(s,t,e){const i=Math.round(t/s[0])*s[0],n=Math.round(e/s[1])*s[1];return[i,n]}function rw(s){return s.props.axis==="both"||s.props.axis==="x"}function aw(s){return s.props.axis==="both"||s.props.axis==="y"}function ow(s,t,e){const i=typeof t=="number"?(0,fn.getTouch)(s,t):null;if(typeof t=="number"&&!i)return null;const n=vu(e),r=e.props.offsetParent||n.offsetParent||n.ownerDocument.body;return(0,fn.offsetXYFromParent)(i||s,r,e.props.scale)}function lw(s,t,e){const i=!(0,De.isNum)(s.lastX),n=vu(s);return i?{node:n,deltaX:0,deltaY:0,lastX:t,lastY:e,x:t,y:e}:{node:n,deltaX:t-s.lastX,deltaY:e-s.lastY,lastX:s.lastX,lastY:s.lastY,x:t,y:e}}function hw(s,t){const e=s.props.scale;return{node:t.node,x:s.state.x+t.deltaX/e,y:s.state.y+t.deltaY/e,deltaX:t.deltaX/e,deltaY:t.deltaY/e,lastX:s.state.x,lastY:s.state.y}}function cw(s){return{left:s.left,top:s.top,right:s.right,bottom:s.bottom}}function vu(s){const t=s.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var zo={},jo={};Object.defineProperty(jo,"__esModule",{value:!0});jo.default=uw;function uw(){}Object.defineProperty(zo,"__esModule",{value:!0});zo.default=void 0;var Ol=fw(N),me=yu(Fm),dw=yu(Gr),$t=Et,Ki=Ci,Bl=xi,Un=yu(jo);function yu(s){return s&&s.__esModule?s:{default:s}}function Wm(s){if(typeof WeakMap!="function")return null;var t=new WeakMap,e=new WeakMap;return(Wm=function(i){return i?e:t})(s)}function fw(s,t){if(s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var e=Wm(t);if(e&&e.has(s))return e.get(s);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in s)if(r!=="default"&&Object.prototype.hasOwnProperty.call(s,r)){var a=n?Object.getOwnPropertyDescriptor(s,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=s[r]}return i.default=s,e&&e.set(s,i),i}function he(s,t,e){return t=pw(t),t in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function pw(s){var t=gw(s,"string");return typeof t=="symbol"?t:String(t)}function gw(s,t){if(typeof s!="object"||s===null)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var i=e.call(s,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}const ii={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Qi=ii.mouse,Uo=class extends Ol.Component{constructor(){super(...arguments),he(this,"dragging",!1),he(this,"lastX",NaN),he(this,"lastY",NaN),he(this,"touchIdentifier",null),he(this,"mounted",!1),he(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const e=this.findDOMNode();if(!e||!e.ownerDocument||!e.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:i}=e;if(this.props.disabled||!(t.target instanceof i.defaultView.Node)||this.props.handle&&!(0,$t.matchesSelectorAndParentsTo)(t.target,this.props.handle,e)||this.props.cancel&&(0,$t.matchesSelectorAndParentsTo)(t.target,this.props.cancel,e))return;t.type==="touchstart"&&t.preventDefault();const n=(0,$t.getTouchIdentifier)(t);this.touchIdentifier=n;const r=(0,Ki.getControlPosition)(t,n,this);if(r==null)return;const{x:a,y:o}=r,l=(0,Ki.createCoreData)(this,a,o);(0,Un.default)("DraggableCore: handleDragStart: %j",l),(0,Un.default)("calling",this.props.onStart),!(this.props.onStart(t,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,$t.addUserSelectStyles)(i),this.dragging=!0,this.lastX=a,this.lastY=o,(0,$t.addEvent)(i,Qi.move,this.handleDrag),(0,$t.addEvent)(i,Qi.stop,this.handleDragStop))}),he(this,"handleDrag",t=>{const e=(0,Ki.getControlPosition)(t,this.touchIdentifier,this);if(e==null)return;let{x:i,y:n}=e;if(Array.isArray(this.props.grid)){let o=i-this.lastX,l=n-this.lastY;if([o,l]=(0,Ki.snapToGrid)(this.props.grid,o,l),!o&&!l)return;i=this.lastX+o,n=this.lastY+l}const r=(0,Ki.createCoreData)(this,i,n);if((0,Un.default)("DraggableCore: handleDrag: %j",r),this.props.onDrag(t,r)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=i,this.lastY=n}),he(this,"handleDragStop",t=>{if(!this.dragging)return;const e=(0,Ki.getControlPosition)(t,this.touchIdentifier,this);if(e==null)return;let{x:i,y:n}=e;if(Array.isArray(this.props.grid)){let l=i-this.lastX||0,h=n-this.lastY||0;[l,h]=(0,Ki.snapToGrid)(this.props.grid,l,h),i=this.lastX+l,n=this.lastY+h}const r=(0,Ki.createCoreData)(this,i,n);if(this.props.onStop(t,r)===!1||this.mounted===!1)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,$t.removeUserSelectStyles)(o.ownerDocument),(0,Un.default)("DraggableCore: handleDragStop: %j",r),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,Un.default)("DraggableCore: Removing handlers"),(0,$t.removeEvent)(o.ownerDocument,Qi.move,this.handleDrag),(0,$t.removeEvent)(o.ownerDocument,Qi.stop,this.handleDragStop))}),he(this,"onMouseDown",t=>(Qi=ii.mouse,this.handleDragStart(t))),he(this,"onMouseUp",t=>(Qi=ii.mouse,this.handleDragStop(t))),he(this,"onTouchStart",t=>(Qi=ii.touch,this.handleDragStart(t))),he(this,"onTouchEnd",t=>(Qi=ii.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,$t.addEvent)(t,ii.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:e}=t;(0,$t.removeEvent)(e,ii.mouse.move,this.handleDrag),(0,$t.removeEvent)(e,ii.touch.move,this.handleDrag),(0,$t.removeEvent)(e,ii.mouse.stop,this.handleDragStop),(0,$t.removeEvent)(e,ii.touch.stop,this.handleDragStop),(0,$t.removeEvent)(t,ii.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,$t.removeUserSelectStyles)(e)}}findDOMNode(){var t,e;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(e=this.props)===null||e===void 0||(e=e.nodeRef)===null||e===void 0?void 0:e.current:dw.default.findDOMNode(this)}render(){return Ol.cloneElement(Ol.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};zo.default=Uo;he(Uo,"displayName","DraggableCore");he(Uo,"propTypes",{allowAnyClick:me.default.bool,children:me.default.node.isRequired,disabled:me.default.bool,enableUserSelectHack:me.default.bool,offsetParent:function(s,t){if(s[t]&&s[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:me.default.arrayOf(me.default.number),handle:me.default.string,cancel:me.default.string,nodeRef:me.default.object,onStart:me.default.func,onDrag:me.default.func,onStop:me.default.func,onMouseDown:me.default.func,scale:me.default.number,className:Bl.dontSetMe,style:Bl.dontSetMe,transform:Bl.dontSetMe});he(Uo,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(s){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),s.default=void 0;var t=d(N),e=c(Fm),i=c(Gr),n=c(Ib),r=Et,a=Ci,o=xi,l=c(zo),h=c(jo);function c(v){return v&&v.__esModule?v:{default:v}}function u(v){if(typeof WeakMap!="function")return null;var y=new WeakMap,b=new WeakMap;return(u=function(w){return w?b:y})(v)}function d(v,y){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var b=u(y);if(b&&b.has(v))return b.get(v);var w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in v)if(E!=="default"&&Object.prototype.hasOwnProperty.call(v,E)){var x=S?Object.getOwnPropertyDescriptor(v,E):null;x&&(x.get||x.set)?Object.defineProperty(w,E,x):w[E]=v[E]}return w.default=v,b&&b.set(v,w),w}function f(){return f=Object.assign?Object.assign.bind():function(v){for(var y=1;y<arguments.length;y++){var b=arguments[y];for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(v[w]=b[w])}return v},f.apply(this,arguments)}function p(v,y,b){return y=m(y),y in v?Object.defineProperty(v,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[y]=b,v}function m(v){var y=A(v,"string");return typeof y=="symbol"?y:String(y)}function A(v,y){if(typeof v!="object"||v===null)return v;var b=v[Symbol.toPrimitive];if(b!==void 0){var w=b.call(v,y||"default");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(v)}class g extends t.Component{static getDerivedStateFromProps(y,b){let{position:w}=y,{prevPropsPosition:S}=b;return w&&(!S||w.x!==S.x||w.y!==S.y)?((0,h.default)("Draggable: getDerivedStateFromProps %j",{position:w,prevPropsPosition:S}),{x:w.x,y:w.y,prevPropsPosition:{...w}}):null}constructor(y){super(y),p(this,"onDragStart",(b,w)=>{if((0,h.default)("Draggable: onDragStart: %j",w),this.props.onStart(b,(0,a.createDraggableData)(this,w))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(b,w)=>{if(!this.state.dragging)return!1;(0,h.default)("Draggable: onDrag: %j",w);const S=(0,a.createDraggableData)(this,w),E={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:T}=E;E.x+=this.state.slackX,E.y+=this.state.slackY;const[R,I]=(0,a.getBoundPosition)(this,E.x,E.y);E.x=R,E.y=I,E.slackX=this.state.slackX+(C-E.x),E.slackY=this.state.slackY+(T-E.y),S.x=E.x,S.y=E.y,S.deltaX=E.x-this.state.x,S.deltaY=E.y-this.state.y}if(this.props.onDrag(b,S)===!1)return!1;this.setState(E)}),p(this,"onDragStop",(b,w)=>{if(!this.state.dragging||this.props.onStop(b,(0,a.createDraggableData)(this,w))===!1)return!1;(0,h.default)("Draggable: onDragStop: %j",w);const E={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:T}=this.props.position;E.x=C,E.y=T}this.setState(E)}),this.state={dragging:!1,dragged:!1,x:y.position?y.position.x:y.defaultPosition.x,y:y.position?y.position.y:y.defaultPosition.y,prevPropsPosition:{...y.position},slackX:0,slackY:0,isElementSVG:!1},y.position&&!(y.onDrag||y.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var y,b;return(y=(b=this.props)===null||b===void 0||(b=b.nodeRef)===null||b===void 0?void 0:b.current)!==null&&y!==void 0?y:i.default.findDOMNode(this)}render(){const{axis:y,bounds:b,children:w,defaultPosition:S,defaultClassName:E,defaultClassNameDragging:x,defaultClassNameDragged:C,position:T,positionOffset:R,scale:I,...L}=this.props;let G={},z=null;const P=!!!T||this.state.dragging,k=T||S,O={x:(0,a.canDragX)(this)&&P?this.state.x:k.x,y:(0,a.canDragY)(this)&&P?this.state.y:k.y};this.state.isElementSVG?z=(0,r.createSVGTransform)(O,R):G=(0,r.createCSSTransform)(O,R);const F=(0,n.default)(w.props.className||"",E,{[x]:this.state.dragging,[C]:this.state.dragged});return t.createElement(l.default,f({},L,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(w),{className:F,style:{...w.props.style,...G},transform:z}))}}s.default=g,p(g,"displayName","Draggable"),p(g,"propTypes",{...l.default.propTypes,axis:e.default.oneOf(["both","x","y","none"]),bounds:e.default.oneOfType([e.default.shape({left:e.default.number,right:e.default.number,top:e.default.number,bottom:e.default.number}),e.default.string,e.default.oneOf([!1])]),defaultClassName:e.default.string,defaultClassNameDragging:e.default.string,defaultClassNameDragged:e.default.string,defaultPosition:e.default.shape({x:e.default.number,y:e.default.number}),positionOffset:e.default.shape({x:e.default.oneOfType([e.default.number,e.default.string]),y:e.default.oneOfType([e.default.number,e.default.string])}),position:e.default.shape({x:e.default.number,y:e.default.number}),className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),p(g,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Mm);const{default:Gm,DraggableCore:mw}=Mm;Ho.exports=Gm;Ho.exports.default=Gm;Ho.exports.DraggableCore=mw;var vw=Ho.exports;const yw=wc(vw);var Aw=function(){var s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])},s(t,e)};return function(t,e){s(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Pt=function(){return Pt=Object.assign||function(s){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Pt.apply(this,arguments)},mf={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},vf={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},ma={width:"20px",height:"20px",position:"absolute"},bw={top:Pt(Pt({},mf),{top:"-5px"}),right:Pt(Pt({},vf),{left:void 0,right:"-5px"}),bottom:Pt(Pt({},mf),{top:void 0,bottom:"-5px"}),left:Pt(Pt({},vf),{left:"-5px"}),topRight:Pt(Pt({},ma),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Pt(Pt({},ma),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Pt(Pt({},ma),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Pt(Pt({},ma),{left:"-10px",top:"-10px",cursor:"nw-resize"})},ww=function(s){Aw(t,s);function t(){var e=s!==null&&s.apply(this,arguments)||this;return e.onMouseDown=function(i){e.props.onResizeStart(i,e.props.direction)},e.onTouchStart=function(i){e.props.onResizeStart(i,e.props.direction)},e}return t.prototype.render=function(){return N.createElement("div",{className:this.props.className||"",style:Pt(Pt({position:"absolute",userSelect:"none"},bw[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(N.PureComponent),Sw=function(){var s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])},s(t,e)};return function(t,e){s(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),vi=function(){return vi=Object.assign||function(s){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},vi.apply(this,arguments)},Ew={width:"auto",height:"auto"},va=function(s,t,e){return Math.max(Math.min(s,e),t)},yf=function(s,t,e){var i=Math.round(s/t);return i*t+e*(i-1)},$s=function(s,t){return new RegExp(s,"i").test(t)},ya=function(s){return!!(s.touches&&s.touches.length)},xw=function(s){return!!((s.clientX||s.clientX===0)&&(s.clientY||s.clientY===0))},Af=function(s,t,e){e===void 0&&(e=0);var i=t.reduce(function(r,a,o){return Math.abs(a-s)<Math.abs(t[r]-s)?o:r},0),n=Math.abs(t[i]-s);return e===0||n<e?t[i]:s},Hl=function(s){return s=s.toString(),s==="auto"||s.endsWith("px")||s.endsWith("%")||s.endsWith("vh")||s.endsWith("vw")||s.endsWith("vmax")||s.endsWith("vmin")?s:s+"px"},Aa=function(s,t,e,i){if(s&&typeof s=="string"){if(s.endsWith("px"))return Number(s.replace("px",""));if(s.endsWith("%")){var n=Number(s.replace("%",""))/100;return t*n}if(s.endsWith("vw")){var n=Number(s.replace("vw",""))/100;return e*n}if(s.endsWith("vh")){var n=Number(s.replace("vh",""))/100;return i*n}}return s},Cw=function(s,t,e,i,n,r,a){return i=Aa(i,s.width,t,e),n=Aa(n,s.height,t,e),r=Aa(r,s.width,t,e),a=Aa(a,s.height,t,e),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof n>"u"?void 0:Number(n),minWidth:typeof r>"u"?void 0:Number(r),minHeight:typeof a>"u"?void 0:Number(a)}},Tw=function(s){return Array.isArray(s)?s:[s,s]},kw=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],bf="__resizable_base__",Rw=function(s){Sw(t,s);function t(e){var i,n,r,a,o=s.call(this,e)||this;return o.ratio=1,o.resizable=null,o.parentLeft=0,o.parentTop=0,o.resizableLeft=0,o.resizableRight=0,o.resizableTop=0,o.resizableBottom=0,o.targetLeft=0,o.targetTop=0,o.appendBase=function(){if(!o.resizable||!o.window)return null;var l=o.parentNode;if(!l)return null;var h=o.window.document.createElement("div");return h.style.width="100%",h.style.height="100%",h.style.position="absolute",h.style.transform="scale(0, 0)",h.style.left="0",h.style.flex="0 0 100%",h.classList?h.classList.add(bf):h.className+=bf,l.appendChild(h),h},o.removeBase=function(l){var h=o.parentNode;h&&h.removeChild(l)},o.state={isResizing:!1,width:(n=(i=o.propsSize)===null||i===void 0?void 0:i.width)!==null&&n!==void 0?n:"auto",height:(a=(r=o.propsSize)===null||r===void 0?void 0:r.height)!==null&&a!==void 0?a:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},o.onResizeStart=o.onResizeStart.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Ew},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,i=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,a=this.resizable.style.position;a!=="relative"&&(this.resizable.style.position="relative"),e=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:n,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:r,this.resizable.style.position=a}return{width:e,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,i=this.props.size,n=function(o){var l;if(typeof e.state[o]>"u"||e.state[o]==="auto")return"auto";if(e.propsSize&&e.propsSize[o]&&(!((l=e.propsSize[o])===null||l===void 0)&&l.toString().endsWith("%"))){if(e.state[o].toString().endsWith("%"))return e.state[o].toString();var h=e.getParentSize(),c=Number(e.state[o].toString().replace("px","")),u=c/h[o]*100;return u+"%"}return Hl(e.state[o])},r=i&&typeof i.width<"u"&&!this.state.isResizing?Hl(i.width):n("width"),a=i&&typeof i.height<"u"&&!this.state.isResizing?Hl(i.height):n("height");return{width:r,height:a}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var i=!1,n=this.parentNode.style.flexWrap;n!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return i&&(this.parentNode.style.flexWrap=n),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:e.flexBasis!=="auto"?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,i){var n=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===e&&(typeof n>"u"||n==="auto")?"auto":e},t.prototype.calculateNewMaxFromBoundary=function(e,i){var n=this.props.boundsByDirection,r=this.state.direction,a=n&&$s("left",r),o=n&&$s("top",r),l,h;if(this.props.bounds==="parent"){var c=this.parentNode;c&&(l=a?this.resizableRight-this.parentLeft:c.offsetWidth+(this.parentLeft-this.resizableLeft),h=o?this.resizableBottom-this.parentTop:c.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=a?this.resizableRight:this.window.innerWidth-this.resizableLeft,h=o?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=a?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),h=o?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(e=e&&e<l?e:l),h&&Number.isFinite(h)&&(i=i&&i<h?i:h),{maxWidth:e,maxHeight:i}},t.prototype.calculateNewSizeFromDirection=function(e,i){var n=this.props.scale||1,r=Tw(this.props.resizeRatio||1),a=r[0],o=r[1],l=this.state,h=l.direction,c=l.original,u=this.props,d=u.lockAspectRatio,f=u.lockAspectRatioExtraHeight,p=u.lockAspectRatioExtraWidth,m=c.width,A=c.height,g=f||0,v=p||0;return $s("right",h)&&(m=c.width+(e-c.x)*a/n,d&&(A=(m-v)/this.ratio+g)),$s("left",h)&&(m=c.width-(e-c.x)*a/n,d&&(A=(m-v)/this.ratio+g)),$s("bottom",h)&&(A=c.height+(i-c.y)*o/n,d&&(m=(A-g)*this.ratio+v)),$s("top",h)&&(A=c.height-(i-c.y)*o/n,d&&(m=(A-g)*this.ratio+v)),{newWidth:m,newHeight:A}},t.prototype.calculateNewSizeFromAspectRatio=function(e,i,n,r){var a=this.props,o=a.lockAspectRatio,l=a.lockAspectRatioExtraHeight,h=a.lockAspectRatioExtraWidth,c=typeof r.width>"u"?10:r.width,u=typeof n.width>"u"||n.width<0?e:n.width,d=typeof r.height>"u"?10:r.height,f=typeof n.height>"u"||n.height<0?i:n.height,p=l||0,m=h||0;if(o){var A=(d-p)*this.ratio+m,g=(f-p)*this.ratio+m,v=(c-m)/this.ratio+p,y=(u-m)/this.ratio+p,b=Math.max(c,A),w=Math.min(u,g),S=Math.max(d,v),E=Math.min(f,y);e=va(e,b,w),i=va(i,S,E)}else e=va(e,c,u),i=va(i,d,f);return{newWidth:e,newHeight:i}},t.prototype.setBoundingClientRect=function(){var e=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var n=i.getBoundingClientRect();this.parentLeft=n.left*e,this.parentTop=n.top*e}}if(this.props.bounds&&typeof this.props.bounds!="string"){var r=this.props.bounds.getBoundingClientRect();this.targetLeft=r.left*e,this.targetTop=r.top*e}if(this.resizable){var a=this.resizable.getBoundingClientRect(),o=a.left,l=a.top,h=a.right,c=a.bottom;this.resizableLeft=o*e,this.resizableRight=h*e,this.resizableTop=l*e,this.resizableBottom=c*e}},t.prototype.onResizeStart=function(e,i){if(!(!this.resizable||!this.window)){var n=0,r=0;if(e.nativeEvent&&xw(e.nativeEvent)?(n=e.nativeEvent.clientX,r=e.nativeEvent.clientY):e.nativeEvent&&ya(e.nativeEvent)&&(n=e.nativeEvent.touches[0].clientX,r=e.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var a=this.props.onResizeStart(e,i,this.resizable);if(a===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var o,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var h=this.parentNode;if(h){var c=this.window.getComputedStyle(h).flexDirection;this.flexDir=c.startsWith("row")?"row":"column",o=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var u={original:{x:n,y:r,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:vi(vi({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:i,flexBasis:o};this.setState(u)}},t.prototype.onMouseMove=function(e){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&ya(e))try{e.preventDefault(),e.stopPropagation()}catch{}var n=this.props,r=n.maxWidth,a=n.maxHeight,o=n.minWidth,l=n.minHeight,h=ya(e)?e.touches[0].clientX:e.clientX,c=ya(e)?e.touches[0].clientY:e.clientY,u=this.state,d=u.direction,f=u.original,p=u.width,m=u.height,A=this.getParentSize(),g=Cw(A,this.window.innerWidth,this.window.innerHeight,r,a,o,l);r=g.maxWidth,a=g.maxHeight,o=g.minWidth,l=g.minHeight;var v=this.calculateNewSizeFromDirection(h,c),y=v.newHeight,b=v.newWidth,w=this.calculateNewMaxFromBoundary(r,a);this.props.snap&&this.props.snap.x&&(b=Af(b,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(y=Af(y,this.props.snap.y,this.props.snapGap));var S=this.calculateNewSizeFromAspectRatio(b,y,{width:w.maxWidth,height:w.maxHeight},{width:o,height:l});if(b=S.newWidth,y=S.newHeight,this.props.grid){var E=yf(b,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),x=yf(y,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),C=this.props.snapGap||0,T=C===0||Math.abs(E-b)<=C?E:b,R=C===0||Math.abs(x-y)<=C?x:y;b=T,y=R}var I={width:b-f.width,height:y-f.height};if(p&&typeof p=="string"){if(p.endsWith("%")){var L=b/A.width*100;b=L+"%"}else if(p.endsWith("vw")){var G=b/this.window.innerWidth*100;b=G+"vw"}else if(p.endsWith("vh")){var z=b/this.window.innerHeight*100;b=z+"vh"}}if(m&&typeof m=="string"){if(m.endsWith("%")){var L=y/A.height*100;y=L+"%"}else if(m.endsWith("vw")){var G=y/this.window.innerWidth*100;y=G+"vw"}else if(m.endsWith("vh")){var z=y/this.window.innerHeight*100;y=z+"vh"}}var H={width:this.createSizeForCssProperty(b,"width"),height:this.createSizeForCssProperty(y,"height")};this.flexDir==="row"?H.flexBasis=H.width:this.flexDir==="column"&&(H.flexBasis=H.height);var P=this.state.width!==H.width,k=this.state.height!==H.height,O=this.state.flexBasis!==H.flexBasis,F=P||k||O;F&&Gr.flushSync(function(){i.setState(H)}),this.props.onResize&&F&&this.props.onResize(e,d,this.resizable,I)}},t.prototype.onMouseUp=function(e){var i,n,r=this.state,a=r.isResizing,o=r.direction,l=r.original;if(!(!a||!this.resizable)){var h={width:this.size.width-l.width,height:this.size.height-l.height};this.props.onResizeStop&&this.props.onResizeStop(e,o,this.resizable,h),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(n=this.props.size.height)!==null&&n!==void 0?n:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:vi(vi({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(e){var i,n;this.setState({width:(i=e.width)!==null&&i!==void 0?i:"auto",height:(n=e.height)!==null&&n!==void 0?n:"auto"})},t.prototype.renderResizer=function(e){var i=this,n=this.props,r=n.enable,a=n.handleStyles,o=n.handleClasses,l=n.handleWrapperStyle,h=n.handleWrapperClass,c=n.handleComponent;if(!r)return null;var u=e.filter(function(d){return r[d]!==!1}).map(function(d){return r[d]!==!1?N.createElement(ww,{key:d,direction:d,onResizeStart:i.onResizeStart,replaceStyles:a&&a[d],className:o&&o[d]},c&&c[d]?c[d]:null):null});return N.createElement("div",{className:h,style:l},u)},t.prototype.render=function(){var e=this,i=Object.keys(this.props).reduce(function(a,o){return kw.indexOf(o)!==-1||(a[o]=e.props[o]),a},{}),n=vi(vi(vi({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return N.createElement(r,vi({style:n,className:this.props.className},i,{ref:function(a){a&&(e.resizable=a)}}),this.state.isResizing&&N.createElement("div",{style:this.state.backgroundStyle}),this.renderResizer(["topLeft","top","topRight","left"]),this.props.children,this.renderResizer(["right","bottomLeft","bottom","bottomRight"]))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(N.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var qh=function(s,t){return qh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},qh(s,t)};function Pw(s,t){qh(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Nt=function(){return Nt=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Nt.apply(this,arguments)};function _w(s,t){var e={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(s);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(e[i[n]]=s[i[n]]);return e}var Mw={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},Lw=function(s){return{bottom:s,bottomLeft:s,bottomRight:s,left:s,right:s,top:s,topLeft:s,topRight:s}},Dw=function(s){Pw(t,s);function t(e){var i=s.call(this,e)||this;return i.resizingPosition={x:0,y:0},i.offsetFromParent={left:0,top:0},i.resizableElement={current:null},i.originalPosition={x:0,y:0},i.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:e.maxWidth,maxHeight:e.maxHeight},i.onResizeStart=i.onResizeStart.bind(i),i.onResize=i.onResize.bind(i),i.onResizeStop=i.onResizeStop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrag=i.onDrag.bind(i),i.onDragStop=i.onDragStop.bind(i),i.getMaxSizesFromProps=i.getMaxSizesFromProps.bind(i),i}return t.prototype.componentDidMount=function(){this.updateOffsetFromParent();var e=this.offsetFromParent,i=e.left,n=e.top,r=this.getDraggablePosition(),a=r.x,o=r.y;this.draggable.setState({x:a-i,y:o-n}),this.forceUpdate()},t.prototype.getDraggablePosition=function(){var e=this.draggable.state,i=e.x,n=e.y;return{x:i,y:n}},t.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},t.prototype.getParentSize=function(){return this.resizable.getParentSize()},t.prototype.getMaxSizesFromProps=function(){var e=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,i=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:e,maxHeight:i}},t.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},t.prototype.getOffsetHeight=function(e){var i=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/i;case"body":return document.body.offsetHeight/i;default:return e.offsetHeight}},t.prototype.getOffsetWidth=function(e){var i=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/i;case"body":return document.body.offsetWidth/i;default:return e.offsetWidth}},t.prototype.onDragStart=function(e,i){this.props.onDragStart&&this.props.onDragStart(e,i);var n=this.getDraggablePosition();if(this.originalPosition=n,!!this.props.bounds){var r=this.getParent(),a=this.props.scale,o;if(this.props.bounds==="parent")o=r;else if(this.props.bounds==="body"){var l=r.getBoundingClientRect(),h=l.left,c=l.top,u=document.body.getBoundingClientRect(),d=-(h-r.offsetLeft*a-u.left)/a,f=-(c-r.offsetTop*a-u.top)/a,p=(document.body.offsetWidth-this.resizable.size.width*a)/a+d,m=(document.body.offsetHeight-this.resizable.size.height*a)/a+f;return this.setState({bounds:{top:f,right:p,bottom:m,left:d}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var A=r.getBoundingClientRect(),g=A.left,v=A.top,y=-(g-r.offsetLeft*a)/a,b=-(v-r.offsetTop*a)/a,p=(window.innerWidth-this.resizable.size.width*a)/a+y,m=(window.innerHeight-this.resizable.size.height*a)/a+b;return this.setState({bounds:{top:b,right:p,bottom:m,left:y}})}else typeof this.props.bounds=="string"?o=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(o=this.props.bounds);if(!(!(o instanceof HTMLElement)||!(r instanceof HTMLElement))){var w=o.getBoundingClientRect(),S=w.left,E=w.top,x=r.getBoundingClientRect(),C=x.left,T=x.top,R=(S-C)/a,I=E-T;if(this.resizable){this.updateOffsetFromParent();var L=this.offsetFromParent;this.setState({bounds:{top:I-L.top,right:R+(o.offsetWidth-this.resizable.size.width)-L.left/a,bottom:I+(o.offsetHeight-this.resizable.size.height)-L.top,left:R-L.left/a}})}}}},t.prototype.onDrag=function(e,i){if(this.props.onDrag){var n=this.offsetFromParent,r=n.left,a=n.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(e,Nt(Nt({},i),{x:i.x+r,y:i.y+a}));if(this.props.dragAxis==="x")return this.props.onDrag(e,Nt(Nt({},i),{x:i.x+r,y:this.originalPosition.y+a,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(e,Nt(Nt({},i),{x:this.originalPosition.x+r,y:i.y+a,deltaX:0}))}},t.prototype.onDragStop=function(e,i){if(this.props.onDragStop){var n=this.offsetFromParent,r=n.left,a=n.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(e,Nt(Nt({},i),{x:i.x+r,y:i.y+a}));if(this.props.dragAxis==="x")return this.props.onDragStop(e,Nt(Nt({},i),{x:i.x+r,y:this.originalPosition.y+a,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(e,Nt(Nt({},i),{x:this.originalPosition.x+r,y:i.y+a,deltaX:0}))}},t.prototype.onResizeStart=function(e,i,n){e.stopPropagation(),this.setState({resizing:!0});var r=this.props.scale,a=this.offsetFromParent,o=this.getDraggablePosition();if(this.resizingPosition={x:o.x+a.left,y:o.y+a.top},this.originalPosition=o,this.props.bounds){var l=this.getParent(),h=void 0;this.props.bounds==="parent"?h=l:this.props.bounds==="body"?h=document.body:this.props.bounds==="window"?h=window:typeof this.props.bounds=="string"?h=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(h=this.props.bounds);var c=this.getSelfElement();if(c instanceof Element&&(h instanceof HTMLElement||h===window)&&l instanceof HTMLElement){var u=this.getMaxSizesFromProps(),d=u.maxWidth,f=u.maxHeight,p=this.getParentSize();if(d&&typeof d=="string")if(d.endsWith("%")){var m=Number(d.replace("%",""))/100;d=p.width*m}else d.endsWith("px")&&(d=Number(d.replace("px","")));if(f&&typeof f=="string")if(f.endsWith("%")){var m=Number(f.replace("%",""))/100;f=p.height*m}else f.endsWith("px")&&(f=Number(f.replace("px","")));var A=c.getBoundingClientRect(),g=A.left,v=A.top,y=this.props.bounds==="window"?{left:0,top:0}:h.getBoundingClientRect(),b=y.left,w=y.top,S=this.getOffsetWidth(h),E=this.getOffsetHeight(h),x=i.toLowerCase().endsWith("left"),C=i.toLowerCase().endsWith("right"),T=i.startsWith("top"),R=i.startsWith("bottom");if((x||T)&&this.resizable){var I=(g-b)/r+this.resizable.size.width;this.setState({maxWidth:I>Number(d)?d:I})}if(C||this.props.lockAspectRatio&&!x&&!T){var I=S+(b-g)/r;this.setState({maxWidth:I>Number(d)?d:I})}if((T||x)&&this.resizable){var I=(v-w)/r+this.resizable.size.height;this.setState({maxHeight:I>Number(f)?f:I})}if(R||this.props.lockAspectRatio&&!T&&!x){var I=E+(w-v)/r;this.setState({maxHeight:I>Number(f)?f:I})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(e,i,n)},t.prototype.onResize=function(e,i,n,r){var a=this,o={x:this.originalPosition.x,y:this.originalPosition.y},l=-r.width,h=-r.height,c=["top","left","topLeft","bottomLeft","topRight"];c.includes(i)&&(i==="bottomLeft"?o.x+=l:(i==="topRight"||(o.x+=l),o.y+=h));var u=this.draggable.state;(o.x!==u.x||o.y!==u.y)&&Gr.flushSync(function(){a.draggable.setState(o)}),this.updateOffsetFromParent();var d=this.offsetFromParent,f=this.getDraggablePosition().x+d.left,p=this.getDraggablePosition().y+d.top;this.resizingPosition={x:f,y:p},this.props.onResize&&this.props.onResize(e,i,n,r,{x:f,y:p})},t.prototype.onResizeStop=function(e,i,n,r){this.setState({resizing:!1});var a=this.getMaxSizesFromProps(),o=a.maxWidth,l=a.maxHeight;this.setState({maxWidth:o,maxHeight:l}),this.props.onResizeStop&&this.props.onResizeStop(e,i,n,r,this.resizingPosition)},t.prototype.updateSize=function(e){this.resizable&&this.resizable.updateSize({width:e.width,height:e.height})},t.prototype.updatePosition=function(e){this.draggable.setState(e)},t.prototype.updateOffsetFromParent=function(){var e=this.props.scale,i=this.getParent(),n=this.getSelfElement();if(!i||n===null)return{top:0,left:0};var r=i.getBoundingClientRect(),a=r.left,o=r.top,l=n.getBoundingClientRect(),h=this.getDraggablePosition(),c=i.scrollLeft,u=i.scrollTop;this.offsetFromParent={left:l.left-a+c-h.x*e,top:l.top-o+u-h.y*e}},t.prototype.render=function(){var e=this,i=this.props,n=i.disableDragging,r=i.style,a=i.dragHandleClassName,o=i.position,l=i.onMouseDown,h=i.onMouseUp,c=i.dragAxis,u=i.dragGrid,d=i.bounds,f=i.enableUserSelectHack,p=i.cancel,m=i.children;i.onResizeStart,i.onResize,i.onResizeStop,i.onDragStart,i.onDrag,i.onDragStop;var A=i.resizeHandleStyles,g=i.resizeHandleClasses,v=i.resizeHandleComponent,y=i.enableResizing,b=i.resizeGrid,w=i.resizeHandleWrapperClass,S=i.resizeHandleWrapperStyle,E=i.scale,x=i.allowAnyClick,C=_w(i,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick"]),T=this.props.default?Nt({},this.props.default):void 0;delete C.default;var R=n||a?{cursor:"auto"}:{cursor:"move"},I=Nt(Nt(Nt({},Mw),R),r),L=this.offsetFromParent,G=L.left,z=L.top,H;o&&(H={x:o.x-G,y:o.y-z});var P=this.state.resizing?void 0:H,k=this.state.resizing?"both":c;return N.createElement(yw,{ref:function(O){O&&(e.draggable=O)},handle:a?".".concat(a):void 0,defaultPosition:T,onMouseDown:l,onMouseUp:h,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:k,disabled:n,grid:u,bounds:d?this.state.bounds:void 0,position:P,enableUserSelectHack:f,cancel:p,scale:E,allowAnyClick:x,nodeRef:this.resizableElement},N.createElement(Rw,Nt({},C,{ref:function(O){O&&(e.resizable=O,e.resizableElement.current=O.resizable)},defaultSize:T,size:this.props.size,enable:typeof y=="boolean"?Lw(y):y,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:I,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:b,handleWrapperClass:w,handleWrapperStyle:S,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:A,handleClasses:g,handleComponent:v,scale:this.props.scale}),m))},t.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},t}(N.PureComponent);const Iw=({highlight:s,onChange:t,isScrolledTo:e,bounds:i,onContextMenu:n,onEditStart:r,style:a})=>{const o=e?"AreaHighlight--scrolledTo":"",l=`${s.position.boundingRect.width}${s.position.boundingRect.height}${s.position.boundingRect.left}${s.position.boundingRect.top}`;return D.jsx("div",{className:`AreaHighlight ${o}`,onContextMenu:n,children:D.jsx(Dw,{className:"AreaHighlight__part",onDragStop:(h,c)=>{const u={...s.position.boundingRect,top:c.y,left:c.x};t&&t(u)},onResizeStop:(h,c,u,d,f)=>{const p={top:f.y,left:f.x,width:u.offsetWidth,height:u.offsetHeight,pageNumber:pr(u)?.number||-1};t&&t(p)},onDragStart:r,onResizeStart:r,default:{x:s.position.boundingRect.left,y:s.position.boundingRect.top,width:s.position.boundingRect.width,height:s.position.boundingRect.height},bounds:i,onClick:h=>{h.stopPropagation(),h.preventDefault()},style:a},l)})};var gr={};gr.d=(s,t)=>{for(var e in t)gr.o(t,e)&&!gr.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})};gr.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var Q=globalThis.pdfjsLib={};gr.d(Q,{AbortException:()=>Xs,AnnotationEditorLayer:()=>UE,AnnotationEditorParamsType:()=>q,AnnotationEditorType:()=>Z,AnnotationEditorUIManager:()=>Nr,AnnotationLayer:()=>OE,AnnotationMode:()=>ns,CMapCompressionType:()=>Qh,ColorPicker:()=>Rv,DOMSVGFactory:()=>wu,DrawLayer:()=>WE,FeatureTest:()=>Pe,GlobalWorkerOptions:()=>mr,ImageKind:()=>Ua,InvalidPDFException:()=>Vm,MissingPDFException:()=>Vs,OPS:()=>ri,OutputScale:()=>$h,PDFDataRangeTransport:()=>vv,PDFDateString:()=>ev,PDFWorker:()=>Ya,PasswordResponses:()=>Bw,PermissionFlag:()=>Ow,PixelsPerInch:()=>Pn,RenderingCancelledException:()=>Eu,TextLayer:()=>rc,UnexpectedResponseException:()=>Vo,Util:()=>j,VerbosityLevel:()=>Wo,XfaLayer:()=>Av,build:()=>yE,createValidAbsoluteUrl:()=>Uw,fetchData:()=>qo,getDocument:()=>oE,getFilenameFromUrl:()=>$w,getPdfFilenameFromUrl:()=>tS,getXfaPageViewport:()=>eS,isDataScheme:()=>Ko,isPdfFile:()=>xu,noContextMenu:()=>ti,normalizeUnicode:()=>qw,setLayerDimensions:()=>Hs,shadow:()=>it,version:()=>vE});const re=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Ym=[1,0,0,1,0,0],Kh=[.001,0,0,.001,0,0],Fw=1e7,zl=1.35,Ie={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ns={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Nw="pdfjs_internal_editor_",Z={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},q={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Ow={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},te={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ua={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Lt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Wn={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Wo={ERRORS:0,WARNINGS:1,INFOS:5},Qh={NONE:0,BINARY:1},ri={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Bw={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Go=Wo.WARNINGS;function Hw(s){Number.isInteger(s)&&(Go=s)}function zw(){return Go}function Yo(s){Go>=Wo.INFOS&&console.log(`Info: ${s}`)}function $(s){Go>=Wo.WARNINGS&&console.log(`Warning: ${s}`)}function Mt(s){throw new Error(s)}function Ht(s,t){s||Mt(t)}function jw(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Uw(s,t=null,e=null){if(!s)return null;try{if(e&&typeof s=="string"&&(e.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),e.tryConvertEncoding))try{s=Xw(s)}catch{}const i=t?new URL(s,t):new URL(s);if(jw(i))return i}catch{}return null}function it(s,t,e,i=!1){return Object.defineProperty(s,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Es=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();let Zh=class extends Es{constructor(t,e){super(t,"PasswordException"),this.code=e}},Jh=class extends Es{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},Vm=class extends Es{constructor(t){super(t,"InvalidPDFException")}},Vs=class extends Es{constructor(t){super(t,"MissingPDFException")}},Vo=class extends Es{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},Ww=class extends Es{constructor(t){super(t,"FormatError")}},Xs=class extends Es{constructor(t){super(t,"AbortException")}};function Xm(s){(typeof s!="object"||s?.length===void 0)&&Mt("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const i=[];for(let n=0;n<t;n+=e){const r=Math.min(n+e,t),a=s.subarray(n,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Xo(s){typeof s!="string"&&Mt("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=s.charCodeAt(i)&255;return e}function Gw(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function Au(s){const t=Object.create(null);for(const[e,i]of s)t[e]=i;return t}function Yw(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function Vw(){try{return new Function(""),!0}catch{return!1}}let Pe=class{static get isLittleEndian(){return it(this,"isLittleEndian",Yw())}static get isEvalSupported(){return it(this,"isEvalSupported",Vw())}static get isOffscreenCanvasSupported(){return it(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?it(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):it(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return it(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}};const jl=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));let j=class{static makeHexColor(t,e,i){return`#${jl[t]}${jl[e]}${jl[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],n=t[0]*e[1]+t[1]*e[3]+e[5];return[i,n]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],n=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[n,r]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),n=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],n[0],r[0],a[0]),Math.min(i[1],n[1],r[1],a[1]),Math.max(i[0],n[0],r[0],a[0]),Math.max(i[1],n[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],o=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-r*n))/2,h=o+l||1,c=o-l||1;return[Math.sqrt(h),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[i,r,n,a]}static#t(t,e,i,n,r,a,o,l,h,c){if(h<=0||h>=1)return;const u=1-h,d=h*h,f=d*h,p=u*(u*(u*t+3*h*e)+3*d*i)+f*n,m=u*(u*(u*r+3*h*a)+3*d*o)+f*l;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],m),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],m)}static#e(t,e,i,n,r,a,o,l,h,c,u,d){if(Math.abs(h)<1e-12){Math.abs(c)>=1e-12&&this.#t(t,e,i,n,r,a,o,l,-u/c,d);return}const f=c**2-4*u*h;if(f<0)return;const p=Math.sqrt(f),m=2*h;this.#t(t,e,i,n,r,a,o,l,(-c+p)/m,d),this.#t(t,e,i,n,r,a,o,l,(-c-p)/m,d)}static bezierBoundingBox(t,e,i,n,r,a,o,l,h){return h?(h[0]=Math.min(h[0],t,o),h[1]=Math.min(h[1],e,l),h[2]=Math.max(h[2],t,o),h[3]=Math.max(h[3],e,l)):h=[Math.min(t,o),Math.min(e,l),Math.max(t,o),Math.max(e,l)],this.#e(t,i,r,o,e,n,a,l,3*(-t+3*(i-r)+o),6*(t-2*i+r),3*(i-t),h),this.#e(t,i,r,o,e,n,a,l,3*(-e+3*(n-a)+l),6*(e-2*n+a),3*(n-e),h),h}};function Xw(s){return decodeURIComponent(escape(s))}let Ul=null,wf=null;function qw(s){return Ul||(Ul=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,wf=new Map([["ﬅ","ſt"]])),s.replaceAll(Ul,(t,e,i)=>e?e.normalize("NFKC"):wf.get(i))}function Kw(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(s);else for(let t=0;t<32;t++)s[t]=Math.floor(Math.random()*255);return Xm(s)}const bu="pdfjs_internal_id_",Ti={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};let qm=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,n,r){return"none"}destroy(t=!1){}},Km=class{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Mt("Abstract method `_createCanvas` called.")}},Qm=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?Qh.BINARY:Qh.NONE;return this._fetchData(e,i).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){Mt("Abstract method `_fetchData` called.")}},Zm=class{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){Mt("Abstract method `_fetchData` called.")}},Qw=class{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Mt("Abstract method `_createSVG` called.")}};const _i="http://www.w3.org/2000/svg";let Pn=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF},Zw=class extends qm{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#l(){return this.#e||=new Map}get#u(){return this.#s||=new Map}get#c(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#r.createElementNS(_i,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#r.createElementNS(_i,"defs"),t.append(i),i.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const l=t[0],h=new Array(256);for(let u=0;u<256;u++)h[u]=l[u]/255;const c=h.join(",");return[c,c,c]}const[e,i,n]=t,r=new Array(256),a=new Array(256),o=new Array(256);for(let l=0;l<256;l++)r[l]=e[l]/255,a[l]=i[l]/255,o[l]=n[l]/255;return[r.join(","),a.join(","),o.join(",")]}#o(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(Ko(e)?$('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=e.split("#",1)[0])}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#l.get(t);if(e)return e;const[i,n,r]=this.#d(t),a=t.length===1?i:`${i}${n}${r}`;if(e=this.#l.get(a),e)return this.#l.set(t,e),e;const o=`g_${this.#n}_transfer_map_${this.#a++}`,l=this.#o(o);this.#l.set(t,l),this.#l.set(a,l);const h=this.#g(o);return this.#m(i,n,r,h),l}addHCMFilter(t,e){const i=`${t}-${e}`,n="base";let r=this.#u.get(n);if(r?.key===i||(r?(r.filter?.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},this.#u.set(n,r)),!t||!e))return r.url;const a=this.#y(t);t=j.makeHexColor(...a);const o=this.#y(e);if(e=j.makeHexColor(...o),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return r.url;const l=new Array(256);for(let f=0;f<=255;f++){const p=f/255;l[f]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}const h=l.join(","),c=`g_${this.#n}_hcm_filter`,u=r.filter=this.#g(c);this.#m(h,h,h,u),this.#p(u);const d=(f,p)=>{const m=a[f]/255,A=o[f]/255,g=new Array(p+1);for(let v=0;v<=p;v++)g[v]=m+v/p*(A-m);return g.join(",")};return this.#m(d(0,5),d(1,5),d(2,5),u),r.url=this.#o(c),r.url}addAlphaFilter(t){let e=this.#l.get(t);if(e)return e;const[i]=this.#d([t]),n=`alpha_${i}`;if(e=this.#l.get(n),e)return this.#l.set(t,e),e;const r=`g_${this.#n}_alpha_map_${this.#a++}`,a=this.#o(r);this.#l.set(t,a),this.#l.set(n,a);const o=this.#g(r);return this.#v(i,o),a}addLuminosityFilter(t){let e=this.#l.get(t||"luminosity");if(e)return e;let i,n;if(t?([i]=this.#d([t]),n=`luminosity_${i}`):n="luminosity",e=this.#l.get(n),e)return this.#l.set(t,e),e;const r=`g_${this.#n}_luminosity_map_${this.#a++}`,a=this.#o(r);this.#l.set(t,a),this.#l.set(n,a);const o=this.#g(r);return this.#h(o),t&&this.#v(i,o),a}addHighlightHCMFilter(t,e,i,n,r){const a=`${e}-${i}-${n}-${r}`;let o=this.#u.get(t);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#u.set(t,o)),!e||!i))return o.url;const[l,h]=[e,i].map(this.#y.bind(this));let c=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),u=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[d,f]=[n,r].map(this.#y.bind(this));u<c&&([c,u,d,f]=[u,c,f,d]),this.#c.style.color="";const p=(g,v,y)=>{const b=new Array(256),w=(u-c)/y,S=g/255,E=(v-g)/(255*y);let x=0;for(let C=0;C<=y;C++){const T=Math.round(c+C*w),R=S+C*E;for(let I=x;I<=T;I++)b[I]=R;x=T+1}for(let C=x;C<256;C++)b[C]=b[x-1];return b.join(",")},m=`g_${this.#n}_hcm_${t}_filter`,A=o.filter=this.#g(m);return this.#p(A),this.#m(p(d[0],f[0],5),p(d[1],f[1],5),p(d[2],f[2],5),A),o.url=this.#o(m),o.url}destroy(t=!1){t&&this.#u.size!==0||(this.#i&&(this.#i.parentNode.parentNode.remove(),this.#i=null),this.#e&&(this.#e.clear(),this.#e=null),this.#a=0)}#h(t){const e=this.#r.createElementNS(_i,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(_i,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(_i,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#f(t,e,i){const n=this.#r.createElementNS(_i,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),t.append(n)}#m(t,e,i,n){const r=this.#r.createElementNS(_i,"feComponentTransfer");n.append(r),this.#f(r,"feFuncR",t),this.#f(r,"feFuncG",e),this.#f(r,"feFuncB",i)}#v(t,e){const i=this.#r.createElementNS(_i,"feComponentTransfer");e.append(i),this.#f(i,"feFuncA",t)}#y(t){return this.#c.style.color=t,Cu(getComputedStyle(this.#c).getPropertyValue("color"))}},Jw=class extends Km{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}};async function qo(s,t="text"){if($n(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const n=new XMLHttpRequest;n.open("GET",s,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}i(new Error(n.statusText))}},n.send(null)})}let Jm=class extends Qm{_fetchData(t,e){return qo(t,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):Xo(i),compressionType:e}))}},$m=class extends Zm{_fetchData(t){return qo(t,"arraybuffer").then(e=>new Uint8Array(e))}},wu=class extends Qw{_createSVG(t){return document.createElementNS(_i,t)}},Su=class tv{constructor({viewBox:t,scale:e,rotation:i,offsetX:n=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=n,this.offsetY=r;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let h,c,u,d;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,c=0,u=0,d=1;break;case 90:h=0,c=1,u=1,d=0;break;case 270:h=0,c=-1,u=-1,d=0;break;case 0:h=1,c=0,u=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(u=-u,d=-d);let f,p,m,A;h===0?(f=Math.abs(l-t[1])*e+n,p=Math.abs(o-t[0])*e+r,m=(t[3]-t[1])*e,A=(t[2]-t[0])*e):(f=Math.abs(o-t[0])*e+n,p=Math.abs(l-t[1])*e+r,m=(t[2]-t[0])*e,A=(t[3]-t[1])*e),this.transform=[h*e,c*e,u*e,d*e,f-h*e*o-u*e*l,p-c*e*o-d*e*l],this.width=m,this.height=A}get rawDims(){const{viewBox:t}=this;return it(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new tv({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){return j.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=j.applyTransform([t[0],t[1]],this.transform),i=j.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return j.applyInverseTransform([t,e],this.transform)}},Eu=class extends Es{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};function Ko(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function xu(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function $w(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function tS(s,t="document.pdf"){if(typeof s!="string")return t;if(Ko(s))return $('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=e.exec(s);let r=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||t}let Sf=class{started=Object.create(null);times=[];time(t){t in this.started&&$(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||$(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:n,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-n}ms
`);return t.join("")}};function $n(s,t){try{const{protocol:e}=t?new URL(s,t):new URL(s);return e==="http:"||e==="https:"}catch{return!1}}function ti(s){s.preventDefault()}function Ef(s){console.log("Deprecated API usage: "+s)}let xf,ev=class{static toDateObject(t){if(!t||typeof t!="string")return null;xf||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=xf.exec(t);if(!e)return null;const i=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const h=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,h==="-"?(a+=c,o+=u):h==="+"&&(a-=c,o-=u),new Date(Date.UTC(i,n,r,a,o,l))}};function eS(s,{scale:t=1,rotation:e=0}){const{width:i,height:n}=s.attributes.style,r=[0,0,parseInt(i),parseInt(n)];return new Su({viewBox:r,scale:t,rotation:e})}function Cu(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):($(`Not a valid color format: "${s}"`),[0,0,0])}function iS(s){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of s.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;s.set(e,Cu(i))}t.remove()}function mt(s){const{a:t,b:e,c:i,d:n,e:r,f:a}=s.getTransform();return[t,e,i,n,r,a]}function ki(s){const{a:t,b:e,c:i,d:n,e:r,f:a}=s.getTransform().invertSelf();return[t,e,i,n,r,a]}function Hs(s,t,e=!1,i=!0){if(t instanceof Su){const{pageWidth:n,pageHeight:r}=t.rawDims,{style:a}=s,o=Pe.isCSSRoundSupported,l=`var(--scale-factor) * ${n}px`,h=`var(--scale-factor) * ${r}px`,c=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,u=o?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!e||t.rotation%180===0?(a.width=c,a.height=u):(a.width=u,a.height=c)}i&&s.setAttribute("data-main-rotation",t.rotation)}class $h{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}let sS=class Wa{#t=null;#e=null;#i;#n=null;#r=null;static#s=null;constructor(t){this.#i=t,Wa.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;t.addEventListener("contextmenu",ti,{signal:e}),t.addEventListener("pointerdown",Wa.#a,{signal:e});const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const n=this.#i.toolbarPosition;if(n){const{style:r}=t,a=this.#i._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),t}get div(){return this.#t}static#a(t){t.stopPropagation()}#l(t){this.#i._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#u(t){this.#i._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#c(t){const e=this.#i._uiManager._signal;t.addEventListener("focusin",this.#l.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ti,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown()}#d(){const{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",Wa.#s[t]),this.#c(i),i.addEventListener("click",n=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#o(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#c(e),this.#n.prepend(e,this.#o),this.#r=t}addColorPicker(t){this.#e=t;const e=t.renderButton();this.#c(e),this.#n.prepend(e,this.#o)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}},nS=class{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ti,{signal:this.#i._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#s(),t}#r(t,e){let i=0,n=0;for(const r of t){const a=r.y+r.height;if(a<i)continue;const o=r.x+(e?r.width:0);if(a>i){n=o,i=a;continue}e?o>n&&(n=o):o<n&&(n=o)}return[e?1-n:n,i]}show(t,e,i){const[n,r]=this.#r(e,i),{style:a}=this.#e||=this.#n();t.append(this.#e),a.insetInlineEnd=`${100*n}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#i._signal;t.addEventListener("contextmenu",ti,{signal:i}),t.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:i}),this.#t.append(t)}};function Ao(s,t,e){for(const i of e)t.addEventListener(i,s[i].bind(s))}function rS(s){return Math.round(Math.min(255,Math.max(1,255*s))).toString(16).padStart(2,"0")}let aS=class{#t=0;get id(){return`${Nw}${this.#t++}`}},oS=class iv{#t=Kw();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const r=n.decode().then(()=>(i.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return it(this,"_isSVGFittingCanvas",r)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let n;if(typeof e=="string"?(i.url=e,n=await qo(e,"blob")):e instanceof File?n=i.file=e:e instanceof Blob&&(n=e),n.type==="image/svg+xml"){const r=iv._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((h,c)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,h()},a.onload=async()=>{const u=i.svgUrl=a.result;o.src=await r?`${u}#svgView(preserveAspectRatio(none))`:u},o.onerror=a.onerror=c});a.readAsDataURL(n),await l}else i.bitmap=await createImageBitmap(n);i.refCounter=1}catch(n){console.error(n),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:n,type:r}=t;return this.#n(`${e}_${i}_${n}_${r}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;const n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const n=new OffscreenCanvas(i.width,i.height);n.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=n.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}},lS=class{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:n,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(n&&t(),this.#e)return;const l={cmd:t,undo:e,post:i,type:r};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(l);return}if(a&&this.#t[this.#n].type===r){o&&(l.undo=this.#t[this.#n].undo),this.#t[this.#n]=l;return}const h=this.#n+1;h===this.#i?this.#t.splice(0,1):(this.#n=h,h<this.#t.length&&this.#t.splice(h)),this.#t.push(l)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}destroy(){this.#t=null}},Yr=class{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Pe.platform;for(const[i,n,r={}]of t)for(const a of i){const o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:n,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:n,options:r}),this.allKeys.add(a.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:n,options:{bubbles:r=!1,args:a=[],checker:o=null}}=i;o&&!o(t,e)||(n.bind(t,...a,e)(),r||(e.stopPropagation(),e.preventDefault()))}},hS=class sv{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return iS(t),it(this,"_colors",t)}convert(t){const e=Cu(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,n]of this._colors)if(n.every((r,a)=>r===e[a]))return sv._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?j.makeHexColor(...e):t}},Nr=class tc{#t=new AbortController;#e=null;#i=new Map;#n=new Map;#r=null;#s=null;#a=null;#l=new lS;#u=null;#c=0;#d=new Set;#o=null;#h=null;#p=new Set;#g=!1;#f=!1;#m=!1;#v=null;#y=null;#w=null;#x=null;#T=!1;#k=null;#M=new aS;#C=!1;#b=!1;#A=null;#E=null;#P=null;#_=null;#R=Z.NONE;#S=new Set;#D=null;#L=null;#F=null;#O={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#z=null;#H=null;#j=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=tc.prototype,e=a=>a.#H.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return it(this,"_keyboardManager",new Yr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#H.contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#H.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,i,n,r,a,o,l,h,c,u){const d=this._signal=this.#t.signal;this.#H=t,this.#j=e,this.#r=i,this._eventBus=n,n._on("editingaction",this.onEditingAction.bind(this),{signal:d}),n._on("pagechanging",this.onPageChanging.bind(this),{signal:d}),n._on("scalechanging",this.onScaleChanging.bind(this),{signal:d}),n._on("rotationchanging",this.onRotationChanging.bind(this),{signal:d}),n._on("setpreference",this.onSetPreference.bind(this),{signal:d}),n._on("switchannotationeditorparams",f=>this.updateParams(f.type,f.value),{signal:d}),this.#J(),this.#et(),this.#Q(),this.#s=r.annotationStorage,this.#v=r.filterFactory,this.#L=a,this.#x=o||null,this.#g=l,this.#f=h,this.#m=c,this.#_=u||null,this.viewParameters={realScale:Pn.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#n.values())t.destroy();this.#n.clear(),this.#i.clear(),this.#p.clear(),this.#e=null,this.#S.clear(),this.#l.destroy(),this.#r?.destroy(),this.#k?.hide(),this.#k=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#z&&(clearTimeout(this.#z),this.#z=null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#_}get useNewAltTextFlow(){return this.#f}get useNewAltTextWhenAddingImage(){return this.#m}get hcmFilter(){return it(this,"hcmFilter",this.#L?this.#v.addHCMFilter(this.#L.foreground,this.#L.background):"none")}get direction(){return it(this,"direction",getComputedStyle(this.#H).direction)}get highlightColors(){return it(this,"highlightColors",this.#x?new Map(this.#x.split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return it(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){this.#P=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#m=e;break}}onPageChanging({pageNumber:t}){this.#c=t-1}focusMainContainer(){this.#H.focus()}findParent(t,e){for(const i of this.#n.values()){const{x:n,y:r,width:a,height:o}=i.div.getBoundingClientRect();if(t>=n&&t<=n+a&&e>=r&&e<=r+o)return i}return null}disableUserSelect(t=!1){this.#j.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Pn.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#V(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#n.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:a}=e,o=e.toString(),h=this.#q(e).closest(".textLayer"),c=this.getSelectionBoxes(h);if(!c)return;e.empty();const u=this.#V(h),d=this.#R===Z.NONE,f=()=>{u?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:c,anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:a,text:o}),d&&this.showAllEditors("highlight",!0,!0)};if(d){this.switchToMode(Z.HIGHLIGHT,f);return}f()}#G(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#q(t).closest(".textLayer"),n=this.getSelectionBoxes(i);n&&(this.#k||=new nS(this),this.#k.show(i,n,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#X(){const t=document.getSelection();if(!t||t.isCollapsed){this.#D&&(this.#k?.hide(),this.#D=null,this.#B({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#D)return;const n=this.#q(t).closest(".textLayer");if(!n){this.#D&&(this.#k?.hide(),this.#D=null,this.#B({hasSelectedText:!1}));return}if(this.#k?.hide(),this.#D=e,this.#B({hasSelectedText:!0}),!(this.#R!==Z.HIGHLIGHT&&this.#R!==Z.NONE)&&(this.#R===Z.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#T=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#R===Z.HIGHLIGHT?this.#V(n):null;r?.toggleDrawing();const a=new AbortController,o=this.combinedSignal(a),l=h=>{h.type==="pointerup"&&h.button!==0||(a.abort(),r?.toggleDrawing(!0),h.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})}}#K(t=""){this.#R===Z.HIGHLIGHT?this.highlightSelection(t):this.#g&&this.#G()}#J(){document.addEventListener("selectionchange",this.#X.bind(this),{signal:this._signal})}#rt(){if(this.#w)return;this.#w=new AbortController;const t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#at(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#T&&(this.#T=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#E=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#E)return;const[t,e]=this.#E;this.#E=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Q(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ot(){this.#A?.abort(),this.#A=null}#$(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#tt(){this.#u?.abort(),this.#u=null}#et(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Q(),this.#$()}removeEditListeners(){this.#ot(),this.#tt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#S){const n=i.serialize(!0);n&&e.push(n)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){$(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const l of i){const h=await n.deserialize(l);if(!h)return;r.push(h)}const a=()=>{for(const l of r)this.#N(l);this.#st(r)},o=()=>{for(const l of r)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){$(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#R!==Z.NONE&&!this.isEditorHandlingKeyboard&&tc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#T&&(this.#T=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#B(t){Object.entries(t).some(([i,n])=>this.#O[i]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#O,t)}),this.#R===Z.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#W([[q.HIGHLIGHT_FREE,!0]]))}#W(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#rt(),this.#$(),this.#B({isEditing:this.#R!==Z.NONE,isEmpty:this.#Z(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#at(),this.#tt(),this.#B({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(const e of this.#h)this.#W(e.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#n.get(this.#c)}getLayer(t){return this.#n.get(t)}get currentPageIndex(){return this.#c}addLayer(t){this.#n.set(t.pageIndex,t),this.#C?t.enable():t.disable()}removeLayer(t){this.#n.delete(t.pageIndex)}async updateMode(t,e=null,i=!1){if(this.#R!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#R=t,t===Z.NONE){this.setEditingState(!1),this.#lt(),this.#I.resolve();return}this.setEditingState(!0),await this.#it(),this.unselectAll();for(const n of this.#n.values())n.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const n of this.#i.values())n.annotationElementId===e?(this.setSelected(n),n.enterInEditMode()):n.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#R&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#h){switch(t){case q.CREATE:this.currentLayer.addNewEditor();return;case q.HIGHLIGHT_DEFAULT_COLOR:this.#P?.updateColor(e);break;case q.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#F||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const i of this.#S)i.updateParams(t,e);for(const i of this.#h)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const r of this.#i.values())r.editorType===t&&r.show(e);(this.#F?.get(q.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#W([[q.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#b!==t){this.#b=t;for(const e of this.#n.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#it(){if(!this.#C){this.#C=!0;const t=[];for(const e of this.#n.values())t.push(e.enable());await Promise.all(t);for(const e of this.#i.values())e.enable()}}#lt(){if(this.unselectAll(),this.#C){this.#C=!1;for(const t of this.#n.values())t.disable();for(const t of this.#i.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#i.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#i.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#d.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#d.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#d.has(t)}removeDeletedAnnotationElement(t){this.#d.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#N(t){const e=this.#n.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#W(t.propertiesToUpdate))}get#Y(){let t=null;for(t of this.#S);return t}updateUI(t){this.#Y===t&&this.#W(t.propertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#B({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#W(t.propertiesToUpdate),this.#B({hasSelectedEditor:!0})}setSelected(t){for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#W(t.propertiesToUpdate),this.#B({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#B({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#B({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Z()})}redo(){this.#l.redo(),this.#B({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#Z()})}addCommands(t){this.#l.add(t),this.#B({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Z()})}#Z(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#S],e=()=>{for(const n of t)n.remove()},i=()=>{for(const n of t)this.#N(n)};this.addCommands({cmd:e,undo:i,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#st(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#B({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#st(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#R!==Z.NONE))&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#B({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=t,this.#U[1]+=e;const[n,r]=this.#U,a=[...this.#S],o=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const l of a)this.#i.has(l.id)&&l.translateInPage(n,r)},undo:()=>{for(const l of a)this.#i.has(l.id)&&l.translateInPage(-n,-r)},mustExec:!1})},o);for(const l of a)l.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(const t of this.#S)this.#o.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);const t=this.#o;this.#o=null;let e=!1;for(const[{x:n,y:r,pageIndex:a},o]of t)o.newX=n,o.newY=r,o.newPageIndex=a,e||=n!==o.savedX||r!==o.savedY||a!==o.savedPageIndex;if(!e)return!1;const i=(n,r,a,o)=>{if(this.#i.has(n.id)){const l=this.#n.get(o);l?n._setParentAndPosition(l,r,a):(n.pageIndex=o,n.x=r,n.y=a)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:a,newPageIndex:o}]of t)i(n,r,a,o)},undo:()=>{for(const[n,{savedX:r,savedY:a,savedPageIndex:o}]of t)i(n,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#o)for(const i of this.#o.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#R}get imageManager(){return it(this,"imageManager",new oS)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,c=e.rangeCount;h<c;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:i,y:n,width:r,height:a}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(h,c,u,d)=>({x:(c-n)/a,y:1-(h+u-i)/r,width:d/a,height:u/r});break;case"180":o=(h,c,u,d)=>({x:1-(h+u-i)/r,y:1-(c+d-n)/a,width:u/r,height:d/a});break;case"270":o=(h,c,u,d)=>({x:1-(c+d-n)/a,y:(h-i)/r,width:d/a,height:u/r});break;default:o=(h,c,u,d)=>({x:(h-i)/r,y:(c-n)/a,width:u/r,height:d/a});break}const l=[];for(let h=0,c=e.rangeCount;h<c;h++){const u=e.getRangeAt(h);if(!u.collapsed)for(const{x:d,y:f,width:p,height:m}of u.getClientRects())p===0||m===0||l.push(o(d,f,p,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#a||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#a?.delete(t)}renderAnnotationElement(t){const e=this.#a?.get(t.data.id);if(!e)return;const i=this.#s.getRawValue(e);i&&(this.#R===Z.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}},Cf=class si{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=!1;#a=null;#l=null;#u=null;#c=null;#d=!1;static#o=null;static _l10nPromise=null;constructor(t){this.#l=t,this.#d=t._uiManager.useNewAltTextFlow,si.#o||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){si._l10nPromise||=t}async render(){const t=this.#i=document.createElement("button");t.className="altText";let e;this.#d?(t.classList.add("new"),e=await si._l10nPromise.get(si.#o.missing)):e=await si._l10nPromise.get("pdfjs-editor-alt-text-button-label"),t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const i=this.#l._uiManager._signal;t.addEventListener("contextmenu",ti,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const n=r=>{r.preventDefault(),this.#l._uiManager.editAltText(this.#l),this.#d&&this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#h}})};return t.addEventListener("click",n,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#s=!0,n(r))},{signal:i}),await this.#p(),t}get#h(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#d?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#d?this.#t!==null||!!this.#u:this.isEmpty()}get guessedText(){return this.#u}async setGuessedText(t){this.#t===null&&(this.#u=t,this.#c=await si._l10nPromise.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer")({generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#d||this.#t){this.#a?.remove(),this.#a=null;return}if(!this.#a){const e=this.#a=document.createElement("div");e.className="noAltTextBadge",this.#l.div.append(e)}this.#a.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#u===e&&(e=this.#c),{altText:e,decorative:this.#e,guessedText:this.#u,textWithDisclaimer:this.#c}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:n,cancel:r=!1}){i&&(this.#u=i,this.#c=n),!(this.#t===t&&this.#e===e)&&(r||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!t)}shown(){this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#h}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a?.remove(),this.#a=null}async#p(){const t=this.#i;if(!t)return;if(this.#d){if(t.classList.toggle("done",!!this.#t),si._l10nPromise.get(si.#o[this.#h]).then(n=>{t.setAttribute("aria-label",n);for(const r of t.childNodes)if(r.nodeType===Node.TEXT_NODE){r.textContent=n;break}}),!this.#t){this.#n?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#n?.remove();return}t.classList.add("done"),si._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(n=>{t.setAttribute("aria-label",n)})}let e=this.#n;if(!e){this.#n=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#l.id}`;const n=100,r=this.#l._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#n.classList.add("show"),this.#l._reportTelemetry({action:"alt_text_tooltip"})},n)},{signal:r}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n?.classList.remove("show")},{signal:r})}e.innerText=this.#e?await si._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#t,e.parentNode||t.append(e),this.#l.getImageForAltText()?.setAttribute("aria-describedby",e.id)}},ht=class Dt{#t=null;#e=null;#i=null;#n=!1;#r=!1;#s=null;#a=null;#l=null;#u="";#c=!1;#d=null;#o=!1;#h=!1;#p=!1;#g=null;#f=0;#m=0;#v=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10nPromise=null;static _l10nResizer=null;#y=!1;#w=Dt._zIndex++;static _borderLineWidth=-1;static _colorManager=new hS;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Dt.prototype._resizeWithKeyboard,e=Nr.TRANSLATE_SMALL,i=Nr.TRANSLATE_BIG;return it(this,"_resizerKeyboardManager",new Yr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Dt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:n,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[r,a];const[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return it(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new cS({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,i){if(Dt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Dt._l10nPromise||=new Map([...["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-new-alt-text-added-button-label","pdfjs-editor-new-alt-text-missing-button-label","pdfjs-editor-new-alt-text-to-review-button-label"].map(r=>[r,t.get(r)]),...["pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer"].map(r=>[r,t.get.bind(t,r)])]),i?.strings)for(const r of i.strings)Dt._l10nPromise.set(r,t.get(r));if(Dt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Dt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Mt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(t){this.#y=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#w}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#F(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#c?this.#c=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,n){const[r,a]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/r,this.y=(e+n)/a,this.fixAndSetPosition()}#x([t,e],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/t,this.y+=n/e,this.fixAndSetPosition()}translate(t,e){this.#x(this.parentDimensions,t,e)}translateInPage(t,e){this.#d||=[this.x,this.y],this.#x(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#d||=[this.x,this.y];const[i,n]=this.parentDimensions;if(this.x+=t/i,this.y+=e/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:c}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,c)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,l]=this.getBaseTranslation();r+=o,a+=l,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Dt,n=i/t,r=i/e;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,i]=this.pageDimensions;let{x:n,y:r,width:a,height:o}=this;if(a*=e,o*=i,n*=e,r*=i,this._mustFixPosition)switch(t){case 0:n=Math.max(0,Math.min(e-a,n)),r=Math.max(0,Math.min(i-o,r));break;case 90:n=Math.max(0,Math.min(e-o,n)),r=Math.min(i,Math.max(a,r));break;case 180:n=Math.min(e,Math.max(a,n)),r=Math.min(i,Math.max(o,r));break;case 270:n=Math.min(e,Math.max(o,n)),r=Math.max(0,Math.min(i-a,r));break}this.x=n/=e,this.y=r/=i;const[l,h]=this.getBaseTranslation();n+=l,r+=h;const{style:c}=this.div;c.left=`${(100*n).toFixed(2)}%`,c.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}static#T(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Dt.#T(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Dt.#T(t,e,360-this.parentRotation)}#k(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,n]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,n=i.endsWith("%"),r=!this.#r&&e.endsWith("%");if(n&&r)return;const[a,o]=this.parentDimensions;n||(t.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!this.#r&&!r&&(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#M(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const n=document.createElement("div");this.#s.append(n),n.classList.add("resizer",i),n.setAttribute("data-resizer-name",i),n.addEventListener("pointerdown",this.#C.bind(this,i),{signal:e}),n.addEventListener("contextmenu",ti,{signal:e}),n.tabIndex=-1}this.div.prepend(this.#s)}#C(t,e){e.preventDefault();const{isMac:i}=Pe.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const n=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#A.bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",ti,{signal:a});const o=this.x,l=this.y,h=this.width,c=this.height,u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#b(o,l,h,c)};window.addEventListener("pointerup",f,{signal:a}),window.addEventListener("blur",f,{signal:a})}#b(t,e,i,n){const r=this.x,a=this.y,o=this.width,l=this.height;r===t&&a===e&&o===i&&l===n||this.addCommands({cmd:()=>{this.width=o,this.height=l,this.x=r,this.y=a;const[h,c]=this.parentDimensions;this.setDims(h*o,c*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=n,this.x=t,this.y=e;const[h,c]=this.parentDimensions;this.setDims(h*i,c*n),this.fixAndSetPosition()},mustExec:!0})}#A(t,e){const[i,n]=this.parentDimensions,r=this.x,a=this.y,o=this.width,l=this.height,h=Dt.MIN_SIZE/i,c=Dt.MIN_SIZE/n,u=P=>Math.round(P*1e4)/1e4,d=this.#k(this.rotation),f=(P,k)=>[d[0]*P+d[2]*k,d[1]*P+d[3]*k],p=this.#k(360-this.rotation),m=(P,k)=>[p[0]*P+p[2]*k,p[1]*P+p[3]*k];let A,g,v=!1,y=!1;switch(t){case"topLeft":v=!0,A=(P,k)=>[0,0],g=(P,k)=>[P,k];break;case"topMiddle":A=(P,k)=>[P/2,0],g=(P,k)=>[P/2,k];break;case"topRight":v=!0,A=(P,k)=>[P,0],g=(P,k)=>[0,k];break;case"middleRight":y=!0,A=(P,k)=>[P,k/2],g=(P,k)=>[0,k/2];break;case"bottomRight":v=!0,A=(P,k)=>[P,k],g=(P,k)=>[0,0];break;case"bottomMiddle":A=(P,k)=>[P/2,k],g=(P,k)=>[P/2,0];break;case"bottomLeft":v=!0,A=(P,k)=>[0,k],g=(P,k)=>[P,0];break;case"middleLeft":y=!0,A=(P,k)=>[0,k/2],g=(P,k)=>[P,k/2];break}const b=A(o,l),w=g(o,l);let S=f(...w);const E=u(r+S[0]),x=u(a+S[1]);let C=1,T=1,[R,I]=this.screenToPageTranslation(e.movementX,e.movementY);if([R,I]=m(R/i,I/n),v){const P=Math.hypot(o,l);C=T=Math.max(Math.min(Math.hypot(w[0]-b[0]-R,w[1]-b[1]-I)/P,1/o,1/l),h/o,c/l)}else y?C=Math.max(h,Math.min(1,Math.abs(w[0]-b[0]-R)))/o:T=Math.max(c,Math.min(1,Math.abs(w[1]-b[1]-I)))/l;const L=u(o*C),G=u(l*T);S=f(...g(L,G));const z=E-S[0],H=x-S[1];this.width=L,this.height=G,this.x=z,this.y=H,this.setDims(i*L,n*G),this.fixAndSetPosition()}altTextFinish(){this.#i?.finish()}async addEditToolbar(){return this._editToolbar||this.#h?this._editToolbar:(this._editToolbar=new sS(this),this.div.append(this._editToolbar.render()),this.#i&&await this._editToolbar.addAltText(this.#i),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#i||(Cf.initialize(Dt._l10nPromise),this.#i=new Cf(this),this.#t&&(this.#i.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#n?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#_();const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,n]=this.getInitialTranslation();return this.translate(i,n),Ao(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Pe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#c=!0,this._isDraggable){this.#P(t);return}this.#E(t)}#E(t){const{isMac:e}=Pe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();const i=new AbortController,n=this._uiManager.combinedSignal(i);if(e){this.div.classList.add("moving"),this.#f=t.clientX,this.#m=t.clientY;const a=o=>{const{clientX:l,clientY:h}=o,[c,u]=this.screenToPageTranslation(l-this.#f,h-this.#m);this.#f=l,this.#m=h,this._uiManager.dragSelectedEditors(c,u)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:n})}const r=()=>{i.abort(),e&&this.div.classList.remove("moving"),this.#c=!1,this._uiManager.endDragSession()||this.#E(t)};window.addEventListener("pointerup",r,{signal:n}),window.addEventListener("blur",r,{signal:n})}moveInDOM(){this.#g&&clearTimeout(this.#g),this.#g=setTimeout(()=>{this.#g=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){const n=this.parentScale,[r,a]=this.pageDimensions,[o,l]=this.pageTranslation,h=t/n,c=e/n,u=this.x*r,d=this.y*a,f=this.width*r,p=this.height*a;switch(i){case 0:return[u+h+o,a-d-c-p+l,u+h+f+o,a-d-c+l];case 90:return[u+c+o,a-d+h+l,u+c+p+o,a-d+h+f+l];case 180:return[u-h-f+o,a-d+c+l,u-h+o,a-d+c+p+l];case 270:return[u-c-p+o,a-d-h-f+l,u-c+o,a-d-h+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,n,r,a]=t,o=r-i,l=a-n;switch(this.rotation){case 0:return[i,e-a,o,l];case 90:return[i,e-n,l,o];case 180:return[r,e-n,o,l];case 270:return[r,e-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#_(){if(this.#l||!this.div)return;this.#l=new AbortController;const t=this._uiManager.combinedSignal(this.#l);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#_()}rotate(t){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Mt("An editor must be serializable")}static async deserialize(t,e,i){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});n.rotation=t.rotation,n.#t=t.accessibilityData;const[r,a]=n.pageDimensions,[o,l,h,c]=n.getRectInCurrentCoords(t.rect,a);return n.x=o/r,n.y=l/a,n.width=h/r,n.height=c/a,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#l?.abort(),this.#l=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#g&&(clearTimeout(this.#g),this.#g=null),this.#F(),this.removeEditToolbar(),this.#v){for(const t of this.#v.values())clearTimeout(t);this.#v=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#M(),this.#s.classList.remove("hidden"),Ao(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#a={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#s.children;if(!this.#e){this.#e=Array.from(e);const a=this.#R.bind(this),o=this.#S.bind(this),l=this._uiManager._signal;for(const h of this.#e){const c=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:l}),h.addEventListener("blur",o,{signal:l}),h.addEventListener("focus",this.#D.bind(this,c),{signal:l}),h.setAttribute("data-l10n-id",Dt._l10nResizer[c])}}const i=this.#e[0];let n=0;for(const a of e){if(a===i)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(r!==n){if(r<n)for(let o=0;o<n-r;o++)this.#s.append(this.#s.firstChild);else if(r>n)for(let o=0;o<r-n;o++)this.#s.firstChild.before(this.#s.lastChild);let a=0;for(const o of e){const h=this.#e[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Dt._l10nResizer[h])}}this.#L(0),this.#p=!0,this.#s.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#R(t){Dt._resizerKeyboardManager.exec(this,t)}#S(t){this.#p&&t.relatedTarget?.parentNode!==this.#s&&this.#F()}#D(t){this.#u=this.#p?t:""}#L(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#p&&this.#A(this.#u,{movementX:t,movementY:e})}#F(){if(this.#p=!1,this.#L(-1),this.#a){const{savedX:t,savedY:e,savedWidth:i,savedHeight:n}=this.#a;this.#b(t,e,i,n),this.#a=null}}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(t){this.#o=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#r=!0;const i=t/e,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#v||=new Map;const{action:i}=t;let n=this.#v.get(i);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),this.#v.delete(i),this.#v.size===0&&(this.#v=null)},Dt._telemetryTimeout),this.#v.set(i,n);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}},cS=class extends ht{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}};const Tf=3285377520,We=4294901760,fi=65535;let nv=class{constructor(t){this.h1=t?t&4294967295:Tf,this.h2=t?t&4294967295:Tf}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let m=0,A=t.length;m<A;m++){const g=t.charCodeAt(m);g<=255?e[i++]=g:(e[i++]=g>>>8,e[i++]=g&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=i>>2,r=i-n*4,a=new Uint32Array(e.buffer,0,n);let o=0,l=0,h=this.h1,c=this.h2;const u=3432918353,d=461845907,f=u&fi,p=d&fi;for(let m=0;m<n;m++)m&1?(o=a[m],o=o*u&We|o*f&fi,o=o<<15|o>>>17,o=o*d&We|o*p&fi,h^=o,h=h<<13|h>>>19,h=h*5+3864292196):(l=a[m],l=l*u&We|l*f&fi,l=l<<15|l>>>17,l=l*d&We|l*p&fi,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(o=0,r){case 3:o^=e[n*4+2]<<16;case 2:o^=e[n*4+1]<<8;case 1:o^=e[n*4],o=o*u&We|o*f&fi,o=o<<15|o>>>17,o=o*d&We|o*p&fi,n&1?h^=o:c^=o}this.h1=h,this.h2=c}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&We|t*36045&fi,e=e*4283543511&We|((e<<16|t>>>16)*2950163797&We)>>>16,t^=e>>>1,t=t*444984403&We|t*60499&fi,e=e*3301882366&We|((e<<16|t>>>16)*3120437893&We)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}};const ec=Object.freeze({map:null,hash:"",transfer:void 0});let Tu=class{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#i.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#i.get(t)}remove(t){if(this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#i.values())if(e instanceof ht)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#i.get(t);let n=!1;if(i!==void 0)for(const[r,a]of Object.entries(e))i[r]!==a&&(n=!0,i[r]=a);else n=!0,this.#i.set(t,e);n&&this.#n(),e instanceof ht&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#i.has(t)}getAll(){return this.#i.size>0?Au(this.#i):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#i.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new rv(this)}get serializable(){if(this.#i.size===0)return ec;const t=new Map,e=new nv,i=[],n=Object.create(null);let r=!1;for(const[a,o]of this.#i){const l=o instanceof ht?o.serialize(!1,n):o;l&&(t.set(a,l),e.update(`${a}:${JSON.stringify(l)}`),r||=!!l.bitmap)}if(r)for(const a of t.values())a.bitmap&&i.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:ec}get editorStats(){let t=null;const e=new Map;for(const i of this.#i.values()){if(!(i instanceof ht))continue;const n=i.telemetryFinalData;if(!n)continue;const{type:r}=n;e.has(r)||e.set(r,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const a=t[r]||=new Map;for(const[o,l]of Object.entries(n)){if(o==="type")continue;let h=a.get(o);h||(h=new Map,a.set(o,h));const c=h.get(l)??0;h.set(l,c+1)}}for(const[i,n]of e)t[i]=n.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#i.values())!(e instanceof ht)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}},rv=class extends Tu{#t;constructor(t){super();const{map:e,hash:i,transfer:n}=t.serializable,r=structuredClone(e,n?{transfer:n}:null);this.#t={map:r,hash:i,transfer:n}}get print(){Mt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return it(this,"modifiedIds",{ids:new Set,hash:""})}},uS=class{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||this.#t.has(t.loadedName))){if(Ht(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:n,style:r}=t,a=new FontFace(i,n,r);this.addNativeFontFace(a);try{await a.load(),this.#t.add(i),e?.(t)}catch{$(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Mt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(n){throw $(`Failed to load font '${i.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const n=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return it(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(re||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),it(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Ht(!n.done,"completeRequest() cannot be called twice."),n.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,n={done:!1,complete:e,callback:t};return i.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return it(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(b,w){return b.charCodeAt(w)<<24|b.charCodeAt(w+1)<<16|b.charCodeAt(w+2)<<8|b.charCodeAt(w+3)&255}function n(b,w,S,E){const x=b.substring(0,w),C=b.substring(w+S);return x+E+C}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let h=0;function c(b,w){if(++h>30){$("Load test font never loaded."),w();return}if(l.font="30px "+b,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){w();return}setTimeout(c.bind(null,b,w))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=n(d,976,u.length,u);const p=16,m=1482184792;let A=i(d,p);for(r=0,a=u.length-3;r<a;r+=4)A=A-m+i(u,r)|0;r<u.length&&(A=A-m+i(u+"XXX",r)|0),d=n(d,p,4,Gw(A));const g=`url(data:font/opentype;base64,${btoa(d)});`,v=`@font-face {font-family:"${u}";src:${g}}`;this.insertRule(v);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const b of[t.loadedName,u]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=b,y.append(w)}this._document.body.append(y),c(u,()=>{y.remove(),e.complete()})}},dS=class{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this.disableFontFace=e===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=Xm(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),i}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(r){$(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[e]=function(r,a){};const n=[];for(let r=0,a=i.length;r<a;)switch(i[r++]){case Ti.BEZIER_CURVE_TO:{const[o,l,h,c,u,d]=i.slice(r,r+6);n.push(f=>f.bezierCurveTo(o,l,h,c,u,d)),r+=6}break;case Ti.MOVE_TO:{const[o,l]=i.slice(r,r+2);n.push(h=>h.moveTo(o,l)),r+=2}break;case Ti.LINE_TO:{const[o,l]=i.slice(r,r+2);n.push(h=>h.lineTo(o,l)),r+=2}break;case Ti.QUADRATIC_CURVE_TO:{const[o,l,h,c]=i.slice(r,r+4);n.push(u=>u.quadraticCurveTo(o,l,h,c)),r+=4}break;case Ti.RESTORE:n.push(o=>o.restore());break;case Ti.SAVE:n.push(o=>o.save());break;case Ti.SCALE:Ht(n.length===2,"Scale command is only valid at the third position.");break;case Ti.TRANSFORM:{const[o,l,h,c,u,d]=i.slice(r,r+6);n.push(f=>f.transform(o,l,h,c,u,d)),r+=6}break;case Ti.TRANSLATE:{const[o,l]=i.slice(r,r+2);n.push(h=>h.translate(o,l)),r+=2}break}return this.compiledGlyphs[e]=function(a,o){n[0](a),n[1](a),a.scale(o,-o);for(let l=2,h=n.length;l<h;l++)n[l](a)}}};if(re){var ic=Promise.withResolvers(),sc=null;(async()=>{const t=await Ni(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await Ni(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Ni(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await Ni(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:t,http:e,https:i,url:n,canvas:r,path2d:a}))})().then(t=>{sc=t,ic.resolve()},t=>{$(`loadPackages: ${t}`),sc=new Map,ic.resolve()})}let ys=class{static get promise(){return ic.promise}static get(t){return sc?.get(t)}};const av=function(s){return ys.get("fs").promises.readFile(s).then(e=>new Uint8Array(e))};let fS=class extends qm{},pS=class extends Km{_createCanvas(t,e){return ys.get("canvas").createCanvas(t,e)}},gS=class extends Qm{_fetchData(t,e){return av(t).then(i=>({cMapData:i,compressionType:e}))}},mS=class extends Zm{_fetchData(t){return av(t)}};const ue={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function nc(s,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,i),s.clip(n)}let ku=class{getPattern(){Mt("Abstract method `getPattern` called.")}},vS=class extends ku{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,n){let r;if(n===ue.STROKE||n===ue.FILL){const a=e.current.getClippedPathBoundingBox(n,mt(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,h=e.cachedCanvases.getCanvas("pattern",o,l),c=h.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),i=j.transform(i,[1,0,0,1,a[0],a[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),nc(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=t.createPattern(h.canvas,"no-repeat");const u=new DOMMatrix(i);r.setTransform(u)}else nc(t,this._bbox),r=this._createGradient(t);return r}};function Wl(s,t,e,i,n,r,a,o){const l=t.coords,h=t.colors,c=s.data,u=s.width*4;let d;l[e+1]>l[i+1]&&(d=e,e=i,i=d,d=r,r=a,a=d),l[i+1]>l[n+1]&&(d=i,i=n,n=d,d=a,a=o,o=d),l[e+1]>l[i+1]&&(d=e,e=i,i=d,d=r,r=a,a=d);const f=(l[e]+t.offsetX)*t.scaleX,p=(l[e+1]+t.offsetY)*t.scaleY,m=(l[i]+t.offsetX)*t.scaleX,A=(l[i+1]+t.offsetY)*t.scaleY,g=(l[n]+t.offsetX)*t.scaleX,v=(l[n+1]+t.offsetY)*t.scaleY;if(p>=v)return;const y=h[r],b=h[r+1],w=h[r+2],S=h[a],E=h[a+1],x=h[a+2],C=h[o],T=h[o+1],R=h[o+2],I=Math.round(p),L=Math.round(v);let G,z,H,P,k,O,F,J;for(let W=I;W<=L;W++){if(W<A){const M=W<p?0:(p-W)/(p-A);G=f-(f-m)*M,z=y-(y-S)*M,H=b-(b-E)*M,P=w-(w-x)*M}else{let M;W>v?M=1:A===v?M=0:M=(A-W)/(A-v),G=m-(m-g)*M,z=S-(S-C)*M,H=E-(E-T)*M,P=x-(x-R)*M}let V;W<p?V=0:W>v?V=1:V=(p-W)/(p-v),k=f-(f-g)*V,O=y-(y-C)*V,F=b-(b-T)*V,J=w-(w-R)*V;const gt=Math.round(Math.min(G,k)),wt=Math.round(Math.max(G,k));let nt=u*W+gt*4;for(let M=gt;M<=wt;M++)V=(G-M)/(G-k),V<0?V=0:V>1&&(V=1),c[nt++]=z-(z-O)*V|0,c[nt++]=H-(H-F)*V|0,c[nt++]=P-(P-J)*V|0,c[nt++]=255}}function yS(s,t,e){const i=t.coords,n=t.colors;let r,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,h=o-1;for(r=0;r<l;r++){let c=r*o;for(let u=0;u<h;u++,c++)Wl(s,e,i[c],i[c+1],i[c+o],n[c],n[c+1],n[c+o]),Wl(s,e,i[c+o+1],i[c+1],i[c+o],n[c+o+1],n[c+1],n[c+o])}break;case"triangles":for(r=0,a=i.length;r<a;r+=3)Wl(s,e,i[r],i[r+1],i[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}let AS=class extends ku{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-o,c=Math.ceil(this._bounds[3])-l,u=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*t[1]*1.1)),3e3),f=h/u,p=c/d,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/p},A=u+2*2,g=d+2*2,v=i.getCanvas("mesh",A,g),y=v.context,b=y.createImageData(u,d);if(e){const S=b.data;for(let E=0,x=S.length;E<x;E+=4)S[E]=e[0],S[E+1]=e[1],S[E+2]=e[2],S[E+3]=255}for(const S of this._figures)yS(b,S,m);return y.putImageData(b,2,2),{canvas:v.canvas,offsetX:o-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}getPattern(t,e,i,n){nc(t,this._bbox);let r;if(n===ue.SHADING)r=j.singularValueDecompose2dScale(mt(t));else if(r=j.singularValueDecompose2dScale(e.baseTransform),this.matrix){const o=j.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,n===ue.SHADING?null:this._background,e.cachedCanvases);return n!==ue.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}},bS=class extends ku{getPattern(){return"hotpink"}};function wS(s){switch(s[0]){case"RadialAxial":return new vS(s);case"Mesh":return new AS(s);case"Dummy":return new bS}throw new Error(`Unknown IR type: ${s[0]}`)}const kf={COLORED:1,UNCOLORED:2};let SS=class ov{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,n,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:n,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:h}=this;l=Math.abs(l),h=Math.abs(h),Yo("TilingType: "+r);const c=e[0],u=e[1],d=e[2],f=e[3],p=d-c,m=f-u,A=j.singularValueDecompose2dScale(this.matrix),g=j.singularValueDecompose2dScale(this.baseTransform),v=A[0]*g[0],y=A[1]*g[1];let b=p,w=m,S=!1,E=!1;const x=Math.ceil(l*v),C=Math.ceil(h*y),T=Math.ceil(p*v),R=Math.ceil(m*y);x>=T?b=l:S=!0,C>=R?w=h:E=!0;const I=this.getSizeAndScale(b,this.ctx.canvas.width,v),L=this.getSizeAndScale(w,this.ctx.canvas.height,y),G=t.cachedCanvases.getCanvas("pattern",I.size,L.size),z=G.context,H=o.createCanvasGraphics(z);if(H.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(H,n,a),z.translate(-I.scale*c,-L.scale*u),H.transform(I.scale,0,0,L.scale,0,0),z.save(),this.clipBbox(H,c,u,d,f),H.baseTransform=mt(H.ctx),H.executeOperatorList(i),H.endDrawing(),z.restore(),S||E){const P=G.canvas;S&&(b=l),E&&(w=h);const k=this.getSizeAndScale(b,this.ctx.canvas.width,v),O=this.getSizeAndScale(w,this.ctx.canvas.height,y),F=k.size,J=O.size,W=t.cachedCanvases.getCanvas("pattern-workaround",F,J),V=W.context,gt=S?Math.floor(p/l):0,wt=E?Math.floor(m/h):0;for(let nt=0;nt<=gt;nt++)for(let M=0;M<=wt;M++)V.drawImage(P,F*nt,J*M,F,J,0,0,F,J);return{canvas:W.canvas,scaleX:k.scale,scaleY:O.scale,offsetX:c,offsetY:u}}return{canvas:G.canvas,scaleX:I.scale,scaleY:L.scale,offsetX:c,offsetY:u}}getSizeAndScale(t,e,i){const n=Math.max(ov.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=n?r=n:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,n,r){const a=n-e,o=r-i;t.ctx.rect(e,i,a,o),t.current.updateRectMinMax(mt(t.ctx),[e,i,n,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const n=t.ctx,r=t.current;switch(e){case kf.COLORED:const a=this.ctx;n.fillStyle=a.fillStyle,n.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case kf.UNCOLORED:const o=j.makeHexColor(i[0],i[1],i[2]);n.fillStyle=o,n.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new Ww(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,n){let r=i;n!==ue.SHADING&&(r=j.transform(r,e.baseTransform),this.matrix&&(r=j.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=t.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};function ES({src:s,srcPos:t=0,dest:e,width:i,height:n,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=Pe.isLittleEndian?4278190080:255,[l,h]=a?[r,o]:[o,r],c=i>>3,u=i&7,d=s.length;e=new Uint32Array(e.buffer);let f=0;for(let p=0;p<n;p++){for(const A=t+c;t<A;t++){const g=t<d?s[t]:255;e[f++]=g&128?h:l,e[f++]=g&64?h:l,e[f++]=g&32?h:l,e[f++]=g&16?h:l,e[f++]=g&8?h:l,e[f++]=g&4?h:l,e[f++]=g&2?h:l,e[f++]=g&1?h:l}if(u===0)continue;const m=t<d?s[t++]:255;for(let A=0;A<u;A++)e[f++]=m&1<<7-A?h:l}return{srcPos:t,destPos:f}}const Rf=16,Pf=100,xS=15,_f=10,Mf=1e3,be=16;function CS(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(i,n){t.translate(i,n),this.__originalTranslate(i,n)},s.scale=function(i,n){t.scale(i,n),this.__originalScale(i,n)},s.transform=function(i,n,r,a,o,l){t.transform(i,n,r,a,o,l),this.__originalTransform(i,n,r,a,o,l)},s.setTransform=function(i,n,r,a,o,l){t.setTransform(i,n,r,a,o,l),this.__originalSetTransform(i,n,r,a,o,l)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(i){t.rotate(i),this.__originalRotate(i)},s.clip=function(i){t.clip(i),this.__originalClip(i)},s.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},s.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},s.bezierCurveTo=function(e,i,n,r,a,o){t.bezierCurveTo(e,i,n,r,a,o),this.__originalBezierCurveTo(e,i,n,r,a,o)},s.rect=function(e,i,n,r){t.rect(e,i,n,r),this.__originalRect(e,i,n,r)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}let TS=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,i)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};function ba(s,t,e,i,n,r,a,o,l,h){const[c,u,d,f,p,m]=mt(s);if(u===0&&d===0){const v=a*c+p,y=Math.round(v),b=o*f+m,w=Math.round(b),S=(a+l)*c+p,E=Math.abs(Math.round(S)-y)||1,x=(o+h)*f+m,C=Math.abs(Math.round(x)-w)||1;return s.setTransform(Math.sign(c),0,0,Math.sign(f),y,w),s.drawImage(t,e,i,n,r,0,0,E,C),s.setTransform(c,u,d,f,p,m),[E,C]}if(c===0&&f===0){const v=o*d+p,y=Math.round(v),b=a*u+m,w=Math.round(b),S=(o+h)*d+p,E=Math.abs(Math.round(S)-y)||1,x=(a+l)*u+m,C=Math.abs(Math.round(x)-w)||1;return s.setTransform(0,Math.sign(u),Math.sign(d),0,y,w),s.drawImage(t,e,i,n,r,0,0,C,E),s.setTransform(c,u,d,f,p,m),[C,E]}s.drawImage(t,e,i,n,r,a,o,l,h);const A=Math.hypot(c,u),g=Math.hypot(d,f);return[A*l,g*h]}function kS(s){const{width:t,height:e}=s;if(t>Mf||e>Mf)return null;const i=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),o,l,h;const c=t+7&-8;let u=new Uint8Array(c*e),d=0;for(const g of s.data){let v=128;for(;v>0;)u[d++]=g&v?0:255,v>>=1}let f=0;for(d=0,u[d]!==0&&(a[0]=1,++f),l=1;l<t;l++)u[d]!==u[d+1]&&(a[l]=u[d]?2:1,++f),d++;for(u[d]!==0&&(a[l]=2,++f),o=1;o<e;o++){d=o*c,h=o*r,u[d-c]!==u[d]&&(a[h]=u[d]?1:8,++f);let g=(u[d]?4:0)+(u[d-c]?8:0);for(l=1;l<t;l++)g=(g>>2)+(u[d+1]?4:0)+(u[d-c+1]?8:0),n[g]&&(a[h+l]=n[g],++f),d++;if(u[d-c]!==u[d]&&(a[h+l]=u[d]?2:4,++f),f>i)return null}for(d=c*(e-1),h=o*r,u[d]!==0&&(a[h]=8,++f),l=1;l<t;l++)u[d]!==u[d+1]&&(a[h+l]=u[d]?4:8,++f),d++;if(u[d]!==0&&(a[h+l]=4,++f),f>i)return null;const p=new Int32Array([0,r,-1,0,-r,0,0,0,1]),m=new Path2D;for(o=0;f&&o<=e;o++){let g=o*r;const v=g+t;for(;g<v&&!a[g];)g++;if(g===v)continue;m.moveTo(g%r,o);const y=g;let b=a[g];do{const w=p[b];do g+=w;while(!a[g]);const S=a[g];S!==5&&S!==10?(b=S,a[g]=0):(b=S&51*b>>4,a[g]&=b>>2|b<<2),m.lineTo(g%r,g/r|0),a[g]||--f}while(y!==g);--o}return u=null,a=null,function(g){g.save(),g.scale(1/t,-1/e),g.translate(0,-e),g.fill(m),g.beginPath(),g.restore()}}let Lf=class{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Ym,this.textMatrixScale=1,this.fontMatrix=Kh,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=te.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=j.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=j.applyTransform(e,t),n=j.applyTransform(e.slice(2),t),r=j.applyTransform([e[0],e[3]],t),a=j.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],n[0],r[0],a[0]),this.minY=Math.min(this.minY,i[1],n[1],r[1],a[1]),this.maxX=Math.max(this.maxX,i[0],n[0],r[0],a[0]),this.maxY=Math.max(this.maxY,i[1],n[1],r[1],a[1])}updateScalingPathMinMax(t,e){j.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,n,r,a,o,l,h,c){const u=j.bezierBoundingBox(e,i,n,r,a,o,l,h,c);c||this.updateRectMinMax(t,u)}getPathBoundingBox(t=ue.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===ue.STROKE){e||Mt("Stroke bounding box must include transform.");const n=j.singularValueDecompose2dScale(e),r=n[0]*this.lineWidth/2,a=n[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const t=j.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=ue.FILL,e=null){return j.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};function Df(s,t){if(typeof ImageData<"u"&&t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,i=t.width,n=e%be,r=(e-n)/be,a=n===0?r:r+1,o=s.createImageData(i,be);let l=0,h;const c=t.data,u=o.data;let d,f,p,m;if(t.kind===Ua.GRAYSCALE_1BPP){const A=c.byteLength,g=new Uint32Array(u.buffer,0,u.byteLength>>2),v=g.length,y=i+7>>3,b=4294967295,w=Pe.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(p=d<r?be:n,h=0,f=0;f<p;f++){const S=A-l;let E=0;const x=S>y?i:S*8-7,C=x&-8;let T=0,R=0;for(;E<C;E+=8)R=c[l++],g[h++]=R&128?b:w,g[h++]=R&64?b:w,g[h++]=R&32?b:w,g[h++]=R&16?b:w,g[h++]=R&8?b:w,g[h++]=R&4?b:w,g[h++]=R&2?b:w,g[h++]=R&1?b:w;for(;E<x;E++)T===0&&(R=c[l++],T=128),g[h++]=R&T?b:w,T>>=1}for(;h<v;)g[h++]=0;s.putImageData(o,0,d*be)}}else if(t.kind===Ua.RGBA_32BPP){for(f=0,m=i*be*4,d=0;d<r;d++)u.set(c.subarray(l,l+m)),l+=m,s.putImageData(o,0,f),f+=be;d<a&&(m=i*n*4,u.set(c.subarray(l,l+m)),s.putImageData(o,0,f))}else if(t.kind===Ua.RGB_24BPP)for(p=be,m=i*p,d=0;d<a;d++){for(d>=r&&(p=n,m=i*p),h=0,f=m;f--;)u[h++]=c[l++],u[h++]=c[l++],u[h++]=c[l++],u[h++]=255;s.putImageData(o,0,d*be)}else throw new Error(`bad image kind: ${t.kind}`)}function If(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,n=e%be,r=(e-n)/be,a=n===0?r:r+1,o=s.createImageData(i,be);let l=0;const h=t.data,c=o.data;for(let u=0;u<a;u++){const d=u<r?be:n;({srcPos:l}=ES({src:h,srcPos:l,dest:c,width:i,height:d,nonBlackColor:0})),s.putImageData(o,0,u*be)}}function Gn(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)s[i]!==void 0&&(t[i]=s[i]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function wa(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!re){const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}}function Ff(s,t){if(t)return!0;const e=j.singularValueDecompose2dScale(s);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Pn.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const RS=["butt","round","square"],PS=["miter","round","bevel"],_S={},Nf={};let Ga=class lv{constructor(t,e,i,n,r,{optionalContentConfig:a,markedContentStack:o=null},l,h){this.ctx=t,this.current=new Lf(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new TS(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:n=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...mt(this.compositeCtx))}this.ctx.save(),wa(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=mt(this.ctx)}executeOperatorList(t,e,i,n){const r=t.argsArray,a=t.fnArray;let o=e||0;const l=r.length;if(l===o)return o;const h=l-o>_f&&typeof i=="function",c=h?Date.now()+xS:0;let u=0;const d=this.commonObjs,f=this.objs;let p;for(;;){if(n!==void 0&&o===n.nextBreakPoint)return n.breakIt(o,i),o;if(p=a[o],p!==ri.dependency)this[p].apply(this,r[o]);else for(const m of r[o]){const A=m.startsWith("g_")?d:f;if(!A.has(m))return A.get(m,i),o}if(o++,o===l)return o;if(h&&++u>_f){if(Date.now()>c)return i(),o;u=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width,n=t.height;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=i,l=n,h="prescale1",c,u;for(;r>2&&o>1||a>2&&l>1;){let d=o,f=l;r>2&&o>1&&(d=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/d),a>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/f),c=this.cachedCanvases.getCanvas(h,d,f),u=c.context,u.clearRect(0,0,d,f),u.drawImage(t,0,0,o,l,0,0,d,f),t=c.canvas,o=d,l=f,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:n}=t,r=this.current.fillColor,a=this.current.patternFill,o=mt(e);let l,h,c,u;if((t.bitmap||t.data)&&t.count>1){const x=t.bitmap||t.data.buffer;h=JSON.stringify(a?o:[o.slice(0,4),r]),l=this._cachedBitmapsMap.get(x),l||(l=new Map,this._cachedBitmapsMap.set(x,l));const C=l.get(h);if(C&&!a){const T=Math.round(Math.min(o[0],o[2])+o[4]),R=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:C,offsetX:T,offsetY:R}}c=C}c||(u=this.cachedCanvases.getCanvas("maskCanvas",i,n),If(u.context,t));let d=j.transform(o,[1/i,0,0,-1/n,0,0]);d=j.transform(d,[1,0,0,1,0,-n]);const[f,p,m,A]=j.getAxialAlignedBoundingBox([0,0,i,n],d),g=Math.round(m-f)||1,v=Math.round(A-p)||1,y=this.cachedCanvases.getCanvas("fillCanvas",g,v),b=y.context,w=f,S=p;b.translate(-w,-S),b.transform(...d),c||(c=this._scaleImage(u.canvas,ki(b)),c=c.img,l&&a&&l.set(h,c)),b.imageSmoothingEnabled=Ff(mt(b),t.interpolate),ba(b,c,0,0,c.width,c.height,0,0,i,n),b.globalCompositeOperation="source-in";const E=j.transform(ki(b),[1,0,0,1,-w,-S]);return b.fillStyle=a?r.getPattern(e,this,E,ue.FILL):r,b.fillRect(0,0,i,n),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(h,y.canvas)),{canvas:y.canvas,offsetX:Math.round(w),offsetY:Math.round(S)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=RS[t]}setLineJoin(t){this.ctx.lineJoin=PS[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=n.context;const r=this.ctx;r.setTransform(...mt(this.suspendedCtx)),Gn(this.suspendedCtx,r),CS(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Gn(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,n){const r=n[0],a=n[1],o=n[2]-r,l=n[3]-a;o===0||l===0||(this.genericComposeSMask(e.context,i,o,l,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,n,r,a,o,l,h,c,u){let d=t.canvas,f=l-c,p=h-u;if(a){if(f<0||p<0||f+i>d.width||p+n>d.height){const A=this.cachedCanvases.getCanvas("maskExtension",i,n),g=A.context;g.drawImage(d,-f,-p),a.some(v=>v!==0)&&(g.globalCompositeOperation="destination-atop",g.fillStyle=j.makeHexColor(...a),g.fillRect(0,0,i,n),g.globalCompositeOperation="source-over"),d=A.canvas,f=p=0}else if(a.some(A=>A!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(f,p,i,n),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=j.makeHexColor(...a),t.fillRect(f,p,i,n),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,h,i,n),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(d,f,p,i,n,l,h,i,n),e.restore()}save(){this.inSMaskMode?(Gn(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Gn(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,n,r,a){this.ctx.transform(t,e,i,n,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const n=this.ctx,r=this.current;let a=r.x,o=r.y,l,h;const c=mt(n),u=c[0]===0&&c[3]===0||c[1]===0&&c[2]===0,d=u?i.slice(0):null;for(let f=0,p=0,m=t.length;f<m;f++)switch(t[f]|0){case ri.rectangle:a=e[p++],o=e[p++];const A=e[p++],g=e[p++],v=a+A,y=o+g;n.moveTo(a,o),A===0||g===0?n.lineTo(v,y):(n.lineTo(v,o),n.lineTo(v,y),n.lineTo(a,y)),u||r.updateRectMinMax(c,[a,o,v,y]),n.closePath();break;case ri.moveTo:a=e[p++],o=e[p++],n.moveTo(a,o),u||r.updatePathMinMax(c,a,o);break;case ri.lineTo:a=e[p++],o=e[p++],n.lineTo(a,o),u||r.updatePathMinMax(c,a,o);break;case ri.curveTo:l=a,h=o,a=e[p+4],o=e[p+5],n.bezierCurveTo(e[p],e[p+1],e[p+2],e[p+3],a,o),r.updateCurvePathMinMax(c,l,h,e[p],e[p+1],e[p+2],e[p+3],a,o,d),p+=6;break;case ri.curveTo2:l=a,h=o,n.bezierCurveTo(a,o,e[p],e[p+1],e[p+2],e[p+3]),r.updateCurvePathMinMax(c,l,h,a,o,e[p],e[p+1],e[p+2],e[p+3],d),a=e[p+2],o=e[p+3],p+=4;break;case ri.curveTo3:l=a,h=o,a=e[p+2],o=e[p+3],n.bezierCurveTo(e[p],e[p+1],a,o,a,o),r.updateCurvePathMinMax(c,l,h,e[p],e[p+1],a,o,a,o,d),p+=4;break;case ri.closePath:n.closePath();break}u&&r.updateScalingPathMinMax(c,d),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,ki(e),ue.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;let r=!1;n&&(e.save(),e.fillStyle=i.getPattern(e,this,ki(e),ue.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=_S}eoClip(){this.pendingClip=Nf}beginText(){this.current.textMatrix=Ym,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),n=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=i.fontMatrix||Kh,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&$("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const r=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${r}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let h=e;e<Rf?h=Rf:e>Pf&&(h=Pf),this.current.fontSizeScale=e/h,this.ctx.font=`${l} ${o} ${h}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,n,r,a){this.current.textMatrix=[t,e,i,n,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,n){const r=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,c=l&te.FILL_STROKE_MASK,u=!!(l&te.ADD_TO_PATH_FLAG),d=a.patternFill&&!o.missingFile;let f;(o.disableFontFace||u||d)&&(f=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||d?(r.save(),r.translate(e,i),r.beginPath(),f(r,h),n&&r.setTransform(...n),(c===te.FILL||c===te.FILL_STROKE)&&r.fill(),(c===te.STROKE||c===te.FILL_STROKE)&&r.stroke(),r.restore()):((c===te.FILL||c===te.FILL_STROKE)&&r.fillText(t,e,i),(c===te.STROKE||c===te.FILL_STROKE)&&r.strokeText(t,e,i)),u&&(this.pendingTextPaths||=[]).push({transform:mt(r),x:e,y:i,fontSize:h,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){i=!0;break}return it(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(n===0)return;const r=this.ctx,a=e.fontSizeScale,o=e.charSpacing,l=e.wordSpacing,h=e.fontDirection,c=e.textHScale*h,u=t.length,d=i.vertical,f=d?1:-1,p=i.defaultVMetrics,m=n*e.fontMatrix[0],A=e.textRenderingMode===te.FILL&&!i.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(c,-1):r.scale(c,1);let g;if(e.patternFill){r.save();const S=e.fillColor.getPattern(r,this,ki(r),ue.FILL);g=mt(r),r.restore(),r.fillStyle=S}let v=e.lineWidth;const y=e.textMatrixScale;if(y===0||v===0){const S=e.textRenderingMode&te.FILL_STROKE_MASK;(S===te.STROKE||S===te.FILL_STROKE)&&(v=this.getSinglePixelWidth())}else v/=y;if(a!==1&&(r.scale(a,a),v/=a),r.lineWidth=v,i.isInvalidPDFjsFont){const S=[];let E=0;for(const x of t)S.push(x.unicode),E+=x.width;r.fillText(S.join(""),0,0),e.x+=E*m*c,r.restore(),this.compose();return}let b=0,w;for(w=0;w<u;++w){const S=t[w];if(typeof S=="number"){b+=f*S*n/1e3;continue}let E=!1;const x=(S.isSpace?l:0)+o,C=S.fontChar,T=S.accent;let R,I,L=S.width;if(d){const z=S.vmetric||p,H=-(S.vmetric?z[1]:L*.5)*m,P=z[2]*m;L=z?-z[0]:L,R=H/a,I=(b+P)/a}else R=b/a,I=0;if(i.remeasure&&L>0){const z=r.measureText(C).width*1e3/n*a;if(L<z&&this.isFontSubpixelAAEnabled){const H=L/z;E=!0,r.save(),r.scale(H,1),R/=H}else L!==z&&(R+=(L-z)/2e3*n/a)}if(this.contentVisible&&(S.isInFont||i.missingFile)){if(A&&!T)r.fillText(C,R,I);else if(this.paintChar(C,R,I,g),T){const z=R+n*T.offset.x/a,H=I-n*T.offset.y/a;this.paintChar(T.fontChar,z,H,g)}}const G=d?L*m-x*h:L*m+x*h;b+=G,E&&r.restore()}d?e.y-=b:e.x+=b*c,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,n=i.font,r=i.fontSize,a=i.fontDirection,o=n.vertical?1:-1,l=i.charSpacing,h=i.wordSpacing,c=i.textHScale*a,u=i.fontMatrix||Kh,d=t.length,f=i.textRenderingMode===te.INVISIBLE;let p,m,A,g;if(!(f||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(c,a),p=0;p<d;++p){if(m=t[p],typeof m=="number"){g=o*m*r/1e3,this.ctx.translate(g,0),i.x+=g*c;continue}const v=(m.isSpace?h:0)+l,y=n.charProcOperatorList[m.operatorListId];if(!y){$(`Type3 character "${m.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=m,this.save(),e.scale(r,r),e.transform(...u),this.executeOperatorList(y),this.restore()),A=j.applyTransform([m.width,0],u)[0]*r+v,e.translate(A,0),i.x+=A*c}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,n,r,a){this.ctx.rect(i,n,r-i,a-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],n=this.baseTransform||mt(this.ctx),r={createCanvasGraphics:a=>new lv(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new SS(t,i,this.ctx,r,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=j.makeHexColor(t,e,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=j.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=wS(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,ki(e),ue.SHADING);const n=ki(e);if(n){const{width:r,height:a}=e.canvas,[o,l,h,c]=j.getAxialAlignedBoundingBox([0,0,r,a],n);this.ctx.fillRect(o,l,h-o,c-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Mt("Should not call beginInlineImage")}beginImageData(){Mt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=mt(this.ctx),e)){const i=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],i,n),this.current.updateRectMinMax(mt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Yo("TODO: Support non-isolated groups."),t.knockout&&$("Knockout groups not supported.");const i=mt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=j.getAxialAlignedBoundingBox(t.bbox,mt(e));const r=[0,0,e.canvas.width,e.canvas.height];n=j.intersect(n,r)||[0,0,0,0];const a=Math.floor(n[0]),o=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-a,1),h=Math.max(Math.ceil(n[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,h]);let c="groupAt"+this.groupLevel;t.smask&&(c+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(c,l,h),d=u.context;d.translate(-a,-o),d.transform(...i),t.smask?this.smaskStack.push({canvas:u.canvas,context:d,offsetX:a,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,o),e.save()),Gn(e,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=mt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=j.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,i,n,r){if(this.#t(),wa(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],o=e[3]-e[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=o;const[l,h]=j.singularValueDecompose2dScale(mt(this.ctx)),{viewportScale:c}=this,u=Math.ceil(a*this.outputScaleX*c),d=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(l,0,0,-h,0,o*h),wa(this.ctx)}else wa(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new Lf(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=kS(t)),n.compiled)){n.compiled(i);return}const r=this._createMaskCanvas(t),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,n=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const l=mt(o);o.transform(e,i,n,r,0,0);const h=this._createMaskCanvas(t);o.setTransform(1,0,0,1,h.offsetX-l[4],h.offsetY-l[5]);for(let c=0,u=a.length;c<u;c+=2){const d=j.transform(l,[e,i,n,r,a[c],a[c+1]]),[f,p]=j.applyTransform([0,0],d);o.drawImage(h.canvas,f,p)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const r of t){const{data:a,width:o,height:l,transform:h}=r,c=this.cachedCanvases.getCanvas("maskCanvas",o,l),u=c.context;u.save();const d=this.getObject(a,r);If(u,d),u.globalCompositeOperation="source-in",u.fillStyle=n?i.getPattern(u,this,ki(e),ue.FILL):i,u.fillRect(0,0,o,l),u.restore(),e.save(),e.transform(...h),e.scale(1,-1),ba(e,c.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){$("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){$("Dependent image isn't ready yet");return}const a=r.width,o=r.height,l=[];for(let h=0,c=n.length;h<c;h+=2)l.push({transform:[e,0,0,i,n[h],n[h+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:n}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,n),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,n=this.ctx;if(this.save(),!re){const{filter:o}=n;o!=="none"&&o!==""&&(n.filter="none")}n.scale(1/e,-1/i);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,i).context;Df(l,t),r=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(r,ki(n));n.imageSmoothingEnabled=Ff(mt(n),t.interpolate),ba(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const r=t.width,a=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,a).context;Df(l,t),n=this.applyTransferMapsToCanvas(l)}for(const r of e)i.save(),i.transform(...r.transform),i.scale(1,-1),ba(i,n,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===Nf?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=mt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:n,d:r}=this.ctx.getTransform();let a,o;if(i===0&&n===0){const l=Math.abs(e),h=Math.abs(r);if(l===h)if(t===0)a=o=1/l;else{const c=l*t;a=o=c<1?1/c:1}else if(t===0)a=1/l,o=1/h;else{const c=l*t,u=h*t;a=c<1?1/c:1,o=u<1?1/u:1}}else{const l=Math.abs(e*r-i*n),h=Math.hypot(e,i),c=Math.hypot(n,r);if(t===0)a=c/l,o=h/l;else{const u=t*l;a=c>u?c/u:1,o=h>u?h/u:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[n,r]=this.getScaleForStroking();if(e.lineWidth=i||1,n===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(n,r),a.length>0){const o=Math.max(n,r);e.setLineDash(a.map(l=>l/o)),e.lineDashOffset/=o}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(const s in ri)Ga.prototype[s]!==void 0&&(Ga.prototype[ri[s]]=Ga.prototype[s]);let mr=class{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}};const Sa={UNKNOWN:0,DATA:1,ERROR:2},Tt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Me(s){switch(s instanceof Error||typeof s=="object"&&s!==null||Mt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Xs(s.message);case"MissingPDFException":return new Vs(s.message);case"PasswordException":return new Zh(s.message,s.code);case"UnexpectedResponseException":return new Vo(s.message,s.status);case"UnknownErrorException":return new Jh(s.message,s.details);default:return new Jh(s.message,s.toString())}}let tr=class{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=n=>{const r=n.data;if(r.targetName!==this.sourceName)return;if(r.stream){this.#e(r);return}if(r.callback){const o=r.callbackId,l=this.callbackCapabilities[o];if(!l)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],r.callback===Sa.DATA)l.resolve(r.data);else if(r.callback===Sa.ERROR)l.reject(Me(r.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[r.action];if(!a)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const o=this.sourceName,l=r.sourceName;new Promise(function(h){h(a(r.data))}).then(function(h){i.postMessage({sourceName:o,targetName:l,callback:Sa.DATA,callbackId:r.callbackId,data:h})},function(h){i.postMessage({sourceName:o,targetName:l,callback:Sa.ERROR,callbackId:r.callbackId,reason:Me(h)})});return}if(r.streamId){this.#t(r);return}a(r.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,i,n){const r=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:h=>{const c=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:t,streamId:r,data:e,desiredSize:h.desiredSize},n),c.promise},pull:h=>{const c=Promise.withResolvers();return this.streamControllers[r].pullCall=c,l.postMessage({sourceName:a,targetName:o,stream:Tt.PULL,streamId:r,desiredSize:h.desiredSize}),c.promise},cancel:h=>{Ht(h instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[r].cancelCall=c,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Tt.CANCEL,streamId:r,reason:Me(h)}),c.promise}},i)}#t(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,r=this.comObj,a=this,o=this.actionHandler[t.action],l={enqueue(h,c=1,u){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:n,stream:Tt.ENQUEUE,streamId:e,chunk:h},u)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:Tt.CLOSE,streamId:e}),delete a.streamSinks[e])},error(h){Ht(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:Tt.ERROR,streamId:e,reason:Me(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise(function(h){h(o(t.data,l))}).then(function(){r.postMessage({sourceName:i,targetName:n,stream:Tt.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:i,targetName:n,stream:Tt.START_COMPLETE,streamId:e,reason:Me(h)})})}#e(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,r=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case Tt.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(Me(t.reason));break;case Tt.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(Me(t.reason));break;case Tt.PULL:if(!o){r.postMessage({sourceName:i,targetName:n,stream:Tt.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,new Promise(function(l){l(o.onPull?.())}).then(function(){r.postMessage({sourceName:i,targetName:n,stream:Tt.PULL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:i,targetName:n,stream:Tt.PULL_COMPLETE,streamId:e,reason:Me(l)})});break;case Tt.ENQUEUE:if(Ht(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case Tt.CLOSE:if(Ht(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#i(a,e);break;case Tt.ERROR:Ht(a,"error should have stream controller"),a.controller.error(Me(t.reason)),this.#i(a,e);break;case Tt.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(Me(t.reason)),this.#i(a,e);break;case Tt.CANCEL:if(!o)break;new Promise(function(l){l(o.onCancel?.(Me(t.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:n,stream:Tt.CANCEL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:i,targetName:n,stream:Tt.CANCEL_COMPLETE,streamId:e,reason:Me(l)})}),o.sinkCapability.reject(Me(t.reason)),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#i(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}},MS=class{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}getAll(){return Au(this.#t)}has(t){return this.#t.has(t)}};const Zi=Symbol("INTERNAL");let LS=class{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:n}){this.#t=!!(t&Ie.DISPLAY),this.#e=!!(t&Ie.PRINT),this.name=e,this.intent=i,this.usage=n}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==Zi&&Mt("Internal method `_setVisible` called."),this.#i=i,this.#n=e}},DS=class{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=Ie.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new LS(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(Zi,!1);for(const i of t.on)this.#e.get(i)._setVisible(Zi,!0);for(const i of t.off)this.#e.get(i)._setVisible(Zi,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let n=1;n<e;n++){const r=t[n];let a;if(Array.isArray(r))a=this.#r(r);else if(this.#e.has(r))a=this.#e.get(r).visible;else return $(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Yo("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:($(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return $(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return $(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return $(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return $(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return $(`Unknown optional content policy ${t.policy}.`),!0}return $(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const i=this.#e.get(t);if(!i){$(`Optional content group not found: ${t}`);return}i._setVisible(Zi,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}const r=this.#e.get(n);if(r)switch(i){case"ON":r._setVisible(Zi,!0);break;case"OFF":r._setVisible(Zi,!1);break;case"Toggle":r._setVisible(Zi,!r.visible);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?Au(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new nv;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}},IS=class{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Ht(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,r?.length>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,h)=>{this._onReceiveData({begin:l,chunk:h})}),t.addProgressListener((l,h)=>{this._onProgress({loaded:l,total:h})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const n=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});Ht(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Ht(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new FS(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new NS(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}},FS=class{constructor(t,e,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=xu(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},NS=class{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function OS(s){let t=!0,e=i("filename\\*","i").exec(s);if(e){e=e[1];let c=o(e);return c=unescape(c),c=l(c),c=h(c),r(c)}if(e=a(s),e){const c=h(e);return r(c)}if(e=i("filename","i").exec(s),e){e=e[1];let c=o(e);return c=h(c),r(c)}function i(c,u){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function n(c,u){if(c){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const d=new TextDecoder(c,{fatal:!0}),f=Xo(u);u=d.decode(f),t=!1}catch{}}return u}function r(c){return t&&/[\x80-\xff]/.test(c)&&(c=n("utf-8",c),t&&(c=n("iso-8859-1",c))),c}function a(c){const u=[];let d;const f=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(c))!==null;){let[,m,A,g]=d;if(m=parseInt(m,10),m in u){if(m===0)break;continue}u[m]=[A,g]}const p=[];for(let m=0;m<u.length&&m in u;++m){let[A,g]=u[m];g=o(g),A&&(g=unescape(g),m===0&&(g=l(g))),p.push(g)}return p.join("")}function o(c){if(c.startsWith('"')){const u=c.slice(1).split('\\"');for(let d=0;d<u.length;++d){const f=u[d].indexOf('"');f!==-1&&(u[d]=u[d].slice(0,f),u.length=d+1),u[d]=u[d].replaceAll(/\\(.)/g,"$1")}c=u.join('"')}return c}function l(c){const u=c.indexOf("'");if(u===-1)return c;const d=c.slice(0,u),p=c.slice(u+1).replace(/^[^']*'/,"");return n(d,p)}function h(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,d,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,A){return String.fromCharCode(parseInt(A,16))}),n(d,p);try{p=atob(p)}catch{}return n(d,p)})}return""}function Ru(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const i in t){const n=t[i];n!==void 0&&e.append(i,n)}return e}function Pu({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:i}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s.get("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*e)||i||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function _u(s){const t=s.get("Content-Disposition");if(t){let e=OS(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(xu(e))return e}return null}function Qo(s,t){return s===404||s===0&&t.startsWith("file:")?new Vs('Missing PDF "'+t+'".'):new Vo(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function hv(s){return s===200||s===206}function cv(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function uv(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:($(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}let Of=class{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Ru(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ht(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new BS(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new HS(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}},BS=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),n=e.url;fetch(n,cv(i,this._withCredentials,this._abortController)).then(r=>{if(!hv(r.status))throw Qo(r.status,n);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:l}=Pu({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=_u(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Xs("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:uv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},HS=class{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${i-1}`);const a=n.url;fetch(a,cv(r,this._withCredentials,this._abortController)).then(o=>{if(!hv(o.status))throw Qo(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:uv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}};const Gl=200,Yl=206;function zS(s){const t=s.response;return typeof t!="string"?t:Xo(t).buffer}let jS=class{constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Ru(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const n={begin:t,end:e};for(const r in i)n[r]=i[r];return this.request(n)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,a]of this.headers)e.setRequestHeader(r,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=Yl):n.expectedStatus=Gl,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){i.onError?.(n.status);return}const r=n.status||Gl;if(!(r===Gl&&i.expectedStatus===Yl)&&r!==i.expectedStatus){i.onError?.(n.status);return}const o=zS(n);if(r===Yl){const l=n.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);i.onDone({begin:parseInt(h[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):i.onError?.(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},US=class{constructor(t){this._source=t,this._manager=new jS(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Ht(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new WS(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new GS(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}},WS=class{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[o,...l]=a.split(": ");return[o,l.join(": ")]})),{allowRangeRequests:n,suggestedLength:r}=Pu({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=_u(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Qo(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},GS=class{constructor(t,e,i){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Qo(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}};const YS=/^[a-z][a-z0-9\-+.]+:/i;function VS(s){if(YS.test(s))return new URL(s);const t=ys.get("url");return new URL(t.pathToFileURL(s))}function dv(s,t,e){return s.protocol==="http:"?ys.get("http").request(s,{headers:t},e):ys.get("https").request(s,{headers:t},e)}let XS=class{constructor(t){this.source=t,this.url=VS(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Ru(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ht(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new QS(this):new qS(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new ZS(this,t,e):new KS(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}},fv=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Xs("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},pv=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}},qS=class extends fv{constructor(t){super(t);const e=Object.fromEntries(t.headers),i=n=>{if(n.statusCode===404){const l=new Vs(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(n);const r=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=Pu({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=_u(r)};this._request=dv(this._url,e,i),this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}},KS=class extends pv{constructor(t,e,i){super(t);const n=Object.fromEntries(t.headers);n.Range=`bytes=${e}-${i-1}`;const r=a=>{if(a.statusCode===404){const o=new Vs(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};this._request=dv(this._url,n,r),this._request.on("error",a=>{this._storedError=a}),this._request.end()}},QS=class extends fv{constructor(t){super(t);const e=ys.get("fs");e.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Vs(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}},ZS=class extends pv{constructor(t,e,i){super(t);const n=ys.get("fs");this._setReadableStream(n.createReadStream(this._url,{start:e,end:i-1}))}};const JS=1e5,ve=30,$S=.8;let rc=class Ye{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#l=0;#u=null;#c=null;#d=0;#o=0;#h=Object.create(null);#p=[];#g=null;#f=[];#m=new WeakMap;#v=null;static#y=new Map;static#w=new Map;static#x=new WeakMap;static#T=null;static#k=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=e,this.#o=i.scale*(globalThis.devicePixelRatio||1),this.#d=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:n,pageHeight:r,pageX:a,pageY:o}=i.rawDims;this.#v=[1,0,0,-1,-a,o+r],this.#l=n,this.#a=r,Ye.#P(),Hs(e,i),this.#t.promise.finally(()=>{Ye.#k.delete(this),this.#s=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Pe.platform;return it(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#h,e.styles),this.#M(e.items),t()},this.#t.reject)};return this.#u=this.#g.getReader(),Ye.#k.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*(globalThis.devicePixelRatio||1),n=t.rotation;if(n!==this.#d&&(e?.(),this.#d=n,Hs(this.#c,{rotation:n})),i!==this.#o){e?.(),this.#o=i;const r={div:null,properties:null,ctx:Ye.#A(this.#r)};for(const a of this.#f)r.properties=this.#m.get(a),r.div=a,this.#b(r)}}cancel(){const t=new Xs("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#f}get textContentItemsStr(){return this.#p}#M(t){if(this.#i)return;this.#s.ctx??=Ye.#A(this.#r);const e=this.#f,i=this.#p;for(const n of t){if(e.length>JS){$("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(n.str===void 0){if(n.type==="beginMarkedContentProps"||n.type==="beginMarkedContent"){const r=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),n.id!==null&&this.#e.setAttribute("id",`${n.id}`),r.append(this.#e)}else n.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(n.str),this.#C(n)}}#C(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#f.push(e);const n=j.transform(this.#v,t.transform);let r=Math.atan2(n[1],n[0]);const a=this.#h[t.fontName];a.vertical&&(r+=Math.PI/2);let o=this.#n&&a.fontSubstitution||a.fontFamily;o=Ye.fontFamilyMap.get(o)||o;const l=Math.hypot(n[2],n[3]),h=l*Ye.#_(o,this.#r);let c,u;r===0?(c=n[4],u=n[5]-h):(c=n[4]+h*Math.sin(r),u=n[5]-h*Math.cos(r));const d="calc(var(--scale-factor)*",f=e.style;this.#e===this.#c?(f.left=`${(100*c/this.#l).toFixed(2)}%`,f.top=`${(100*u/this.#a).toFixed(2)}%`):(f.left=`${d}${c.toFixed(2)}px)`,f.top=`${d}${u.toFixed(2)}px)`),f.fontSize=`${d}${(Ye.#T*l).toFixed(2)}px)`,f.fontFamily=o,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const m=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);m!==A&&Math.max(m,A)/Math.min(m,A)>1.5&&(p=!0)}if(p&&(i.canvasWidth=a.vertical?t.height:t.width),this.#m.set(e,i),this.#s.div=e,this.#s.properties=i,this.#b(this.#s),i.hasText&&this.#e.append(e),i.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this.#e.append(m)}}#b(t){const{div:e,properties:i,ctx:n}=t,{style:r}=e;let a="";if(Ye.#T>1&&(a=`scale(${1/Ye.#T})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:o}=r,{canvasWidth:l,fontSize:h}=i;Ye.#E(n,h*this.#o,o);const{width:c}=n.measureText(e.textContent);c>0&&(a=`scaleX(${l*this.#o/c}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(r.transform=a)}static cleanup(){if(!(this.#k.size>0)){this.#y.clear();for(const{canvas:t}of this.#w.values())t.remove();this.#w.clear()}}static#A(t=null){let e=this.#w.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#w.set(t,e),this.#x.set(e,{size:0,family:""})}return e}static#E(t,e,i){const n=this.#x.get(t);e===n.size&&i===n.family||(t.font=`${e}px ${i}`,n.size=e,n.family=i)}static#P(){if(this.#T!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#T=t.getBoundingClientRect().height,t.remove()}static#_(t,e){const i=this.#y.get(t);if(i)return i;const n=this.#A(e);n.canvas.width=n.canvas.height=ve,this.#E(n,ve,t);const r=n.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const c=a/(a+o);return this.#y.set(t,c),n.canvas.width=n.canvas.height=0,c}n.strokeStyle="red",n.clearRect(0,0,ve,ve),n.strokeText("g",0,0);let l=n.getImageData(0,0,ve,ve).data;o=0;for(let c=l.length-1-3;c>=0;c-=4)if(l[c]>0){o=Math.ceil(c/4/ve);break}n.clearRect(0,0,ve,ve),n.strokeText("A",0,ve),l=n.getImageData(0,0,ve,ve).data,a=0;for(let c=0,u=l.length;c<u;c+=4)if(l[c]>0){a=ve-Math.floor(c/4/ve);break}n.canvas.width=n.canvas.height=0;const h=a?a/(a+o):$S;return this.#y.set(t,h),h}},ac=class gv{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function n(r){if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(gv.shouldBuildText(o))r?.attributes?.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const l of r.children)n(l)}return n(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}};const tE=65536,eE=100,iE=5e3,sE=re?pS:Jw,nE=re?gS:Jm,rE=re?fS:Zw,aE=re?mS:$m;function oE(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new cE,{docId:e}=t,i=s.url?lE(s.url):null,n=s.data?hE(s.data):null,r=s.httpHeaders||null,a=s.withCredentials===!0,o=s.password??null,l=s.range instanceof vv?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:tE;let c=s.worker instanceof Ya?s.worker:null;const u=s.verbosity,d=typeof s.docBaseUrl=="string"&&!Ko(s.docBaseUrl)?s.docBaseUrl:null,f=typeof s.cMapUrl=="string"?s.cMapUrl:null,p=s.cMapPacked!==!1,m=s.CMapReaderFactory||nE,A=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,g=s.StandardFontDataFactory||aE,v=s.stopAtErrors!==!0,y=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,b=s.isEvalSupported!==!1,w=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!re,S=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,E=typeof s.disableFontFace=="boolean"?s.disableFontFace:re,x=s.fontExtraProperties===!0,C=s.enableXfa===!0,T=s.ownerDocument||globalThis.document,R=s.disableRange===!0,I=s.disableStream===!0,L=s.disableAutoFetch===!0,G=s.pdfBug===!0,z=s.CanvasFactory||sE,H=s.FilterFactory||rE,P=s.enableHWA===!0,k=l?l.length:s.length??NaN,O=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!re&&!E,F=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:m===Jm&&g===$m&&f&&A&&$n(f,document.baseURI)&&$n(A,document.baseURI);s.canvasFactory&&Ef("`canvasFactory`-instance option, please use `CanvasFactory` instead."),s.filterFactory&&Ef("`filterFactory`-instance option, please use `FilterFactory` instead.");const J=null;Hw(u);const W={canvasFactory:new z({ownerDocument:T,enableHWA:P}),filterFactory:new H({docId:e,ownerDocument:T}),cMapReaderFactory:F?null:new m({baseUrl:f,isCompressed:p}),standardFontDataFactory:F?null:new g({baseUrl:A})};if(!c){const wt={verbosity:u,port:mr.workerPort};c=wt.port?Ya.fromPort(wt):new Ya(wt),t._worker=c}const V={docId:e,apiVersion:"4.7.76",data:n,password:o,disableAutoFetch:L,rangeChunkSize:h,length:k,docBaseUrl:d,enableXfa:C,evaluatorOptions:{maxImageSize:y,disableFontFace:E,ignoreErrors:v,isEvalSupported:b,isOffscreenCanvasSupported:w,canvasMaxAreaInBytes:S,fontExtraProperties:x,useSystemFonts:O,cMapUrl:F?f:null,standardFontDataUrl:F?A:null}},gt={disableFontFace:E,fontExtraProperties:x,ownerDocument:T,pdfBug:G,styleElement:J,loadingParams:{disableAutoFetch:L,enableXfa:C}};return c.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const wt=c.messageHandler.sendWithPromise("GetDocRequest",V,n?[n.buffer]:null);let nt;if(l)nt=new IS(l,{disableRange:R,disableStream:I});else if(!n){if(!i)throw new Error("getDocument - no `url` parameter provided.");let M;re?M=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&$n(i)?Of:XS:M=$n(i)?Of:US,nt=new M({url:i,length:k,httpHeaders:r,withCredentials:a,rangeChunkSize:h,disableRange:R,disableStream:I})}return wt.then(M=>{if(t.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const rt=new tr(e,M,c.port),Wt=new pE(rt,t,nt,gt,W);t._transport=Wt,rt.send("Ready",null)})}).catch(t._capability.reject),t}function lE(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(re&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function hE(s){if(re&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Xo(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Bf(s){return typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0}let cE=class mv{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${mv.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}},vv=class{constructor(t,e,i=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Mt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},uE=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return it(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},dE=class{#t=null;#e=!1;constructor(t,e,i,n=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=n?new Sf:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new yv,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:r=!1}={}){return new Su({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return it(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:n=ns.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:c=null,isEditing:u=!1}){this._stats?.time("Overall");const d=this._transport.getRenderingIntent(i,n,c,u),{renderingIntent:f,cacheKey:p}=d;this.#e=!1,this.#n(),o||=this._transport.getOptionalContentConfig(f);let m=this._intentStates.get(p);m||(m=Object.create(null),this._intentStates.set(p,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const A=!!(f&Ie.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d));const g=b=>{m.renderTasks.delete(v),(this._maybeCleanupAfterRender||A)&&(this.#e=!0),this.#i(!A),b?(v.capability.reject(b),this._abortOperatorList({intentState:m,reason:b instanceof Error?b:new Error(b)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new mE({callback:g,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:h});(m.renderTasks||=new Set).add(v);const y=v.task;return Promise.all([m.displayReadyCapability.promise,o]).then(([b,w])=>{if(this.destroyed){g();return}if(this._stats?.time("Rendering"),!(w.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:b,optionalContentConfig:w}),v.operatorListChanged()}).catch(g),y}getOperatorList({intent:t="display",annotationMode:e=ns.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(t,e,i,n,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>ac.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,n){function r(){a.read().then(function({value:l,done:h}){if(h){i(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),r()},n)}const a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,this.#n(),Promise.all(t)}cleanup(t=!1){this.#e=!0;const e=this.#i(!1);return t&&e&&(this._stats&&=new Sf),e}#i(t=!1){if(this.#n(),!this.#e||this.destroyed)return!1;if(t)return this.#t=setTimeout(()=>{this.#t=null,this.#i(!1)},iE),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#n(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:n}){const{map:r,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:n},a).getReader(),h=this._intentStates.get(e);h.streamReader=l;const c=()=>{l.read().then(({value:u,done:d})=>{if(d){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,h),c())},u=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const d of h.renderTasks)d.operatorListChanged();this.#i(!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(u);else if(h.opListReadCapability)h.opListReadCapability.reject(u);else throw u}})};c()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Eu){let n=eE;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new Xs(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}},fE=class{#t=new Set;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const n of this.#t)n.call(this,i)})}addEventListener(t,e){this.#t.add(e)}removeEventListener(t,e){this.#t.delete(e)}terminate(){this.#t.clear()}},Ya=class Ae{static#t=0;static#e=!1;static#i;static{re&&(this.#e=!0,mr.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const n=new URL(e,i);return i.origin===n.origin},this._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}}constructor({name:t=null,port:e=null,verbosity:i=zw()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(Ae.#i?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(Ae.#i||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return re?Promise.all([ys.promise,this._readyCapability.promise]):this._readyCapability.promise}#n(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new tr("main","worker",t),this._messageHandler.on("ready",function(){}),this.#n()}_initialize(){if(Ae.#e||Ae.#r){this._setupFakeWorker();return}let{workerSrc:t}=Ae;try{Ae._isSameOrigin(window.location.href,t)||(t=Ae._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new tr("main","worker",e),n=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||n()},{signal:r.signal}),i.on("test",o=>{if(r.abort(),this.destroyed||!o){n();return}this._messageHandler=i,this._port=e,this._webWorker=e,this.#n()}),i.on("ready",o=>{if(r.abort(),this.destroyed){n();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{Yo("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Ae.#e||($("Setting up fake worker."),Ae.#e=!0),Ae._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new fE;this._port=e;const i=`fake${Ae.#t++}`,n=new tr(i+"_worker",i,e);t.setup(n,e),this._messageHandler=new tr(i,i+"_worker",e),this.#n()}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Ae.#i?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#i?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ae(t)}static get workerSrc(){if(mr.workerSrc)return mr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#r(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return it(this,"_setupFakeWorkerGlobal",(async()=>this.#r?this.#r:(await import(this.workerSrc)).WorkerMessageHandler)())}},pE=class{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,i,n,r){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new yv,this.fontLoader=new uS({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,e=null){const i=this.#t.get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,n),n}get annotationStorage(){return it(this,"annotationStorage",new Tu)}getRenderingIntent(t,e=ns.ENABLE,i=null,n=!1,r=!1){let a=Ie.DISPLAY,o=ec;switch(t){case"any":a=Ie.ANY;break;case"display":break;case"print":a=Ie.PRINT;break;default:$(`getRenderingIntent - invalid intent: ${t}`)}const l=a&Ie.PRINT&&i instanceof rv?i:this.annotationStorage;switch(e){case ns.DISABLE:a+=Ie.ANNOTATIONS_DISABLE;break;case ns.ENABLE:break;case ns.ENABLE_FORMS:a+=Ie.ANNOTATIONS_FORMS;break;case ns.ENABLE_STORAGE:a+=Ie.ANNOTATIONS_STORAGE,o=l.serializable;break;default:$(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(a+=Ie.IS_EDITING),r&&(a+=Ie.OPLIST);const{ids:h,hash:c}=l.modifiedIds,u=[a,o.hash,c];return{renderingIntent:a,cacheKey:u.join("_"),annotationStorageSerializable:o,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),rc.cleanup(),this._networkStream?.cancelAllRequests(new Xs("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,n)=>{Ht(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){n.close();return}Ht(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",i=>{const n=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),r.onProgress=a=>{e.onProgress?.({loaded:a.loaded,total:a.total})}),n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},n.reject),n.promise}),t.on("GetRangeReader",(i,n)=>{Ht(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){n.close();return}Ht(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{n.error(a)})},n.onCancel=a=>{r.cancel(a),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new uE(i,this))}),t.on("DocException",function(i){let n;switch(i.name){case"PasswordException":n=new Zh(i.message,i.code);break;case"InvalidPDFException":n=new Vm(i.message);break;case"MissingPDFException":n=new Vs(i.message);break;case"UnexpectedResponseException":n=new Vo(i.message,i.status);break;case"UnknownErrorException":n=new Jh(i.message,i.details);break;default:Mt("DocException - expected a valid Error.")}e._capability.reject(n)}),t.on("PasswordRequest",i=>{if(this.#r=Promise.withResolvers(),e.onPassword){const n=r=>{r instanceof Error?this.#r.reject(r):this.#r.resolve({password:r})};try{e.onPassword(n,i.code)}catch(r){this.#r.reject(r)}}else this.#r.reject(new Zh(i.message,i.code));return this.#r.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,n,r])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":const{disableFontFace:a,fontExtraProperties:o,pdfBug:l}=this._params;if("error"in r){const d=r.error;$(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}const h=l&&globalThis.FontInspector?.enabled?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,c=new dS(r,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o&&c.data&&(c.data=null),this.commonObjs.resolve(i,c)});break;case"CopyLocalImage":const{imageRef:u}=r;Ht(u,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,f]of d.objs)if(f?.ref===u)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([i,n,r,a])=>{if(this.destroyed)return;const o=this.#e.get(n);if(!o.objs.has(i)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(r){case"Image":o.objs.resolve(i,a),a?.dataLen>Fw&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&$("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#i.get(e);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#n.set(r.refStr,t);const a=new dE(e,r,this,this._params.pdfBug);return this.#e.set(e,a),a});return this.#i.set(e,n),n}getPageIndex(t){return Bf(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new DS(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(n=>({info:n[0],metadata:n[1]?new MS(n[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),rc.cleanup()}}cachedPageNumber(t){if(!Bf(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}};const Ea=Symbol("INITIAL_DATA");let yv=class{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Ea}}get(t,e=null){if(e){const n=this.#e(t);return n.promise.then(()=>e(n.data)),null}const i=this.#t[t];if(!i||i.data===Ea)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Ea}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Ea&&(yield[t,e])}}},gE=class{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}},mE=class er{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:h,useRequestAnimationFrame:c=!1,pdfBug:u=!1,pageColors:d=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=u,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new gE(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(er.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");er.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:n,transform:r,background:a}=this.params;this.gfx=new Ga(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),er.#e.delete(this._canvas),this.callback(t||new Eu(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),er.#e.delete(this._canvas),this.callback())))}};const vE="4.7.76",yE="8b73b828b";function Hf(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Yn(s){return Math.max(0,Math.min(255,255*s))}let zf=class{static CMYK_G([t,e,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Yn(t),[t,t,t]}static G_HTML([t]){const e=Hf(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Yn)}static RGB_HTML(t){return`#${t.map(Hf).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,i,n]){return[Yn(1-Math.min(1,t+n)),Yn(1-Math.min(1,i+n)),Yn(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const n=1-t,r=1-e,a=1-i,o=Math.min(n,r,a);return["CMYK",n,r,a,o]}},Av=class{static setupStorage(t,e,i,n,r){const a=n.getValue(e,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",o=>{n.setValue(e,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?t.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",o=>{n.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",o=>{n.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const l=o.target.options,h=l.selectedIndex===-1?"":l[l.selectedIndex].value;n.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:n,linkService:r}){const{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${n}`);for(const[l,h]of Object.entries(a))if(h!=null)switch(l){case"class":h.length&&t.setAttribute(l,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!o||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,h)}o&&r.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,r=t.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:r,linkService:i});const o=r!=="richText",l=t.div;if(l.append(a),t.viewport){const u=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=u}o&&l.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const u=document.createTextNode(n.value);a.append(u),o&&ac.shouldBuildText(n.name)&&h.push(u)}return{textDivs:h}}const c=[[n,-1,a]];for(;c.length>0;){const[u,d,f]=c.at(-1);if(d+1===u.children.length){c.pop();continue}const p=u.children[++c.at(-1)[1]];if(p===null)continue;const{name:m}=p;if(m==="#text"){const g=document.createTextNode(p.value);h.push(g),f.append(g);continue}const A=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,m):document.createElement(m);if(f.append(A),p.attributes&&this.setAttributes({html:A,element:p,storage:e,intent:r,linkService:i}),p.children?.length>0)c.push([p,-1,A]);else if(p.value){const g=document.createTextNode(p.value);o&&ac.shouldBuildText(m)&&h.push(g),A.append(g)}}for(const u of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}};const Vr=1e3,AE=9,zs=new WeakSet;function zi(s){return{width:s[2]-s[0],height:s[3]-s[1]}}let bE=class{static create(t){switch(t.data.annotationType){case Lt.LINK:return new wv(t);case Lt.TEXT:return new wE(t);case Lt.WIDGET:switch(t.data.fieldType){case"Tx":return new SE(t);case"Btn":return t.data.radioButton?new Sv(t):t.data.checkBox?new xE(t):new CE(t);case"Ch":return new TE(t);case"Sig":return new EE(t)}return new qs(t);case Lt.POPUP:return new oc(t);case Lt.FREETEXT:return new Ev(t);case Lt.LINE:return new RE(t);case Lt.SQUARE:return new PE(t);case Lt.CIRCLE:return new _E(t);case Lt.POLYLINE:return new xv(t);case Lt.CARET:return new LE(t);case Lt.INK:return new Mu(t);case Lt.POLYGON:return new ME(t);case Lt.HIGHLIGHT:return new Cv(t);case Lt.UNDERLINE:return new DE(t);case Lt.SQUIGGLY:return new IE(t);case Lt.STRIKEOUT:return new FE(t);case Lt.STAMP:return new Tv(t);case Lt.FILEATTACHMENT:return new NE(t);default:return new Ut(t)}}},Ut=class bv{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t?.str||e?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return bv._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#n(e),this.#i?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}}}=this;i?.splice(0,4,...t);const{width:h,height:c}=zi(t);e.left=`${100*(t[0]-o)/r}%`,e.top=`${100*(a-t[3]+l)/a}%`,n===0?(e.width=`${100*h/r}%`,e.height=`${100*c/a}%`):this.setRotation(n)}_createContainer(t){const{data:e,parent:{page:i,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof qs||(r.tabIndex=Vr);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof oc){const{rotation:m}=e;return!e.hasOwnCanvas&&m!==0&&this.setRotation(m,r),r}const{width:o,height:l}=zi(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const m=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(m>0||A>0){const v=`calc(${m}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;a.borderRadius=v}else if(this instanceof Sv){const v=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=v}switch(e.borderStyle.style){case Wn.SOLID:a.borderStyle="solid";break;case Wn.DASHED:a.borderStyle="dashed";break;case Wn.BEVELED:$("Unimplemented border style: beveled");break;case Wn.INSET:$("Unimplemented border style: inset");break;case Wn.UNDERLINE:a.borderBottomStyle="solid";break}const g=e.borderColor||null;g?(this.#e=!0,a.borderColor=j.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}const h=j.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:c,pageHeight:u,pageX:d,pageY:f}=n.rawDims;a.left=`${100*(h[0]-d)/c}%`,a.top=`${100*(h[1]-f)/u}%`;const{rotation:p}=e;return e.hasOwnCanvas||p===0?(a.width=`${100*o/c}%`,a.height=`${100*l/u}%`):this.setRotation(p,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:r,height:a}=zi(this.data.rect);let o,l;t%180===0?(o=100*r/i,l=100*a/n):(o=100*a/i,l=100*r/n),e.style.width=`${o}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,n)=>{const r=n.detail[e],a=r[0],o=r.slice(1);n.target.style[i]=zf[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:zf[`${a}_rgb`](o)})};return it(this,"_commonActions",{display:e=>{const{display:i}=e.detail,n=i%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const n of Object.keys(e.detail))(t[n]||i[n])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[n,r]of Object.entries(e)){const a=i[n];if(a){const o={detail:{[n]:r},target:t};a(o),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,n,r]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,A,g,v]=t.subarray(2,6);if(n===m&&r===A&&e===g&&i===v)return}const{style:a}=this.container;let o;if(this.#e){const{borderColor:m,borderWidth:A}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const l=n-e,h=r-i,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);const d=c.createElement("defs");u.append(d);const f=c.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let m=2,A=t.length;m<A;m+=8){const g=t[m],v=t[m+1],y=t[m+2],b=t[m+3],w=c.createElement("rect"),S=(y-e)/l,E=(r-v)/h,x=(g-y)/l,C=(v-b)/h;w.setAttribute("x",S),w.setAttribute("y",E),w.setAttribute("width",x),w.setAttribute("height",C),f.append(w),o?.push(`<rect vector-effect="non-scaling-stroke" x="${S}" y="${E}" width="${x}" height="${C}"/>`)}this.#e&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(u),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const i=this.#i=new oc({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){Mt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:r,id:a,exportValues:o}of n){if(r===-1||a===e)continue;const l=typeof o=="string"?o:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!zs.has(h)){$(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:l,domElement:h})}return i}for(const n of document.getElementsByName(t)){const{exportValue:r}=n,a=n.getAttribute("data-element-id");a!==e&&zs.has(n)&&i.push({id:a,exportValue:r,domElement:n})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}},wv=class extends Ut{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let n=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(i,t.action),n=!0):t.attachment?(this.#e(i,t.attachment,t.attachmentDest),n=!0):t.setOCGState?(this.#i(i,t.setOCGState),n=!0):t.dest?(this._bindLink(i,t.dest),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),n=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#i(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const r=i.get(n);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){$('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:n,refs:r,include:a}=e,o=[];if(n.length!==0||r.length!==0){const c=new Set(r);for(const u of n){const d=this._fieldObjects[u]||[];for(const{id:f}of d)c.add(f)}for(const u of Object.values(this._fieldObjects))for(const d of u)c.has(d.id)===a&&o.push(d)}else for(const c of Object.values(this._fieldObjects))o.push(...c);const l=this.annotationStorage,h=[];for(const c of o){const{id:u}=c;switch(h.push(u),c.type){case"text":{const f=c.defaultValue||"";l.setValue(u,{value:f});break}case"checkbox":case"radiobutton":{const f=c.defaultValue===c.exportValues;l.setValue(u,{value:f});break}case"combobox":case"listbox":{const f=c.defaultValue||"";l.setValue(u,{value:f});break}default:continue}const d=document.querySelector(`[data-element-id="${u}"]`);if(d){if(!zs.has(d)){$(`_bindResetFormAction - element not allowed: ${u}`);continue}}else continue;d.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}},wE=class extends Ut{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}},qs=class extends Ut{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Pe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,n,r){i.includes("mouse")?t.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(i,a=>{if(i==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(a)}})})}_setEventListeners(t,e,i,n){for(const[r,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,r,a,n),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":j.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||AE,r=t.style;let a;const o=2,l=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o),c=Math.round(h/(zl*n))||1,u=h/c;a=Math.min(n,l(u/zl))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(n,l(h/zl))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=j.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},SE=class extends qs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,n){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=i),r.setValue(a.id,{[n]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue});let r=n.value||"";const a=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;a&&r.length>a&&(r=r.slice(0,a));let o=n.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const l={userValue:r,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??r,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",o??r),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),zs.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Vr,this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",c=>{t.setValue(e,{value:c.target.value}),this.setPropertyOnSiblings(i,"value",c.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",c=>{const u=this.data.defaultFieldValue??"";i.value=l.userValue=u,l.formattedValue=null});let h=c=>{const{formattedValue:u}=l;u!=null&&(c.target.value=u),c.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",u=>{if(l.focused)return;const{target:d}=u;l.userValue&&(d.value=l.userValue),l.lastCommittedValue=d.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",u=>{this.showElementAndHideCanvas(u.target);const d={value(f){l.userValue=f.detail.value??"",t.setValue(e,{value:l.userValue.toString()}),f.target.value=l.userValue},formattedValue(f){const{formattedValue:p}=f.detail;l.formattedValue=p,p!=null&&f.target!==document.activeElement&&(f.target.value=p),t.setValue(e,{formattedValue:p})},selRange(f){f.target.setSelectionRange(...f.detail.selRange)},charLimit:f=>{const{charLimit:p}=f.detail,{target:m}=f;if(p===0){m.removeAttribute("maxLength");return}m.setAttribute("maxLength",p);let A=l.userValue;!A||A.length<=p||(A=A.slice(0,p),m.value=l.userValue=A,t.setValue(e,{value:A}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:m.selectionStart,selEnd:m.selectionEnd}}))}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("keydown",u=>{l.commitKey=1;let d=-1;if(u.key==="Escape"?d=0:u.key==="Enter"&&!this.data.multiLine?d=2:u.key==="Tab"&&(l.commitKey=3),d===-1)return;const{value:f}=u.target;l.lastCommittedValue!==f&&(l.lastCommittedValue=f,l.userValue=f,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,willCommit:!0,commitKey:d,selStart:u.target.selectionStart,selEnd:u.target.selectionEnd}}))});const c=h;h=null,i.addEventListener("blur",u=>{if(!l.focused||!u.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:d}=u.target;l.userValue=d,l.lastCommittedValue!==d&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,willCommit:!0,commitKey:l.commitKey,selStart:u.target.selectionStart,selEnd:u.target.selectionEnd}}),c(u)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",u=>{l.lastCommittedValue=null;const{data:d,target:f}=u,{value:p,selectionStart:m,selectionEnd:A}=f;let g=m,v=A;switch(u.inputType){case"deleteWordBackward":{const y=p.substring(0,m).match(/\w*[^\w]*$/);y&&(g-=y[0].length);break}case"deleteWordForward":{const y=p.substring(m).match(/^[^\w]*\w*/);y&&(v+=y[0].length);break}case"deleteContentBackward":m===A&&(g-=1);break;case"deleteContentForward":m===A&&(v+=1);break}u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,change:d||"",willCommit:!1,selStart:g,selEnd:v}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.value)}if(h&&i.addEventListener("blur",h),this.data.comb){const u=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${u}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},EE=class extends qs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},xE=class extends qs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return zs.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Vr,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const h of this._getElementsByName(o,i)){const c=l&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=c),t.setValue(h.id,{value:c})}t.setValue(i,{value:l})}),r.addEventListener("resetform",a=>{const o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},Sv=class extends qs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(i,{value:n})),n)for(const a of this._getElementsByName(e.fieldName,i))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(zs.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=Vr,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const h of this._getElementsByName(o,i))t.setValue(h.id,{value:!1});t.setValue(i,{value:l})}),r.addEventListener("resetform",a=>{const o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",o=>{const l={value:h=>{const c=a===h.detail.value;for(const u of this._getElementsByName(h.target.name)){const d=c&&u.id===i;u.domElement&&(u.domElement.checked=d),t.setValue(u.id,{value:d})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},CE=class extends wv{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}},TE=class extends qs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");zs.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Vr;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",c=>{const u=this.data.defaultFieldValue;for(const d of n.options)d.selected=d.value===u});for(const c of this.data.options){const u=document.createElement("option");u.textContent=c.displayValue,u.value=c.exportValue,i.value.includes(c.exportValue)&&(u.setAttribute("selected",!0),r=!1),n.append(u)}let a=null;if(r){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),n.prepend(c),a=()=>{c.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}const o=c=>{const u=c?"value":"textContent",{options:d,multiple:f}=n;return f?Array.prototype.filter.call(d,p=>p.selected).map(p=>p[u]):d.selectedIndex===-1?null:d[d.selectedIndex][u]};let l=o(!1);const h=c=>{const u=c.target.options;return Array.prototype.map.call(u,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",c=>{const u={value(d){a?.();const f=d.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const m of n.options)m.selected=p.has(m.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(d){n.multiple=!0},remove(d){const f=n.options,p=d.detail.remove;f[p].selected=!1,n.remove(p),f.length>0&&Array.prototype.findIndex.call(f,A=>A.selected)===-1&&(f[0].selected=!0),t.setValue(e,{value:o(!0),items:h(d)}),l=o(!1)},clear(d){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(d){const{index:f,displayValue:p,exportValue:m}=d.detail.insert,A=n.children[f],g=document.createElement("option");g.textContent=p,g.value=m,A?A.before(g):n.append(g),t.setValue(e,{value:o(!0),items:h(d)}),l=o(!1)},items(d){const{items:f}=d.detail;for(;n.length!==0;)n.remove(0);for(const p of f){const{displayValue:m,exportValue:A}=p,g=document.createElement("option");g.textContent=m,g.value=A,n.append(g)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:o(!0),items:h(d)}),l=o(!1)},indices(d){const f=new Set(d.detail.indices);for(const p of d.target.options)p.selected=f.has(p.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(u,c)}),n.addEventListener("input",c=>{const u=o(!0),d=o(!1);t.setValue(e,{value:u}),c.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:d,changeEx:u,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):n.addEventListener("input",function(c){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},oc=class extends Ut{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:Ut._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new kE({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${bu}${i}`).join(",")),this.container}},kE=class{#t=this.#M.bind(this);#e=this.#E.bind(this);#i=this.#A.bind(this);#n=this.#b.bind(this);#r=null;#s=null;#a=null;#l=null;#u=null;#c=null;#d=null;#o=!1;#h=null;#p=null;#g=null;#f=null;#m=null;#v=null;#y=!1;constructor({container:t,color:e,elements:i,titleObj:n,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:h,parentRect:c,open:u}){this.#s=t,this.#m=n,this.#a=a,this.#f=o,this.#c=l,this.#r=e,this.#g=h,this.#d=c,this.#u=i,this.#l=ev.toDateObject(r),this.trigger=i.flatMap(d=>d.getElementsToTriggerPopup());for(const d of this.trigger)d.addEventListener("click",this.#n),d.addEventListener("mouseenter",this.#i),d.addEventListener("mouseleave",this.#e),d.classList.add("popupTriggerArea");for(const d of i)d.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,u&&this.#b()}render(){if(this.#h)return;const t=this.#h=document.createElement("div");if(t.className="popup",this.#r){const r=t.style.outlineColor=j.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=j.makeHexColor(...this.#r.map(o=>Math.floor(.7*(255-o)+o)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=this.#m,t.append(e),this.#l){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#l.valueOf()})),e.append(r)}const n=this.#w;if(n)Av.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(this.#a);t.append(r)}this.#s.append(t)}get#w(){const t=this.#f,e=this.#a;return t?.str&&(!e?.str||e.str===t.str)&&this.#f.html||null}get#x(){return this.#w?.attributes?.style?.fontSize||0}get#T(){return this.#w?.attributes?.style?.color||null}#k(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:this.#T,fontSize:this.#x?`calc(${this.#x}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:n});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let r=0,a=n.length;r<a;++r){const o=n[r];i.append(document.createTextNode(o)),r<a-1&&i.append(document.createElement("br"))}return i}#M(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#o)&&this.#b()}updateEdited({rect:t,popupContent:e}){this.#v||={contentsObj:this.#a,richText:this.#f},t&&(this.#p=null),e&&(this.#f=this.#k(e),this.#a=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#v&&({contentsObj:this.#a,richText:this.#f}=this.#v,this.#v=null,this.#h?.remove(),this.#h=null,this.#p=null)}#C(){if(this.#p!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:n,pageY:r}}}=this.#c;let a=!!this.#d,o=a?this.#d:this.#g;for(const p of this.#u)if(!o||j.intersect(p.data.rect,o)!==null){o=p.data.rect,a=!0;break}const l=j.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),c=a?o[2]-o[0]+5:0,u=l[0]+c,d=l[1];this.#p=[100*(u-n)/e,100*(d-r)/i];const{style:f}=this.#s;f.left=`${this.#p[0]}%`,f.top=`${this.#p[1]}%`}#b(){this.#o=!this.#o,this.#o?(this.#A(),this.#s.addEventListener("click",this.#n),this.#s.addEventListener("keydown",this.#t)):(this.#E(),this.#s.removeEventListener("click",this.#n),this.#s.removeEventListener("keydown",this.#t))}#A(){this.#h||this.render(),this.isVisible?this.#o&&this.#s.classList.add("focused"):(this.#C(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#E(){this.#s.classList.remove("focused"),!(this.#o||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#s.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#A(),this.#y=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}},Ev=class extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Z.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},RE=class extends Ut{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:i}=zi(t.rect),n=this.svgFactory.create(e,i,!0),r=this.#t=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},PE=class extends Ut{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:i}=zi(t.rect),n=this.svgFactory.create(e,i,!0),r=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",e-r),a.setAttribute("height",i-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},_E=class extends Ut{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:i}=zi(t.rect),n=this.svgFactory.create(e,i,!0),r=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",e/2),a.setAttribute("cy",i/2),a.setAttribute("rx",e/2-r/2),a.setAttribute("ry",i/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},xv=class extends Ut{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:n}}=this;if(!e)return this.container;const{width:r,height:a}=zi(t),o=this.svgFactory.create(r,a,!0);let l=[];for(let c=0,u=e.length;c<u;c+=2){const d=e[c]-t[0],f=t[3]-e[c+1];l.push(`${d},${f}`)}l=l.join(" ");const h=this.#t=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",l),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},ME=class extends xv{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},LE=class extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},Mu=class extends Ut{#t=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Z.HIGHLIGHT:Z.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:e,borderStyle:i,popupRef:n}}=this,{width:r,height:a}=zi(t),o=this.svgFactory.create(r,a,!0);for(const l of e){let h=[];for(let u=0,d=l.length;u<d;u+=2){const f=l[u]-t[0],p=t[3]-l[u+1];h.push(`${f},${p}`)}h=h.join(" ");const c=this.svgFactory.createElement(this.svgElementName);this.#t.push(c),c.setAttribute("points",h),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),!n&&this.hasPopupData&&this._createPopup(),o.append(c)}return this.container.append(o),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Cv=class extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Z.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},DE=class extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},IE=class extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},FE=class extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},Tv=class extends Ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Z.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},NE=class extends Ut{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:n}=Pe.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(n?r.metaKey:r.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},OE=class{#t=null;#e=null;#i=new Map;#n=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:n,page:r,viewport:a,structTreeLayer:o}){this.div=t,this.#t=e,this.#e=i,this.#n=o||null,this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return this.#i.size>0}async#r(t,e){const i=t.firstChild||t,n=i.id=`${bu}${e}`,r=await this.#n?.getAriaAttributes(n);if(r)for(const[a,o]of r)i.setAttribute(a,o);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,i,!1)}async render(t){const{annotations:e}=t,i=this.div;Hs(i,this.viewport);const n=new Map,r={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new wu,annotationStorage:t.annotationStorage||new Tu,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const o=a.annotationType===Lt.POPUP;if(o){const c=n.get(a.id);if(!c)continue;r.elements=c}else{const{width:c,height:u}=zi(a.rect);if(c<=0||u<=0)continue}r.data=a;const l=bE.create(r);if(!l.isRenderable)continue;if(!o&&a.popupRef){const c=n.get(a.popupRef);c?c.push(l):n.set(a.popupRef,[l])}const h=l.render();a.hidden&&(h.style.visibility="hidden"),await this.#r(h,a.id),l._isEditable&&(this.#i.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#s()}update({viewport:t}){const e=this.div;this.viewport=t,Hs(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;i.className="annotationContent";const{firstChild:r}=n;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):n.append(i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}};const xa=/\r\n?|\n/g;let BE=class Gt extends ht{#t;#e="";#i=`${this.id}-editor`;#n=null;#r;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Gt.prototype,e=r=>r.isEmpty(),i=Nr.TRANSLATE_SMALL,n=Nr.TRANSLATE_BIG;return it(this,"_keyboardManager",new Yr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}]]))}static _type="freetext";static _editorType=Z.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||Gt._defaultColor||ht._defaultLineColor,this.#r=t.fontSize||Gt._defaultFontSize}static initialize(t,e){ht.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case q.FREETEXT_SIZE:Gt._defaultFontSize=e;break;case q.FREETEXT_COLOR:Gt._defaultColor=e;break}}updateParams(t,e){switch(t){case q.FREETEXT_SIZE:this.#s(e);break;case q.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[q.FREETEXT_SIZE,Gt._defaultFontSize],[q.FREETEXT_COLOR,Gt._defaultColor||ht._defaultLineColor]]}get propertiesToUpdate(){return[[q.FREETEXT_SIZE,this.#r],[q.FREETEXT_COLOR,this.#t]]}#s(t){const e=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--scale-factor))`,this.translate(0,-(n-this.#r)*this.parentScale),this.#r=n,this.#u()},i=this.#r;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#a(t){const e=n=>{this.#t=this.editorDiv.style.color=n},i=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Gt._internalPadding*t,-(Gt._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Z.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#l(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(Gt.#c(i)),e=i);return t.join(`
`)}#u(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:n,div:r}=this,a=r.style.display,o=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",n.div.append(this.div),i=r.getBoundingClientRect(),r.remove(),r.style.display=a,r.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#l().trimEnd();if(t===e)return;const i=n=>{if(this.#e=n,!n){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Gt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),ht._l10nPromise.get("pdfjs-free-text-default-content").then(n=>this.editorDiv?.setAttribute("default-content",n)),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Ao(this,this.div,["dblclick","keydown"]),this.width){const[n,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);const[h,c]=this.pageDimensions,[u,d]=this.pageTranslation;let f,p;switch(this.rotation){case 0:f=t+(a[0]-u)/h,p=e+this.height-(a[1]-d)/c;break;case 90:f=t+(a[0]-u)/h,p=e-(a[1]-d)/c,[o,l]=[l,-o];break;case 180:f=t-this.width+(a[0]-u)/h,p=e-(a[1]-d)/c,[o,l]=[-o,-l];break;case 270:f=t+(a[0]-u-this.height*c)/h,p=e+(a[1]-d-this.width*h)/c,[o,l]=[-l,o];break}this.setAt(f*n,p*r,o,l)}else this.setAt(t*n,e*r,this.width*n,this.height*r);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(xa,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const n=Gt.#h(e.getData("text")||"").replaceAll(xa,`
`);if(!n)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const a=r.getRangeAt(0);if(!n.includes(`
`)){a.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:o,startOffset:l}=a,h=[],c=[];if(o.nodeType===Node.TEXT_NODE){const f=o.parentElement;if(c.push(o.nodeValue.slice(l).replaceAll(xa,"")),f!==this.editorDiv){let p=h;for(const m of this.editorDiv.childNodes){if(m===f){p=c;continue}p.push(Gt.#c(m))}}h.push(o.nodeValue.slice(0,l).replaceAll(xa,""))}else if(o===this.editorDiv){let f=h,p=0;for(const m of this.editorDiv.childNodes)p++===l&&(f=c),f.push(Gt.#c(m))}this.#e=`${h.join(`
`)}${n}${c.join(`
`)}`,this.#d();const u=new Range;let d=h.reduce((f,p)=>f+p.length,0);for(const{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){const p=f.nodeValue.length;if(d<=p){u.setStart(f,d),u.setEnd(f,d);break}d-=p}r.removeAllRanges(),r.addRange(u)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#o(){return this.#e.replaceAll(" "," ")}static#h(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,i){let n=null;if(t instanceof Ev){const{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:l,rotation:h,id:c,popupRef:u},textContent:d,textPosition:f,parent:{page:{pageNumber:p}}}=t;if(!d||d.length===0)return null;n=t={annotationType:Z.FREETEXT,color:Array.from(o),fontSize:a,value:d.join(`
`),position:f,pageIndex:p-1,rect:l.slice(0),rotation:h,id:c,deleted:!1,popupRef:u}}const r=await super.deserialize(t,e,i);return r.#r=t.fontSize,r.#t=j.makeHexColor(...t.color),r.#e=Gt.#h(t.value),r.annotationElementId=t.id||null,r._initialData=n,r}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Gt._internalPadding*this.parentScale,i=this.getRect(e,e),n=ht._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),r={annotationType:Z.FREETEXT,color:n,fontSize:this.#r,value:this.#o(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?r:this.annotationElementId&&!this.#p(r)?null:(r.id=this.annotationElementId,r)}#p(t){const{value:e,fontSize:i,color:n,pageIndex:r}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((a,o)=>a!==n[o])||t.pageIndex!==r}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#t,e.replaceChildren();for(const r of this.#e.split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),e.append(a)}const n=Gt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(n,n),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}},jf=class{#t;#e=[];#i=[];constructor(t,e=0,i=0,n=!0){let r=1/0,a=-1/0,o=1/0,l=-1/0;const c=10**-4;for(const{x:g,y:v,width:y,height:b}of t){const w=Math.floor((g-e)/c)*c,S=Math.ceil((g+y+e)/c)*c,E=Math.floor((v-e)/c)*c,x=Math.ceil((v+b+e)/c)*c,C=[w,E,x,!0],T=[S,E,x,!1];this.#e.push(C,T),r=Math.min(r,w),a=Math.max(a,S),o=Math.min(o,E),l=Math.max(l,x)}const u=a-r+2*i,d=l-o+2*i,f=r-i,p=o-i,m=this.#e.at(n?-1:-2),A=[m[0],m[2]];for(const g of this.#e){const[v,y,b]=g;g[0]=(v-f)/u,g[1]=(y-p)/d,g[2]=(b-p)/d}this.#t={x:f,y:p,width:u,height:d,lastPoint:A}}getOutlines(){this.#e.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#e)e[3]?(t.push(...this.#l(e)),this.#s(e)):(this.#a(e),t.push(...this.#l(e)));return this.#n(t)}#n(t){const e=[],i=new Set;for(const a of t){const[o,l,h]=a;e.push([o,l,a],[o,h,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){const l=e[a][2],h=e[a+1][2];l.push(h),h.push(l),i.add(l),i.add(h)}const n=[];let r;for(;i.size>0;){const a=i.values().next().value;let[o,l,h,c,u]=a;i.delete(a);let d=o,f=l;for(r=[o,h],n.push(r);;){let p;if(i.has(c))p=c;else if(i.has(u))p=u;else break;i.delete(p),[o,l,h,c,u]=p,d!==o&&(r.push(d,f,o,f===l?l:h),d=o),f=f===l?h:l}r.push(d,f)}return new HE(n,this.#t)}#r(t){const e=this.#i;let i=0,n=e.length-1;for(;i<=n;){const r=i+n>>1,a=e[r][0];if(a===t)return r;a<t?i=r+1:n=r-1}return n+1}#s([,t,e]){const i=this.#r(t);this.#i.splice(i,0,[t,e])}#a([,t,e]){const i=this.#r(t);for(let n=i;n<this.#i.length;n++){const[r,a]=this.#i[n];if(r!==t)break;if(r===t&&a===e){this.#i.splice(n,1);return}}for(let n=i-1;n>=0;n--){const[r,a]=this.#i[n];if(r!==t)break;if(r===t&&a===e){this.#i.splice(n,1);return}}}#l(t){const[e,i,n]=t,r=[[e,i,n]],a=this.#r(n);for(let o=0;o<a;o++){const[l,h]=this.#i[o];for(let c=0,u=r.length;c<u;c++){const[,d,f]=r[c];if(!(h<=d||f<=l)){if(d>=l){if(f>h)r[c][1]=h;else{if(u===1)return[];r.splice(c,1),c--,u--}continue}r[c][2]=l,f>h&&r.push([e,h,f])}}}return r}},kv=class{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof hc}},HE=class extends kv{#t;#e;constructor(t,e){super(),this.#e=t,this.#t=e}toSVGPath(){const t=[];for(const e of this.#e){let[i,n]=e;t.push(`M${i} ${n}`);for(let r=2;r<e.length;r+=2){const a=e[r],o=e[r+1];a===i?(t.push(`V${o}`),n=o):o===n&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,e,i,n],r){const a=[],o=i-t,l=n-e;for(const h of this.#e){const c=new Array(h.length);for(let u=0;u<h.length;u+=2)c[u]=t+h[u]*o,c[u+1]=n-h[u+1]*l;a.push(c)}return a}get box(){return this.#t}},lc=class ir{#t;#e=[];#i;#n;#r=[];#s=new Float64Array(18);#a;#l;#u;#c;#d;#o;#h=[];static#p=8;static#g=2;static#f=ir.#p+ir.#g;constructor({x:t,y:e},i,n,r,a,o=0){this.#t=i,this.#o=r*n,this.#n=a,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=o,this.#c=ir.#p*n,this.#u=ir.#f*n,this.#d=n,this.#h.push(t,e)}get free(){return!0}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[i,n,r,a]=this.#t;return[(this.#a+(t[0]-e[0])/2-i)/r,(this.#l+(t[1]-e[1])/2-n)/a,(this.#a+(e[0]-t[0])/2-i)/r,(this.#l+(e[1]-t[1])/2-n)/a]}add({x:t,y:e}){this.#a=t,this.#l=e;const[i,n,r,a]=this.#t;let[o,l,h,c]=this.#s.subarray(8,12);const u=t-h,d=e-c,f=Math.hypot(u,d);if(f<this.#u)return!1;const p=f-this.#c,m=p/f,A=m*u,g=m*d;let v=o,y=l;o=h,l=c,h+=A,c+=g,this.#h?.push(t,e);const b=-g/p,w=A/p,S=b*this.#o,E=w*this.#o;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([h+S,c+E],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([h-S,c-E],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([o+S,l+E],2),this.#r.push(NaN,NaN,NaN,NaN,(o+S-i)/r,(l+E-n)/a),this.#s.set([o-S,l-E],14),this.#e.push(NaN,NaN,NaN,NaN,(o-S-i)/r,(l-E-n)/a)),this.#s.set([v,y,o,l,h,c],6),!this.isEmpty()):(this.#s.set([v,y,o,l,h,c],6),Math.abs(Math.atan2(y-l,v-o)-Math.atan2(g,A))<Math.PI/2?([o,l,h,c]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((o+h)/2-i)/r,((l+c)/2-n)/a),[o,l,v,y]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((v+o)/2-i)/r,((y+l)/2-n)/a),!0):([v,y,o,l,h,c]=this.#s.subarray(0,6),this.#r.push(((v+5*o)/6-i)/r,((y+5*l)/6-n)/a,((5*o+h)/6-i)/r,((5*l+c)/6-n)/a,((o+h)/2-i)/r,((l+c)/2-n)/a),[h,c,o,l,v,y]=this.#s.subarray(12,18),this.#e.push(((v+5*o)/6-i)/r,((y+5*l)/6-n)/a,((5*o+h)/6-i)/r,((5*l+c)/6-n)/a,((o+h)/2-i)/r,((l+c)/2-n)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e,i=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[r,a,o,l]=this.#t,[h,c,u,d]=this.#m();if(isNaN(this.#s[6])&&!this.isEmpty())return`M${(this.#s[2]-r)/o} ${(this.#s[3]-a)/l} L${(this.#s[4]-r)/o} ${(this.#s[5]-a)/l} L${h} ${c} L${u} ${d} L${(this.#s[16]-r)/o} ${(this.#s[17]-a)/l} L${(this.#s[14]-r)/o} ${(this.#s[15]-a)/l} Z`;const f=[];f.push(`M${t[4]} ${t[5]}`);for(let p=6;p<t.length;p+=6)isNaN(t[p])?f.push(`L${t[p+4]} ${t[p+5]}`):f.push(`C${t[p]} ${t[p+1]} ${t[p+2]} ${t[p+3]} ${t[p+4]} ${t[p+5]}`);f.push(`L${(i[0]-r)/o} ${(i[1]-a)/l} L${h} ${c} L${u} ${d} L${(n[0]-r)/o} ${(n[1]-a)/l}`);for(let p=e.length-6;p>=6;p-=6)isNaN(e[p])?f.push(`L${e[p+4]} ${e[p+5]}`):f.push(`C${e[p]} ${e[p+1]} ${e[p+2]} ${e[p+3]} ${e[p+4]} ${e[p+5]}`);return f.push(`L${e[4]} ${e[5]} Z`),f.join(" ")}getOutlines(){const t=this.#r,e=this.#e,i=this.#s,n=i.subarray(4,6),r=i.subarray(16,18),[a,o,l,h]=this.#t,c=new Float64Array((this.#h?.length??0)+2);for(let g=0,v=c.length-2;g<v;g+=2)c[g]=(this.#h[g]-a)/l,c[g+1]=(this.#h[g+1]-o)/h;c[c.length-2]=(this.#a-a)/l,c[c.length-1]=(this.#l-o)/h;const[u,d,f,p]=this.#m();if(isNaN(i[6])&&!this.isEmpty()){const g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(i[2]-a)/l,(i[3]-o)/h,NaN,NaN,NaN,NaN,(i[4]-a)/l,(i[5]-o)/h,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(i[16]-a)/l,(i[17]-o)/h,NaN,NaN,NaN,NaN,(i[14]-a)/l,(i[15]-o)/h],0),new hc(g,c,this.#t,this.#d,this.#i,this.#n)}const m=new Float64Array(this.#r.length+24+this.#e.length);let A=t.length;for(let g=0;g<A;g+=2){if(isNaN(t[g])){m[g]=m[g+1]=NaN;continue}m[g]=t[g],m[g+1]=t[g+1]}m.set([NaN,NaN,NaN,NaN,(n[0]-a)/l,(n[1]-o)/h,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(r[0]-a)/l,(r[1]-o)/h],A),A+=24;for(let g=e.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(e[g+v])){m[A]=m[A+1]=NaN,A+=2;continue}m[A]=e[g+v],m[A+1]=e[g+v+1],A+=2}return m.set([NaN,NaN,NaN,NaN,e[4],e[5]],A),new hc(m,c,this.#t,this.#d,this.#i,this.#n)}},hc=class extends kv{#t;#e=null;#i;#n;#r;#s;#a;constructor(t,e,i,n,r,a){super(),this.#a=t,this.#r=e,this.#t=i,this.#s=n,this.#i=r,this.#n=a,this.#c(a);const{x:o,y:l,width:h,height:c}=this.#e;for(let u=0,d=t.length;u<d;u+=2)t[u]=(t[u]-o)/h,t[u+1]=(t[u+1]-l)/c;for(let u=0,d=e.length;u<d;u+=2)e[u]=(e[u]-o)/h,e[u+1]=(e[u+1]-l)/c}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,i=this.#a.length;e<i;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,n],r){const a=i-t,o=n-e;let l,h;switch(r){case 0:l=this.#l(this.#a,t,n,a,-o),h=this.#l(this.#r,t,n,a,-o);break;case 90:l=this.#u(this.#a,t,e,a,o),h=this.#u(this.#r,t,e,a,o);break;case 180:l=this.#l(this.#a,i,e,-a,o),h=this.#l(this.#r,i,e,-a,o);break;case 270:l=this.#u(this.#a,i,n,-a,-o),h=this.#u(this.#r,i,n,-a,-o);break}return{outline:Array.from(l),points:[Array.from(h)]}}#l(t,e,i,n,r){const a=new Float64Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o]*n,a[o+1]=i+t[o+1]*r;return a}#u(t,e,i,n,r){const a=new Float64Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o+1]*n,a[o+1]=i+t[o]*r;return a}#c(t){const e=this.#a;let i=e[4],n=e[5],r=i,a=n,o=i,l=n,h=i,c=n;const u=t?Math.max:Math.min;for(let A=6,g=e.length;A<g;A+=6){if(isNaN(e[A]))r=Math.min(r,e[A+4]),a=Math.min(a,e[A+5]),o=Math.max(o,e[A+4]),l=Math.max(l,e[A+5]),c<e[A+5]?(h=e[A+4],c=e[A+5]):c===e[A+5]&&(h=u(h,e[A+4]));else{const v=j.bezierBoundingBox(i,n,...e.slice(A,A+6));r=Math.min(r,v[0]),a=Math.min(a,v[1]),o=Math.max(o,v[2]),l=Math.max(l,v[3]),c<v[3]?(h=v[2],c=v[3]):c===v[3]&&(h=u(h,v[2]))}i=e[A+4],n=e[A+5]}const d=r-this.#i,f=a-this.#i,p=o-r+2*this.#i,m=l-a+2*this.#i;this.#e={x:d,y:f,width:p,height:m,lastPoint:[h,c]}}get box(){return this.#e}getNewOutline(t,e){const{x:i,y:n,width:r,height:a}=this.#e,[o,l,h,c]=this.#t,u=r*h,d=a*c,f=i*h+o,p=n*c+l,m=new lc({x:this.#r[0]*u+f,y:this.#r[1]*d+p},this.#t,this.#s,t,this.#n,e??this.#i);for(let A=2;A<this.#r.length;A+=2)m.add({x:this.#r[A]*u+f,y:this.#r[A+1]*d+p});return m.getOutlines()}},Rv=class gi{#t=this.#f.bind(this);#e=this.#v.bind(this);#i=null;#n=null;#r;#s=null;#a=!1;#l=!1;#u=null;#c;#d=null;#o;static#h=null;static get _keyboardManager(){return it(this,"_keyboardManager",new Yr([[["Escape","mac+Escape"],gi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],gi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],gi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],gi.prototype._moveToPrevious],[["Home","mac+Home"],gi.prototype._moveToBeginning],[["End","mac+End"],gi.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#l=!1,this.#o=q.HIGHLIGHT_COLOR,this.#u=t):(this.#l=!0,this.#o=q.HIGHLIGHT_DEFAULT_COLOR),this.#d=t?._uiManager||e,this.#c=this.#d._eventBus,this.#r=t?.color||this.#d?.highlightColors.values().next().value||"#FFFF98",gi.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#i=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=this.#d._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#t,{signal:e});const i=this.#n=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#r,t.append(i),t}renderMainDropdown(){const t=this.#s=this.#p();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#p(){const t=document.createElement("div"),e=this.#d._signal;t.addEventListener("contextmenu",ti,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,n]of this.#d.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=i,r.setAttribute("data-l10n-id",gi.#h[i]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=n,r.setAttribute("aria-selected",n===this.#r),r.addEventListener("click",this.#g.bind(this,n),{signal:e}),t.append(r)}return t.addEventListener("keydown",this.#t,{signal:e}),t}#g(t,e){e.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#o,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#i){this.#m(t);return}const e=t.target.getAttribute("data-color");e&&this.#g(e,t)}_moveToNext(t){if(!this.#y){this.#m(t);return}if(t.target===this.#i){this.#s.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#s?.firstChild||t.target===this.#i){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#y){this.#m(t);return}this.#s.firstChild?.focus()}_moveToEnd(t){if(!this.#y){this.#m(t);return}this.#s.lastChild?.focus()}#f(t){gi._keyboardManager.exec(this,t)}#m(t){if(this.#y){this.hideDropdown();return}if(this.#a=t.detail===0,window.addEventListener("pointerdown",this.#e,{signal:this.#d._signal}),this.#s){this.#s.classList.remove("hidden");return}const e=this.#s=this.#p();this.#i.append(e)}#v(t){this.#s?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),window.removeEventListener("pointerdown",this.#e)}get#y(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#l){if(!this.#y){this.#u?.unselect();return}this.hideDropdown(),this.#i.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#n&&(this.#n.style.backgroundColor=t),!this.#s)return;const e=this.#d.highlightColors.values();for(const i of this.#s.children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#s?.remove(),this.#s=null}},Uf=class It extends ht{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#l=0;#u=null;#c=null;#d=null;#o=!1;#h=null;#p;#g=null;#f="";#m;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Z.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=It.prototype;return it(this,"_keyboardManager",new Yr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||It._defaultColor,this.#m=t.thickness||It._defaultThickness,this.#p=t.opacity||It._defaultOpacity,this.#i=t.boxes||null,this.#v=t.methodOfCreation||"",this.#f=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#o=!0,this.#w(t),this.#C()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#l=t.focusOffset,this.#y(),this.#C(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new jf(this.#i,.001);this.#c=t.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#c.box;const e=new jf(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:i}=this.#s.box;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#w({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#c=t;const n=1.5;if(this.#s=t.getNewOutline(this.#m/2+n,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeLine(e,t),this.#g=this.parent.drawLayer.highlightOutline(this.#s);else if(this.parent){const c=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,t),this.parent.drawLayer.updateBox(this.#d,It.#b(this.#c.box,(c-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#g,this.#s),this.parent.drawLayer.updateBox(this.#g,It.#b(this.#s.box,c))}const{x:r,y:a,width:o,height:l}=t.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=o,this.height=l;break;case 90:{const[c,u]=this.parentDimensions;this.x=a,this.y=1-r,this.width=o*u/c,this.height=l*c/u;break}case 180:this.x=1-r,this.y=1-a,this.width=o,this.height=l;break;case 270:{const[c,u]=this.parentDimensions;this.x=1-a,this.y=r,this.width=o*u/c,this.height=l*c/u;break}}const{lastPoint:h}=this.#s.box;this.#h=[(h[0]-r)/o,(h[1]-a)/l]}static initialize(t,e){ht.initialize(t,e),It._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case q.HIGHLIGHT_DEFAULT_COLOR:It._defaultColor=e;break;case q.HIGHLIGHT_THICKNESS:It._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#h}updateParams(t,e){switch(t){case q.HIGHLIGHT_COLOR:this.#x(e);break;case q.HIGHLIGHT_THICKNESS:this.#T(e);break}}static get defaultPropertiesToUpdate(){return[[q.HIGHLIGHT_DEFAULT_COLOR,It._defaultColor],[q.HIGHLIGHT_THICKNESS,It._defaultThickness]]}get propertiesToUpdate(){return[[q.HIGHLIGHT_COLOR,this.color||It._defaultColor],[q.HIGHLIGHT_THICKNESS,this.#m||It._defaultThickness],[q.HIGHLIGHT_FREE,this.#o]]}#x(t){const e=(r,a)=>{this.color=r,this.parent?.drawLayer.changeColor(this.#d,r),this.#r?.updateColor(r),this.#p=a,this.parent?.drawLayer.changeOpacity(this.#d,a)},i=this.color,n=this.#p;this.addCommands({cmd:e.bind(this,t,It._defaultOpacity),undo:e.bind(this,i,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#T(t){const e=this.#m,i=n=>{this.#m=n,this.#k(n)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#r=new Rv({editor:this}),t.addColorPicker(this.#r)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#P())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#M(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#C(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#M():t&&(this.#C(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#k(t){if(!this.#o)return;this.#w({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#M(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#C(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.highlight(this.#c,this.color,this.#p),this.#g=t.drawLayer.highlightOutline(this.#s),this.#u&&(this.#u.style.clipPath=this.#n))}static#b({x:t,y:e,width:i,height:n},r){switch(r){case 90:return{x:1-e-n,y:t,width:n,height:i};case 180:return{x:1-t-i,y:1-e-n,width:i,height:n};case 270:return{x:e,y:1-t-i,width:n,height:i}}return{x:t,y:e,width:i,height:n}}rotate(t){const{drawLayer:e}=this.parent;let i;this.#o?(t=(t-this.rotation+360)%360,i=It.#b(this.#c.box,t)):i=It.#b(this,t),e.rotate(this.#d,t),e.rotate(this.#g,t),e.updateBox(this.#d,i),e.updateBox(this.#g,It.#b(this.#s.box,t))}render(){if(this.div)return this.div;const t=super.render();this.#f&&(t.setAttribute("aria-label",this.#f),t.setAttribute("role","mark")),this.#o?t.classList.add("free"):this.div.addEventListener("keydown",this.#A.bind(this),{signal:this._uiManager._signal});const e=this.#u=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n;const[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),Ao(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(this.#g,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#g,"hovered")}#A(t){It._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#E(!0);break;case 1:case 3:this.#E(!1);break}}#E(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#l)}select(){super.select(),this.#g&&(this.parent?.drawLayer.removeClass(this.#g,"hovered"),this.parent?.drawLayer.addClass(this.#g,"selected"))}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.removeClass(this.#g,"selected"),this.#o||this.#E(!1))}get _mustFixPosition(){return!this.#o}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(this.#d,t),this.parent.drawLayer.show(this.#g,t))}#P(){return this.#o?this.rotation:0}#_(){if(this.#o)return null;const[t,e]=this.pageDimensions,[i,n]=this.pageTranslation,r=this.#i,a=new Float32Array(r.length*8);let o=0;for(const{x:l,y:h,width:c,height:u}of r){const d=l*t+i,f=(1-h-u)*e+n;a[o]=a[o+4]=d,a[o+1]=a[o+3]=f,a[o+2]=a[o+6]=d+c*t,a[o+5]=a[o+7]=f+u*e,o+=8}return a}#R(t){return this.#c.serialize(t,this.#P())}static startHighlighting(t,e,{target:i,x:n,y:r}){const{x:a,y:o,width:l,height:h}=i.getBoundingClientRect(),c=new AbortController,u=t.combinedSignal(c),d=p=>{p.preventDefault(),p.stopPropagation()},f=p=>{c.abort(),this.#D(t,p)};window.addEventListener("blur",f,{signal:u}),window.addEventListener("pointerup",f,{signal:u}),window.addEventListener("pointerdown",d,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",ti,{signal:u}),i.addEventListener("pointermove",this.#S.bind(this,t),{signal:u}),this._freeHighlight=new lc({x:n,y:r},[a,o,l,h],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#S(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#D(t,e){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let n=null;if(t instanceof Cv){const{data:{quadPoints:p,rect:m,rotation:A,id:g,color:v,opacity:y,popupRef:b},parent:{page:{pageNumber:w}}}=t;n=t={annotationType:Z.HIGHLIGHT,color:Array.from(v),opacity:y,quadPoints:p,boxes:null,pageIndex:w-1,rect:m.slice(0),rotation:A,id:g,deleted:!1,popupRef:b}}else if(t instanceof Mu){const{data:{inkLists:p,rect:m,rotation:A,id:g,color:v,borderStyle:{rawWidth:y},popupRef:b},parent:{page:{pageNumber:w}}}=t;n=t={annotationType:Z.HIGHLIGHT,color:Array.from(v),thickness:y,inkLists:p,boxes:null,pageIndex:w-1,rect:m.slice(0),rotation:A,id:g,deleted:!1,popupRef:b}}const{color:r,quadPoints:a,inkLists:o,opacity:l}=t,h=await super.deserialize(t,e,i);h.color=j.makeHexColor(...r),h.#p=l||1,o&&(h.#m=t.thickness),h.annotationElementId=t.id||null,h._initialData=n;const[c,u]=h.pageDimensions,[d,f]=h.pageTranslation;if(a){const p=h.#i=[];for(let m=0;m<a.length;m+=8)p.push({x:(a[m]-d)/c,y:1-(a[m+1]-f)/u,width:(a[m+2]-a[m])/c,height:(a[m+1]-a[m+5])/u});h.#y(),h.#C(),h.rotate(h.rotation)}else if(o){h.#o=!0;const p=o[0],m={x:p[0]-d,y:u-(p[1]-f)},A=new lc(m,[0,0,c,u],1,h.#m/2,!0,.001);for(let y=0,b=p.length;y<b;y+=2)m.x=p[y]-d,m.y=u-(p[y+1]-f),A.add(m);const{id:g,clipPathId:v}=e.drawLayer.highlight(A,h.color,h._defaultOpacity,!0);h.#w({highlightOutlines:A.getOutlines(),highlightId:g,clipPathId:v}),h.#C()}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),i=ht._colorManager.convert(this.color),n={annotationType:Z.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#m,quadPoints:this.#_(),outlines:this.#R(e),pageIndex:this.pageIndex,rect:e,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#L(n)?null:(n.id=this.annotationElementId,n)}#L(t){const{color:e}=this._initialData;return t.color.some((i,n)=>i!==e[n])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},zE=class ee extends ht{#t=0;#e=0;#i=null;#n=new Path2D;#r=!1;#s=null;#a=!1;#l=!1;#u=null;#c=null;#d=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=Z.INK;constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){ht.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case q.INK_THICKNESS:ee._defaultThickness=e;break;case q.INK_COLOR:ee._defaultColor=e;break;case q.INK_OPACITY:ee._defaultOpacity=e/100;break}}updateParams(t,e){switch(t){case q.INK_THICKNESS:this.#p(e);break;case q.INK_COLOR:this.#g(e);break;case q.INK_OPACITY:this.#f(e);break}}static get defaultPropertiesToUpdate(){return[[q.INK_THICKNESS,ee._defaultThickness],[q.INK_COLOR,ee._defaultColor||ht._defaultLineColor],[q.INK_OPACITY,Math.round(ee._defaultOpacity*100)]]}get propertiesToUpdate(){return[[q.INK_THICKNESS,this.thickness||ee._defaultThickness],[q.INK_COLOR,this.color||ee._defaultColor||ht._defaultLineColor],[q.INK_OPACITY,Math.round(100*(this.opacity??ee._defaultOpacity))]]}#p(t){const e=n=>{this.thickness=n,this.#I()},i=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#g(t){const e=n=>{this.color=n,this.#b()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#f(t){const e=n=>{this.opacity=n,this.#b()};t/=100;const i=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:q.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#_(),this.#R()),this.isAttachedToDOM||(this.parent.add(this),this.#S()),this.#I()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#i&&(clearTimeout(this.#i),this.#i=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,i=this.width*t,n=this.height*e;this.setDimensions(i,n)}enableEditMode(){this.#r||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#A())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#E())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#m(){const{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}}#v(){const{ctx:t,color:e,opacity:i,thickness:n,parentScale:r,scaleFactor:a}=this;t.lineWidth=n*r/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${rS(i)}`}#y(t,e){this.canvas.addEventListener("contextmenu",ti,{signal:this._uiManager._signal}),this.#E(),this.#s=new AbortController;const i=this._uiManager.combinedSignal(this.#s);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,this.#l||(this.#l=!0,this.#S(),this.thickness||=ee._defaultThickness,this.color||=ee._defaultColor||ht._defaultLineColor,this.opacity??=ee._defaultOpacity),this.currentPath.push([t,e]),this.#a=!1,this.#v(),this.#h=()=>{this.#k(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#w(t,e){const[i,n]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&e===n)return;const r=this.currentPath;let a=this.#n;if(r.push([t,e]),this.#a=!0,r.length<=2){a.moveTo(...r[0]),a.lineTo(t,e);return}r.length===3&&(this.#n=a=new Path2D,a.moveTo(...r[0])),this.#M(a,...r.at(-3),...r.at(-2),t,e)}#x(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);this.#n.lineTo(...t)}#T(t,e){this.#h=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#w(t,e),this.#x();let i;if(this.currentPath.length!==1)i=this.#C();else{const l=[t,e];i=[[l,l.slice(),l.slice(),l]]}const n=this.#n,r=this.currentPath;this.currentPath=[],this.#n=new Path2D;const a=()=>{this.allRawPaths.push(r),this.paths.push(i),this.bezierPath2D.push(n),this._uiManager.rebuild(this)},o=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#_(),this.#R()),this.#I())};this.addCommands({cmd:a,undo:o,mustExec:!0})}#k(){if(!this.#a)return;this.#a=!1;const t=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),i=e.map(a=>a[0]),n=e.map(a=>a[1]);Math.min(...i)-t,Math.max(...i)+t,Math.min(...n)-t,Math.max(...n)+t;const{ctx:r}=this;r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)r.stroke(a);r.stroke(this.#n),r.restore()}#M(t,e,i,n,r,a,o){const l=(e+n)/2,h=(i+r)/2,c=(n+a)/2,u=(r+o)/2;t.bezierCurveTo(l+2*(n-l)/3,h+2*(r-h)/3,c+2*(n-c)/3,u+2*(r-u)/3,c,u)}#C(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const e=[];let i,[n,r]=t[0];for(i=1;i<t.length-2;i++){const[d,f]=t[i],[p,m]=t[i+1],A=(d+p)/2,g=(f+m)/2,v=[n+2*(d-n)/3,r+2*(f-r)/3],y=[A+2*(d-A)/3,g+2*(f-g)/3];e.push([[n,r],v,y,[A,g]]),[n,r]=[A,g]}const[a,o]=t[i],[l,h]=t[i+1],c=[n+2*(a-n)/3,r+2*(o-r)/3],u=[l+2*(a-l)/3,h+2*(o-h)/3];return e.push([[n,r],c,u,[l,h]]),e}#b(){if(this.isEmpty()){this.#L();return}this.#v();const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#L();for(const i of this.bezierPath2D)e.stroke(i)}commit(){this.#r||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#r=!0,this.div.classList.add("disabled"),this.#I(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}#A(){if(this.#c)return;this.#c=new AbortController;const t=this._uiManager.combinedSignal(this.#c);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})}#E(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#r||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#y(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#w(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#P(t)}canvasPointerleave(t){this.#P(t)}#P(t){this.#s?.abort(),this.#s=null,this.#A(),this.#i&&clearTimeout(this.#i),this.#i=setTimeout(()=>{this.#i=null,this.canvas.removeEventListener("contextmenu",ti)},10),this.#T(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#_(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#R(){this.#u=new ResizeObserver(t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#r}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,n,r,a]=this.#m();if(this.setAt(i,n,0,0),this.setDims(r,a),this.#_(),this.width){const[o,l]=this.parentDimensions;this.setAspectRatio(this.width*o,this.height*l),this.setAt(t*o,e*l,this.width*o,this.height*l),this.#l=!0,this.#S(),this.setDims(this.width*o,this.height*l),this.#b(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#R(),this.div}#S(){if(!this.#l)return;const[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#L()}setDimensions(t,e){const i=Math.round(t),n=Math.round(e);if(this.#d===i&&this.#o===n)return;this.#d=i,this.#o=n,this.canvas.style.visibility="hidden";const[r,a]=this.parentDimensions;this.width=t/r,this.height=e/a,this.fixAndSetPosition(),this.#r&&this.#D(t,e),this.#S(),this.#b(),this.canvas.style.visibility="visible",this.fixDims()}#D(t,e){const i=this.#j(),n=(t-i)/this.#e,r=(e-i)/this.#t;this.scaleFactor=Math.min(n,r)}#L(){const t=this.#j()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#F(t){const e=new Path2D;for(let i=0,n=t.length;i<n;i++){const[r,a,o,l]=t[i];i===0&&e.moveTo(...r),e.bezierCurveTo(a[0],a[1],o[0],o[1],l[0],l[1])}return e}static#O(t,e,i){const[n,r,a,o]=e;switch(i){case 0:for(let l=0,h=t.length;l<h;l+=2)t[l]+=n,t[l+1]=o-t[l+1];break;case 90:for(let l=0,h=t.length;l<h;l+=2){const c=t[l];t[l]=t[l+1]+n,t[l+1]=c+r}break;case 180:for(let l=0,h=t.length;l<h;l+=2)t[l]=a-t[l],t[l+1]+=r;break;case 270:for(let l=0,h=t.length;l<h;l+=2){const c=t[l];t[l]=a-t[l+1],t[l+1]=o-c}break;default:throw new Error("Invalid rotation")}return t}static#U(t,e,i){const[n,r,a,o]=e;switch(i){case 0:for(let l=0,h=t.length;l<h;l+=2)t[l]-=n,t[l+1]=o-t[l+1];break;case 90:for(let l=0,h=t.length;l<h;l+=2){const c=t[l];t[l]=t[l+1]-r,t[l+1]=c-n}break;case 180:for(let l=0,h=t.length;l<h;l+=2)t[l]=a-t[l],t[l+1]-=r;break;case 270:for(let l=0,h=t.length;l<h;l+=2){const c=t[l];t[l]=o-t[l+1],t[l+1]=a-c}break;default:throw new Error("Invalid rotation")}return t}#z(t,e,i,n){const r=[],a=this.thickness/2,o=t*e+a,l=t*i+a;for(const h of this.paths){const c=[],u=[];for(let d=0,f=h.length;d<f;d++){const[p,m,A,g]=h[d];if(p[0]===g[0]&&p[1]===g[1]&&f===1){const T=t*p[0]+o,R=t*p[1]+l;c.push(T,R),u.push(T,R);break}const v=t*p[0]+o,y=t*p[1]+l,b=t*m[0]+o,w=t*m[1]+l,S=t*A[0]+o,E=t*A[1]+l,x=t*g[0]+o,C=t*g[1]+l;d===0&&(c.push(v,y),u.push(v,y)),c.push(b,w,S,E,x,C),u.push(b,w),d===f-1&&u.push(x,C)}r.push({bezier:ee.#O(c,n,this.rotation),points:ee.#O(u,n,this.rotation)})}return r}#H(){let t=1/0,e=-1/0,i=1/0,n=-1/0;for(const r of this.paths)for(const[a,o,l,h]of r){const c=j.bezierBoundingBox(...a,...o,...l,...h);t=Math.min(t,c[0]),i=Math.min(i,c[1]),e=Math.max(e,c[2]),n=Math.max(n,c[3])}return[t,i,e,n]}#j(){return this.#r?Math.ceil(this.thickness*this.parentScale):0}#I(t=!1){if(this.isEmpty())return;if(!this.#r){this.#b();return}const e=this.#H(),i=this.#j();this.#e=Math.max(ht.MIN_SIZE,e[2]-e[0]),this.#t=Math.max(ht.MIN_SIZE,e[3]-e[1]);const n=Math.ceil(i+this.#e*this.scaleFactor),r=Math.ceil(i+this.#t*this.scaleFactor),[a,o]=this.parentDimensions;this.width=n/a,this.height=r/o,this.setAspectRatio(n,r);const l=this.translationX,h=this.translationY;this.translationX=-e[0],this.translationY=-e[1],this.#S(),this.#b(),this.#d=n,this.#o=r,this.setDims(n,r);const c=t?i/this.scaleFactor/2:0;this.translate(l-this.translationX-c,h-this.translationY-c)}static async deserialize(t,e,i){if(t instanceof Mu)return null;const n=await super.deserialize(t,e,i);n.thickness=t.thickness,n.color=j.makeHexColor(...t.color),n.opacity=t.opacity;const[r,a]=n.pageDimensions,o=n.width*r,l=n.height*a,h=n.parentScale,c=t.thickness/2;n.#r=!0,n.#d=Math.round(o),n.#o=Math.round(l);const{paths:u,rect:d,rotation:f}=t;for(let{bezier:m}of u){m=ee.#U(m,d,f);const A=[];n.paths.push(A);let g=h*(m[0]-c),v=h*(m[1]-c);for(let b=2,w=m.length;b<w;b+=6){const S=h*(m[b]-c),E=h*(m[b+1]-c),x=h*(m[b+2]-c),C=h*(m[b+3]-c),T=h*(m[b+4]-c),R=h*(m[b+5]-c);A.push([[g,v],[S,E],[x,C],[T,R]]),g=T,v=R}const y=this.#F(A);n.bezierPath2D.push(y)}const p=n.#H();return n.#e=Math.max(ht.MIN_SIZE,p[2]-p[0]),n.#t=Math.max(ht.MIN_SIZE,p[3]-p[1]),n.#D(o,l),n}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=ht._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Z.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#z(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}},jE=class Pv extends ht{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#l=null;#u=null;#c=!1;#d=!1;static _type="stamp";static _editorType=Z.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile}static initialize(t,e){ht.initialize(t,e)}static get supportedTypes(){return it(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return it(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(Z.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#o(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#s=t.file.name),this.#g()}#h(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:n,width:r,height:a}=t||this.copyCanvas(null,null,!0).imageData,o=await i.guess({name:"altText",request:{data:n,width:r,height:a,channels:n.length/(r*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const l=o.output;return await this.setGuessedAltText(l),e&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#o(i,!0)).finally(()=>this.#h());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(n=>this.#o(n)).finally(()=>this.#h());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(n=>this.#o(n)).finally(()=>this.#h());return}const t=document.createElement("input");t.type="file",t.accept=Pv.supportedTypesStr;const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const n=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#o(n)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#h()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#l?.disconnect(),this.#l=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#g():this.#p(),this.width&&!this.annotationElementId){const[i,n]=this.parentDimensions;this.setAt(t*i,e*n,this.width*i,this.height*n)}return this.div}#g(){const{div:t}=this;let{width:e,height:i}=this.#t;const[n,r]=this.pageDimensions,a=.75;if(this.width)e=this.width*n,i=this.height*r;else if(e>a*n||i>a*r){const c=Math.min(a*n/e,a*r/i);e*=c,i*=c}const[o,l]=this.parentDimensions;this.setDims(e*o/n,i*l/r),this._uiManager.enableWaiting(!1);const h=this.#a=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#v(e,i),this.#w(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&h.setAttribute("aria-label",this.#s)}copyCanvas(t,e,i=!1){t||(t=224);const{width:n,height:r}=this.#t,a=new $h;let o=this.#t,l=n,h=r,c=null;if(e){if(n>e||r>e){const S=Math.min(e/n,e/r);l=Math.floor(n*S),h=Math.floor(r*S)}c=document.createElement("canvas");const d=c.width=Math.ceil(l*a.sx),f=c.height=Math.ceil(h*a.sy);this.#c||(o=this.#m(d,f));const p=c.getContext("2d");p.filter=this._uiManager.hcmFilter;let m="white",A="#cfcfd8";this._uiManager.hcmFilter!=="none"?A="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",A="#42414d");const g=15,v=g*a.sx,y=g*a.sy,b=new OffscreenCanvas(v*2,y*2),w=b.getContext("2d");w.fillStyle=m,w.fillRect(0,0,v*2,y*2),w.fillStyle=A,w.fillRect(0,0,v,y),w.fillRect(v,y,v,y),p.fillStyle=p.createPattern(b,"repeat"),p.fillRect(0,0,d,f),p.drawImage(o,0,0,o.width,o.height,0,0,d,f)}let u=null;if(i){let d,f;if(a.symmetric&&o.width<t&&o.height<t)d=o.width,f=o.height;else if(o=this.#t,n>t||r>t){const A=Math.min(t/n,t/r);d=Math.floor(n*A),f=Math.floor(r*A),this.#c||(o=this.#m(d,f))}const m=new OffscreenCanvas(d,f).getContext("2d",{willReadFrequently:!0});m.drawImage(o,0,0,o.width,o.height,0,0,d,f),u={width:d,height:f,data:m.getImageData(0,0,d,f).data}}return{canvas:c,width:l,height:h,imageData:u}}#f(t,e){const[i,n]=this.parentDimensions;this.width=t/i,this.height=e/n,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const r=200;this.#u=setTimeout(()=>{this.#u=null,this.#v(t,e)},r)}#m(t,e){const{width:i,height:n}=this.#t;let r=i,a=n,o=this.#t;for(;r>2*t||a>2*e;){const l=r,h=a;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const c=new OffscreenCanvas(r,a);c.getContext("2d").drawImage(o,0,0,l,h,0,0,r,a),o=c.transferToImageBitmap()}return o}#v(t,e){const i=new $h,n=Math.ceil(t*i.sx),r=Math.ceil(e*i.sy),a=this.#a;if(!a||a.width===n&&a.height===r)return;a.width=n,a.height=r;const o=this.#c?this.#t:this.#m(n,r),l=a.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(o,0,0,o.width,o.height,0,0,n,r)}getImageForAltText(){return this.#a}#y(t){if(t){if(this.#c){const n=this._uiManager.imageManager.getSvgUrl(this.#e);if(n)return n}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#c){const[e,i]=this.pageDimensions,n=Math.round(this.width*e*Pn.PDF_TO_CSS_UNITS),r=Math.round(this.height*i*Pn.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(n,r);return a.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,n,r),a.transferToImageBitmap()}return structuredClone(this.#t)}#w(){this._uiManager._signal&&(this.#l=new ResizeObserver(t=>{const e=t[0].contentRect;e.width&&e.height&&this.#f(e.width,e.height)}),this.#l.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#l?.disconnect(),this.#l=null},{once:!0}))}static async deserialize(t,e,i){let n=null;if(t instanceof Tv){const{data:{rect:p,rotation:m,id:A,structParent:g,popupRef:v},container:y,parent:{page:{pageNumber:b}}}=t,w=y.querySelector("canvas"),S=i.imageManager.getFromCanvas(y.id,w);w.remove();const E=(await e._structTree.getAriaAttributes(`${bu}${A}`))?.get("aria-label")||"";n=t={annotationType:Z.STAMP,bitmapId:S.id,bitmap:S.bitmap,pageIndex:b-1,rect:p.slice(0),rotation:m,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:E},isSvg:!1,structParent:g,popupRef:v}}const r=await super.deserialize(t,e,i),{rect:a,bitmap:o,bitmapUrl:l,bitmapId:h,isSvg:c,accessibilityData:u}=t;h&&i.imageManager.isValidId(h)?(r.#e=h,o&&(r.#t=o)):r.#n=l,r.#c=c;const[d,f]=r.pageDimensions;return r.width=(a[2]-a[0])/d,r.height=(a[3]-a[1])/f,r.annotationElementId=t.id||null,u&&(r.altTextData=u),r._initialData=n,r.#d=!!n,r}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:Z.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:n,altText:r}=this.serializeAltText(!1);if(!n&&r&&(i.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const o=this.#x(i);if(o.isSame)return null;o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,e===null)return i;e.stamps||=new Map;const a=this.#c?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:a,serialized:i}),i.bitmap=this.#y(!1);else if(this.#c){const o=e.stamps.get(this.#e);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#y(!1))}return i}#x(t){const{rect:e,pageIndex:i,accessibilityData:{altText:n}}=this._initialData,r=t.rect.every((l,h)=>Math.abs(l-e[h])<1),a=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===n;return{isSame:r&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}},UE=class Ji{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#l=!1;#u=!1;#c=null;#d=null;#o;static _initialized=!1;static#h=new Map([BE,zE,jE,Uf].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:n,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:l,viewport:h,l10n:c}){const u=[...Ji.#h.values()];if(!Ji._initialized){Ji._initialized=!0;for(const d of u)d.initialize(c,t)}t.registerEditorTypes(u),this.#o=t,this.pageIndex=e,this.div=i,this.#t=r,this.#i=a,this.viewport=h,this.#c=l,this.drawLayer=o,this._structTree=n,this.#o.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#o.getMode()===Z.NONE}updateToolbar(t){this.#o.updateToolbar(t)}updateMode(t=this.#o.getMode()){switch(this.#v(),t){case Z.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Z.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Z.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of Ji.#h.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#c?.div}addInkEditorIfNeeded(t){if(this.#o.getMode()!==Z.INK)return;if(!t){for(const i of this.#s.values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){this.#o.setEditingState(t)}addCommands(t){this.#o.addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of this.#s.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#o.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#i)return;const e=this.#i.getEditableAnnotations();for(const i of e){if(i.hide(),this.#o.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const n=await this.deserialize(i);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const n of this.#s.values())if(n.disableEditing(),!!n.annotationElementId){if(n.serialize()!==null){t.set(n.annotationElementId,n);continue}else e.set(n.annotationElementId,n);this.getEditableAnnotation(n.annotationElementId)?.show(),n.remove()}if(this.#i){const n=this.#i.getEditableAnnotations();for(const r of n){const{id:a}=r.data;if(this.#o.isDeletedAnnotationElement(a))continue;let o=e.get(a);if(o){o.resetAnnotationElement(r),o.show(!1),r.show();continue}o=t.get(a),o&&(this.#o.addChangedExistingAnnotation(o),o.renderAnnotationElement(r)&&o.show(!1)),r.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const n of Ji.#h.values())i.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#o.getActive()!==t&&this.#o.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#c?.div&&!this.#d){this.#d=new AbortController;const t=this.#o.combinedSignal(this.#d);this.#c.div.addEventListener("pointerdown",this.#p.bind(this),{signal:t}),this.#c.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#c?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#c.div.classList.remove("highlighting"))}#p(t){this.#o.unselectAll();const{target:e}=t;if(e===this.#c.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#c.div.contains(e)){const{isMac:i}=Pe.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#o.showAllEditors("highlight",!0,!0),this.#c.div.classList.add("free"),this.toggleDrawing(),Uf.startHighlighting(this,this.#o.direction==="ltr",{target:this.#c.div,x:t.x,y:t.y}),this.#c.div.addEventListener("pointerup",()=>{this.#c.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#o.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#o.isDeletedAnnotationElement(e)&&this.#o.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#u&&t.annotationElementId&&this.#o.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#o.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#o.addDeletedAnnotationElement(t.annotationElementId),ht.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#o.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#o.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return this.#o.getId()}get#g(){return Ji.#h.get(this.#o.getMode())}combinedSignal(t){return this.#o.combinedSignal(t)}#f(t){const e=this.#g;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#g?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#o.updateToolbar(t),this.#o.updateMode(t);const{offsetX:i,offsetY:n}=this.#m(),r=this.getNextId(),a=this.#f({parent:this,id:r,x:i,y:n,uiManager:this.#o,isCentered:!0,...e});a&&this.add(a)}async deserialize(t){return await Ji.#h.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#o)||null}createAndAddNewEditor(t,e,i={}){const n=this.getNextId(),r=this.#f({parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:this.#o,isCentered:e,...i});return r&&this.add(r),r}#m(){const{x:t,y:e,width:i,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),o=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+n),h=(r+o)/2-t,c=(a+l)/2-e,[u,d]=this.viewport.rotation%180===0?[h,c]:[c,h];return{offsetX:u,offsetY:d}}addNewEditor(){this.createAndAddNewEditor(this.#m(),!0)}setSelected(t){this.#o.setSelected(t)}toggleSelected(t){this.#o.toggleSelected(t)}isSelected(t){return this.#o.isSelected(t)}unselect(t){this.#o.unselect(t)}pointerup(t){const{isMac:e}=Pe.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&this.#a){if(this.#a=!1,!this.#e){this.#e=!0;return}if(this.#o.getMode()===Z.STAMP){this.#o.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#o.getMode()===Z.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=Pe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;this.#a=!0;const i=this.#o.getActive();this.#e=!i||i.isEmpty()}findNewParent(t,e,i){const n=this.#o.findParent(e,i);return n===null||n===this?!1:(n.changeParent(t),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#o.removeLayer(this)}#v(){this.#l=!0;for(const t of this.#s.values())t.isEmpty()&&t.remove();this.#l=!1}render({viewport:t}){this.viewport=t,Hs(this.div,t);for(const e of this.#o.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#o.commitOrRemove(),this.#v();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Hs(this.div,{rotation:i}),e!==i)for(const n of this.#s.values())n.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#o.viewParameters.realScale}},WE=class le{#t=null;#e=0;#i=new Map;#n=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#i.size>0)for(const e of this.#i.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return it(this,"_svgFactory",new wu)}static#r(t,{x:e=0,y:i=0,width:n=1,height:r=1}={}){const{style:a}=t;a.top=`${100*i}%`,a.left=`${100*e}%`,a.width=`${100*n}%`,a.height=`${100*r}%`}#s(t){const e=le._svgFactory.create(1,1,!0);return this.#t.append(e),e.setAttribute("aria-hidden",!0),le.#r(e,t),e}#a(t,e){const i=le._svgFactory.createElement("clipPath");t.append(i);const n=`clip_${e}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const r=le._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),n}highlight(t,e,i,n=!1){const r=this.#e++,a=this.#s(t.box);a.classList.add("highlight"),t.free&&a.classList.add("free");const o=le._svgFactory.createElement("defs");a.append(o);const l=le._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",h),l.setAttribute("d",t.toSVGPath()),n&&this.#n.set(r,l);const c=this.#a(o,h),u=le._svgFactory.createElement("use");return a.append(u),a.setAttribute("fill",e),a.setAttribute("fill-opacity",i),u.setAttribute("href",`#${h}`),this.#i.set(r,a),{id:r,clipPathId:`url(#${c})`}}highlightOutline(t){const e=this.#e++,i=this.#s(t.box);i.classList.add("highlightOutline");const n=le._svgFactory.createElement("defs");i.append(n);const r=le._svgFactory.createElement("path");n.append(r);const a=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",a),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(t.free){i.classList.add("free");const c=le._svgFactory.createElement("mask");n.append(c),o=`mask_p${this.pageIndex}_${e}`,c.setAttribute("id",o),c.setAttribute("maskUnits","objectBoundingBox");const u=le._svgFactory.createElement("rect");c.append(u),u.setAttribute("width","1"),u.setAttribute("height","1"),u.setAttribute("fill","white");const d=le._svgFactory.createElement("use");c.append(d),d.setAttribute("href",`#${a}`),d.setAttribute("stroke","none"),d.setAttribute("fill","black"),d.setAttribute("fill-rule","nonzero"),d.classList.add("mask")}const l=le._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const h=l.cloneNode();return i.append(h),l.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.#i.set(e,i),e}finalizeLine(t,e){const i=this.#n.get(t);this.#n.delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){this.#i.get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),this.#n.delete(t)}updatePath(t,e){this.#n.get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){le.#r(this.#i.get(t),e)}show(t,e){this.#i.get(t).classList.toggle("hidden",!e)}rotate(t,e){this.#i.get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){this.#i.get(t).setAttribute("fill",e)}changeOpacity(t,e){this.#i.get(t).setAttribute("fill-opacity",e)}addClass(t,e){this.#i.get(t).classList.add(e)}removeClass(t,e){this.#i.get(t).classList.remove(e)}getSVGRoot(t){return this.#i.get(t)}remove(t){this.#t!==null&&(this.#i.get(t).remove(),this.#i.delete(t))}destroy(){this.#t=null;for(const t of this.#i.values())t.remove();this.#i.clear()}};Q.AbortException;Q.AnnotationEditorLayer;Q.AnnotationEditorParamsType;Q.AnnotationEditorType;Q.AnnotationEditorUIManager;Q.AnnotationLayer;Q.AnnotationMode;Q.CMapCompressionType;Q.ColorPicker;Q.DOMSVGFactory;Q.DrawLayer;Q.FeatureTest;Q.GlobalWorkerOptions;Q.ImageKind;Q.InvalidPDFException;Q.MissingPDFException;Q.OPS;Q.OutputScale;Q.PDFDataRangeTransport;Q.PDFDateString;Q.PDFWorker;Q.PasswordResponses;Q.PermissionFlag;Q.PixelsPerInch;Q.RenderingCancelledException;Q.TextLayer;Q.UnexpectedResponseException;Q.Util;Q.VerbosityLevel;Q.XfaLayer;Q.build;Q.createValidAbsoluteUrl;Q.fetchData;var GE=Q.getDocument;Q.getFilenameFromUrl;Q.getPdfFilenameFromUrl;Q.getXfaPageViewport;Q.isDataScheme;Q.isPdfFile;Q.noContextMenu;Q.normalizeUnicode;Q.setLayerDimensions;Q.shadow;Q.version;var vr={};vr.d=(s,t)=>{for(var e in t)vr.o(t,e)&&!vr.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})};vr.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var Y=globalThis.pdfjsLib={};vr.d(Y,{AbortException:()=>Qs,AnnotationEditorLayer:()=>Di,AnnotationEditorParamsType:()=>K,AnnotationEditorType:()=>st,AnnotationEditorUIManager:()=>As,AnnotationLayer:()=>Ux,AnnotationMode:()=>rs,CMapCompressionType:()=>uc,ColorPicker:()=>yi,DOMSVGFactory:()=>Iu,DrawLayer:()=>se,FeatureTest:()=>Ce,GlobalWorkerOptions:()=>Or,ImageKind:()=>Va,InvalidPDFException:()=>Mv,MissingPDFException:()=>Ks,OPS:()=>ai,Outliner:()=>Ac,PDFDataRangeTransport:()=>qv,PDFDateString:()=>Ov,PDFWorker:()=>Xe,PasswordResponses:()=>qE,PermissionFlag:()=>XE,PixelsPerInch:()=>_n,RenderingCancelledException:()=>Fu,TextLayer:()=>Se,UnexpectedResponseException:()=>tl,Util:()=>U,VerbosityLevel:()=>Zo,XfaLayer:()=>Qv,build:()=>Sx,createValidAbsoluteUrl:()=>JE,fetchData:()=>al,getDocument:()=>fx,getFilenameFromUrl:()=>l1,getPdfFilenameFromUrl:()=>h1,getXfaPageViewport:()=>c1,isDataScheme:()=>Nu,isPdfFile:()=>Ou,noContextMenu:()=>_e,normalizeUnicode:()=>n1,renderTextLayer:()=>nx,setLayerDimensions:()=>js,shadow:()=>at,updateTextLayer:()=>rx,version:()=>wx});const ae=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),_v=[1,0,0,1,0,0],cc=[.001,0,0,.001,0,0],YE=1e7,Vl=1.35,Ve={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},rs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},VE="pdfjs_internal_editor_",st={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},K={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},XE={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ie={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Va={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ft={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Vn={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Zo={ERRORS:0,WARNINGS:1,INFOS:5},uc={NONE:0,BINARY:1},ai={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},qE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Jo=Zo.WARNINGS;function KE(s){Number.isInteger(s)&&(Jo=s)}function QE(){return Jo}function $o(s){Jo>=Zo.INFOS&&console.log(`Info: ${s}`)}function tt(s){Jo>=Zo.WARNINGS&&console.log(`Warning: ${s}`)}function ct(s){throw new Error(s)}function zt(s,t){s||ct(t)}function ZE(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function JE(s,t=null,e=null){if(!s)return null;try{if(e&&typeof s=="string"&&(e.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),e.tryConvertEncoding))try{s=s1(s)}catch{}const i=t?new URL(s,t):new URL(s);if(ZE(i))return i}catch{}return null}function at(s,t,e,i=!1){return Object.defineProperty(s,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const xs=function(){function t(e,i){this.constructor===t&&ct("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class dc extends xs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class fc extends xs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Mv extends xs{constructor(t){super(t,"InvalidPDFException")}}class Ks extends xs{constructor(t){super(t,"MissingPDFException")}}class tl extends xs{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class $E extends xs{constructor(t){super(t,"FormatError")}}class Qs extends xs{constructor(t){super(t,"AbortException")}}function Lv(s){(typeof s!="object"||s?.length===void 0)&&ct("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const i=[];for(let n=0;n<t;n+=e){const r=Math.min(n+e,t),a=s.subarray(n,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function el(s){typeof s!="string"&&ct("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=s.charCodeAt(i)&255;return e}function t1(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function Lu(s){const t=Object.create(null);for(const[e,i]of s)t[e]=i;return t}function e1(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function i1(){try{return new Function(""),!0}catch{return!1}}class Ce{static get isLittleEndian(){return at(this,"isLittleEndian",e1())}static get isEvalSupported(){return at(this,"isEvalSupported",i1())}static get isOffscreenCanvasSupported(){return at(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?at(this,"platform",{isMac:navigator.platform.includes("Mac")}):at(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return at(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Xl=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class U{static makeHexColor(t,e,i){return`#${Xl[t]}${Xl[e]}${Xl[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],n=t[0]*e[1]+t[1]*e[3]+e[5];return[i,n]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],n=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[n,r]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),n=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],n[0],r[0],a[0]),Math.min(i[1],n[1],r[1],a[1]),Math.max(i[0],n[0],r[0],a[0]),Math.max(i[1],n[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],o=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-r*n))/2,h=o+l||1,c=o-l||1;return[Math.sqrt(h),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[i,r,n,a]}static#t(t,e,i,n,r,a,o,l,h,c){if(h<=0||h>=1)return;const u=1-h,d=h*h,f=d*h,p=u*(u*(u*t+3*h*e)+3*d*i)+f*n,m=u*(u*(u*r+3*h*a)+3*d*o)+f*l;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],m),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],m)}static#e(t,e,i,n,r,a,o,l,h,c,u,d){if(Math.abs(h)<1e-12){Math.abs(c)>=1e-12&&this.#t(t,e,i,n,r,a,o,l,-u/c,d);return}const f=c**2-4*u*h;if(f<0)return;const p=Math.sqrt(f),m=2*h;this.#t(t,e,i,n,r,a,o,l,(-c+p)/m,d),this.#t(t,e,i,n,r,a,o,l,(-c-p)/m,d)}static bezierBoundingBox(t,e,i,n,r,a,o,l,h){return h?(h[0]=Math.min(h[0],t,o),h[1]=Math.min(h[1],e,l),h[2]=Math.max(h[2],t,o),h[3]=Math.max(h[3],e,l)):h=[Math.min(t,o),Math.min(e,l),Math.max(t,o),Math.max(e,l)],this.#e(t,i,r,o,e,n,a,l,3*(-t+3*(i-r)+o),6*(t-2*i+r),3*(i-t),h),this.#e(t,i,r,o,e,n,a,l,3*(-e+3*(n-a)+l),6*(e-2*n+a),3*(n-e),h),h}}function s1(s){return decodeURIComponent(escape(s))}let ql=null,Wf=null;function n1(s){return ql||(ql=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Wf=new Map([["ﬅ","ſt"]])),s.replaceAll(ql,(t,e,i)=>e?e.normalize("NFKC"):Wf.get(i))}function r1(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(s);else for(let t=0;t<32;t++)s[t]=Math.floor(Math.random()*255);return Lv(s)}const Dv="pdfjs_internal_id_",Ri={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class il{constructor(){this.constructor===il&&ct("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,n,r){return"none"}destroy(t=!1){}}class sl{#t=!1;constructor({enableHWA:t=!1}={}){this.constructor===sl&&ct("Cannot initialize BaseCanvasFactory."),this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ct("Abstract method `_createCanvas` called.")}}class nl{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===nl&&ct("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?uc.BINARY:uc.NONE;return this._fetchData(e,i).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){ct("Abstract method `_fetchData` called.")}}class rl{constructor({baseUrl:t=null}){this.constructor===rl&&ct("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){ct("Abstract method `_fetchData` called.")}}class Du{constructor(){this.constructor===Du&&ct("Cannot initialize BaseSVGFactory.")}create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ct("Abstract method `_createSVG` called.")}}const Mi="http://www.w3.org/2000/svg";class _n{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}class a1 extends il{#t;#e;#i;#n;#r;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}={}){super(),this.#i=t,this.#n=e}get#a(){return this.#t||=new Map}get#l(){return this.#r||=new Map}get#u(){if(!this.#e){const t=this.#n.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#n.createElementNS(Mi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#e=this.#n.createElementNS(Mi,"defs"),t.append(i),i.append(this.#e),this.#n.body.append(t)}return this.#e}#c(t){if(t.length===1){const l=t[0],h=new Array(256);for(let u=0;u<256;u++)h[u]=l[u]/255;const c=h.join(",");return[c,c,c]}const[e,i,n]=t,r=new Array(256),a=new Array(256),o=new Array(256);for(let l=0;l<256;l++)r[l]=e[l]/255,a[l]=i[l]/255,o[l]=n[l]/255;return[r.join(","),a.join(","),o.join(",")]}addFilter(t){if(!t)return"none";let e=this.#a.get(t);if(e)return e;const[i,n,r]=this.#c(t),a=t.length===1?i:`${i}${n}${r}`;if(e=this.#a.get(a),e)return this.#a.set(t,e),e;const o=`g_${this.#i}_transfer_map_${this.#s++}`,l=`url(#${o})`;this.#a.set(t,l),this.#a.set(a,l);const h=this.#h(o);return this.#g(i,n,r,h),l}addHCMFilter(t,e){const i=`${t}-${e}`,n="base";let r=this.#l.get(n);if(r?.key===i||(r?(r.filter?.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},this.#l.set(n,r)),!t||!e))return r.url;const a=this.#m(t);t=U.makeHexColor(...a);const o=this.#m(e);if(e=U.makeHexColor(...o),this.#u.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return r.url;const l=new Array(256);for(let f=0;f<=255;f++){const p=f/255;l[f]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}const h=l.join(","),c=`g_${this.#i}_hcm_filter`,u=r.filter=this.#h(c);this.#g(h,h,h,u),this.#o(u);const d=(f,p)=>{const m=a[f]/255,A=o[f]/255,g=new Array(p+1);for(let v=0;v<=p;v++)g[v]=m+v/p*(A-m);return g.join(",")};return this.#g(d(0,5),d(1,5),d(2,5),u),r.url=`url(#${c})`,r.url}addAlphaFilter(t){let e=this.#a.get(t);if(e)return e;const[i]=this.#c([t]),n=`alpha_${i}`;if(e=this.#a.get(n),e)return this.#a.set(t,e),e;const r=`g_${this.#i}_alpha_map_${this.#s++}`,a=`url(#${r})`;this.#a.set(t,a),this.#a.set(n,a);const o=this.#h(r);return this.#f(i,o),a}addLuminosityFilter(t){let e=this.#a.get(t||"luminosity");if(e)return e;let i,n;if(t?([i]=this.#c([t]),n=`luminosity_${i}`):n="luminosity",e=this.#a.get(n),e)return this.#a.set(t,e),e;const r=`g_${this.#i}_luminosity_map_${this.#s++}`,a=`url(#${r})`;this.#a.set(t,a),this.#a.set(n,a);const o=this.#h(r);return this.#d(o),t&&this.#f(i,o),a}addHighlightHCMFilter(t,e,i,n,r){const a=`${e}-${i}-${n}-${r}`;let o=this.#l.get(t);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#l.set(t,o)),!e||!i))return o.url;const[l,h]=[e,i].map(this.#m.bind(this));let c=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),u=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[d,f]=[n,r].map(this.#m.bind(this));u<c&&([c,u,d,f]=[u,c,f,d]),this.#u.style.color="";const p=(g,v,y)=>{const b=new Array(256),w=(u-c)/y,S=g/255,E=(v-g)/(255*y);let x=0;for(let C=0;C<=y;C++){const T=Math.round(c+C*w),R=S+C*E;for(let I=x;I<=T;I++)b[I]=R;x=T+1}for(let C=x;C<256;C++)b[C]=b[x-1];return b.join(",")},m=`g_${this.#i}_hcm_${t}_filter`,A=o.filter=this.#h(m);return this.#o(A),this.#g(p(d[0],f[0],5),p(d[1],f[1],5),p(d[2],f[2],5),A),o.url=`url(#${m})`,o.url}destroy(t=!1){t&&this.#l.size!==0||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#s=0)}#d(t){const e=this.#n.createElementNS(Mi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#o(t){const e=this.#n.createElementNS(Mi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#h(t){const e=this.#n.createElementNS(Mi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#u.append(e),e}#p(t,e,i){const n=this.#n.createElementNS(Mi,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),t.append(n)}#g(t,e,i,n){const r=this.#n.createElementNS(Mi,"feComponentTransfer");n.append(r),this.#p(r,"feFuncR",t),this.#p(r,"feFuncG",e),this.#p(r,"feFuncB",i)}#f(t,e){const i=this.#n.createElementNS(Mi,"feComponentTransfer");e.append(i),this.#p(i,"feFuncA",t)}#m(t){return this.#u.style.color=t,Bu(getComputedStyle(this.#u).getPropertyValue("color"))}}class o1 extends sl{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}async function al(s,t="text"){if(sr(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const n=new XMLHttpRequest;n.open("GET",s,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}i(new Error(n.statusText))}},n.send(null)})}class Iv extends nl{_fetchData(t,e){return al(t,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):el(i),compressionType:e}))}}class Fv extends rl{_fetchData(t){return al(t,"arraybuffer").then(e=>new Uint8Array(e))}}class Iu extends Du{_createSVG(t){return document.createElementNS(Mi,t)}}class Xr{constructor({viewBox:t,scale:e,rotation:i,offsetX:n=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=n,this.offsetY=r;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let h,c,u,d;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,c=0,u=0,d=1;break;case 90:h=0,c=1,u=1,d=0;break;case 270:h=0,c=-1,u=-1,d=0;break;case 0:h=1,c=0,u=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(u=-u,d=-d);let f,p,m,A;h===0?(f=Math.abs(l-t[1])*e+n,p=Math.abs(o-t[0])*e+r,m=(t[3]-t[1])*e,A=(t[2]-t[0])*e):(f=Math.abs(o-t[0])*e+n,p=Math.abs(l-t[1])*e+r,m=(t[2]-t[0])*e,A=(t[3]-t[1])*e),this.transform=[h*e,c*e,u*e,d*e,f-h*e*o-u*e*l,p-c*e*o-d*e*l],this.width=m,this.height=A}get rawDims(){const{viewBox:t}=this;return at(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new Xr({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){return U.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=U.applyTransform([t[0],t[1]],this.transform),i=U.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return U.applyInverseTransform([t,e],this.transform)}}class Fu extends xs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Nu(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function Ou(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function l1(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function h1(s,t="document.pdf"){if(typeof s!="string")return t;if(Nu(s))return tt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=e.exec(s);let r=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||t}class Gf{started=Object.create(null);times=[];time(t){t in this.started&&tt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||tt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:n,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-n}ms
`);return t.join("")}}function sr(s,t){try{const{protocol:e}=t?new URL(s,t):new URL(s);return e==="http:"||e==="https:"}catch{return!1}}function _e(s){s.preventDefault()}function Nv(s){console.log("Deprecated API usage: "+s)}let Yf;class Ov{static toDateObject(t){if(!t||typeof t!="string")return null;Yf||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=Yf.exec(t);if(!e)return null;const i=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const h=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,h==="-"?(a+=c,o+=u):h==="+"&&(a-=c,o-=u),new Date(Date.UTC(i,n,r,a,o,l))}}function c1(s,{scale:t=1,rotation:e=0}){const{width:i,height:n}=s.attributes.style,r=[0,0,parseInt(i),parseInt(n)];return new Xr({viewBox:r,scale:t,rotation:e})}function Bu(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(tt(`Not a valid color format: "${s}"`),[0,0,0])}function u1(s){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of s.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;s.set(e,Bu(i))}t.remove()}function vt(s){const{a:t,b:e,c:i,d:n,e:r,f:a}=s.getTransform();return[t,e,i,n,r,a]}function Pi(s){const{a:t,b:e,c:i,d:n,e:r,f:a}=s.getTransform().invertSelf();return[t,e,i,n,r,a]}function js(s,t,e=!1,i=!0){if(t instanceof Xr){const{pageWidth:n,pageHeight:r}=t.rawDims,{style:a}=s,o=Ce.isCSSRoundSupported,l=`var(--scale-factor) * ${n}px`,h=`var(--scale-factor) * ${r}px`,c=o?`round(${l}, 1px)`:`calc(${l})`,u=o?`round(${h}, 1px)`:`calc(${h})`;!e||t.rotation%180===0?(a.width=c,a.height=u):(a.width=u,a.height=c)}i&&s.setAttribute("data-main-rotation",t.rotation)}class Hu{#t=null;#e=null;#i;#n=null;constructor(t){this.#i=t}render(){const t=this.#t=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;t.addEventListener("contextmenu",_e,{signal:e}),t.addEventListener("pointerdown",Hu.#r,{signal:e});const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const n=this.#i.toolbarPosition;if(n){const{style:r}=t,a=this.#i._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),t}static#r(t){t.stopPropagation()}#s(t){this.#i._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#a(t){this.#i._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#l(t){const e=this.#i._uiManager._signal;t.addEventListener("focusin",this.#s.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#a.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",_e,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden")}#u(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#i.editorType}-button`),this.#l(t),t.addEventListener("click",e=>{this.#i._uiManager.delete()},{signal:this.#i._uiManager._signal}),this.#n.append(t)}get#c(){const t=document.createElement("div");return t.className="divider",t}addAltTextButton(t){this.#l(t),this.#n.prepend(t,this.#c)}addColorPicker(t){this.#e=t;const e=t.renderButton();this.#l(e),this.#n.prepend(e,this.#c)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class d1{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",_e,{signal:this.#i._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#s(),t}#r(t,e){let i=0,n=0;for(const r of t){const a=r.y+r.height;if(a<i)continue;const o=r.x+(e?r.width:0);if(a>i){n=o,i=a;continue}e?o>n&&(n=o):o<n&&(n=o)}return[e?1-n:n,i]}show(t,e,i){const[n,r]=this.#r(e,i),{style:a}=this.#e||=this.#n();t.append(this.#e),a.insetInlineEnd=`${100*n}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#i._signal;t.addEventListener("contextmenu",_e,{signal:i}),t.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:i}),this.#t.append(t)}}function bo(s,t,e){for(const i of e)t.addEventListener(i,s[i].bind(s))}function f1(s){return Math.round(Math.min(255,Math.max(1,255*s))).toString(16).padStart(2,"0")}class p1{#t=0;get id(){return`${VE}${this.#t++}`}}class zu{#t=r1();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const r=n.decode().then(()=>(i.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return at(this,"_isSVGFittingCanvas",r)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let n;if(typeof e=="string"?(i.url=e,n=await al(e,"blob")):n=i.file=e,n.type==="image/svg+xml"){const r=zu._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((h,c)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,h()},a.onload=async()=>{const u=i.svgUrl=a.result;o.src=await r?`${u}#svgView(preserveAspectRatio(none))`:u},o.onerror=a.onerror=c});a.readAsDataURL(n),await l}else i.bitmap=await createImageBitmap(n);i.refCounter=1}catch(n){console.error(n),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:n,type:r}=t;return this.#n(`${e}_${i}_${n}_${r}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class g1{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:n,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(n&&t(),this.#e)return;const l={cmd:t,undo:e,post:i,type:r};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(l);return}if(a&&this.#t[this.#n].type===r){o&&(l.undo=this.#t[this.#n].undo),this.#t[this.#n]=l;return}const h=this.#n+1;h===this.#i?this.#t.splice(0,1):(this.#n=h,h<this.#t.length&&this.#t.splice(h)),this.#t.push(l)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}destroy(){this.#t=null}}class qr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ce.platform;for(const[i,n,r={}]of t)for(const a of i){const o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:n,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:n,options:r}),this.allKeys.add(a.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:n,options:{bubbles:r=!1,args:a=[],checker:o=null}}=i;o&&!o(t,e)||(n.bind(t,...a,e)(),r||(e.stopPropagation(),e.preventDefault()))}}class ju{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return u1(t),at(this,"_colors",t)}convert(t){const e=Bu(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,n]of this._colors)if(n.every((r,a)=>r===e[a]))return ju._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?U.makeHexColor(...e):t}}class As{#t=new AbortController;#e=null;#i=new Map;#n=new Map;#r=null;#s=null;#a=null;#l=new g1;#u=0;#c=new Set;#d=null;#o=null;#h=new Set;#p=!1;#g=null;#f=null;#m=null;#v=!1;#y=null;#w=new p1;#x=!1;#T=!1;#k=null;#M=null;#C=null;#b=st.NONE;#A=new Set;#E=null;#P=null;#_=null;#R=this.blur.bind(this);#S=this.focus.bind(this);#D=this.copy.bind(this);#L=this.cut.bind(this);#F=this.paste.bind(this);#O=this.keydown.bind(this);#U=this.keyup.bind(this);#z=this.onEditingAction.bind(this);#H=this.onPageChanging.bind(this);#j=this.onScaleChanging.bind(this);#I=this.onRotationChanging.bind(this);#q={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#G=null;#X=null;#K=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=As.prototype,e=a=>a.#X.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return at(this,"_keyboardManager",new qr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#X.contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#X.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,i,n,r,a,o,l,h){this._signal=this.#t.signal,this.#X=t,this.#K=e,this.#r=i,this._eventBus=n,this._eventBus._on("editingaction",this.#z),this._eventBus._on("pagechanging",this.#H),this._eventBus._on("scalechanging",this.#j),this._eventBus._on("rotationchanging",this.#I),this.#ot(),this.#lt(),this.#et(),this.#s=r.annotationStorage,this.#g=r.filterFactory,this.#P=a,this.#m=o||null,this.#p=l,this.#C=h||null,this.viewParameters={realScale:_n.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#t?.abort(),this.#t=null,this._signal=null,this._eventBus._off("editingaction",this.#z),this._eventBus._off("pagechanging",this.#H),this._eventBus._off("scalechanging",this.#j),this._eventBus._off("rotationchanging",this.#I);for(const t of this.#n.values())t.destroy();this.#n.clear(),this.#i.clear(),this.#h.clear(),this.#e=null,this.#A.clear(),this.#l.destroy(),this.#r?.destroy(),this.#y?.hide(),this.#y=null,this.#f&&(clearTimeout(this.#f),this.#f=null),this.#G&&(clearTimeout(this.#G),this.#G=null)}async mlGuess(t){return this.#C?.guess(t)||null}get hasMLManager(){return!!this.#C}get hcmFilter(){return at(this,"hcmFilter",this.#P?this.#g.addHCMFilter(this.#P.foreground,this.#P.background):"none")}get direction(){return at(this,"direction",getComputedStyle(this.#X).direction)}get highlightColors(){return at(this,"highlightColors",this.#m?new Map(this.#m.split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return at(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){this.#M=t}editAltText(t){this.#r?.editAltText(this,t)}onPageChanging({pageNumber:t}){this.#u=t-1}focusMainContainer(){this.#X.focus()}findParent(t,e){for(const i of this.#n.values()){const{x:n,y:r,width:a,height:o}=i.div.getBoundingClientRect();if(t>=n&&t<=n+a&&e>=r&&e<=r+o)return i}return null}disableUserSelect(t=!1){this.#K.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#h.add(t)}removeShouldRescale(t){this.#h.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*_n.PDF_TO_CSS_UNITS;for(const e of this.#h)e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#J({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:a}=e,o=e.toString(),h=this.#J(e).closest(".textLayer"),c=this.getSelectionBoxes(h);if(c){e.empty(),this.#b===st.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:st.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const u of this.#n.values())if(u.hasTextLayer(h)){u.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:c,anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:a,text:o});break}}}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#J(t).closest(".textLayer"),n=this.getSelectionBoxes(i);n&&(this.#y||=new d1(this),this.#y.show(i,n,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#E&&(this.#y?.hide(),this.#E=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#E)return;if(!this.#J(t).closest(".textLayer")){this.#E&&(this.#y?.hide(),this.#E=null,this.#N({hasSelectedText:!1}));return}if(this.#y?.hide(),this.#E=e,this.#N({hasSelectedText:!0}),!(this.#b!==st.HIGHLIGHT&&this.#b!==st.NONE)&&(this.#b===st.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#v=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this._signal,a=o=>{o.type==="pointerup"&&o.button!==0||(window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),o.type==="pointerup"&&this.#Q("main_toolbar"))};window.addEventListener("pointerup",a,{signal:r}),window.addEventListener("blur",a,{signal:r})}}#Q(t=""){this.#b===st.HIGHLIGHT?this.highlightSelection(t):this.#p&&this.#rt()}#ot(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#$(){const t=this._signal;window.addEventListener("focus",this.#S,{signal:t}),window.addEventListener("blur",this.#R,{signal:t})}#tt(){window.removeEventListener("focus",this.#S),window.removeEventListener("blur",this.#R)}blur(){if(this.isShiftKeyDown=!1,this.#v&&(this.#v=!1,this.#Q("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#A)if(e.div.contains(t)){this.#k=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,e]=this.#k;this.#k=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){const t=this._signal;window.addEventListener("keydown",this.#O,{signal:t}),window.addEventListener("keyup",this.#U,{signal:t})}#B(){window.removeEventListener("keydown",this.#O),window.removeEventListener("keyup",this.#U)}#W(){const t=this._signal;document.addEventListener("copy",this.#D,{signal:t}),document.addEventListener("cut",this.#L,{signal:t}),document.addEventListener("paste",this.#F,{signal:t})}#it(){document.removeEventListener("copy",this.#D),document.removeEventListener("cut",this.#L),document.removeEventListener("paste",this.#F)}#lt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#W()}removeEditListeners(){this.#B(),this.#it()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#o)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#o)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#A){const n=i.serialize(!0);n&&e.push(n)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of this.#o)if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){tt(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const l of i){const h=n.deserialize(l);if(!h)return;r.push(h)}const a=()=>{for(const l of r)this.#ht(l);this.#ct(r)},o=()=>{for(const l of r)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){tt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#b!==st.NONE&&!this.isEditorHandlingKeyboard&&As._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#v&&(this.#v=!1,this.#Q("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#N(t){Object.entries(t).some(([i,n])=>this.#q[i]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#q,t)}),this.#b===st.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#Y([[K.HIGHLIGHT_FREE,!0]]))}#Y(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#$(),this.#W(),this.#N({isEditing:this.#b!==st.NONE,isEmpty:this.#nt(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#tt(),this.#it(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#o){this.#o=t;for(const e of this.#o)this.#Y(e.defaultPropertiesToUpdate)}}getId(){return this.#w.id}get currentLayer(){return this.#n.get(this.#u)}getLayer(t){return this.#n.get(t)}get currentPageIndex(){return this.#u}addLayer(t){this.#n.set(t.pageIndex,t),this.#x?t.enable():t.disable()}removeLayer(t){this.#n.delete(t.pageIndex)}updateMode(t,e=null,i=!1){if(this.#b!==t){if(this.#b=t,t===st.NONE){this.setEditingState(!1),this.#st();return}this.setEditingState(!0),this.#Z(),this.unselectAll();for(const n of this.#n.values())n.updateMode(t);if(!e&&i){this.addNewEditorFromKeyboard();return}if(e){for(const n of this.#i.values())if(n.annotationElementId===e){this.setSelected(n),n.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#b&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#o){switch(t){case K.CREATE:this.currentLayer.addNewEditor();return;case K.HIGHLIGHT_DEFAULT_COLOR:this.#M?.updateColor(e);break;case K.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#_||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const i of this.#A)i.updateParams(t,e);for(const i of this.#o)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const r of this.#i.values())r.editorType===t&&r.show(e);(this.#_?.get(K.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#Y([[K.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#T!==t){this.#T=t;for(const e of this.#n.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}#Z(){if(!this.#x){this.#x=!0;for(const t of this.#n.values())t.enable();for(const t of this.#i.values())t.enable()}}#st(){if(this.unselectAll(),this.#x){this.#x=!1;for(const t of this.#n.values())t.disable();for(const t of this.#i.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#i.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.focusMainContainer(),this.#f=null},0)),this.#i.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#c.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#c.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#c.has(t)}removeDeletedAnnotationElement(t){this.#c.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#ht(t){const e=this.#n.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#Y(t.propertiesToUpdate))}get#ut(){let t=null;for(t of this.#A);return t}updateUI(t){this.#ut===t&&this.#Y(t.propertiesToUpdate)}toggleSelected(t){if(this.#A.has(t)){this.#A.delete(t),t.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#A.add(t),t.select(),this.#Y(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(t){for(const e of this.#A)e!==t&&e.unselect();this.#A.clear(),this.#A.add(t),t.select(),this.#Y(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(t){return this.#A.has(t)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(t){t.unselect(),this.#A.delete(t),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#N({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#nt()})}redo(){this.#l.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#nt()})}addCommands(t){this.#l.add(t),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#nt()})}#nt(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#A],e=()=>{for(const n of t)n.remove()},i=()=>{for(const n of t)this.#ht(n)};this.addCommands({cmd:e,undo:i,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#ct(t){for(const e of this.#A)e.unselect();this.#A.clear();for(const e of t)e.isEmpty()||(this.#A.add(e),e.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#A)t.commit();this.#ct(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#b!==st.NONE))&&this.hasSelection){for(const t of this.#A)t.unselect();this.#A.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=t,this.#V[1]+=e;const[n,r]=this.#V,a=[...this.#A],o=1e3;this.#G&&clearTimeout(this.#G),this.#G=setTimeout(()=>{this.#G=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const l of a)this.#i.has(l.id)&&l.translateInPage(n,r)},undo:()=>{for(const l of a)this.#i.has(l.id)&&l.translateInPage(-n,-r)},mustExec:!1})},o);for(const l of a)l.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#d=new Map;for(const t of this.#A)this.#d.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#d)return!1;this.disableUserSelect(!1);const t=this.#d;this.#d=null;let e=!1;for(const[{x:n,y:r,pageIndex:a},o]of t)o.newX=n,o.newY=r,o.newPageIndex=a,e||=n!==o.savedX||r!==o.savedY||a!==o.savedPageIndex;if(!e)return!1;const i=(n,r,a,o)=>{if(this.#i.has(n.id)){const l=this.#n.get(o);l?n._setParentAndPosition(l,r,a):(n.pageIndex=o,n.x=r,n.y=a)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:a,newPageIndex:o}]of t)i(n,r,a,o)},undo:()=>{for(const[n,{savedX:r,savedY:a,savedPageIndex:o}]of t)i(n,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#d)for(const i of this.#d.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#b}get imageManager(){return at(this,"imageManager",new zu)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,c=e.rangeCount;h<c;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:i,y:n,width:r,height:a}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(h,c,u,d)=>({x:(c-n)/a,y:1-(h+u-i)/r,width:d/a,height:u/r});break;case"180":o=(h,c,u,d)=>({x:1-(h+u-i)/r,y:1-(c+d-n)/a,width:u/r,height:d/a});break;case"270":o=(h,c,u,d)=>({x:1-(c+d-n)/a,y:(h-i)/r,width:d/a,height:u/r});break;default:o=(h,c,u,d)=>({x:(h-i)/r,y:(c-n)/a,width:u/r,height:d/a});break}const l=[];for(let h=0,c=e.rangeCount;h<c;h++){const u=e.getRangeAt(h);if(!u.collapsed)for(const{x:d,y:f,width:p,height:m}of u.getClientRects())p===0||m===0||l.push(o(d,f,p,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#a||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#a?.delete(t)}renderAnnotationElement(t){const e=this.#a?.get(t.data.id);if(!e)return;const i=this.#s.getRawValue(e);i&&(this.#b===st.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}}class _s{#t="";#e=!1;#i=null;#n=null;#r=null;#s=!1;#a=null;static _l10nPromise=null;constructor(t){this.#a=t}static initialize(t){_s._l10nPromise||=t}async render(){const t=this.#i=document.createElement("button");t.className="altText";const e=await _s._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const i=this.#a._uiManager._signal;t.addEventListener("contextmenu",_e,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const n=r=>{r.preventDefault(),this.#a._uiManager.editAltText(this.#a)};return t.addEventListener("click",n,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#s=!0,n(r))},{signal:i}),await this.#l(),t}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return!this.#t&&!this.#e}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e}){this.#t===t&&this.#e===e||(this.#t=t,this.#e=e,this.#l())}toggle(t=!1){this.#i&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!t)}destroy(){this.#i?.remove(),this.#i=null,this.#n=null}async#l(){const t=this.#i;if(!t)return;if(!this.#t&&!this.#e){t.classList.remove("done"),this.#n?.remove();return}t.classList.add("done"),_s._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(n=>{t.setAttribute("aria-label",n)});let e=this.#n;if(!e){this.#n=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip");const n=e.id=`alt-text-tooltip-${this.#a.id}`;t.setAttribute("aria-describedby",n);const r=100,a=this.#a._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#n.classList.add("show"),this.#a._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n?.classList.remove("show")},{signal:a})}e.innerText=this.#e?await _s._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#t,e.parentNode||t.append(e),this.#a.getImageForAltText()?.setAttribute("aria-describedby",e.id)}}class X{#t=null;#e=null;#i=null;#n=!1;#r=!1;#s=null;#a=null;#l=this.focusin.bind(this);#u=this.focusout.bind(this);#c=null;#d="";#o=!1;#h=null;#p=!1;#g=!1;#f=!1;#m=null;#v=0;#y=0;#w=null;_initialOptions=Object.create(null);_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#x=!1;#T=X._zIndex++;static _borderLineWidth=-1;static _colorManager=new ju;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=X.prototype._resizeWithKeyboard,e=As.TRANSLATE_SMALL,i=As.TRANSLATE_BIG;return at(this,"_resizerKeyboardManager",new qr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],X.prototype._stopResizingWithKeyboard]]))}constructor(t){this.constructor===X&&ct("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:n,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[r,a];const[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return at(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new m1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,i){if(X._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,t.get(r.replaceAll(/([A-Z])/g,a=>`-${a.toLowerCase()}`))])),i?.strings)for(const r of i.strings)X._l10nPromise.set(r,t.get(r));if(X._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);X._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ct("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#x}set _isDraggable(t){this.#x=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#T}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#O(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#o?this.#o=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,n){const[r,a]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/r,this.y=(e+n)/a,this.fixAndSetPosition()}#k([t,e],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/t,this.y+=n/e,this.fixAndSetPosition()}translate(t,e){this.#k(this.parentDimensions,t,e)}translateInPage(t,e){this.#h||=[this.x,this.y],this.#k(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#h||=[this.x,this.y];const[i,n]=this.parentDimensions;if(this.x+=t/i,this.y+=e/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:c}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,c)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,l]=this.getBaseTranslation();r+=o,a+=l,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#h&&(this.#h[0]!==this.x||this.#h[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=X,n=i/t,r=i/e;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,i]=this.pageDimensions;let{x:n,y:r,width:a,height:o}=this;if(a*=e,o*=i,n*=e,r*=i,this._mustFixPosition)switch(t){case 0:n=Math.max(0,Math.min(e-a,n)),r=Math.max(0,Math.min(i-o,r));break;case 90:n=Math.max(0,Math.min(e-o,n)),r=Math.min(i,Math.max(a,r));break;case 180:n=Math.min(e,Math.max(a,n)),r=Math.min(i,Math.max(o,r));break;case 270:n=Math.min(e,Math.max(o,n)),r=Math.max(0,Math.min(i-a,r));break}this.x=n/=e,this.y=r/=i;const[l,h]=this.getBaseTranslation();n+=l,r+=h;const{style:c}=this.div;c.left=`${(100*n).toFixed(2)}%`,c.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}static#M(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return X.#M(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return X.#M(t,e,360-this.parentRotation)}#C(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this,n=e*t,r=i*t;return Ce.isCSSRoundSupported?[Math.round(n),Math.round(r)]:[n,r]}setDims(t,e){const[i,n]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,n=i.endsWith("%"),r=!this.#r&&e.endsWith("%");if(n&&r)return;const[a,o]=this.parentDimensions;n||(t.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!this.#r&&!r&&(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#b(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const n=document.createElement("div");this.#s.append(n),n.classList.add("resizer",i),n.setAttribute("data-resizer-name",i),n.addEventListener("pointerdown",this.#A.bind(this,i),{signal:e}),n.addEventListener("contextmenu",_e,{signal:e}),n.tabIndex=-1}this.div.prepend(this.#s)}#A(t,e){e.preventDefault();const{isMac:i}=Ce.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const n=this.#P.bind(this,t),r=this._isDraggable;this._isDraggable=!1;const a=this._uiManager._signal,o={passive:!0,capture:!0,signal:a};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",n,o),window.addEventListener("contextmenu",_e,{signal:a});const l=this.x,h=this.y,c=this.width,u=this.height,d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",n,o),window.removeEventListener("contextmenu",_e),this.parent.div.style.cursor=d,this.div.style.cursor=f,this.#E(l,h,c,u)};window.addEventListener("pointerup",p,{signal:a}),window.addEventListener("blur",p,{signal:a})}#E(t,e,i,n){const r=this.x,a=this.y,o=this.width,l=this.height;r===t&&a===e&&o===i&&l===n||this.addCommands({cmd:()=>{this.width=o,this.height=l,this.x=r,this.y=a;const[h,c]=this.parentDimensions;this.setDims(h*o,c*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=n,this.x=t,this.y=e;const[h,c]=this.parentDimensions;this.setDims(h*i,c*n),this.fixAndSetPosition()},mustExec:!0})}#P(t,e){const[i,n]=this.parentDimensions,r=this.x,a=this.y,o=this.width,l=this.height,h=X.MIN_SIZE/i,c=X.MIN_SIZE/n,u=P=>Math.round(P*1e4)/1e4,d=this.#C(this.rotation),f=(P,k)=>[d[0]*P+d[2]*k,d[1]*P+d[3]*k],p=this.#C(360-this.rotation),m=(P,k)=>[p[0]*P+p[2]*k,p[1]*P+p[3]*k];let A,g,v=!1,y=!1;switch(t){case"topLeft":v=!0,A=(P,k)=>[0,0],g=(P,k)=>[P,k];break;case"topMiddle":A=(P,k)=>[P/2,0],g=(P,k)=>[P/2,k];break;case"topRight":v=!0,A=(P,k)=>[P,0],g=(P,k)=>[0,k];break;case"middleRight":y=!0,A=(P,k)=>[P,k/2],g=(P,k)=>[0,k/2];break;case"bottomRight":v=!0,A=(P,k)=>[P,k],g=(P,k)=>[0,0];break;case"bottomMiddle":A=(P,k)=>[P/2,k],g=(P,k)=>[P/2,0];break;case"bottomLeft":v=!0,A=(P,k)=>[0,k],g=(P,k)=>[P,0];break;case"middleLeft":y=!0,A=(P,k)=>[0,k/2],g=(P,k)=>[P,k/2];break}const b=A(o,l),w=g(o,l);let S=f(...w);const E=u(r+S[0]),x=u(a+S[1]);let C=1,T=1,[R,I]=this.screenToPageTranslation(e.movementX,e.movementY);if([R,I]=m(R/i,I/n),v){const P=Math.hypot(o,l);C=T=Math.max(Math.min(Math.hypot(w[0]-b[0]-R,w[1]-b[1]-I)/P,1/o,1/l),h/o,c/l)}else y?C=Math.max(h,Math.min(1,Math.abs(w[0]-b[0]-R)))/o:T=Math.max(c,Math.min(1,Math.abs(w[1]-b[1]-I)))/l;const L=u(o*C),G=u(l*T);S=f(...g(L,G));const z=E-S[0],H=x-S[1];this.width=L,this.height=G,this.x=z,this.y=H,this.setDims(i*L,n*G),this.fixAndSetPosition()}altTextFinish(){this.#i?.finish()}async addEditToolbar(){return this.#c||this.#g?this.#c:(this.#c=new Hu(this),this.div.append(this.#c.render()),this.#i&&this.#c.addAltTextButton(await this.#i.render()),this.#c)}removeEditToolbar(){this.#c&&(this.#c.remove(),this.#c=null,this.#i?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#i||(_s.initialize(X._l10nPromise),this.#i=new _s(this),this.#t&&(this.#i.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}hasAltText(){return!this.#i?.isEmpty()}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#n?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const t=this._uiManager._signal;this.div.addEventListener("focusin",this.#l,{signal:t}),this.div.addEventListener("focusout",this.#u,{signal:t});const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*i/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),bo(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Ce.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#o=!0,this._isDraggable){this.#R(t);return}this.#_(t)}#_(t){const{isMac:e}=Ce.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#R(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let i,n;const r=this._uiManager._signal;e&&(this.div.classList.add("moving"),i={passive:!0,capture:!0,signal:r},this.#v=t.clientX,this.#y=t.clientY,n=o=>{const{clientX:l,clientY:h}=o,[c,u]=this.screenToPageTranslation(l-this.#v,h-this.#y);this.#v=l,this.#y=h,this._uiManager.dragSelectedEditors(c,u)},window.addEventListener("pointermove",n,i));const a=()=>{window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",n,i)),this.#o=!1,this._uiManager.endDragSession()||this.#_(t)};window.addEventListener("pointerup",a,{signal:r}),window.addEventListener("blur",a,{signal:r})}moveInDOM(){this.#m&&clearTimeout(this.#m),this.#m=setTimeout(()=>{this.#m=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){const n=this.parentScale,[r,a]=this.pageDimensions,[o,l]=this.pageTranslation,h=t/n,c=e/n,u=this.x*r,d=this.y*a,f=this.width*r,p=this.height*a;switch(i){case 0:return[u+h+o,a-d-c-p+l,u+h+f+o,a-d-c+l];case 90:return[u+c+o,a-d+h+l,u+c+p+o,a-d+h+f+l];case 180:return[u-h-f+o,a-d+c+l,u-h+o,a-d+c+p+l];case 270:return[u-c-p+o,a-d-h-f+l,u-c+o,a-d-h+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,n,r,a]=t,o=r-i,l=a-n;switch(this.rotation){case 0:return[i,e-a,o,l];case 90:return[i,e-n,l,o];case 180:return[r,e-n,o,l];case 270:return[r,e-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#g=!0}disableEditMode(){this.#g=!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#f}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){const t=this._uiManager._signal;this.div?.addEventListener("focusin",this.#l,{signal:t}),this.div?.addEventListener("focusout",this.#u,{signal:t})}rotate(t){}serialize(t=!1,e=null){ct("An editor must be serializable")}static deserialize(t,e,i){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});n.rotation=t.rotation,n.#t=t.accessibilityData;const[r,a]=n.pageDimensions,[o,l,h,c]=n.getRectInCurrentCoords(t.rect,a);return n.x=o/r,n.y=l/a,n.width=h/r,n.height=c/a,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#u),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#m&&(clearTimeout(this.#m),this.#m=null),this.#O(),this.removeEditToolbar(),this.#w){for(const t of this.#w.values())clearTimeout(t);this.#w=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#b(),this.#s.classList.remove("hidden"),bo(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#a={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#s.children;if(!this.#e){this.#e=Array.from(e);const a=this.#S.bind(this),o=this.#D.bind(this),l=this._uiManager._signal;for(const h of this.#e){const c=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:l}),h.addEventListener("blur",o,{signal:l}),h.addEventListener("focus",this.#L.bind(this,c),{signal:l}),X._l10nPromise.get(`pdfjs-editor-resizer-label-${c}`).then(u=>h.setAttribute("aria-label",u))}}const i=this.#e[0];let n=0;for(const a of e){if(a===i)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(r!==n){if(r<n)for(let o=0;o<n-r;o++)this.#s.append(this.#s.firstChild);else if(r>n)for(let o=0;o<r-n;o++)this.#s.firstChild.before(this.#s.lastChild);let a=0;for(const o of e){const h=this.#e[a++].getAttribute("data-resizer-name");X._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(c=>o.setAttribute("aria-label",c))}}this.#F(0),this.#f=!0,this.#s.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#S(t){X._resizerKeyboardManager.exec(this,t)}#D(t){this.#f&&t.relatedTarget?.parentNode!==this.#s&&this.#O()}#L(t){this.#d=this.#f?t:""}#F(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#f&&this.#P(this.#d,{movementX:t,movementY:e})}#O(){if(this.#f=!1,this.#F(-1),this.#a){const{savedX:t,savedY:e,savedWidth:i,savedHeight:n}=this.#a;this.#E(t,e,i,n),this.#a=null}}_stopResizingWithKeyboard(){this.#O(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this.#c){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this.#c?.show()});return}this.#c?.show()}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this.#c?.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#r=!0;const i=t/e,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#w||=new Map;const{action:i}=t;let n=this.#w.get(i);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),this.#w.delete(i),this.#w.size===0&&(this.#w=null)},X._telemetryTimeout),this.#w.set(i,n);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class m1 extends X{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const Vf=3285377520,Ge=4294901760,pi=65535;class Bv{constructor(t){this.h1=t?t&4294967295:Vf,this.h2=t?t&4294967295:Vf}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let m=0,A=t.length;m<A;m++){const g=t.charCodeAt(m);g<=255?e[i++]=g:(e[i++]=g>>>8,e[i++]=g&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=i>>2,r=i-n*4,a=new Uint32Array(e.buffer,0,n);let o=0,l=0,h=this.h1,c=this.h2;const u=3432918353,d=461845907,f=u&pi,p=d&pi;for(let m=0;m<n;m++)m&1?(o=a[m],o=o*u&Ge|o*f&pi,o=o<<15|o>>>17,o=o*d&Ge|o*p&pi,h^=o,h=h<<13|h>>>19,h=h*5+3864292196):(l=a[m],l=l*u&Ge|l*f&pi,l=l<<15|l>>>17,l=l*d&Ge|l*p&pi,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(o=0,r){case 3:o^=e[n*4+2]<<16;case 2:o^=e[n*4+1]<<8;case 1:o^=e[n*4],o=o*u&Ge|o*f&pi,o=o<<15|o>>>17,o=o*d&Ge|o*p&pi,n&1?h^=o:c^=o}this.h1=h,this.h2=c}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ge|t*36045&pi,e=e*4283543511&Ge|((e<<16|t>>>16)*2950163797&Ge)>>>16,t^=e>>>1,t=t*444984403&Ge|t*60499&pi,e=e*3301882366&Ge|((e<<16|t>>>16)*3120437893&Ge)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const pc=Object.freeze({map:null,hash:"",transfer:void 0});class Uu{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#e.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#e.get(t)}remove(t){if(this.#e.delete(t),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#e.values())if(e instanceof X)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#e.get(t);let n=!1;if(i!==void 0)for(const[r,a]of Object.entries(e))i[r]!==a&&(n=!0,i[r]=a);else n=!0,this.#e.set(t,e);n&&this.#i(),e instanceof X&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#e.has(t)}getAll(){return this.#e.size>0?Lu(this.#e):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#e.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Hv(this)}get serializable(){if(this.#e.size===0)return pc;const t=new Map,e=new Bv,i=[],n=Object.create(null);let r=!1;for(const[a,o]of this.#e){const l=o instanceof X?o.serialize(!1,n):o;l&&(t.set(a,l),e.update(`${a}:${JSON.stringify(l)}`),r||=!!l.bitmap)}if(r)for(const a of t.values())a.bitmap&&i.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:pc}get editorStats(){let t=null;const e=new Map;for(const i of this.#e.values()){if(!(i instanceof X))continue;const n=i.telemetryFinalData;if(!n)continue;const{type:r}=n;e.has(r)||e.set(r,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const a=t[r]||=new Map;for(const[o,l]of Object.entries(n)){if(o==="type")continue;let h=a.get(o);h||(h=new Map,a.set(o,h));const c=h.get(l)??0;h.set(l,c+1)}}for(const[i,n]of e)t[i]=n.computeTelemetryFinalData(t[i]);return t}}class Hv extends Uu{#t;constructor(t){super();const{map:e,hash:i,transfer:n}=t.serializable,r=structuredClone(e,n?{transfer:n}:null);this.#t={map:r,hash:i,transfer:n}}get print(){ct("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}class v1{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||this.#t.has(t.loadedName))){if(zt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:n,style:r}=t,a=new FontFace(i,n,r);this.addNativeFontFace(a);try{await a.load(),this.#t.add(i),e?.(t)}catch{tt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}ct("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(n){throw tt(`Failed to load font '${i.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const n=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return at(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(ae||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),at(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(zt(!n.done,"completeRequest() cannot be called twice."),n.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,n={done:!1,complete:e,callback:t};return i.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return at(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(b,w){return b.charCodeAt(w)<<24|b.charCodeAt(w+1)<<16|b.charCodeAt(w+2)<<8|b.charCodeAt(w+3)&255}function n(b,w,S,E){const x=b.substring(0,w),C=b.substring(w+S);return x+E+C}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let h=0;function c(b,w){if(++h>30){tt("Load test font never loaded."),w();return}if(l.font="30px "+b,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){w();return}setTimeout(c.bind(null,b,w))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=n(d,976,u.length,u);const p=16,m=1482184792;let A=i(d,p);for(r=0,a=u.length-3;r<a;r+=4)A=A-m+i(u,r)|0;r<u.length&&(A=A-m+i(u+"XXX",r)|0),d=n(d,p,4,t1(A));const g=`url(data:font/opentype;base64,${btoa(d)});`,v=`@font-face {font-family:"${u}";src:${g}}`;this.insertRule(v);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const b of[t.loadedName,u]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=b,y.append(w)}this._document.body.append(y),c(u,()=>{y.remove(),e.complete()})}}class y1{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this.disableFontFace=e===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=Lv(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),i}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(r){tt(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[e]=function(r,a){};const n=[];for(let r=0,a=i.length;r<a;)switch(i[r++]){case Ri.BEZIER_CURVE_TO:{const[o,l,h,c,u,d]=i.slice(r,r+6);n.push(f=>f.bezierCurveTo(o,l,h,c,u,d)),r+=6}break;case Ri.MOVE_TO:{const[o,l]=i.slice(r,r+2);n.push(h=>h.moveTo(o,l)),r+=2}break;case Ri.LINE_TO:{const[o,l]=i.slice(r,r+2);n.push(h=>h.lineTo(o,l)),r+=2}break;case Ri.QUADRATIC_CURVE_TO:{const[o,l,h,c]=i.slice(r,r+4);n.push(u=>u.quadraticCurveTo(o,l,h,c)),r+=4}break;case Ri.RESTORE:n.push(o=>o.restore());break;case Ri.SAVE:n.push(o=>o.save());break;case Ri.SCALE:zt(n.length===2,"Scale command is only valid at the third position.");break;case Ri.TRANSFORM:{const[o,l,h,c,u,d]=i.slice(r,r+6);n.push(f=>f.transform(o,l,h,c,u,d)),r+=6}break;case Ri.TRANSLATE:{const[o,l]=i.slice(r,r+2);n.push(h=>h.translate(o,l)),r+=2}break}return this.compiledGlyphs[e]=function(a,o){n[0](a),n[1](a),a.scale(o,-o);for(let l=2,h=n.length;l<h;l++)n[l](a)}}}if(ae){var gc=Promise.withResolvers(),mc=null;(async()=>{const t=await Ni(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await Ni(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Ni(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await Ni(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:t,http:e,https:i,url:n,canvas:r,path2d:a}))})().then(t=>{mc=t,gc.resolve()},t=>{tt(`loadPackages: ${t}`),mc=new Map,gc.resolve()})}class Ei{static get promise(){return gc.promise}static get(t){return mc?.get(t)}}const zv=function(s){return Ei.get("fs").promises.readFile(s).then(e=>new Uint8Array(e))};class A1 extends il{}class b1 extends sl{_createCanvas(t,e){return Ei.get("canvas").createCanvas(t,e)}}class w1 extends nl{_fetchData(t,e){return zv(t).then(i=>({cMapData:i,compressionType:e}))}}class S1 extends rl{_fetchData(t){return zv(t)}}const de={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function vc(s,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,i),s.clip(n)}class Kr{constructor(){this.constructor===Kr&&ct("Cannot initialize BaseShadingPattern.")}getPattern(){ct("Abstract method `getPattern` called.")}}class E1 extends Kr{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,n){let r;if(n===de.STROKE||n===de.FILL){const a=e.current.getClippedPathBoundingBox(n,vt(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,h=e.cachedCanvases.getCanvas("pattern",o,l,!0),c=h.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),i=U.transform(i,[1,0,0,1,a[0],a[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),vc(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=t.createPattern(h.canvas,"no-repeat");const u=new DOMMatrix(i);r.setTransform(u)}else vc(t,this._bbox),r=this._createGradient(t);return r}}function Kl(s,t,e,i,n,r,a,o){const l=t.coords,h=t.colors,c=s.data,u=s.width*4;let d;l[e+1]>l[i+1]&&(d=e,e=i,i=d,d=r,r=a,a=d),l[i+1]>l[n+1]&&(d=i,i=n,n=d,d=a,a=o,o=d),l[e+1]>l[i+1]&&(d=e,e=i,i=d,d=r,r=a,a=d);const f=(l[e]+t.offsetX)*t.scaleX,p=(l[e+1]+t.offsetY)*t.scaleY,m=(l[i]+t.offsetX)*t.scaleX,A=(l[i+1]+t.offsetY)*t.scaleY,g=(l[n]+t.offsetX)*t.scaleX,v=(l[n+1]+t.offsetY)*t.scaleY;if(p>=v)return;const y=h[r],b=h[r+1],w=h[r+2],S=h[a],E=h[a+1],x=h[a+2],C=h[o],T=h[o+1],R=h[o+2],I=Math.round(p),L=Math.round(v);let G,z,H,P,k,O,F,J;for(let W=I;W<=L;W++){if(W<A){const M=W<p?0:(p-W)/(p-A);G=f-(f-m)*M,z=y-(y-S)*M,H=b-(b-E)*M,P=w-(w-x)*M}else{let M;W>v?M=1:A===v?M=0:M=(A-W)/(A-v),G=m-(m-g)*M,z=S-(S-C)*M,H=E-(E-T)*M,P=x-(x-R)*M}let V;W<p?V=0:W>v?V=1:V=(p-W)/(p-v),k=f-(f-g)*V,O=y-(y-C)*V,F=b-(b-T)*V,J=w-(w-R)*V;const gt=Math.round(Math.min(G,k)),wt=Math.round(Math.max(G,k));let nt=u*W+gt*4;for(let M=gt;M<=wt;M++)V=(G-M)/(G-k),V<0?V=0:V>1&&(V=1),c[nt++]=z-(z-O)*V|0,c[nt++]=H-(H-F)*V|0,c[nt++]=P-(P-J)*V|0,c[nt++]=255}}function x1(s,t,e){const i=t.coords,n=t.colors;let r,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,h=o-1;for(r=0;r<l;r++){let c=r*o;for(let u=0;u<h;u++,c++)Kl(s,e,i[c],i[c+1],i[c+o],n[c],n[c+1],n[c+o]),Kl(s,e,i[c+o+1],i[c+1],i[c+o],n[c+o+1],n[c+1],n[c+o])}break;case"triangles":for(r=0,a=i.length;r<a;r+=3)Kl(s,e,i[r],i[r+1],i[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class C1 extends Kr{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-o,c=Math.ceil(this._bounds[3])-l,u=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*t[1]*1.1)),3e3),f=h/u,p=c/d,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/p},A=u+2*2,g=d+2*2,v=i.getCanvas("mesh",A,g,!1),y=v.context,b=y.createImageData(u,d);if(e){const S=b.data;for(let E=0,x=S.length;E<x;E+=4)S[E]=e[0],S[E+1]=e[1],S[E+2]=e[2],S[E+3]=255}for(const S of this._figures)x1(b,S,m);return y.putImageData(b,2,2),{canvas:v.canvas,offsetX:o-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}getPattern(t,e,i,n){vc(t,this._bbox);let r;if(n===de.SHADING)r=U.singularValueDecompose2dScale(vt(t));else if(r=U.singularValueDecompose2dScale(e.baseTransform),this.matrix){const o=U.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,n===de.SHADING?null:this._background,e.cachedCanvases);return n!==de.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class T1 extends Kr{getPattern(){return"hotpink"}}function k1(s){switch(s[0]){case"RadialAxial":return new E1(s);case"Mesh":return new C1(s);case"Dummy":return new T1}throw new Error(`Unknown IR type: ${s[0]}`)}const Xf={COLORED:1,UNCOLORED:2};class Wu{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,n,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,n=this.xstep,r=this.ystep,a=this.paintType,o=this.tilingType,l=this.color,h=this.canvasGraphicsFactory;$o("TilingType: "+o);const c=i[0],u=i[1],d=i[2],f=i[3],p=U.singularValueDecompose2dScale(this.matrix),m=U.singularValueDecompose2dScale(this.baseTransform),A=[p[0]*m[0],p[1]*m[1]],g=this.getSizeAndScale(n,this.ctx.canvas.width,A[0]),v=this.getSizeAndScale(r,this.ctx.canvas.height,A[1]),y=t.cachedCanvases.getCanvas("pattern",g.size,v.size,!0),b=y.context,w=h.createCanvasGraphics(b);w.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(w,a,l);let S=c,E=u,x=d,C=f;return c<0&&(S=0,x+=Math.abs(c)),u<0&&(E=0,C+=Math.abs(u)),b.translate(-(g.scale*S),-(v.scale*E)),w.transform(g.scale,0,0,v.scale,0,0),b.save(),this.clipBbox(w,S,E,x,C),w.baseTransform=vt(w.ctx),w.executeOperatorList(e),w.endDrawing(),{canvas:y.canvas,scaleX:g.scale,scaleY:v.scale,offsetX:S,offsetY:E}}getSizeAndScale(t,e,i){t=Math.abs(t);const n=Math.max(Wu.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=n?r=n:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,n,r){const a=n-e,o=r-i;t.ctx.rect(e,i,a,o),t.current.updateRectMinMax(vt(t.ctx),[e,i,n,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const n=t.ctx,r=t.current;switch(e){case Xf.COLORED:const a=this.ctx;n.fillStyle=a.fillStyle,n.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case Xf.UNCOLORED:const o=U.makeHexColor(i[0],i[1],i[2]);n.fillStyle=o,n.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new $E(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,n){let r=i;n!==de.SHADING&&(r=U.transform(r,e.baseTransform),this.matrix&&(r=U.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=t.createPattern(a.canvas,"repeat");return l.setTransform(o),l}}function R1({src:s,srcPos:t=0,dest:e,width:i,height:n,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=Ce.isLittleEndian?4278190080:255,[l,h]=a?[r,o]:[o,r],c=i>>3,u=i&7,d=s.length;e=new Uint32Array(e.buffer);let f=0;for(let p=0;p<n;p++){for(const A=t+c;t<A;t++){const g=t<d?s[t]:255;e[f++]=g&128?h:l,e[f++]=g&64?h:l,e[f++]=g&32?h:l,e[f++]=g&16?h:l,e[f++]=g&8?h:l,e[f++]=g&4?h:l,e[f++]=g&2?h:l,e[f++]=g&1?h:l}if(u===0)continue;const m=t<d?s[t++]:255;for(let A=0;A<u;A++)e[f++]=m&1<<7-A?h:l}return{srcPos:t,destPos:f}}const qf=16,Kf=100,P1=15,Qf=10,Zf=1e3,we=16;function _1(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(i,n){t.translate(i,n),this.__originalTranslate(i,n)},s.scale=function(i,n){t.scale(i,n),this.__originalScale(i,n)},s.transform=function(i,n,r,a,o,l){t.transform(i,n,r,a,o,l),this.__originalTransform(i,n,r,a,o,l)},s.setTransform=function(i,n,r,a,o,l){t.setTransform(i,n,r,a,o,l),this.__originalSetTransform(i,n,r,a,o,l)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(i){t.rotate(i),this.__originalRotate(i)},s.clip=function(i){t.clip(i),this.__originalClip(i)},s.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},s.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},s.bezierCurveTo=function(e,i,n,r,a,o){t.bezierCurveTo(e,i,n,r,a,o),this.__originalBezierCurveTo(e,i,n,r,a,o)},s.rect=function(e,i,n,r){t.rect(e,i,n,r),this.__originalRect(e,i,n,r)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class M1{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,i)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ca(s,t,e,i,n,r,a,o,l,h){const[c,u,d,f,p,m]=vt(s);if(u===0&&d===0){const v=a*c+p,y=Math.round(v),b=o*f+m,w=Math.round(b),S=(a+l)*c+p,E=Math.abs(Math.round(S)-y)||1,x=(o+h)*f+m,C=Math.abs(Math.round(x)-w)||1;return s.setTransform(Math.sign(c),0,0,Math.sign(f),y,w),s.drawImage(t,e,i,n,r,0,0,E,C),s.setTransform(c,u,d,f,p,m),[E,C]}if(c===0&&f===0){const v=o*d+p,y=Math.round(v),b=a*u+m,w=Math.round(b),S=(o+h)*d+p,E=Math.abs(Math.round(S)-y)||1,x=(a+l)*u+m,C=Math.abs(Math.round(x)-w)||1;return s.setTransform(0,Math.sign(u),Math.sign(d),0,y,w),s.drawImage(t,e,i,n,r,0,0,C,E),s.setTransform(c,u,d,f,p,m),[C,E]}s.drawImage(t,e,i,n,r,a,o,l,h);const A=Math.hypot(c,u),g=Math.hypot(d,f);return[A*l,g*h]}function L1(s){const{width:t,height:e}=s;if(t>Zf||e>Zf)return null;const i=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),o,l,h;const c=t+7&-8;let u=new Uint8Array(c*e),d=0;for(const g of s.data){let v=128;for(;v>0;)u[d++]=g&v?0:255,v>>=1}let f=0;for(d=0,u[d]!==0&&(a[0]=1,++f),l=1;l<t;l++)u[d]!==u[d+1]&&(a[l]=u[d]?2:1,++f),d++;for(u[d]!==0&&(a[l]=2,++f),o=1;o<e;o++){d=o*c,h=o*r,u[d-c]!==u[d]&&(a[h]=u[d]?1:8,++f);let g=(u[d]?4:0)+(u[d-c]?8:0);for(l=1;l<t;l++)g=(g>>2)+(u[d+1]?4:0)+(u[d-c+1]?8:0),n[g]&&(a[h+l]=n[g],++f),d++;if(u[d-c]!==u[d]&&(a[h+l]=u[d]?2:4,++f),f>i)return null}for(d=c*(e-1),h=o*r,u[d]!==0&&(a[h]=8,++f),l=1;l<t;l++)u[d]!==u[d+1]&&(a[h+l]=u[d]?4:8,++f),d++;if(u[d]!==0&&(a[h+l]=4,++f),f>i)return null;const p=new Int32Array([0,r,-1,0,-r,0,0,0,1]),m=new Path2D;for(o=0;f&&o<=e;o++){let g=o*r;const v=g+t;for(;g<v&&!a[g];)g++;if(g===v)continue;m.moveTo(g%r,o);const y=g;let b=a[g];do{const w=p[b];do g+=w;while(!a[g]);const S=a[g];S!==5&&S!==10?(b=S,a[g]=0):(b=S&51*b>>4,a[g]&=b>>2|b<<2),m.lineTo(g%r,g/r|0),a[g]||--f}while(y!==g);--o}return u=null,a=null,function(g){g.save(),g.scale(1/t,-1/e),g.translate(0,-e),g.fill(m),g.beginPath(),g.restore()}}class Jf{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_v,this.textMatrixScale=1,this.fontMatrix=cc,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=ie.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=U.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=U.applyTransform(e,t),n=U.applyTransform(e.slice(2),t),r=U.applyTransform([e[0],e[3]],t),a=U.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],n[0],r[0],a[0]),this.minY=Math.min(this.minY,i[1],n[1],r[1],a[1]),this.maxX=Math.max(this.maxX,i[0],n[0],r[0],a[0]),this.maxY=Math.max(this.maxY,i[1],n[1],r[1],a[1])}updateScalingPathMinMax(t,e){U.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,n,r,a,o,l,h,c){const u=U.bezierBoundingBox(e,i,n,r,a,o,l,h,c);c||this.updateRectMinMax(t,u)}getPathBoundingBox(t=de.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===de.STROKE){e||ct("Stroke bounding box must include transform.");const n=U.singularValueDecompose2dScale(e),r=n[0]*this.lineWidth/2,a=n[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const t=U.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=de.FILL,e=null){return U.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function $f(s,t){if(typeof ImageData<"u"&&t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,i=t.width,n=e%we,r=(e-n)/we,a=n===0?r:r+1,o=s.createImageData(i,we);let l=0,h;const c=t.data,u=o.data;let d,f,p,m;if(t.kind===Va.GRAYSCALE_1BPP){const A=c.byteLength,g=new Uint32Array(u.buffer,0,u.byteLength>>2),v=g.length,y=i+7>>3,b=4294967295,w=Ce.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(p=d<r?we:n,h=0,f=0;f<p;f++){const S=A-l;let E=0;const x=S>y?i:S*8-7,C=x&-8;let T=0,R=0;for(;E<C;E+=8)R=c[l++],g[h++]=R&128?b:w,g[h++]=R&64?b:w,g[h++]=R&32?b:w,g[h++]=R&16?b:w,g[h++]=R&8?b:w,g[h++]=R&4?b:w,g[h++]=R&2?b:w,g[h++]=R&1?b:w;for(;E<x;E++)T===0&&(R=c[l++],T=128),g[h++]=R&T?b:w,T>>=1}for(;h<v;)g[h++]=0;s.putImageData(o,0,d*we)}}else if(t.kind===Va.RGBA_32BPP){for(f=0,m=i*we*4,d=0;d<r;d++)u.set(c.subarray(l,l+m)),l+=m,s.putImageData(o,0,f),f+=we;d<a&&(m=i*n*4,u.set(c.subarray(l,l+m)),s.putImageData(o,0,f))}else if(t.kind===Va.RGB_24BPP)for(p=we,m=i*p,d=0;d<a;d++){for(d>=r&&(p=n,m=i*p),h=0,f=m;f--;)u[h++]=c[l++],u[h++]=c[l++],u[h++]=c[l++],u[h++]=255;s.putImageData(o,0,d*we)}else throw new Error(`bad image kind: ${t.kind}`)}function tp(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,n=e%we,r=(e-n)/we,a=n===0?r:r+1,o=s.createImageData(i,we);let l=0;const h=t.data,c=o.data;for(let u=0;u<a;u++){const d=u<r?we:n;({srcPos:l}=R1({src:h,srcPos:l,dest:c,width:i,height:d,nonBlackColor:0})),s.putImageData(o,0,u*we)}}function Xn(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)s[i]!==void 0&&(t[i]=s[i]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function Ta(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!ae){const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}}function ep(s,t){if(t)return!0;const e=U.singularValueDecompose2dScale(s);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*_n.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const D1=["butt","round","square"],I1=["miter","round","bevel"],F1={},ip={};class wn{constructor(t,e,i,n,r,{optionalContentConfig:a,markedContentStack:o=null},l,h){this.ctx=t,this.current=new Jf(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new M1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:n=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...vt(this.compositeCtx))}this.ctx.save(),Ta(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=vt(this.ctx)}executeOperatorList(t,e,i,n){const r=t.argsArray,a=t.fnArray;let o=e||0;const l=r.length;if(l===o)return o;const h=l-o>Qf&&typeof i=="function",c=h?Date.now()+P1:0;let u=0;const d=this.commonObjs,f=this.objs;let p;for(;;){if(n!==void 0&&o===n.nextBreakPoint)return n.breakIt(o,i),o;if(p=a[o],p!==ai.dependency)this[p].apply(this,r[o]);else for(const m of r[o]){const A=m.startsWith("g_")?d:f;if(!A.has(m))return A.get(m,i),o}if(o++,o===l)return o;if(h&&++u>Qf){if(Date.now()>c)return i(),o;u=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width,n=t.height;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=i,l=n,h="prescale1",c,u;for(;r>2&&o>1||a>2&&l>1;){let d=o,f=l;r>2&&o>1&&(d=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/d),a>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/f),c=this.cachedCanvases.getCanvas(h,d,f),u=c.context,u.clearRect(0,0,d,f),u.drawImage(t,0,0,o,l,0,0,d,f),t=c.canvas,o=d,l=f,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:n}=t,r=this.current.fillColor,a=this.current.patternFill,o=vt(e);let l,h,c,u;if((t.bitmap||t.data)&&t.count>1){const x=t.bitmap||t.data.buffer;h=JSON.stringify(a?o:[o.slice(0,4),r]),l=this._cachedBitmapsMap.get(x),l||(l=new Map,this._cachedBitmapsMap.set(x,l));const C=l.get(h);if(C&&!a){const T=Math.round(Math.min(o[0],o[2])+o[4]),R=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:C,offsetX:T,offsetY:R}}c=C}c||(u=this.cachedCanvases.getCanvas("maskCanvas",i,n),tp(u.context,t));let d=U.transform(o,[1/i,0,0,-1/n,0,0]);d=U.transform(d,[1,0,0,1,0,-n]);const[f,p,m,A]=U.getAxialAlignedBoundingBox([0,0,i,n],d),g=Math.round(m-f)||1,v=Math.round(A-p)||1,y=this.cachedCanvases.getCanvas("fillCanvas",g,v),b=y.context,w=f,S=p;b.translate(-w,-S),b.transform(...d),c||(c=this._scaleImage(u.canvas,Pi(b)),c=c.img,l&&a&&l.set(h,c)),b.imageSmoothingEnabled=ep(vt(b),t.interpolate),Ca(b,c,0,0,c.width,c.height,0,0,i,n),b.globalCompositeOperation="source-in";const E=U.transform(Pi(b),[1,0,0,1,-w,-S]);return b.fillStyle=a?r.getPattern(e,this,E,de.FILL):r,b.fillRect(0,0,i,n),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(h,y.canvas)),{canvas:y.canvas,offsetX:Math.round(w),offsetY:Math.round(S)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=D1[t]}setLineJoin(t){this.ctx.lineJoin=I1[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=n.context;const r=this.ctx;r.setTransform(...vt(this.suspendedCtx)),Xn(this.suspendedCtx,r),_1(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Xn(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,n){const r=n[0],a=n[1],o=n[2]-r,l=n[3]-a;o===0||l===0||(this.genericComposeSMask(e.context,i,o,l,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,n,r,a,o,l,h,c,u){let d=t.canvas,f=l-c,p=h-u;if(a){if(f<0||p<0||f+i>d.width||p+n>d.height){const A=this.cachedCanvases.getCanvas("maskExtension",i,n),g=A.context;g.drawImage(d,-f,-p),a.some(v=>v!==0)&&(g.globalCompositeOperation="destination-atop",g.fillStyle=U.makeHexColor(...a),g.fillRect(0,0,i,n),g.globalCompositeOperation="source-over"),d=A.canvas,f=p=0}else if(a.some(A=>A!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(f,p,i,n),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=U.makeHexColor(...a),t.fillRect(f,p,i,n),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,h,i,n),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(d,f,p,i,n,l,h,i,n),e.restore()}save(){this.inSMaskMode?(Xn(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Xn(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,n,r,a){this.ctx.transform(t,e,i,n,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const n=this.ctx,r=this.current;let a=r.x,o=r.y,l,h;const c=vt(n),u=c[0]===0&&c[3]===0||c[1]===0&&c[2]===0,d=u?i.slice(0):null;for(let f=0,p=0,m=t.length;f<m;f++)switch(t[f]|0){case ai.rectangle:a=e[p++],o=e[p++];const A=e[p++],g=e[p++],v=a+A,y=o+g;n.moveTo(a,o),A===0||g===0?n.lineTo(v,y):(n.lineTo(v,o),n.lineTo(v,y),n.lineTo(a,y)),u||r.updateRectMinMax(c,[a,o,v,y]),n.closePath();break;case ai.moveTo:a=e[p++],o=e[p++],n.moveTo(a,o),u||r.updatePathMinMax(c,a,o);break;case ai.lineTo:a=e[p++],o=e[p++],n.lineTo(a,o),u||r.updatePathMinMax(c,a,o);break;case ai.curveTo:l=a,h=o,a=e[p+4],o=e[p+5],n.bezierCurveTo(e[p],e[p+1],e[p+2],e[p+3],a,o),r.updateCurvePathMinMax(c,l,h,e[p],e[p+1],e[p+2],e[p+3],a,o,d),p+=6;break;case ai.curveTo2:l=a,h=o,n.bezierCurveTo(a,o,e[p],e[p+1],e[p+2],e[p+3]),r.updateCurvePathMinMax(c,l,h,a,o,e[p],e[p+1],e[p+2],e[p+3],d),a=e[p+2],o=e[p+3],p+=4;break;case ai.curveTo3:l=a,h=o,a=e[p+2],o=e[p+3],n.bezierCurveTo(e[p],e[p+1],a,o,a,o),r.updateCurvePathMinMax(c,l,h,e[p],e[p+1],a,o,a,o,d),p+=4;break;case ai.closePath:n.closePath();break}u&&r.updateScalingPathMinMax(c,d),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,Pi(e),de.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;let r=!1;n&&(e.save(),e.fillStyle=i.getPattern(e,this,Pi(e),de.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=F1}eoClip(){this.pendingClip=ip}beginText(){this.current.textMatrix=_v,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),n=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=i.fontMatrix||cc,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&tt("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const r=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${r}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let h=e;e<qf?h=qf:e>Kf&&(h=Kf),this.current.fontSizeScale=e/h,this.ctx.font=`${l} ${o} ${h}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,n,r,a){this.current.textMatrix=[t,e,i,n,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,n){const r=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,c=l&ie.FILL_STROKE_MASK,u=!!(l&ie.ADD_TO_PATH_FLAG),d=a.patternFill&&!o.missingFile;let f;(o.disableFontFace||u||d)&&(f=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||d?(r.save(),r.translate(e,i),r.beginPath(),f(r,h),n&&r.setTransform(...n),(c===ie.FILL||c===ie.FILL_STROKE)&&r.fill(),(c===ie.STROKE||c===ie.FILL_STROKE)&&r.stroke(),r.restore()):((c===ie.FILL||c===ie.FILL_STROKE)&&r.fillText(t,e,i),(c===ie.STROKE||c===ie.FILL_STROKE)&&r.strokeText(t,e,i)),u&&(this.pendingTextPaths||=[]).push({transform:vt(r),x:e,y:i,fontSize:h,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){i=!0;break}return at(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(n===0)return;const r=this.ctx,a=e.fontSizeScale,o=e.charSpacing,l=e.wordSpacing,h=e.fontDirection,c=e.textHScale*h,u=t.length,d=i.vertical,f=d?1:-1,p=i.defaultVMetrics,m=n*e.fontMatrix[0],A=e.textRenderingMode===ie.FILL&&!i.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(c,-1):r.scale(c,1);let g;if(e.patternFill){r.save();const S=e.fillColor.getPattern(r,this,Pi(r),de.FILL);g=vt(r),r.restore(),r.fillStyle=S}let v=e.lineWidth;const y=e.textMatrixScale;if(y===0||v===0){const S=e.textRenderingMode&ie.FILL_STROKE_MASK;(S===ie.STROKE||S===ie.FILL_STROKE)&&(v=this.getSinglePixelWidth())}else v/=y;if(a!==1&&(r.scale(a,a),v/=a),r.lineWidth=v,i.isInvalidPDFjsFont){const S=[];let E=0;for(const x of t)S.push(x.unicode),E+=x.width;r.fillText(S.join(""),0,0),e.x+=E*m*c,r.restore(),this.compose();return}let b=0,w;for(w=0;w<u;++w){const S=t[w];if(typeof S=="number"){b+=f*S*n/1e3;continue}let E=!1;const x=(S.isSpace?l:0)+o,C=S.fontChar,T=S.accent;let R,I,L=S.width;if(d){const z=S.vmetric||p,H=-(S.vmetric?z[1]:L*.5)*m,P=z[2]*m;L=z?-z[0]:L,R=H/a,I=(b+P)/a}else R=b/a,I=0;if(i.remeasure&&L>0){const z=r.measureText(C).width*1e3/n*a;if(L<z&&this.isFontSubpixelAAEnabled){const H=L/z;E=!0,r.save(),r.scale(H,1),R/=H}else L!==z&&(R+=(L-z)/2e3*n/a)}if(this.contentVisible&&(S.isInFont||i.missingFile)){if(A&&!T)r.fillText(C,R,I);else if(this.paintChar(C,R,I,g),T){const z=R+n*T.offset.x/a,H=I-n*T.offset.y/a;this.paintChar(T.fontChar,z,H,g)}}const G=d?L*m-x*h:L*m+x*h;b+=G,E&&r.restore()}d?e.y-=b:e.x+=b*c,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,n=i.font,r=i.fontSize,a=i.fontDirection,o=n.vertical?1:-1,l=i.charSpacing,h=i.wordSpacing,c=i.textHScale*a,u=i.fontMatrix||cc,d=t.length,f=i.textRenderingMode===ie.INVISIBLE;let p,m,A,g;if(!(f||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(c,a),p=0;p<d;++p){if(m=t[p],typeof m=="number"){g=o*m*r/1e3,this.ctx.translate(g,0),i.x+=g*c;continue}const v=(m.isSpace?h:0)+l,y=n.charProcOperatorList[m.operatorListId];if(!y){tt(`Type3 character "${m.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=m,this.save(),e.scale(r,r),e.transform(...u),this.executeOperatorList(y),this.restore()),A=U.applyTransform([m.width,0],u)[0]*r+v,e.translate(A,0),i.x+=A*c}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,n,r,a){this.ctx.rect(i,n,r-i,a-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],n=this.baseTransform||vt(this.ctx),r={createCanvasGraphics:a=>new wn(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Wu(t,i,this.ctx,r,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){const n=U.makeHexColor(t,e,i);this.ctx.strokeStyle=n,this.current.strokeColor=n}setFillRGBColor(t,e,i){const n=U.makeHexColor(t,e,i);this.ctx.fillStyle=n,this.current.fillColor=n,this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=k1(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Pi(e),de.SHADING);const n=Pi(e);if(n){const{width:r,height:a}=e.canvas,[o,l,h,c]=U.getAxialAlignedBoundingBox([0,0,r,a],n);this.ctx.fillRect(o,l,h-o,c-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ct("Should not call beginInlineImage")}beginImageData(){ct("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=vt(this.ctx),e)){const i=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],i,n),this.current.updateRectMinMax(vt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||$o("TODO: Support non-isolated groups."),t.knockout&&tt("Knockout groups not supported.");const i=vt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=U.getAxialAlignedBoundingBox(t.bbox,vt(e));const r=[0,0,e.canvas.width,e.canvas.height];n=U.intersect(n,r)||[0,0,0,0];const a=Math.floor(n[0]),o=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-a,1),h=Math.max(Math.ceil(n[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,h]);let c="groupAt"+this.groupLevel;t.smask&&(c+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(c,l,h),d=u.context;d.translate(-a,-o),d.transform(...i),t.smask?this.smaskStack.push({canvas:u.canvas,context:d,offsetX:a,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,o),e.save()),Xn(e,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=vt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=U.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,i,n,r){if(this.#t(),Ta(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],o=e[3]-e[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=o;const[l,h]=U.singularValueDecompose2dScale(vt(this.ctx)),{viewportScale:c}=this,u=Math.ceil(a*this.outputScaleX*c),d=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(l,0,0,-h,0,o*h),Ta(this.ctx)}else Ta(this.ctx),this.ctx.rect(e[0],e[1],a,o),this.ctx.clip(),this.endPath()}this.current=new Jf(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=L1(t)),n.compiled)){n.compiled(i);return}const r=this._createMaskCanvas(t),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,n=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const l=vt(o);o.transform(e,i,n,r,0,0);const h=this._createMaskCanvas(t);o.setTransform(1,0,0,1,h.offsetX-l[4],h.offsetY-l[5]);for(let c=0,u=a.length;c<u;c+=2){const d=U.transform(l,[e,i,n,r,a[c],a[c+1]]),[f,p]=U.applyTransform([0,0],d);o.drawImage(h.canvas,f,p)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const r of t){const{data:a,width:o,height:l,transform:h}=r,c=this.cachedCanvases.getCanvas("maskCanvas",o,l),u=c.context;u.save();const d=this.getObject(a,r);tp(u,d),u.globalCompositeOperation="source-in",u.fillStyle=n?i.getPattern(u,this,Pi(e),de.FILL):i,u.fillRect(0,0,o,l),u.restore(),e.save(),e.transform(...h),e.scale(1,-1),Ca(e,c.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){tt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){tt("Dependent image isn't ready yet");return}const a=r.width,o=r.height,l=[];for(let h=0,c=n.length;h<c;h+=2)l.push({transform:[e,0,0,i,n[h],n[h+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:n}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,n),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,n=this.ctx;if(this.save(),!ae){const{filter:o}=n;o!=="none"&&o!==""&&(n.filter="none")}n.scale(1/e,-1/i);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,i).context;$f(l,t),r=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(r,Pi(n));n.imageSmoothingEnabled=ep(vt(n),t.interpolate),Ca(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const r=t.width,a=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,a).context;$f(l,t),n=this.applyTransferMapsToCanvas(l)}for(const r of e)i.save(),i.transform(...r.transform),i.scale(1,-1),Ca(i,n,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===ip?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=vt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:n,d:r}=this.ctx.getTransform();let a,o;if(i===0&&n===0){const l=Math.abs(e),h=Math.abs(r);if(l===h)if(t===0)a=o=1/l;else{const c=l*t;a=o=c<1?1/c:1}else if(t===0)a=1/l,o=1/h;else{const c=l*t,u=h*t;a=c<1?1/c:1,o=u<1?1/u:1}}else{const l=Math.abs(e*r-i*n),h=Math.hypot(e,i),c=Math.hypot(n,r);if(t===0)a=c/l,o=h/l;else{const u=t*l;a=c>u?c/u:1,o=h>u?h/u:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[n,r]=this.getScaleForStroking();if(e.lineWidth=i||1,n===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(n,r),a.length>0){const o=Math.max(n,r);e.setLineDash(a.map(l=>l/o)),e.lineDashOffset/=o}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const s in ai)wn.prototype[s]!==void 0&&(wn.prototype[ai[s]]=wn.prototype[s]);class Or{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}const ka={UNKNOWN:0,DATA:1,ERROR:2},kt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Le(s){switch(s instanceof Error||typeof s=="object"&&s!==null||ct('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Qs(s.message);case"MissingPDFException":return new Ks(s.message);case"PasswordException":return new dc(s.message,s.code);case"UnexpectedResponseException":return new tl(s.message,s.status);case"UnknownErrorException":return new fc(s.message,s.details);default:return new fc(s.message,s.toString())}}class nr{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=n=>{const r=n.data;if(r.targetName!==this.sourceName)return;if(r.stream){this.#e(r);return}if(r.callback){const o=r.callbackId,l=this.callbackCapabilities[o];if(!l)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],r.callback===ka.DATA)l.resolve(r.data);else if(r.callback===ka.ERROR)l.reject(Le(r.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[r.action];if(!a)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const o=this.sourceName,l=r.sourceName;new Promise(function(h){h(a(r.data))}).then(function(h){i.postMessage({sourceName:o,targetName:l,callback:ka.DATA,callbackId:r.callbackId,data:h})},function(h){i.postMessage({sourceName:o,targetName:l,callback:ka.ERROR,callbackId:r.callbackId,reason:Le(h)})});return}if(r.streamId){this.#t(r);return}a(r.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,i,n){const r=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:h=>{const c=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:t,streamId:r,data:e,desiredSize:h.desiredSize},n),c.promise},pull:h=>{const c=Promise.withResolvers();return this.streamControllers[r].pullCall=c,l.postMessage({sourceName:a,targetName:o,stream:kt.PULL,streamId:r,desiredSize:h.desiredSize}),c.promise},cancel:h=>{zt(h instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[r].cancelCall=c,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:kt.CANCEL,streamId:r,reason:Le(h)}),c.promise}},i)}#t(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,r=this.comObj,a=this,o=this.actionHandler[t.action],l={enqueue(h,c=1,u){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:n,stream:kt.ENQUEUE,streamId:e,chunk:h},u)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:kt.CLOSE,streamId:e}),delete a.streamSinks[e])},error(h){zt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:kt.ERROR,streamId:e,reason:Le(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise(function(h){h(o(t.data,l))}).then(function(){r.postMessage({sourceName:i,targetName:n,stream:kt.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:i,targetName:n,stream:kt.START_COMPLETE,streamId:e,reason:Le(h)})})}#e(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,r=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case kt.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(Le(t.reason));break;case kt.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(Le(t.reason));break;case kt.PULL:if(!o){r.postMessage({sourceName:i,targetName:n,stream:kt.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,new Promise(function(l){l(o.onPull?.())}).then(function(){r.postMessage({sourceName:i,targetName:n,stream:kt.PULL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:i,targetName:n,stream:kt.PULL_COMPLETE,streamId:e,reason:Le(l)})});break;case kt.ENQUEUE:if(zt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case kt.CLOSE:if(zt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#i(a,e);break;case kt.ERROR:zt(a,"error should have stream controller"),a.controller.error(Le(t.reason)),this.#i(a,e);break;case kt.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(Le(t.reason)),this.#i(a,e);break;case kt.CANCEL:if(!o)break;new Promise(function(l){l(o.onCancel?.(Le(t.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:n,stream:kt.CANCEL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:i,targetName:n,stream:kt.CANCEL_COMPLETE,streamId:e,reason:Le(l)})}),o.sinkCapability.reject(Le(t.reason)),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#i(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}class N1{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}getAll(){return Lu(this.#t)}has(t){return this.#t.has(t)}}const $i=Symbol("INTERNAL");class O1{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:n}){this.#t=!!(t&Ve.DISPLAY),this.#e=!!(t&Ve.PRINT),this.name=e,this.intent=i,this.usage=n}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==$i&&ct("Internal method `_setVisible` called."),this.#i=i,this.#n=e}}class B1{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=Ve.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new O1(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible($i,!1);for(const i of t.on)this.#e.get(i)._setVisible($i,!0);for(const i of t.off)this.#e.get(i)._setVisible($i,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let n=1;n<e;n++){const r=t[n];let a;if(Array.isArray(r))a=this.#r(r);else if(this.#e.has(r))a=this.#e.get(r).visible;else return tt(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return $o("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(tt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return tt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return tt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return tt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return tt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return tt(`Unknown optional content policy ${t.policy}.`),!0}return tt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const i=this.#e.get(t);if(!i){tt(`Optional content group not found: ${t}`);return}i._setVisible($i,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}const r=this.#e.get(n);if(r)switch(i){case"ON":r._setVisible($i,!0);break;case"OFF":r._setVisible($i,!1);break;case"Toggle":r._setVisible($i,!r.visible);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?Lu(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Bv;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}}class H1{constructor(t,{disableRange:e=!1,disableStream:i=!1}){zt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,r?.length>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,h)=>{this._onReceiveData({begin:l,chunk:h})}),t.addProgressListener((l,h)=>{this._onProgress({loaded:l,total:h})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const n=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});zt(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){zt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new z1(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new j1(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class z1{constructor(t,e,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=Ou(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class j1{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function U1(s){let t=!0,e=i("filename\\*","i").exec(s);if(e){e=e[1];let c=o(e);return c=unescape(c),c=l(c),c=h(c),r(c)}if(e=a(s),e){const c=h(e);return r(c)}if(e=i("filename","i").exec(s),e){e=e[1];let c=o(e);return c=h(c),r(c)}function i(c,u){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function n(c,u){if(c){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const d=new TextDecoder(c,{fatal:!0}),f=el(u);u=d.decode(f),t=!1}catch{}}return u}function r(c){return t&&/[\x80-\xff]/.test(c)&&(c=n("utf-8",c),t&&(c=n("iso-8859-1",c))),c}function a(c){const u=[];let d;const f=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(c))!==null;){let[,m,A,g]=d;if(m=parseInt(m,10),m in u){if(m===0)break;continue}u[m]=[A,g]}const p=[];for(let m=0;m<u.length&&m in u;++m){let[A,g]=u[m];g=o(g),A&&(g=unescape(g),m===0&&(g=l(g))),p.push(g)}return p.join("")}function o(c){if(c.startsWith('"')){const u=c.slice(1).split('\\"');for(let d=0;d<u.length;++d){const f=u[d].indexOf('"');f!==-1&&(u[d]=u[d].slice(0,f),u.length=d+1),u[d]=u[d].replaceAll(/\\(.)/g,"$1")}c=u.join('"')}return c}function l(c){const u=c.indexOf("'");if(u===-1)return c;const d=c.slice(0,u),p=c.slice(u+1).replace(/^[^']*'/,"");return n(d,p)}function h(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,d,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,A){return String.fromCharCode(parseInt(A,16))}),n(d,p);try{p=atob(p)}catch{}return n(d,p)})}return""}function Gu({getResponseHeader:s,isHttp:t,rangeChunkSize:e,disableRange:i}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*e)||i||!t||s("Accept-Ranges")!=="bytes"||(s("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function Yu(s){const t=s("Content-Disposition");if(t){let e=U1(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Ou(e))return e}return null}function ol(s,t){return s===404||s===0&&t.startsWith("file:")?new Ks('Missing PDF "'+t+'".'):new tl(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function jv(s){return s===200||s===206}function Uv(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Wv(s){const t=new Headers;for(const e in s){const i=s[e];i!==void 0&&t.append(e,i)}return t}function Gv(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(tt(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class sp{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return zt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new W1(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new G1(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class W1{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=Wv(this._stream.httpHeaders);const i=e.url;fetch(i,Uv(this._headers,this._withCredentials,this._abortController)).then(n=>{if(!jv(n.status))throw ol(n.status,i);this._reader=n.body.getReader(),this._headersCapability.resolve();const r=l=>n.headers.get(l),{allowRangeRequests:a,suggestedLength:o}=Gu({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=Yu(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Qs("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Gv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class G1{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController,this._headers=Wv(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);const r=n.url;fetch(r,Uv(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!jv(a.status))throw ol(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Gv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Ql=200,Zl=206;function Y1(s){const t=s.response;return typeof t!="string"?t:el(t).buffer}class V1{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const n={begin:t,end:e};for(const r in i)n[r]=i[r];return this.request(n)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const a=this.httpHeaders[r];a!==void 0&&e.setRequestHeader(r,a)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=Zl):n.expectedStatus=Ql,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){i.onError?.(n.status);return}const r=n.status||Ql;if(!(r===Ql&&i.expectedStatus===Zl)&&r!==i.expectedStatus){i.onError?.(n.status);return}const o=Y1(n);if(r===Zl){const l=n.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);i.onDone({begin:parseInt(h[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):i.onError?.(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class X1{constructor(t){this._source=t,this._manager=new V1(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return zt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new q1(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new K1(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class q1{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=a=>e.getResponseHeader(a),{allowRangeRequests:n,suggestedLength:r}=Gu({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=Yu(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=ol(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class K1{constructor(t,e,i){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=ol(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Yv=/^file:\/\/\/[a-zA-Z]:\//;function Q1(s){const t=Ei.get("url"),e=t.parse(s);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(s)?t.parse(`file:///${s}`):(e.host||(e.protocol="file:"),e)}class Z1{constructor(t){this.source=t,this.url=Q1(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return zt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new tx(this):new J1(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new ex(this,t,e):new $1(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Vv{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Qs("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Xv{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function wo(s,t){return{protocol:s.protocol,auth:s.auth,host:s.hostname,port:s.port,path:s.path,method:"GET",headers:t}}class J1 extends Vv{constructor(t){super(t);const e=i=>{if(i.statusCode===404){const o=new Ks(`Missing PDF "${this._url}".`);this._storedError=o,this._headersCapability.reject(o);return}this._headersCapability.resolve(),this._setReadableStream(i);const n=o=>this._readableStream.headers[o.toLowerCase()],{allowRangeRequests:r,suggestedLength:a}=Gu({getResponseHeader:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=Yu(n)};if(this._request=null,this._url.protocol==="http:"){const i=Ei.get("http");this._request=i.request(wo(this._url,t.httpHeaders),e)}else{const i=Ei.get("https");this._request=i.request(wo(this._url,t.httpHeaders),e)}this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class $1 extends Xv{constructor(t,e,i){super(t),this._httpHeaders={};for(const r in t.httpHeaders){const a=t.httpHeaders[r];a!==void 0&&(this._httpHeaders[r]=a)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const n=r=>{if(r.statusCode===404){const a=new Ks(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(r)};if(this._request=null,this._url.protocol==="http:"){const r=Ei.get("http");this._request=r.request(wo(this._url,this._httpHeaders),n)}else{const r=Ei.get("https");this._request=r.request(wo(this._url,this._httpHeaders),n)}this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class tx extends Vv{constructor(t){super(t);let e=decodeURIComponent(this._url.path);Yv.test(this._url.href)&&(e=e.replace(/^\//,""));const i=Ei.get("fs");i.promises.lstat(e).then(n=>{this._contentLength=n.size,this._setReadableStream(i.createReadStream(e)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new Ks(`Missing PDF "${e}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class ex extends Xv{constructor(t,e,i){super(t);let n=decodeURIComponent(this._url.path);Yv.test(this._url.href)&&(n=n.replace(/^\//,""));const r=Ei.get("fs");this._setReadableStream(r.createReadStream(n,{start:e,end:i-1}))}}const ix=1e5,ye=30,sx=.8;class Se{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#l=0;#u=null;#c=null;#d=0;#o=0;#h=Object.create(null);#p=[];#g=null;#f=[];#m=new WeakMap;#v=null;static#y=new Map;static#w=new Map;static#x=null;static#T=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=e,this.#o=i.scale*(globalThis.devicePixelRatio||1),this.#d=i.rotation,this.#s={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null};const{pageWidth:n,pageHeight:r,pageX:a,pageY:o}=i.rawDims;this.#v=[1,0,0,-1,-a,o+r],this.#l=n,this.#a=r,Se.#A(),js(e,i),this.#t.promise.catch(()=>{}).then(()=>{Se.#T.delete(this),this.#s=null,this.#h=null})}render(){const t=()=>{this.#u.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#h,e.styles),this.#k(e.items),t()},this.#t.reject)};return this.#u=this.#g.getReader(),Se.#T.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*(globalThis.devicePixelRatio||1),n=t.rotation;if(n!==this.#d&&(e?.(),this.#d=n,js(this.#c,{rotation:n})),i!==this.#o){e?.(),this.#o=i;const r={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:Se.#b(this.#r)};for(const a of this.#f)r.properties=this.#m.get(a),r.div=a,this.#C(r)}}cancel(){const t=new Qs("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#f}get textContentItemsStr(){return this.#p}#k(t){if(this.#i)return;this.#s.ctx??=Se.#b(this.#r);const e=this.#f,i=this.#p;for(const n of t){if(e.length>ix){tt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(n.str===void 0){if(n.type==="beginMarkedContentProps"||n.type==="beginMarkedContent"){const r=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),n.id!==null&&this.#e.setAttribute("id",`${n.id}`),r.append(this.#e)}else n.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(n.str),this.#M(n)}}#M(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#f.push(e);const n=U.transform(this.#v,t.transform);let r=Math.atan2(n[1],n[0]);const a=this.#h[t.fontName];a.vertical&&(r+=Math.PI/2);const o=this.#n&&a.fontSubstitution||a.fontFamily,l=Math.hypot(n[2],n[3]),h=l*Se.#E(o,this.#r);let c,u;r===0?(c=n[4],u=n[5]-h):(c=n[4]+h*Math.sin(r),u=n[5]-h*Math.cos(r));const d="calc(var(--scale-factor)*",f=e.style;this.#e===this.#c?(f.left=`${(100*c/this.#l).toFixed(2)}%`,f.top=`${(100*u/this.#a).toFixed(2)}%`):(f.left=`${d}${c.toFixed(2)}px)`,f.top=`${d}${u.toFixed(2)}px)`),f.fontSize=`${d}${(Se.#x*l).toFixed(2)}px)`,f.fontFamily=o,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const m=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);m!==A&&Math.max(m,A)/Math.min(m,A)>1.5&&(p=!0)}if(p&&(i.canvasWidth=a.vertical?t.height:t.width),this.#m.set(e,i),this.#s.div=e,this.#s.properties=i,this.#C(this.#s),i.hasText&&this.#e.append(e),i.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this.#e.append(m)}}#C(t){const{div:e,properties:i,ctx:n,prevFontSize:r,prevFontFamily:a}=t,{style:o}=e;let l="";if(Se.#x>1&&(l=`scale(${1/Se.#x})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:h}=o,{canvasWidth:c,fontSize:u}=i;(r!==u||a!==h)&&(n.font=`${u*this.#o}px ${h}`,t.prevFontSize=u,t.prevFontFamily=h);const{width:d}=n.measureText(e.textContent);d>0&&(l=`scaleX(${c*this.#o/d}) ${l}`)}i.angle!==0&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#T.size>0)){this.#y.clear();for(const{canvas:t}of this.#w.values())t.remove();this.#w.clear()}}static#b(t=null){let e=this.#w.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#w.set(t,e)}return e}static#A(){if(this.#x!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.textContent="X",document.body.append(t),this.#x=t.getBoundingClientRect().height,t.remove()}static#E(t,e){const i=this.#y.get(t);if(i)return i;const n=this.#b(e),r=n.font;n.canvas.width=n.canvas.height=ye,n.font=`${ye}px ${t}`;const a=n.measureText("");let o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);if(o){const u=o/(o+l);return this.#y.set(t,u),n.canvas.width=n.canvas.height=0,n.font=r,u}n.strokeStyle="red",n.clearRect(0,0,ye,ye),n.strokeText("g",0,0);let h=n.getImageData(0,0,ye,ye).data;l=0;for(let u=h.length-1-3;u>=0;u-=4)if(h[u]>0){l=Math.ceil(u/4/ye);break}n.clearRect(0,0,ye,ye),n.strokeText("A",0,ye),h=n.getImageData(0,0,ye,ye).data,o=0;for(let u=0,d=h.length;u<d;u+=4)if(h[u]>0){o=ye-Math.floor(u/4/ye);break}n.canvas.width=n.canvas.height=0,n.font=r;const c=o?o/(o+l):sx;return this.#y.set(t,c),c}}function nx(){Nv("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:s,container:t,viewport:e,...i}=arguments[0],n=Object.keys(i);n.length>0&&tt("Ignoring `renderTextLayer` parameters: "+n.join(", "));const r=new Se({textContentSource:s,container:t,viewport:e}),{textDivs:a,textContentItemsStr:o}=r;return{promise:r.render(),textDivs:a,textContentItemsStr:o}}function rx(){Nv("`updateTextLayer`, please use `TextLayer` instead.")}class Br{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function n(r){if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(Br.shouldBuildText(o))r?.attributes?.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const l of r.children)n(l)}return n(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const ax=65536,ox=100,lx=5e3,hx=ae?b1:o1,cx=ae?w1:Iv,ux=ae?A1:a1,dx=ae?S1:Fv;function fx(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new Vu,{docId:e}=t,i=s.url?px(s.url):null,n=s.data?gx(s.data):null,r=s.httpHeaders||null,a=s.withCredentials===!0,o=s.password??null,l=s.range instanceof qv?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:ax;let c=s.worker instanceof Xe?s.worker:null;const u=s.verbosity,d=typeof s.docBaseUrl=="string"&&!Nu(s.docBaseUrl)?s.docBaseUrl:null,f=typeof s.cMapUrl=="string"?s.cMapUrl:null,p=s.cMapPacked!==!1,m=s.CMapReaderFactory||cx,A=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,g=s.StandardFontDataFactory||dx,v=s.stopAtErrors!==!0,y=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,b=s.isEvalSupported!==!1,w=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!ae,S=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,E=typeof s.disableFontFace=="boolean"?s.disableFontFace:ae,x=s.fontExtraProperties===!0,C=s.enableXfa===!0,T=s.ownerDocument||globalThis.document,R=s.disableRange===!0,I=s.disableStream===!0,L=s.disableAutoFetch===!0,G=s.pdfBug===!0,z=s.enableHWA===!0,H=l?l.length:s.length??NaN,P=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!ae&&!E,k=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:m===Iv&&g===Fv&&f&&A&&sr(f,document.baseURI)&&sr(A,document.baseURI),O=s.canvasFactory||new hx({ownerDocument:T,enableHWA:z}),F=s.filterFactory||new ux({docId:e,ownerDocument:T}),J=null;KE(u);const W={canvasFactory:O,filterFactory:F};if(k||(W.cMapReaderFactory=new m({baseUrl:f,isCompressed:p}),W.standardFontDataFactory=new g({baseUrl:A})),!c){const wt={verbosity:u,port:Or.workerPort};c=wt.port?Xe.fromPort(wt):new Xe(wt),t._worker=c}const V={docId:e,apiVersion:"4.4.168",data:n,password:o,disableAutoFetch:L,rangeChunkSize:h,length:H,docBaseUrl:d,enableXfa:C,evaluatorOptions:{maxImageSize:y,disableFontFace:E,ignoreErrors:v,isEvalSupported:b,isOffscreenCanvasSupported:w,canvasMaxAreaInBytes:S,fontExtraProperties:x,useSystemFonts:P,cMapUrl:k?f:null,standardFontDataUrl:k?A:null}},gt={disableFontFace:E,fontExtraProperties:x,ownerDocument:T,pdfBug:G,styleElement:J,loadingParams:{disableAutoFetch:L,enableXfa:C}};return c.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const wt=c.messageHandler.sendWithPromise("GetDocRequest",V,n?[n.buffer]:null);let nt;if(l)nt=new H1(l,{disableRange:R,disableStream:I});else if(!n){if(!i)throw new Error("getDocument - no `url` parameter provided.");nt=(rt=>ae?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&sr(rt.url)?new sp(rt):new Z1(rt):sr(rt.url)?new sp(rt):new X1(rt))({url:i,length:H,httpHeaders:r,withCredentials:a,rangeChunkSize:h,disableRange:R,disableStream:I})}return wt.then(M=>{if(t.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const rt=new nr(e,M,c.port),Wt=new Ax(rt,t,nt,gt,W);t._transport=Wt,rt.send("Ready",null)})}).catch(t._capability.reject),t}function px(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(ae&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function gx(s){if(ae&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return el(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function np(s){return typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0}class Vu{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Vu.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class qv{constructor(t,e,i=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){ct("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class mx{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return at(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class vx{#t=null;#e=!1;constructor(t,e,i,n=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=n?new Gf:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new Kv,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:r=!1}={}){return new Xr({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return at(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:n=rs.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:c=null}){this._stats?.time("Overall");const u=this._transport.getRenderingIntent(i,n,c),{renderingIntent:d,cacheKey:f}=u;this.#e=!1,this.#n(),o||=this._transport.getOptionalContentConfig(d);let p=this._intentStates.get(f);p||(p=Object.create(null),this._intentStates.set(f,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const m=!!(d&Ve.PRINT);p.displayReadyCapability||(p.displayReadyCapability=Promise.withResolvers(),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u));const A=y=>{p.renderTasks.delete(g),(this._maybeCleanupAfterRender||m)&&(this.#e=!0),this.#i(!m),y?(g.capability.reject(y),this._abortOperatorList({intentState:p,reason:y instanceof Error?y:new Error(y)})):g.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},g=new pn({callback:A,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:h});(p.renderTasks||=new Set).add(g);const v=g.task;return Promise.all([p.displayReadyCapability.promise,o]).then(([y,b])=>{if(this.destroyed){A();return}if(this._stats?.time("Rendering"),!(b.renderingIntent&d))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");g.initializeGraphics({transparency:y,optionalContentConfig:b}),g.operatorListChanged()}).catch(A),v}getOperatorList({intent:t="display",annotationMode:e=rs.ENABLE,printAnnotationStorage:i=null}={}){function n(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(o))}const r=this._transport.getRenderingIntent(t,e,i,!0);let a=this._intentStates.get(r.cacheKey);a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a));let o;return a.opListReadCapability||(o=Object.create(null),o.operatorListChanged=n,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(o),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Br.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,n){function r(){a.read().then(function({value:l,done:h}){if(h){i(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),r()},n)}const a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,this.#n(),Promise.all(t)}cleanup(t=!1){this.#e=!0;const e=this.#i(!1);return t&&e&&(this._stats&&=new Gf),e}#i(t=!1){if(this.#n(),!this.#e||this.destroyed)return!1;if(t)return this.#t=setTimeout(()=>{this.#t=null,this.#i(!1)},lx),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#n(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i}){const{map:n,transfer:r}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:n},r).getReader(),l=this._intentStates.get(e);l.streamReader=o;const h=()=>{o.read().then(({value:c,done:u})=>{if(u){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(c,l),h())},c=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const u of l.renderTasks)u.operatorListChanged();this.#i(!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(c);else if(l.opListReadCapability)l.opListReadCapability.reject(c);else throw c}})};h()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Fu){let n=ox;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new Qs(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}class yx{#t=new Set;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const n of this.#t)n.call(this,i)})}addEventListener(t,e){this.#t.add(e)}removeEventListener(t,e){this.#t.delete(e)}terminate(){this.#t.clear()}}const Fi={isWorkerDisabled:!1,fakeWorkerId:0};ae&&(Fi.isWorkerDisabled=!0,Or.workerSrc||="./pdf.worker.mjs"),Fi.isSameOrigin=function(s,t){let e;try{if(e=new URL(s),!e.origin||e.origin==="null")return!1}catch{return!1}const i=new URL(t,e);return e.origin===i.origin},Fi.createCDNWrapper=function(s){const t=`await import("${s}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};class Xe{static#t;constructor({name:t=null,port:e=null,verbosity:i=QE()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(Xe.#t?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(Xe.#t||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return ae?Promise.all([Ei.promise,this._readyCapability.promise]):this._readyCapability.promise}#e(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new nr("main","worker",t),this._messageHandler.on("ready",function(){}),this.#e()}_initialize(){if(Fi.isWorkerDisabled||Xe.#i){this._setupFakeWorker();return}let{workerSrc:t}=Xe;try{Fi.isSameOrigin(window.location.href,t)||(t=Fi.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new nr("main","worker",e),n=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||n()},{signal:r.signal}),i.on("test",o=>{if(r.abort(),this.destroyed||!o){n();return}this._messageHandler=i,this._port=e,this._webWorker=e,this.#e()}),i.on("ready",o=>{if(r.abort(),this.destroyed){n();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{$o("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Fi.isWorkerDisabled||(tt("Setting up fake worker."),Fi.isWorkerDisabled=!0),Xe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new yx;this._port=e;const i=`fake${Fi.fakeWorkerId++}`,n=new nr(i+"_worker",i,e);t.setup(n,e),this._messageHandler=new nr(i,i+"_worker",e),this.#e()}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Xe.#t?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#t?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Xe(t)}static get workerSrc(){if(Or.workerSrc)return Or.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#i(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return at(this,"_setupFakeWorkerGlobal",(async()=>this.#i?this.#i:(await import(this.workerSrc)).WorkerMessageHandler)())}}class Ax{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,i,n,r){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Kv,this.fontLoader=new v1({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,e=null){const i=this.#t.get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,n),n}get annotationStorage(){return at(this,"annotationStorage",new Uu)}getRenderingIntent(t,e=rs.ENABLE,i=null,n=!1){let r=Ve.DISPLAY,a=pc;switch(t){case"any":r=Ve.ANY;break;case"display":break;case"print":r=Ve.PRINT;break;default:tt(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case rs.DISABLE:r+=Ve.ANNOTATIONS_DISABLE;break;case rs.ENABLE:break;case rs.ENABLE_FORMS:r+=Ve.ANNOTATIONS_FORMS;break;case rs.ENABLE_STORAGE:r+=Ve.ANNOTATIONS_STORAGE,a=(r&Ve.PRINT&&i instanceof Hv?i:this.annotationStorage).serializable;break;default:tt(`getRenderingIntent - invalid annotationMode: ${e}`)}return n&&(r+=Ve.OPLIST),{renderingIntent:r,cacheKey:`${r}_${a.hash}`,annotationStorageSerializable:a}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Se.cleanup(),this._networkStream?.cancelAllRequests(new Qs("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,n)=>{zt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){n.close();return}zt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",i=>{const n=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),r.onProgress=a=>{e.onProgress?.({loaded:a.loaded,total:a.total})}),n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},n.reject),n.promise}),t.on("GetRangeReader",(i,n)=>{zt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){n.close();return}zt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{n.error(a)})},n.onCancel=a=>{r.cancel(a),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new mx(i,this))}),t.on("DocException",function(i){let n;switch(i.name){case"PasswordException":n=new dc(i.message,i.code);break;case"InvalidPDFException":n=new Mv(i.message);break;case"MissingPDFException":n=new Ks(i.message);break;case"UnexpectedResponseException":n=new tl(i.message,i.status);break;case"UnknownErrorException":n=new fc(i.message,i.details);break;default:ct("DocException - expected a valid Error.")}e._capability.reject(n)}),t.on("PasswordRequest",i=>{if(this.#r=Promise.withResolvers(),e.onPassword){const n=r=>{r instanceof Error?this.#r.reject(r):this.#r.resolve({password:r})};try{e.onPassword(n,i.code)}catch(r){this.#r.reject(r)}}else this.#r.reject(new dc(i.message,i.code));return this.#r.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,n,r])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":const{disableFontFace:a,fontExtraProperties:o,pdfBug:l}=this._params;if("error"in r){const d=r.error;tt(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}const h=l&&globalThis.FontInspector?.enabled?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,c=new y1(r,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o&&c.data&&(c.data=null),this.commonObjs.resolve(i,c)});break;case"CopyLocalImage":const{imageRef:u}=r;zt(u,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,f]of d.objs)if(f?.ref===u)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([i,n,r,a])=>{if(this.destroyed)return;const o=this.#e.get(n);if(!o.objs.has(i)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(r){case"Image":o.objs.resolve(i,a),a?.dataLen>YE&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&tt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#i.get(e);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#n.set(r.refStr,t);const a=new vx(e,r,this,this._params.pdfBug);return this.#e.set(e,a),a});return this.#i.set(e,n),n}getPageIndex(t){return np(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new B1(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(n=>({info:n[0],metadata:n[1]?new N1(n[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Se.cleanup()}}cachedPageNumber(t){if(!np(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}const Ra=Symbol("INITIAL_DATA");class Kv{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Ra}}get(t,e=null){if(e){const n=this.#e(t);return n.promise.then(()=>e(n.data)),null}const i=this.#t[t];if(!i||i.data===Ra)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Ra}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Ra&&(yield[t,e])}}}class bx{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class pn{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:h,useRequestAnimationFrame:c=!1,pdfBug:u=!1,pageColors:d=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=u,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new bx(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(pn.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");pn.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:n,transform:r,background:a}=this.params;this.gfx=new wn(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),pn.#e.delete(this._canvas),this.callback(t||new Fu(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),pn.#e.delete(this._canvas),this.callback())))}}const wx="4.4.168",Sx="19fbc8998";function rp(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function qn(s){return Math.max(0,Math.min(255,255*s))}class ap{static CMYK_G([t,e,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=qn(t),[t,t,t]}static G_HTML([t]){const e=rp(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(qn)}static RGB_HTML(t){return`#${t.map(rp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,i,n]){return[qn(1-Math.min(1,t+n)),qn(1-Math.min(1,i+n)),qn(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const n=1-t,r=1-e,a=1-i,o=Math.min(n,r,a);return["CMYK",n,r,a,o]}}class Qv{static setupStorage(t,e,i,n,r){const a=n.getValue(e,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",o=>{n.setValue(e,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?t.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",o=>{n.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",o=>{n.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const l=o.target.options,h=l.selectedIndex===-1?"":l[l.selectedIndex].value;n.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:n,linkService:r}){const{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${n}`);for(const[l,h]of Object.entries(a))if(h!=null)switch(l){case"class":h.length&&t.setAttribute(l,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!o||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,h)}o&&r.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,r=t.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:r,linkService:i});const o=r!=="richText",l=t.div;if(l.append(a),t.viewport){const u=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=u}o&&l.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const u=document.createTextNode(n.value);a.append(u),o&&Br.shouldBuildText(n.name)&&h.push(u)}return{textDivs:h}}const c=[[n,-1,a]];for(;c.length>0;){const[u,d,f]=c.at(-1);if(d+1===u.children.length){c.pop();continue}const p=u.children[++c.at(-1)[1]];if(p===null)continue;const{name:m}=p;if(m==="#text"){const g=document.createTextNode(p.value);h.push(g),f.append(g);continue}const A=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,m):document.createElement(m);if(f.append(A),p.attributes&&this.setAttributes({html:A,element:p,storage:e,intent:r,linkService:i}),p.children?.length>0)c.push([p,-1,A]);else if(p.value){const g=document.createTextNode(p.value);o&&Br.shouldBuildText(m)&&h.push(g),A.append(g)}}for(const u of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Qr=1e3,Ex=9,Us=new WeakSet;function ji(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class xx{static create(t){switch(t.data.annotationType){case Ft.LINK:return new Zv(t);case Ft.TEXT:return new Cx(t);case Ft.WIDGET:switch(t.data.fieldType){case"Tx":return new Tx(t);case"Btn":return t.data.radioButton?new Jv(t):t.data.checkBox?new Rx(t):new Px(t);case"Ch":return new _x(t);case"Sig":return new kx(t)}return new Zs(t);case Ft.POPUP:return new yc(t);case Ft.FREETEXT:return new $v(t);case Ft.LINE:return new Lx(t);case Ft.SQUARE:return new Dx(t);case Ft.CIRCLE:return new Ix(t);case Ft.POLYLINE:return new ty(t);case Ft.CARET:return new Nx(t);case Ft.INK:return new ey(t);case Ft.POLYGON:return new Fx(t);case Ft.HIGHLIGHT:return new Ox(t);case Ft.UNDERLINE:return new Bx(t);case Ft.SQUIGGLY:return new Hx(t);case Ft.STRIKEOUT:return new zx(t);case Ft.STAMP:return new iy(t);case Ft.FILEATTACHMENT:return new jx(t);default:return new Ct(t)}}}class Ct{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t?.str||e?.str||i?.str)}get hasPopupData(){return Ct._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#n(e),this.#i?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}}}=this;i?.splice(0,4,...t);const{width:h,height:c}=ji(t);e.left=`${100*(t[0]-o)/r}%`,e.top=`${100*(a-t[3]+l)/a}%`,n===0?(e.width=`${100*h/r}%`,e.height=`${100*c/a}%`):this.setRotation(n)}_createContainer(t){const{data:e,parent:{page:i,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Zs||(r.tabIndex=Qr);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof yc){const{rotation:m}=e;return!e.hasOwnCanvas&&m!==0&&this.setRotation(m,r),r}const{width:o,height:l}=ji(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const m=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(m>0||A>0){const v=`calc(${m}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;a.borderRadius=v}else if(this instanceof Jv){const v=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=v}switch(e.borderStyle.style){case Vn.SOLID:a.borderStyle="solid";break;case Vn.DASHED:a.borderStyle="dashed";break;case Vn.BEVELED:tt("Unimplemented border style: beveled");break;case Vn.INSET:tt("Unimplemented border style: inset");break;case Vn.UNDERLINE:a.borderBottomStyle="solid";break}const g=e.borderColor||null;g?(this.#e=!0,a.borderColor=U.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}const h=U.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:c,pageHeight:u,pageX:d,pageY:f}=n.rawDims;a.left=`${100*(h[0]-d)/c}%`,a.top=`${100*(h[1]-f)/u}%`;const{rotation:p}=e;return e.hasOwnCanvas||p===0?(a.width=`${100*o/c}%`,a.height=`${100*l/u}%`):this.setRotation(p,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:r,height:a}=ji(this.data.rect);let o,l;t%180===0?(o=100*r/i,l=100*a/n):(o=100*a/i,l=100*r/n),e.style.width=`${o}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,n)=>{const r=n.detail[e],a=r[0],o=r.slice(1);n.target.style[i]=ap[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:ap[`${a}_rgb`](o)})};return at(this,"_commonActions",{display:e=>{const{display:i}=e.detail,n=i%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const n of Object.keys(e.detail))(t[n]||i[n])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[n,r]of Object.entries(e)){const a=i[n];if(a){const o={detail:{[n]:r},target:t};a(o),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,n,r]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,A,g,v]=t.subarray(2,6);if(n===m&&r===A&&e===g&&i===v)return}const{style:a}=this.container;let o;if(this.#e){const{borderColor:m,borderWidth:A}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const l=n-e,h=r-i,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);const d=c.createElement("defs");u.append(d);const f=c.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let m=2,A=t.length;m<A;m+=8){const g=t[m],v=t[m+1],y=t[m+2],b=t[m+3],w=c.createElement("rect"),S=(y-e)/l,E=(r-v)/h,x=(g-y)/l,C=(v-b)/h;w.setAttribute("x",S),w.setAttribute("y",E),w.setAttribute("width",x),w.setAttribute("height",C),f.append(w),o?.push(`<rect vector-effect="non-scaling-stroke" x="${S}" y="${E}" width="${x}" height="${C}"/>`)}this.#e&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(u),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const i=this.#i=new yc({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){ct("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:r,id:a,exportValues:o}of n){if(r===-1||a===e)continue;const l=typeof o=="string"?o:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Us.has(h)){tt(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:l,domElement:h})}return i}for(const n of document.getElementsByName(t)){const{exportValue:r}=n,a=n.getAttribute("data-element-id");a!==e&&Us.has(n)&&i.push({id:a,exportValue:r,domElement:n})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}}class Zv extends Ct{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let n=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(i,t.action),n=!0):t.attachment?(this.#e(i,t.attachment,t.attachmentDest),n=!0):t.setOCGState?(this.#i(i,t.setOCGState),n=!0):t.dest?(this._bindLink(i,t.dest),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),n=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#i(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const r=i.get(n);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){tt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:n,refs:r,include:a}=e,o=[];if(n.length!==0||r.length!==0){const c=new Set(r);for(const u of n){const d=this._fieldObjects[u]||[];for(const{id:f}of d)c.add(f)}for(const u of Object.values(this._fieldObjects))for(const d of u)c.has(d.id)===a&&o.push(d)}else for(const c of Object.values(this._fieldObjects))o.push(...c);const l=this.annotationStorage,h=[];for(const c of o){const{id:u}=c;switch(h.push(u),c.type){case"text":{const f=c.defaultValue||"";l.setValue(u,{value:f});break}case"checkbox":case"radiobutton":{const f=c.defaultValue===c.exportValues;l.setValue(u,{value:f});break}case"combobox":case"listbox":{const f=c.defaultValue||"";l.setValue(u,{value:f});break}default:continue}const d=document.querySelector(`[data-element-id="${u}"]`);if(d){if(!Us.has(d)){tt(`_bindResetFormAction - element not allowed: ${u}`);continue}}else continue;d.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class Cx extends Ct{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Zs extends Ct{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ce.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,n,r){i.includes("mouse")?t.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(i,a=>{if(i==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(a)}})})}_setEventListeners(t,e,i,n){for(const[r,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,r,a,n),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":U.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||Ex,r=t.style;let a;const o=2,l=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o),c=Math.round(h/(Vl*n))||1,u=h/c;a=Math.min(n,l(u/Vl))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(n,l(h/Vl))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=U.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Tx extends Zs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,n){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=i),r.setValue(a.id,{[n]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue});let r=n.value||"";const a=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;a&&r.length>a&&(r=r.slice(0,a));let o=n.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const l={userValue:r,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??r,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",o??r),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Us.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Qr,this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",c=>{t.setValue(e,{value:c.target.value}),this.setPropertyOnSiblings(i,"value",c.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",c=>{const u=this.data.defaultFieldValue??"";i.value=l.userValue=u,l.formattedValue=null});let h=c=>{const{formattedValue:u}=l;u!=null&&(c.target.value=u),c.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",u=>{if(l.focused)return;const{target:d}=u;l.userValue&&(d.value=l.userValue),l.lastCommittedValue=d.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",u=>{this.showElementAndHideCanvas(u.target);const d={value(f){l.userValue=f.detail.value??"",t.setValue(e,{value:l.userValue.toString()}),f.target.value=l.userValue},formattedValue(f){const{formattedValue:p}=f.detail;l.formattedValue=p,p!=null&&f.target!==document.activeElement&&(f.target.value=p),t.setValue(e,{formattedValue:p})},selRange(f){f.target.setSelectionRange(...f.detail.selRange)},charLimit:f=>{const{charLimit:p}=f.detail,{target:m}=f;if(p===0){m.removeAttribute("maxLength");return}m.setAttribute("maxLength",p);let A=l.userValue;!A||A.length<=p||(A=A.slice(0,p),m.value=l.userValue=A,t.setValue(e,{value:A}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:m.selectionStart,selEnd:m.selectionEnd}}))}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("keydown",u=>{l.commitKey=1;let d=-1;if(u.key==="Escape"?d=0:u.key==="Enter"&&!this.data.multiLine?d=2:u.key==="Tab"&&(l.commitKey=3),d===-1)return;const{value:f}=u.target;l.lastCommittedValue!==f&&(l.lastCommittedValue=f,l.userValue=f,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,willCommit:!0,commitKey:d,selStart:u.target.selectionStart,selEnd:u.target.selectionEnd}}))});const c=h;h=null,i.addEventListener("blur",u=>{if(!l.focused||!u.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:d}=u.target;l.userValue=d,l.lastCommittedValue!==d&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,willCommit:!0,commitKey:l.commitKey,selStart:u.target.selectionStart,selEnd:u.target.selectionEnd}}),c(u)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",u=>{l.lastCommittedValue=null;const{data:d,target:f}=u,{value:p,selectionStart:m,selectionEnd:A}=f;let g=m,v=A;switch(u.inputType){case"deleteWordBackward":{const y=p.substring(0,m).match(/\w*[^\w]*$/);y&&(g-=y[0].length);break}case"deleteWordForward":{const y=p.substring(m).match(/^[^\w]*\w*/);y&&(v+=y[0].length);break}case"deleteContentBackward":m===A&&(g-=1);break;case"deleteContentForward":m===A&&(v+=1);break}u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,change:d||"",willCommit:!1,selStart:g,selEnd:v}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.value)}if(h&&i.addEventListener("blur",h),this.data.comb){const u=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${u}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class kx extends Zs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Rx extends Zs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Us.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Qr,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const h of this._getElementsByName(o,i)){const c=l&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=c),t.setValue(h.id,{value:c})}t.setValue(i,{value:l})}),r.addEventListener("resetform",a=>{const o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Jv extends Zs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(i,{value:n})),n)for(const a of this._getElementsByName(e.fieldName,i))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(Us.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=Qr,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const h of this._getElementsByName(o,i))t.setValue(h.id,{value:!1});t.setValue(i,{value:l})}),r.addEventListener("resetform",a=>{const o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",o=>{const l={value:h=>{const c=a===h.detail.value;for(const u of this._getElementsByName(h.target.name)){const d=c&&u.id===i;u.domElement&&(u.domElement.checked=d),t.setValue(u.id,{value:d})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Px extends Zv{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class _x extends Zs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");Us.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Qr;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",c=>{const u=this.data.defaultFieldValue;for(const d of n.options)d.selected=d.value===u});for(const c of this.data.options){const u=document.createElement("option");u.textContent=c.displayValue,u.value=c.exportValue,i.value.includes(c.exportValue)&&(u.setAttribute("selected",!0),r=!1),n.append(u)}let a=null;if(r){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),n.prepend(c),a=()=>{c.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}const o=c=>{const u=c?"value":"textContent",{options:d,multiple:f}=n;return f?Array.prototype.filter.call(d,p=>p.selected).map(p=>p[u]):d.selectedIndex===-1?null:d[d.selectedIndex][u]};let l=o(!1);const h=c=>{const u=c.target.options;return Array.prototype.map.call(u,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",c=>{const u={value(d){a?.();const f=d.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const m of n.options)m.selected=p.has(m.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(d){n.multiple=!0},remove(d){const f=n.options,p=d.detail.remove;f[p].selected=!1,n.remove(p),f.length>0&&Array.prototype.findIndex.call(f,A=>A.selected)===-1&&(f[0].selected=!0),t.setValue(e,{value:o(!0),items:h(d)}),l=o(!1)},clear(d){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(d){const{index:f,displayValue:p,exportValue:m}=d.detail.insert,A=n.children[f],g=document.createElement("option");g.textContent=p,g.value=m,A?A.before(g):n.append(g),t.setValue(e,{value:o(!0),items:h(d)}),l=o(!1)},items(d){const{items:f}=d.detail;for(;n.length!==0;)n.remove(0);for(const p of f){const{displayValue:m,exportValue:A}=p,g=document.createElement("option");g.textContent=m,g.value=A,n.append(g)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:o(!0),items:h(d)}),l=o(!1)},indices(d){const f=new Set(d.detail.indices);for(const p of d.target.options)p.selected=f.has(p.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(u,c)}),n.addEventListener("input",c=>{const u=o(!0),d=o(!1);t.setValue(e,{value:u}),c.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:d,changeEx:u,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):n.addEventListener("input",function(c){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class yc extends Ct{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:Ct._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Mx({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${Dv}${i}`).join(",")),this.container}}class Mx{#t=this.#M.bind(this);#e=this.#E.bind(this);#i=this.#A.bind(this);#n=this.#b.bind(this);#r=null;#s=null;#a=null;#l=null;#u=null;#c=null;#d=null;#o=!1;#h=null;#p=null;#g=null;#f=null;#m=null;#v=null;#y=!1;constructor({container:t,color:e,elements:i,titleObj:n,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:h,parentRect:c,open:u}){this.#s=t,this.#m=n,this.#a=a,this.#f=o,this.#c=l,this.#r=e,this.#g=h,this.#d=c,this.#u=i,this.#l=Ov.toDateObject(r),this.trigger=i.flatMap(d=>d.getElementsToTriggerPopup());for(const d of this.trigger)d.addEventListener("click",this.#n),d.addEventListener("mouseenter",this.#i),d.addEventListener("mouseleave",this.#e),d.classList.add("popupTriggerArea");for(const d of i)d.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,u&&this.#b()}render(){if(this.#h)return;const t=this.#h=document.createElement("div");if(t.className="popup",this.#r){const r=t.style.outlineColor=U.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=U.makeHexColor(...this.#r.map(o=>Math.floor(.7*(255-o)+o)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=this.#m,t.append(e),this.#l){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:this.#l.toLocaleDateString(),time:this.#l.toLocaleTimeString()})),e.append(r)}const n=this.#w;if(n)Qv.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(this.#a);t.append(r)}this.#s.append(t)}get#w(){const t=this.#f,e=this.#a;return t?.str&&(!e?.str||e.str===t.str)&&this.#f.html||null}get#x(){return this.#w?.attributes?.style?.fontSize||0}get#T(){return this.#w?.attributes?.style?.color||null}#k(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:this.#T,fontSize:this.#x?`calc(${this.#x}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:n});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let r=0,a=n.length;r<a;++r){const o=n[r];i.append(document.createTextNode(o)),r<a-1&&i.append(document.createElement("br"))}return i}#M(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#o)&&this.#b()}updateEdited({rect:t,popupContent:e}){this.#v||={contentsObj:this.#a,richText:this.#f},t&&(this.#p=null),e&&(this.#f=this.#k(e),this.#a=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#v&&({contentsObj:this.#a,richText:this.#f}=this.#v,this.#v=null,this.#h?.remove(),this.#h=null,this.#p=null)}#C(){if(this.#p!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:n,pageY:r}}}=this.#c;let a=!!this.#d,o=a?this.#d:this.#g;for(const p of this.#u)if(!o||U.intersect(p.data.rect,o)!==null){o=p.data.rect,a=!0;break}const l=U.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),c=a?o[2]-o[0]+5:0,u=l[0]+c,d=l[1];this.#p=[100*(u-n)/e,100*(d-r)/i];const{style:f}=this.#s;f.left=`${this.#p[0]}%`,f.top=`${this.#p[1]}%`}#b(){this.#o=!this.#o,this.#o?(this.#A(),this.#s.addEventListener("click",this.#n),this.#s.addEventListener("keydown",this.#t)):(this.#E(),this.#s.removeEventListener("click",this.#n),this.#s.removeEventListener("keydown",this.#t))}#A(){this.#h||this.render(),this.isVisible?this.#o&&this.#s.classList.add("focused"):(this.#C(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#E(){this.#s.classList.remove("focused"),!(this.#o||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#s.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#A(),this.#y=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class $v extends Ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=st.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Lx extends Ct{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:i}=ji(t.rect),n=this.svgFactory.create(e,i,!0),r=this.#t=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Dx extends Ct{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:i}=ji(t.rect),n=this.svgFactory.create(e,i,!0),r=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",e-r),a.setAttribute("height",i-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ix extends Ct{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:i}=ji(t.rect),n=this.svgFactory.create(e,i,!0),r=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",e/2),a.setAttribute("cy",i/2),a.setAttribute("rx",e/2-r/2),a.setAttribute("ry",i/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ty extends Ct{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:n}}=this;if(!e)return this.container;const{width:r,height:a}=ji(t),o=this.svgFactory.create(r,a,!0);let l=[];for(let c=0,u=e.length;c<u;c+=2){const d=e[c]-t[0],f=t[3]-e[c+1];l.push(`${d},${f}`)}l=l.join(" ");const h=this.#t=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",l),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Fx extends ty{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Nx extends Ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ey extends Ct{#t=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=st.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:e,borderStyle:i,popupRef:n}}=this,{width:r,height:a}=ji(t),o=this.svgFactory.create(r,a,!0);for(const l of e){let h=[];for(let u=0,d=l.length;u<d;u+=2){const f=l[u]-t[0],p=t[3]-l[u+1];h.push(`${f},${p}`)}h=h.join(" ");const c=this.svgFactory.createElement(this.svgElementName);this.#t.push(c),c.setAttribute("points",h),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),!n&&this.hasPopupData&&this._createPopup(),o.append(c)}return this.container.append(o),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ox extends Ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Bx extends Ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Hx extends Ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class zx extends Ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class iy extends Ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class jx extends Ct{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:n}=Ce.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(n?r.metaKey:r.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Ux{#t=null;#e=null;#i=new Map;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:n,page:r,viewport:a}){this.div=t,this.#t=e,this.#e=i,this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}#n(t,e){const i=t.firstChild||t;i.id=`${Dv}${e}`,this.div.append(t),this.#t?.moveElementInDOM(this.div,t,i,!1)}async render(t){const{annotations:e}=t,i=this.div;js(i,this.viewport);const n=new Map,r={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Iu,annotationStorage:t.annotationStorage||new Uu,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const o=a.annotationType===Ft.POPUP;if(o){const c=n.get(a.id);if(!c)continue;r.elements=c}else{const{width:c,height:u}=ji(a.rect);if(c<=0||u<=0)continue}r.data=a;const l=xx.create(r);if(!l.isRenderable)continue;if(!o&&a.popupRef){const c=n.get(a.popupRef);c?c.push(l):n.set(a.popupRef,[l])}const h=l.render();a.hidden&&(h.style.visibility="hidden"),this.#n(h,a.id),l.annotationEditorType>0&&(this.#i.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#r()}update({viewport:t}){const e=this.div;this.viewport=t,js(e,{rotation:t.rotation}),this.#r(),e.hidden=!1}#r(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;i.className="annotationContent";const{firstChild:r}=n;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):n.append(i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}}const Pa=/\r\n?|\n/g;class Ot extends X{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#i=this.editorDivInput.bind(this);#n=this.editorDivKeydown.bind(this);#r=this.editorDivPaste.bind(this);#s;#a="";#l=`${this.id}-editor`;#u;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ot.prototype,e=r=>r.isEmpty(),i=As.TRANSLATE_SMALL,n=As.TRANSLATE_BIG;return at(this,"_keyboardManager",new qr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}]]))}static _type="freetext";static _editorType=st.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#s=t.color||Ot._defaultColor||X._defaultLineColor,this.#u=t.fontSize||Ot._defaultFontSize}static initialize(t,e){X.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case K.FREETEXT_SIZE:Ot._defaultFontSize=e;break;case K.FREETEXT_COLOR:Ot._defaultColor=e;break}}updateParams(t,e){switch(t){case K.FREETEXT_SIZE:this.#d(e);break;case K.FREETEXT_COLOR:this.#o(e);break}}static get defaultPropertiesToUpdate(){return[[K.FREETEXT_SIZE,Ot._defaultFontSize],[K.FREETEXT_COLOR,Ot._defaultColor||X._defaultLineColor]]}get propertiesToUpdate(){return[[K.FREETEXT_SIZE,this.#u],[K.FREETEXT_COLOR,this.#s]]}#d(t){const e=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--scale-factor))`,this.translate(0,-(n-this.#u)*this.parentScale),this.#u=n,this.#p()},i=this.#u;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const e=n=>{this.#s=this.editorDiv.style.color=n},i=this.#s;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ot._internalPadding*t,-(Ot._internalPadding+this.#u)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(st.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",this.#n,{signal:t}),this.editorDiv.addEventListener("focus",this.#e,{signal:t}),this.editorDiv.addEventListener("blur",this.#t,{signal:t}),this.editorDiv.addEventListener("input",this.#i,{signal:t}),this.editorDiv.addEventListener("paste",this.#r,{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#l),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#n),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#i),this.editorDiv.removeEventListener("paste",this.#r),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#h(){const t=[];this.editorDiv.normalize();for(const e of this.editorDiv.childNodes)t.push(Ot.#g(e));return t.join(`
`)}#p(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:n,div:r}=this,a=r.style.display,o=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",n.div.append(this.div),i=r.getBoundingClientRect(),r.remove(),r.style.display=a,r.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#a,e=this.#a=this.#h().trimEnd();if(t===e)return;const i=n=>{if(this.#a=n,!n){this.remove();return}this.#f(),this._uiManager.rebuild(this),this.#p()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#p()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ot._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#l),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),X._l10nPromise.get("pdfjs-free-text-default-content").then(n=>this.editorDiv?.setAttribute("default-content",n)),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#u}px * var(--scale-factor))`,i.color=this.#s,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bo(this,this.div,["dblclick","keydown"]),this.width){const[n,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this.#c;let[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);const[h,c]=this.pageDimensions,[u,d]=this.pageTranslation;let f,p;switch(this.rotation){case 0:f=t+(a[0]-u)/h,p=e+this.height-(a[1]-d)/c;break;case 90:f=t+(a[0]-u)/h,p=e-(a[1]-d)/c,[o,l]=[l,-o];break;case 180:f=t-this.width+(a[0]-u)/h,p=e-(a[1]-d)/c,[o,l]=[-o,-l];break;case 270:f=t+(a[0]-u-this.height*c)/h,p=e+(a[1]-d-this.width*h)/c,[o,l]=[-l,o];break}this.setAt(f*n,p*r,o,l)}else this.setAt(t*n,e*r,this.width*n,this.height*r);this.#f(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#g(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Pa,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const n=Ot.#v(e.getData("text")||"").replaceAll(Pa,`
`);if(!n)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const a=r.getRangeAt(0);if(!n.includes(`
`)){a.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:o,startOffset:l}=a,h=[],c=[];if(o.nodeType===Node.TEXT_NODE){const f=o.parentElement;if(c.push(o.nodeValue.slice(l).replaceAll(Pa,"")),f!==this.editorDiv){let p=h;for(const m of this.editorDiv.childNodes){if(m===f){p=c;continue}p.push(Ot.#g(m))}}h.push(o.nodeValue.slice(0,l).replaceAll(Pa,""))}else if(o===this.editorDiv){let f=h,p=0;for(const m of this.editorDiv.childNodes)p++===l&&(f=c),f.push(Ot.#g(m))}this.#a=`${h.join(`
`)}${n}${c.join(`
`)}`,this.#f();const u=new Range;let d=h.reduce((f,p)=>f+p.length,0);for(const{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){const p=f.nodeValue.length;if(d<=p){u.setStart(f,d),u.setEnd(f,d);break}d-=p}r.removeAllRanges(),r.addRange(u)}#f(){if(this.editorDiv.replaceChildren(),!!this.#a)for(const t of this.#a.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#m(){return this.#a.replaceAll(" "," ")}static#v(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static deserialize(t,e,i){let n=null;if(t instanceof $v){const{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:l,rotation:h,id:c},textContent:u,textPosition:d,parent:{page:{pageNumber:f}}}=t;if(!u||u.length===0)return null;n=t={annotationType:st.FREETEXT,color:Array.from(o),fontSize:a,value:u.join(`
`),position:d,pageIndex:f-1,rect:l.slice(0),rotation:h,id:c,deleted:!1}}const r=super.deserialize(t,e,i);return r.#u=t.fontSize,r.#s=U.makeHexColor(...t.color),r.#a=Ot.#v(t.value),r.annotationElementId=t.id||null,r.#c=n,r}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const e=Ot._internalPadding*this.parentScale,i=this.getRect(e,e),n=X._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#s),r={annotationType:st.FREETEXT,color:n,fontSize:this.#u,value:this.#m(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?r:this.annotationElementId&&!this.#y(r)?null:(r.id=this.annotationElementId,r)}#y(t){const{value:e,fontSize:i,color:n,pageIndex:r}=this.#c;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((a,o)=>a!==n[o])||t.pageIndex!==r}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#u}px * var(--scale-factor))`,i.color=this.#s,e.replaceChildren();for(const r of this.#a.split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),e.append(a)}const n=Ot._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(n,n),popupContent:this.#a}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Ac{#t;#e=[];#i=[];constructor(t,e=0,i=0,n=!0){let r=1/0,a=-1/0,o=1/0,l=-1/0;const c=10**-4;for(const{x:g,y:v,width:y,height:b}of t){const w=Math.floor((g-e)/c)*c,S=Math.ceil((g+y+e)/c)*c,E=Math.floor((v-e)/c)*c,x=Math.ceil((v+b+e)/c)*c,C=[w,E,x,!0],T=[S,E,x,!1];this.#e.push(C,T),r=Math.min(r,w),a=Math.max(a,S),o=Math.min(o,E),l=Math.max(l,x)}const u=a-r+2*i,d=l-o+2*i,f=r-i,p=o-i,m=this.#e.at(n?-1:-2),A=[m[0],m[2]];for(const g of this.#e){const[v,y,b]=g;g[0]=(v-f)/u,g[1]=(y-p)/d,g[2]=(b-p)/d}this.#t={x:f,y:p,width:u,height:d,lastPoint:A}}getOutlines(){this.#e.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#e)e[3]?(t.push(...this.#l(e)),this.#s(e)):(this.#a(e),t.push(...this.#l(e)));return this.#n(t)}#n(t){const e=[],i=new Set;for(const a of t){const[o,l,h]=a;e.push([o,l,a],[o,h,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){const l=e[a][2],h=e[a+1][2];l.push(h),h.push(l),i.add(l),i.add(h)}const n=[];let r;for(;i.size>0;){const a=i.values().next().value;let[o,l,h,c,u]=a;i.delete(a);let d=o,f=l;for(r=[o,h],n.push(r);;){let p;if(i.has(c))p=c;else if(i.has(u))p=u;else break;i.delete(p),[o,l,h,c,u]=p,d!==o&&(r.push(d,f,o,f===l?l:h),d=o),f=f===l?h:l}r.push(d,f)}return new Wx(n,this.#t)}#r(t){const e=this.#i;let i=0,n=e.length-1;for(;i<=n;){const r=i+n>>1,a=e[r][0];if(a===t)return r;a<t?i=r+1:n=r-1}return n+1}#s([,t,e]){const i=this.#r(t);this.#i.splice(i,0,[t,e])}#a([,t,e]){const i=this.#r(t);for(let n=i;n<this.#i.length;n++){const[r,a]=this.#i[n];if(r!==t)break;if(r===t&&a===e){this.#i.splice(n,1);return}}for(let n=i-1;n>=0;n--){const[r,a]=this.#i[n];if(r!==t)break;if(r===t&&a===e){this.#i.splice(n,1);return}}}#l(t){const[e,i,n]=t,r=[[e,i,n]],a=this.#r(n);for(let o=0;o<a;o++){const[l,h]=this.#i[o];for(let c=0,u=r.length;c<u;c++){const[,d,f]=r[c];if(!(h<=d||f<=l)){if(d>=l){if(f>h)r[c][1]=h;else{if(u===1)return[];r.splice(c,1),c--,u--}continue}r[c][2]=l,f>h&&r.push([e,h,f])}}}return r}}class sy{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof bc}}class Wx extends sy{#t;#e;constructor(t,e){super(),this.#e=t,this.#t=e}toSVGPath(){const t=[];for(const e of this.#e){let[i,n]=e;t.push(`M${i} ${n}`);for(let r=2;r<e.length;r+=2){const a=e[r],o=e[r+1];a===i?(t.push(`V${o}`),n=o):o===n&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,e,i,n],r){const a=[],o=i-t,l=n-e;for(const h of this.#e){const c=new Array(h.length);for(let u=0;u<h.length;u+=2)c[u]=t+h[u]*o,c[u+1]=n-h[u+1]*l;a.push(c)}return a}get box(){return this.#t}}class Ms{#t;#e=[];#i;#n;#r=[];#s=new Float64Array(18);#a;#l;#u;#c;#d;#o;#h=[];static#p=8;static#g=2;static#f=Ms.#p+Ms.#g;constructor({x:t,y:e},i,n,r,a,o=0){this.#t=i,this.#o=r*n,this.#n=a,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=o,this.#c=Ms.#p*n,this.#u=Ms.#f*n,this.#d=n,this.#h.push(t,e)}get free(){return!0}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[i,n,r,a]=this.#t;return[(this.#a+(t[0]-e[0])/2-i)/r,(this.#l+(t[1]-e[1])/2-n)/a,(this.#a+(e[0]-t[0])/2-i)/r,(this.#l+(e[1]-t[1])/2-n)/a]}add({x:t,y:e}){this.#a=t,this.#l=e;const[i,n,r,a]=this.#t;let[o,l,h,c]=this.#s.subarray(8,12);const u=t-h,d=e-c,f=Math.hypot(u,d);if(f<this.#u)return!1;const p=f-this.#c,m=p/f,A=m*u,g=m*d;let v=o,y=l;o=h,l=c,h+=A,c+=g,this.#h?.push(t,e);const b=-g/p,w=A/p,S=b*this.#o,E=w*this.#o;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([h+S,c+E],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([h-S,c-E],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([o+S,l+E],2),this.#r.push(NaN,NaN,NaN,NaN,(o+S-i)/r,(l+E-n)/a),this.#s.set([o-S,l-E],14),this.#e.push(NaN,NaN,NaN,NaN,(o-S-i)/r,(l-E-n)/a)),this.#s.set([v,y,o,l,h,c],6),!this.isEmpty()):(this.#s.set([v,y,o,l,h,c],6),Math.abs(Math.atan2(y-l,v-o)-Math.atan2(g,A))<Math.PI/2?([o,l,h,c]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((o+h)/2-i)/r,((l+c)/2-n)/a),[o,l,v,y]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((v+o)/2-i)/r,((y+l)/2-n)/a),!0):([v,y,o,l,h,c]=this.#s.subarray(0,6),this.#r.push(((v+5*o)/6-i)/r,((y+5*l)/6-n)/a,((5*o+h)/6-i)/r,((5*l+c)/6-n)/a,((o+h)/2-i)/r,((l+c)/2-n)/a),[h,c,o,l,v,y]=this.#s.subarray(12,18),this.#e.push(((v+5*o)/6-i)/r,((y+5*l)/6-n)/a,((5*o+h)/6-i)/r,((5*l+c)/6-n)/a,((o+h)/2-i)/r,((l+c)/2-n)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e,i=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[r,a,o,l]=this.#t,[h,c,u,d]=this.#m();if(isNaN(this.#s[6])&&!this.isEmpty())return`M${(this.#s[2]-r)/o} ${(this.#s[3]-a)/l} L${(this.#s[4]-r)/o} ${(this.#s[5]-a)/l} L${h} ${c} L${u} ${d} L${(this.#s[16]-r)/o} ${(this.#s[17]-a)/l} L${(this.#s[14]-r)/o} ${(this.#s[15]-a)/l} Z`;const f=[];f.push(`M${t[4]} ${t[5]}`);for(let p=6;p<t.length;p+=6)isNaN(t[p])?f.push(`L${t[p+4]} ${t[p+5]}`):f.push(`C${t[p]} ${t[p+1]} ${t[p+2]} ${t[p+3]} ${t[p+4]} ${t[p+5]}`);f.push(`L${(i[0]-r)/o} ${(i[1]-a)/l} L${h} ${c} L${u} ${d} L${(n[0]-r)/o} ${(n[1]-a)/l}`);for(let p=e.length-6;p>=6;p-=6)isNaN(e[p])?f.push(`L${e[p+4]} ${e[p+5]}`):f.push(`C${e[p]} ${e[p+1]} ${e[p+2]} ${e[p+3]} ${e[p+4]} ${e[p+5]}`);return f.push(`L${e[4]} ${e[5]} Z`),f.join(" ")}getOutlines(){const t=this.#r,e=this.#e,i=this.#s,n=i.subarray(4,6),r=i.subarray(16,18),[a,o,l,h]=this.#t,c=new Float64Array((this.#h?.length??0)+2);for(let g=0,v=c.length-2;g<v;g+=2)c[g]=(this.#h[g]-a)/l,c[g+1]=(this.#h[g+1]-o)/h;c[c.length-2]=(this.#a-a)/l,c[c.length-1]=(this.#l-o)/h;const[u,d,f,p]=this.#m();if(isNaN(i[6])&&!this.isEmpty()){const g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(i[2]-a)/l,(i[3]-o)/h,NaN,NaN,NaN,NaN,(i[4]-a)/l,(i[5]-o)/h,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(i[16]-a)/l,(i[17]-o)/h,NaN,NaN,NaN,NaN,(i[14]-a)/l,(i[15]-o)/h],0),new bc(g,c,this.#t,this.#d,this.#i,this.#n)}const m=new Float64Array(this.#r.length+24+this.#e.length);let A=t.length;for(let g=0;g<A;g+=2){if(isNaN(t[g])){m[g]=m[g+1]=NaN;continue}m[g]=t[g],m[g+1]=t[g+1]}m.set([NaN,NaN,NaN,NaN,(n[0]-a)/l,(n[1]-o)/h,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(r[0]-a)/l,(r[1]-o)/h],A),A+=24;for(let g=e.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(e[g+v])){m[A]=m[A+1]=NaN,A+=2;continue}m[A]=e[g+v],m[A+1]=e[g+v+1],A+=2}return m.set([NaN,NaN,NaN,NaN,e[4],e[5]],A),new bc(m,c,this.#t,this.#d,this.#i,this.#n)}}class bc extends sy{#t;#e=null;#i;#n;#r;#s;#a;constructor(t,e,i,n,r,a){super(),this.#a=t,this.#r=e,this.#t=i,this.#s=n,this.#i=r,this.#n=a,this.#c(a);const{x:o,y:l,width:h,height:c}=this.#e;for(let u=0,d=t.length;u<d;u+=2)t[u]=(t[u]-o)/h,t[u+1]=(t[u+1]-l)/c;for(let u=0,d=e.length;u<d;u+=2)e[u]=(e[u]-o)/h,e[u+1]=(e[u+1]-l)/c}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,i=this.#a.length;e<i;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,n],r){const a=i-t,o=n-e;let l,h;switch(r){case 0:l=this.#l(this.#a,t,n,a,-o),h=this.#l(this.#r,t,n,a,-o);break;case 90:l=this.#u(this.#a,t,e,a,o),h=this.#u(this.#r,t,e,a,o);break;case 180:l=this.#l(this.#a,i,e,-a,o),h=this.#l(this.#r,i,e,-a,o);break;case 270:l=this.#u(this.#a,i,n,-a,-o),h=this.#u(this.#r,i,n,-a,-o);break}return{outline:Array.from(l),points:[Array.from(h)]}}#l(t,e,i,n,r){const a=new Float64Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o]*n,a[o+1]=i+t[o+1]*r;return a}#u(t,e,i,n,r){const a=new Float64Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o+1]*n,a[o+1]=i+t[o]*r;return a}#c(t){const e=this.#a;let i=e[4],n=e[5],r=i,a=n,o=i,l=n,h=i,c=n;const u=t?Math.max:Math.min;for(let A=6,g=e.length;A<g;A+=6){if(isNaN(e[A]))r=Math.min(r,e[A+4]),a=Math.min(a,e[A+5]),o=Math.max(o,e[A+4]),l=Math.max(l,e[A+5]),c<e[A+5]?(h=e[A+4],c=e[A+5]):c===e[A+5]&&(h=u(h,e[A+4]));else{const v=U.bezierBoundingBox(i,n,...e.slice(A,A+6));r=Math.min(r,v[0]),a=Math.min(a,v[1]),o=Math.max(o,v[2]),l=Math.max(l,v[3]),c<v[3]?(h=v[2],c=v[3]):c===v[3]&&(h=u(h,v[2]))}i=e[A+4],n=e[A+5]}const d=r-this.#i,f=a-this.#i,p=o-r+2*this.#i,m=l-a+2*this.#i;this.#e={x:d,y:f,width:p,height:m,lastPoint:[h,c]}}get box(){return this.#e}getNewOutline(t,e){const{x:i,y:n,width:r,height:a}=this.#e,[o,l,h,c]=this.#t,u=r*h,d=a*c,f=i*h+o,p=n*c+l,m=new Ms({x:this.#r[0]*u+f,y:this.#r[1]*d+p},this.#t,this.#s,t,this.#n,e??this.#i);for(let A=2;A<this.#r.length;A+=2)m.add({x:this.#r[A]*u+f,y:this.#r[A+1]*d+p});return m.getOutlines()}}class yi{#t=this.#g.bind(this);#e=this.#m.bind(this);#i=null;#n=null;#r;#s=null;#a=!1;#l=!1;#u=null;#c;#d=null;#o;static get _keyboardManager(){return at(this,"_keyboardManager",new qr([[["Escape","mac+Escape"],yi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],yi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],yi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],yi.prototype._moveToPrevious],[["Home","mac+Home"],yi.prototype._moveToBeginning],[["End","mac+End"],yi.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#l=!1,this.#o=K.HIGHLIGHT_COLOR,this.#u=t):(this.#l=!0,this.#o=K.HIGHLIGHT_DEFAULT_COLOR),this.#d=t?._uiManager||e,this.#c=this.#d._eventBus,this.#r=t?.color||this.#d?.highlightColors.values().next().value||"#FFFF98"}renderButton(){const t=this.#i=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=this.#d._signal;t.addEventListener("click",this.#f.bind(this),{signal:e}),t.addEventListener("keydown",this.#t,{signal:e});const i=this.#n=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#r,t.append(i),t}renderMainDropdown(){const t=this.#s=this.#h();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#h(){const t=document.createElement("div"),e=this.#d._signal;t.addEventListener("contextmenu",_e,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,n]of this.#d.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=i,r.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=n,r.setAttribute("aria-selected",n===this.#r),r.addEventListener("click",this.#p.bind(this,n),{signal:e}),t.append(r)}return t.addEventListener("keydown",this.#t,{signal:e}),t}#p(t,e){e.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#o,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#i){this.#f(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#v){this.#f(t);return}if(t.target===this.#i){this.#s.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#s?.firstChild||t.target===this.#i){this.#v&&this._hideDropdownFromKeyboard();return}this.#v||this.#f(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#v){this.#f(t);return}this.#s.firstChild?.focus()}_moveToEnd(t){if(!this.#v){this.#f(t);return}this.#s.lastChild?.focus()}#g(t){yi._keyboardManager.exec(this,t)}#f(t){if(this.#v){this.hideDropdown();return}if(this.#a=t.detail===0,window.addEventListener("pointerdown",this.#e,{signal:this.#d._signal}),this.#s){this.#s.classList.remove("hidden");return}const e=this.#s=this.#h();this.#i.append(e)}#m(t){this.#s?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),window.removeEventListener("pointerdown",this.#e)}get#v(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#l){if(!this.#v){this.#u?.unselect();return}this.hideDropdown(),this.#i.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#n&&(this.#n.style.backgroundColor=t),!this.#s)return;const e=this.#d.highlightColors.values();for(const i of this.#s.children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#s?.remove(),this.#s=null}}class Rt extends X{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#l=0;#u=null;#c=null;#d=null;#o=!1;#h=this.#E.bind(this);#p=null;#g;#f=null;#m="";#v;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _l10nPromise;static _type="highlight";static _editorType=st.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Rt.prototype;return at(this,"_keyboardManager",new qr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Rt._defaultColor,this.#v=t.thickness||Rt._defaultThickness,this.#g=t.opacity||Rt._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#m=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#o=!0,this.#x(t),this.#b()):(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#l=t.focusOffset,this.#w(),this.#b(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#v,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#w(){const t=new Ac(this.#i,.001);this.#c=t.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#c.box;const e=new Ac(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:i}=this.#s.box;this.#p=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#x({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#c=t;const n=1.5;if(this.#s=t.getNewOutline(this.#v/2+n,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeLine(e,t),this.#f=this.parent.drawLayer.highlightOutline(this.#s);else if(this.parent){const c=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,t),this.parent.drawLayer.updateBox(this.#d,Rt.#A(this.#c.box,(c-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#s),this.parent.drawLayer.updateBox(this.#f,Rt.#A(this.#s.box,c))}const{x:r,y:a,width:o,height:l}=t.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=o,this.height=l;break;case 90:{const[c,u]=this.parentDimensions;this.x=a,this.y=1-r,this.width=o*u/c,this.height=l*c/u;break}case 180:this.x=1-r,this.y=1-a,this.width=o,this.height=l;break;case 270:{const[c,u]=this.parentDimensions;this.x=1-a,this.y=r,this.width=o*u/c,this.height=l*c/u;break}}const{lastPoint:h}=this.#s.box;this.#p=[(h[0]-r)/o,(h[1]-a)/l]}static initialize(t,e){X.initialize(t,e),Rt._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case K.HIGHLIGHT_DEFAULT_COLOR:Rt._defaultColor=e;break;case K.HIGHLIGHT_THICKNESS:Rt._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#p}updateParams(t,e){switch(t){case K.HIGHLIGHT_COLOR:this.#T(e);break;case K.HIGHLIGHT_THICKNESS:this.#k(e);break}}static get defaultPropertiesToUpdate(){return[[K.HIGHLIGHT_DEFAULT_COLOR,Rt._defaultColor],[K.HIGHLIGHT_THICKNESS,Rt._defaultThickness]]}get propertiesToUpdate(){return[[K.HIGHLIGHT_COLOR,this.color||Rt._defaultColor],[K.HIGHLIGHT_THICKNESS,this.#v||Rt._defaultThickness],[K.HIGHLIGHT_FREE,this.#o]]}#T(t){const e=n=>{this.color=n,this.parent?.drawLayer.changeColor(this.#d,n),this.#r?.updateColor(n)},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#k(t){const e=this.#v,i=n=>{this.#v=n,this.#M(n)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#r=new yi({editor:this}),t.addColorPicker(this.#r)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#_())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#_())}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#b(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#b(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#M(t){if(!this.#o)return;this.#x({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#b(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.highlight(this.#c,this.color,this.#g),this.#f=t.drawLayer.highlightOutline(this.#s),this.#u&&(this.#u.style.clipPath=this.#n))}static#A({x:t,y:e,width:i,height:n},r){switch(r){case 90:return{x:1-e-n,y:t,width:n,height:i};case 180:return{x:1-t-i,y:1-e-n,width:i,height:n};case 270:return{x:e,y:1-t-i,width:n,height:i}}return{x:t,y:e,width:i,height:n}}rotate(t){const{drawLayer:e}=this.parent;let i;this.#o?(t=(t-this.rotation+360)%360,i=Rt.#A(this.#c.box,t)):i=Rt.#A(this,t),e.rotate(this.#d,t),e.rotate(this.#f,t),e.updateBox(this.#d,i),e.updateBox(this.#f,Rt.#A(this.#s.box,t))}render(){if(this.div)return this.div;const t=super.render();this.#m&&(t.setAttribute("aria-label",this.#m),t.setAttribute("role","mark")),this.#o?t.classList.add("free"):this.div.addEventListener("keydown",this.#h,{signal:this._uiManager._signal});const e=this.#u=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n;const[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),bo(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#f,"hovered")}#E(t){Rt._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#P(!0);break;case 1:case 3:this.#P(!1);break}}#P(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#l)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#P(!1))}get _mustFixPosition(){return!this.#o}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(this.#d,t),this.parent.drawLayer.show(this.#f,t))}#_(){return this.#o?this.rotation:0}#R(){if(this.#o)return null;const[t,e]=this.pageDimensions,i=this.#i,n=new Float32Array(i.length*8);let r=0;for(const{x:a,y:o,width:l,height:h}of i){const c=a*t,u=(1-o-h)*e;n[r]=n[r+4]=c,n[r+1]=n[r+3]=u,n[r+2]=n[r+6]=c+l*t,n[r+5]=n[r+7]=u+h*e,r+=8}return n}#S(t){return this.#c.serialize(t,this.#_())}static startHighlighting(t,e,{target:i,x:n,y:r}){const{x:a,y:o,width:l,height:h}=i.getBoundingClientRect(),c=m=>{this.#D(t,m)},u=t._signal,d={capture:!0,passive:!1,signal:u},f=m=>{m.preventDefault(),m.stopPropagation()},p=m=>{i.removeEventListener("pointermove",c),window.removeEventListener("blur",p),window.removeEventListener("pointerup",p),window.removeEventListener("pointerdown",f,d),window.removeEventListener("contextmenu",_e),this.#L(t,m)};window.addEventListener("blur",p,{signal:u}),window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("pointerdown",f,d),window.addEventListener("contextmenu",_e,{signal:u}),i.addEventListener("pointermove",c,{signal:u}),this._freeHighlight=new Ms({x:n,y:r},[a,o,l,h],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#D(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#L(t,e){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(t,e,i){const n=super.deserialize(t,e,i),{rect:[r,a,o,l],color:h,quadPoints:c}=t;n.color=U.makeHexColor(...h),n.#g=t.opacity;const[u,d]=n.pageDimensions;n.width=(o-r)/u,n.height=(l-a)/d;const f=n.#i=[];for(let p=0;p<c.length;p+=8)f.push({x:(c[4]-o)/u,y:(l-(1-c[p+5]))/d,width:(c[p+2]-c[p])/u,height:(c[p+5]-c[p+1])/d});return n.#w(),n}serialize(t=!1){if(this.isEmpty()||t)return null;const e=this.getRect(0,0),i=X._colorManager.convert(this.color);return{annotationType:st.HIGHLIGHT,color:i,opacity:this.#g,thickness:this.#v,quadPoints:this.#R(),outlines:this.#S(e),pageIndex:this.pageIndex,rect:e,rotation:this.#_(),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}class Xt extends X{#t=0;#e=0;#i=this.canvasPointermove.bind(this);#n=this.canvasPointerleave.bind(this);#r=this.canvasPointerup.bind(this);#s=this.canvasPointerdown.bind(this);#a=null;#l=new Path2D;#u=!1;#c=!1;#d=!1;#o=null;#h=0;#p=0;#g=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=st.INK;constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){X.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case K.INK_THICKNESS:Xt._defaultThickness=e;break;case K.INK_COLOR:Xt._defaultColor=e;break;case K.INK_OPACITY:Xt._defaultOpacity=e/100;break}}updateParams(t,e){switch(t){case K.INK_THICKNESS:this.#f(e);break;case K.INK_COLOR:this.#m(e);break;case K.INK_OPACITY:this.#v(e);break}}static get defaultPropertiesToUpdate(){return[[K.INK_THICKNESS,Xt._defaultThickness],[K.INK_COLOR,Xt._defaultColor||X._defaultLineColor],[K.INK_OPACITY,Math.round(Xt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[K.INK_THICKNESS,this.thickness||Xt._defaultThickness],[K.INK_COLOR,this.color||Xt._defaultColor||X._defaultLineColor],[K.INK_OPACITY,Math.round(100*(this.opacity??Xt._defaultOpacity))]]}#f(t){const e=n=>{this.thickness=n,this.#I()},i=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(t){const e=n=>{this.color=n,this.#E()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#v(t){const e=n=>{this.opacity=n,this.#E()};t/=100;const i=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#_(),this.#R()),this.isAttachedToDOM||(this.parent.add(this),this.#S()),this.#I()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#a&&(clearTimeout(this.#a),this.#a=null),this.#o?.disconnect(),this.#o=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,i=this.width*t,n=this.height*e;this.setDimensions(i,n)}enableEditMode(){this.#u||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#s,{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#s))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#y(){const{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}}#w(){const{ctx:t,color:e,opacity:i,thickness:n,parentScale:r,scaleFactor:a}=this;t.lineWidth=n*r/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${f1(i)}`}#x(t,e){const i=this._uiManager._signal;this.canvas.addEventListener("contextmenu",_e,{signal:i}),this.canvas.addEventListener("pointerleave",this.#n,{signal:i}),this.canvas.addEventListener("pointermove",this.#i,{signal:i}),this.canvas.addEventListener("pointerup",this.#r,{signal:i}),this.canvas.removeEventListener("pointerdown",this.#s),this.isEditing=!0,this.#d||(this.#d=!0,this.#S(),this.thickness||=Xt._defaultThickness,this.color||=Xt._defaultColor||X._defaultLineColor,this.opacity??=Xt._defaultOpacity),this.currentPath.push([t,e]),this.#c=!1,this.#w(),this.#g=()=>{this.#C(),this.#g&&window.requestAnimationFrame(this.#g)},window.requestAnimationFrame(this.#g)}#T(t,e){const[i,n]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&e===n)return;const r=this.currentPath;let a=this.#l;if(r.push([t,e]),this.#c=!0,r.length<=2){a.moveTo(...r[0]),a.lineTo(t,e);return}r.length===3&&(this.#l=a=new Path2D,a.moveTo(...r[0])),this.#b(a,...r.at(-3),...r.at(-2),t,e)}#k(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);this.#l.lineTo(...t)}#M(t,e){this.#g=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#T(t,e),this.#k();let i;if(this.currentPath.length!==1)i=this.#A();else{const l=[t,e];i=[[l,l.slice(),l.slice(),l]]}const n=this.#l,r=this.currentPath;this.currentPath=[],this.#l=new Path2D;const a=()=>{this.allRawPaths.push(r),this.paths.push(i),this.bezierPath2D.push(n),this._uiManager.rebuild(this)},o=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#_(),this.#R()),this.#I())};this.addCommands({cmd:a,undo:o,mustExec:!0})}#C(){if(!this.#c)return;this.#c=!1;const t=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),i=e.map(a=>a[0]),n=e.map(a=>a[1]);Math.min(...i)-t,Math.max(...i)+t,Math.min(...n)-t,Math.max(...n)+t;const{ctx:r}=this;r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)r.stroke(a);r.stroke(this.#l),r.restore()}#b(t,e,i,n,r,a,o){const l=(e+n)/2,h=(i+r)/2,c=(n+a)/2,u=(r+o)/2;t.bezierCurveTo(l+2*(n-l)/3,h+2*(r-h)/3,c+2*(n-c)/3,u+2*(r-u)/3,c,u)}#A(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const e=[];let i,[n,r]=t[0];for(i=1;i<t.length-2;i++){const[d,f]=t[i],[p,m]=t[i+1],A=(d+p)/2,g=(f+m)/2,v=[n+2*(d-n)/3,r+2*(f-r)/3],y=[A+2*(d-A)/3,g+2*(f-g)/3];e.push([[n,r],v,y,[A,g]]),[n,r]=[A,g]}const[a,o]=t[i],[l,h]=t[i+1],c=[n+2*(a-n)/3,r+2*(o-r)/3],u=[l+2*(a-l)/3,h+2*(o-h)/3];return e.push([[n,r],c,u,[l,h]]),e}#E(){if(this.isEmpty()){this.#L();return}this.#w();const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#L();for(const i of this.bezierPath2D)e.stroke(i)}commit(){this.#u||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#u=!0,this.div.classList.add("disabled"),this.#I(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#u||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#x(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#T(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#P(t)}canvasPointerleave(t){this.#P(t)}#P(t){this.canvas.removeEventListener("pointerleave",this.#n),this.canvas.removeEventListener("pointermove",this.#i),this.canvas.removeEventListener("pointerup",this.#r),this.canvas.addEventListener("pointerdown",this.#s,{signal:this._uiManager._signal}),this.#a&&clearTimeout(this.#a),this.#a=setTimeout(()=>{this.#a=null,this.canvas.removeEventListener("contextmenu",_e)},10),this.#M(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#_(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#R(){this.#o=new ResizeObserver(t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)}),this.#o.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#o?.disconnect(),this.#o=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#u}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,n,r,a]=this.#y();if(this.setAt(i,n,0,0),this.setDims(r,a),this.#_(),this.width){const[o,l]=this.parentDimensions;this.setAspectRatio(this.width*o,this.height*l),this.setAt(t*o,e*l,this.width*o,this.height*l),this.#d=!0,this.#S(),this.setDims(this.width*o,this.height*l),this.#E(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#R(),this.div}#S(){if(!this.#d)return;const[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#L()}setDimensions(t,e){const i=Math.round(t),n=Math.round(e);if(this.#h===i&&this.#p===n)return;this.#h=i,this.#p=n,this.canvas.style.visibility="hidden";const[r,a]=this.parentDimensions;this.width=t/r,this.height=e/a,this.fixAndSetPosition(),this.#u&&this.#D(t,e),this.#S(),this.#E(),this.canvas.style.visibility="visible",this.fixDims()}#D(t,e){const i=this.#j(),n=(t-i)/this.#e,r=(e-i)/this.#t;this.scaleFactor=Math.min(n,r)}#L(){const t=this.#j()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#F(t){const e=new Path2D;for(let i=0,n=t.length;i<n;i++){const[r,a,o,l]=t[i];i===0&&e.moveTo(...r),e.bezierCurveTo(a[0],a[1],o[0],o[1],l[0],l[1])}return e}static#O(t,e,i){const[n,r,a,o]=e;switch(i){case 0:for(let l=0,h=t.length;l<h;l+=2)t[l]+=n,t[l+1]=o-t[l+1];break;case 90:for(let l=0,h=t.length;l<h;l+=2){const c=t[l];t[l]=t[l+1]+n,t[l+1]=c+r}break;case 180:for(let l=0,h=t.length;l<h;l+=2)t[l]=a-t[l],t[l+1]+=r;break;case 270:for(let l=0,h=t.length;l<h;l+=2){const c=t[l];t[l]=a-t[l+1],t[l+1]=o-c}break;default:throw new Error("Invalid rotation")}return t}static#U(t,e,i){const[n,r,a,o]=e;switch(i){case 0:for(let l=0,h=t.length;l<h;l+=2)t[l]-=n,t[l+1]=o-t[l+1];break;case 90:for(let l=0,h=t.length;l<h;l+=2){const c=t[l];t[l]=t[l+1]-r,t[l+1]=c-n}break;case 180:for(let l=0,h=t.length;l<h;l+=2)t[l]=a-t[l],t[l+1]-=r;break;case 270:for(let l=0,h=t.length;l<h;l+=2){const c=t[l];t[l]=o-t[l+1],t[l+1]=a-c}break;default:throw new Error("Invalid rotation")}return t}#z(t,e,i,n){const r=[],a=this.thickness/2,o=t*e+a,l=t*i+a;for(const h of this.paths){const c=[],u=[];for(let d=0,f=h.length;d<f;d++){const[p,m,A,g]=h[d];if(p[0]===g[0]&&p[1]===g[1]&&f===1){const T=t*p[0]+o,R=t*p[1]+l;c.push(T,R),u.push(T,R);break}const v=t*p[0]+o,y=t*p[1]+l,b=t*m[0]+o,w=t*m[1]+l,S=t*A[0]+o,E=t*A[1]+l,x=t*g[0]+o,C=t*g[1]+l;d===0&&(c.push(v,y),u.push(v,y)),c.push(b,w,S,E,x,C),u.push(b,w),d===f-1&&u.push(x,C)}r.push({bezier:Xt.#O(c,n,this.rotation),points:Xt.#O(u,n,this.rotation)})}return r}#H(){let t=1/0,e=-1/0,i=1/0,n=-1/0;for(const r of this.paths)for(const[a,o,l,h]of r){const c=U.bezierBoundingBox(...a,...o,...l,...h);t=Math.min(t,c[0]),i=Math.min(i,c[1]),e=Math.max(e,c[2]),n=Math.max(n,c[3])}return[t,i,e,n]}#j(){return this.#u?Math.ceil(this.thickness*this.parentScale):0}#I(t=!1){if(this.isEmpty())return;if(!this.#u){this.#E();return}const e=this.#H(),i=this.#j();this.#e=Math.max(X.MIN_SIZE,e[2]-e[0]),this.#t=Math.max(X.MIN_SIZE,e[3]-e[1]);const n=Math.ceil(i+this.#e*this.scaleFactor),r=Math.ceil(i+this.#t*this.scaleFactor),[a,o]=this.parentDimensions;this.width=n/a,this.height=r/o,this.setAspectRatio(n,r);const l=this.translationX,h=this.translationY;this.translationX=-e[0],this.translationY=-e[1],this.#S(),this.#E(),this.#h=n,this.#p=r,this.setDims(n,r);const c=t?i/this.scaleFactor/2:0;this.translate(l-this.translationX-c,h-this.translationY-c)}static deserialize(t,e,i){if(t instanceof ey)return null;const n=super.deserialize(t,e,i);n.thickness=t.thickness,n.color=U.makeHexColor(...t.color),n.opacity=t.opacity;const[r,a]=n.pageDimensions,o=n.width*r,l=n.height*a,h=n.parentScale,c=t.thickness/2;n.#u=!0,n.#h=Math.round(o),n.#p=Math.round(l);const{paths:u,rect:d,rotation:f}=t;for(let{bezier:m}of u){m=Xt.#U(m,d,f);const A=[];n.paths.push(A);let g=h*(m[0]-c),v=h*(m[1]-c);for(let b=2,w=m.length;b<w;b+=6){const S=h*(m[b]-c),E=h*(m[b+1]-c),x=h*(m[b+2]-c),C=h*(m[b+3]-c),T=h*(m[b+4]-c),R=h*(m[b+5]-c);A.push([[g,v],[S,E],[x,C],[T,R]]),g=T,v=R}const y=this.#F(A);n.bezierPath2D.push(y)}const p=n.#H();return n.#e=Math.max(X.MIN_SIZE,p[2]-p[0]),n.#t=Math.max(X.MIN_SIZE,p[3]-p[1]),n.#D(o,l),n}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=X._colorManager.convert(this.ctx.strokeStyle);return{annotationType:st.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#z(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class Xu extends X{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#l=null;#u=null;#c=!1;#d=!1;static _type="stamp";static _editorType=st.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile}static initialize(t,e){X.initialize(t,e)}static get supportedTypes(){return at(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return at(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(st.STAMP,{bitmapFile:t.getAsFile()})}#o(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#s=t.file.name),this.#g()}#h(){this.#i=null,this._uiManager.enableWaiting(!1),this.#a&&this.div.focus()}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#o(i,!0)).finally(()=>this.#h());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(n=>this.#o(n)).finally(()=>this.#h());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(n=>this.#o(n)).finally(()=>this.#h());return}const t=document.createElement("input");t.type="file",t.accept=Xu.supportedTypesStr;const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const n=await this._uiManager.imageManager.getFromFile(t.files[0]);this.#o(n)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#h()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#l?.disconnect(),this.#l=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#t?this.#g():this.#p(),this.width){const[i,n]=this.parentDimensions;this.setAt(t*i,e*n,this.width*i,this.height*n)}return this.div}#g(){const{div:t}=this;let{width:e,height:i}=this.#t;const[n,r]=this.pageDimensions,a=.75;if(this.width)e=this.width*n,i=this.height*r;else if(e>a*n||i>a*r){const c=Math.min(a*n/e,a*r/i);e*=c,i*=c}const[o,l]=this.parentDimensions;this.setDims(e*o/n,i*l/r),this._uiManager.enableWaiting(!1);const h=this.#a=document.createElement("canvas");t.append(h),t.hidden=!1,this.#v(e,i),this.#w(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&h.setAttribute("aria-label",this.#s)}#f(t,e){const[i,n]=this.parentDimensions;this.width=t/i,this.height=e/n,this.setDims(t,e),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const r=200;this.#u=setTimeout(()=>{this.#u=null,this.#v(t,e)},r)}#m(t,e){const{width:i,height:n}=this.#t;let r=i,a=n,o=this.#t;for(;r>2*t||a>2*e;){const l=r,h=a;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const c=new OffscreenCanvas(r,a);c.getContext("2d").drawImage(o,0,0,l,h,0,0,r,a),o=c.transferToImageBitmap()}return o}#v(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=this.#a;if(!i||i.width===t&&i.height===e)return;i.width=t,i.height=e;const n=this.#c?this.#t:this.#m(t,e);if(this._uiManager.hasMLManager&&!this.hasAltText()){const o=new OffscreenCanvas(t,e).getContext("2d");o.drawImage(n,0,0,n.width,n.height,0,0,t,e),this._uiManager.mlGuess({service:"image-to-text",request:{data:o.getImageData(0,0,t,e).data,width:t,height:e,channels:4}}).then(l=>{const h=l?.output||"";this.parent&&h&&!this.hasAltText()&&(this.altTextData={altText:h,decorative:!1})})}const r=i.getContext("2d");r.filter=this._uiManager.hcmFilter,r.drawImage(n,0,0,n.width,n.height,0,0,t,e)}getImageForAltText(){return this.#a}#y(t){if(t){if(this.#c){const n=this._uiManager.imageManager.getSvgUrl(this.#e);if(n)return n}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#c){const[e,i]=this.pageDimensions,n=Math.round(this.width*e*_n.PDF_TO_CSS_UNITS),r=Math.round(this.height*i*_n.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(n,r);return a.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,n,r),a.transferToImageBitmap()}return structuredClone(this.#t)}#w(){this._uiManager._signal&&(this.#l=new ResizeObserver(t=>{const e=t[0].contentRect;e.width&&e.height&&this.#f(e.width,e.height)}),this.#l.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#l?.disconnect(),this.#l=null},{once:!0}))}static deserialize(t,e,i){if(t instanceof iy)return null;const n=super.deserialize(t,e,i),{rect:r,bitmapUrl:a,bitmapId:o,isSvg:l,accessibilityData:h}=t;o&&i.imageManager.isValidId(o)?n.#e=o:n.#n=a,n.#c=l;const[c,u]=n.pageDimensions;return n.width=(r[2]-r[0])/c,n.height=(r[3]-r[1])/u,h&&(n.altTextData=h),n}serialize(t=!1,e=null){if(this.isEmpty())return null;const i={annotationType:st.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.altTextData,i;const{decorative:n,altText:r}=this.altTextData;if(!n&&r&&(i.accessibilityData={type:"Figure",alt:r}),e===null)return i;e.stamps||=new Map;const a=this.#c?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:a,serialized:i}),i.bitmap=this.#y(!1);else if(this.#c){const o=e.stamps.get(this.#e);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#y(!1))}return i}}class Di{#t;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=null;#l=new Map;#u=!1;#c=!1;#d=!1;#o=null;#h;static _initialized=!1;static#p=new Map([Ot,Xt,Xu,Rt].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,accessibilityManager:n,annotationLayer:r,drawLayer:a,textLayer:o,viewport:l,l10n:h}){const c=[...Di.#p.values()];if(!Di._initialized){Di._initialized=!0;for(const u of c)u.initialize(h,t)}t.registerEditorTypes(c),this.#h=t,this.pageIndex=e,this.div=i,this.#t=n,this.#i=r,this.viewport=l,this.#o=o,this.drawLayer=a,this.#h.addLayer(this)}get isEmpty(){return this.#l.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===st.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#y(),t){case st.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case st.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case st.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of Di.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#o?.div}addInkEditorIfNeeded(t){if(this.#h.getMode()!==st.INK)return;if(!t){for(const i of this.#l.values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of this.#l.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#h.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#i)return;const e=this.#i.getEditableAnnotations();for(const i of e){if(i.hide(),this.#h.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const n=this.deserialize(i);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){this.#d=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const n of this.#l.values())if(n.disableEditing(),!!n.annotationElementId){if(n.serialize()!==null){t.set(n.annotationElementId,n);continue}else e.set(n.annotationElementId,n);this.getEditableAnnotation(n.annotationElementId)?.show(),n.remove()}if(this.#i){const n=this.#i.getEditableAnnotations();for(const r of n){const{id:a}=r.data;if(this.#h.isDeletedAnnotationElement(a))continue;let o=e.get(a);if(o){o.resetAnnotationElement(r),o.show(!1),r.show();continue}o=t.get(a),o&&(this.#h.addChangedExistingAnnotation(o),o.renderAnnotationElement(r),o.show(!1)),r.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const n of Di.#p.values())i.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#d=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){this.div.tabIndex=-1,this.#o?.div&&!this.#s&&(this.#s=this.#g.bind(this),this.#o.div.addEventListener("pointerdown",this.#s,{signal:this.#h._signal}),this.#o.div.classList.add("highlighting"))}disableTextSelection(){this.div.tabIndex=0,this.#o?.div&&this.#s&&(this.#o.div.removeEventListener("pointerdown",this.#s),this.#s=null,this.#o.div.classList.remove("highlighting"))}#g(t){if(this.#h.unselectAll(),t.target===this.#o.div){const{isMac:e}=Ce.platform;if(t.button!==0||t.ctrlKey&&e)return;this.#h.showAllEditors("highlight",!0,!0),this.#o.div.classList.add("free"),Rt.startHighlighting(this,this.#h.direction==="ltr",t),this.#o.div.addEventListener("pointerup",()=>{this.#o.div.classList.remove("free")},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#r)return;const t=this.#h._signal;this.#r=this.pointerdown.bind(this),this.#n=this.pointerup.bind(this),this.div.addEventListener("pointerdown",this.#r,{signal:t}),this.div.addEventListener("pointerup",this.#n,{signal:t})}disableClick(){this.#r&&(this.div.removeEventListener("pointerdown",this.#r),this.div.removeEventListener("pointerup",this.#n),this.#r=null,this.#n=null)}attach(t){this.#l.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#l.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#d&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),X.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return this.#h.getId()}get#f(){return Di.#p.get(this.#h.getMode())}get _signal(){return this.#h._signal}#m(t){const e=this.#f;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#h.updateToolbar(t),this.#h.updateMode(t);const{offsetX:i,offsetY:n}=this.#v(),r=this.getNextId(),a=this.#m({parent:this,id:r,x:i,y:n,uiManager:this.#h,isCentered:!0,...e});a&&this.add(a)}deserialize(t){return Di.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,i={}){const n=this.getNextId(),r=this.#m({parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...i});return r&&this.add(r),r}#v(){const{x:t,y:e,width:i,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),o=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+n),h=(r+o)/2-t,c=(a+l)/2-e,[u,d]=this.viewport.rotation%180===0?[h,c]:[c,h];return{offsetX:u,offsetY:d}}addNewEditor(){this.createAndAddNewEditor(this.#v(),!0)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}isSelected(t){return this.#h.isSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=Ce.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&this.#u){if(this.#u=!1,!this.#e){this.#e=!0;return}if(this.#h.getMode()===st.STAMP){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#h.getMode()===st.HIGHLIGHT&&this.enableTextSelection(),this.#u){this.#u=!1;return}const{isMac:e}=Ce.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;this.#u=!0;const i=this.#h.getActive();this.#e=!i||i.isEmpty()}findNewParent(t,e,i){const n=this.#h.findParent(e,i);return n===null||n===this?!1:(n.changeParent(t),!0)}destroy(){this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#l.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#l.clear(),this.#h.removeLayer(this)}#y(){this.#c=!0;for(const t of this.#l.values())t.isEmpty()&&t.remove();this.#c=!1}render({viewport:t}){this.viewport=t,js(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#y();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,js(this.div,{rotation:i}),e!==i)for(const n of this.#l.values())n.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}}class se{#t=null;#e=0;#i=new Map;#n=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#i.size>0)for(const e of this.#i.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return at(this,"_svgFactory",new Iu)}static#r(t,{x:e=0,y:i=0,width:n=1,height:r=1}={}){const{style:a}=t;a.top=`${100*i}%`,a.left=`${100*e}%`,a.width=`${100*n}%`,a.height=`${100*r}%`}#s(t){const e=se._svgFactory.create(1,1,!0);return this.#t.append(e),e.setAttribute("aria-hidden",!0),se.#r(e,t),e}#a(t,e){const i=se._svgFactory.createElement("clipPath");t.append(i);const n=`clip_${e}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const r=se._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),n}highlight(t,e,i,n=!1){const r=this.#e++,a=this.#s(t.box);a.classList.add("highlight"),t.free&&a.classList.add("free");const o=se._svgFactory.createElement("defs");a.append(o);const l=se._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",h),l.setAttribute("d",t.toSVGPath()),n&&this.#n.set(r,l);const c=this.#a(o,h),u=se._svgFactory.createElement("use");return a.append(u),a.setAttribute("fill",e),a.setAttribute("fill-opacity",i),u.setAttribute("href",`#${h}`),this.#i.set(r,a),{id:r,clipPathId:`url(#${c})`}}highlightOutline(t){const e=this.#e++,i=this.#s(t.box);i.classList.add("highlightOutline");const n=se._svgFactory.createElement("defs");i.append(n);const r=se._svgFactory.createElement("path");n.append(r);const a=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",a),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(t.free){i.classList.add("free");const c=se._svgFactory.createElement("mask");n.append(c),o=`mask_p${this.pageIndex}_${e}`,c.setAttribute("id",o),c.setAttribute("maskUnits","objectBoundingBox");const u=se._svgFactory.createElement("rect");c.append(u),u.setAttribute("width","1"),u.setAttribute("height","1"),u.setAttribute("fill","white");const d=se._svgFactory.createElement("use");c.append(d),d.setAttribute("href",`#${a}`),d.setAttribute("stroke","none"),d.setAttribute("fill","black"),d.setAttribute("fill-rule","nonzero"),d.classList.add("mask")}const l=se._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const h=l.cloneNode();return i.append(h),l.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.#i.set(e,i),e}finalizeLine(t,e){const i=this.#n.get(t);this.#n.delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){this.#i.get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),this.#n.delete(t)}updatePath(t,e){this.#n.get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){se.#r(this.#i.get(t),e)}show(t,e){this.#i.get(t).classList.toggle("hidden",!e)}rotate(t,e){this.#i.get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){this.#i.get(t).setAttribute("fill",e)}changeOpacity(t,e){this.#i.get(t).setAttribute("fill-opacity",e)}addClass(t,e){this.#i.get(t).classList.add(e)}removeClass(t,e){this.#i.get(t).classList.remove(e)}remove(t){this.#t!==null&&(this.#i.get(t).remove(),this.#i.delete(t))}destroy(){this.#t=null;for(const t of this.#i.values())t.remove();this.#i.clear()}}Y.AbortException;Y.AnnotationEditorLayer;Y.AnnotationEditorParamsType;Y.AnnotationEditorType;Y.AnnotationEditorUIManager;Y.AnnotationLayer;Y.AnnotationMode;Y.CMapCompressionType;Y.ColorPicker;Y.DOMSVGFactory;Y.DrawLayer;Y.FeatureTest;var Gx=Y.GlobalWorkerOptions;Y.ImageKind;Y.InvalidPDFException;Y.MissingPDFException;Y.OPS;Y.Outliner;Y.PDFDataRangeTransport;Y.PDFDateString;Y.PDFWorker;Y.PasswordResponses;Y.PermissionFlag;Y.PixelsPerInch;Y.RenderingCancelledException;Y.TextLayer;Y.UnexpectedResponseException;Y.Util;Y.VerbosityLevel;Y.XfaLayer;Y.build;Y.createValidAbsoluteUrl;Y.fetchData;Y.getDocument;Y.getFilenameFromUrl;Y.getPdfFilenameFromUrl;Y.getXfaPageViewport;Y.isDataScheme;Y.isPdfFile;Y.noContextMenu;Y.normalizeUnicode;Y.renderTextLayer;Y.setLayerDimensions;Y.shadow;Y.updateTextLayer;var Yx=Y.version;Gx.workerSrc=`//unpkg.com/pdfjs-dist@${Yx}/build/pdf.worker.min.mjs`;const Vx=s=>D.jsxs("div",{style:{color:"black"},children:["Loading ",Math.floor(s.loaded/s.total*100),"%"]}),Xx=s=>D.jsx("div",{style:{color:"black"},children:s.message}),qx=({document:s,beforeLoad:t=Vx,onError:e=Xx,onProgress:i,children:n})=>{const[r,a]=N.useState(null),[o,l]=N.useState(null),[h,c]=N.useState(null),[u,d]=N.useState(""),f=N.useCallback(async()=>{if(!(!s&&!h&&!u)){l(null);try{const g=GE(h?{data:h}:u||s);i&&(g.onProgress=i);const v=await g.promise;a(v)}catch(A){l(A),e(A)}}},[s,h,u,i,e]);N.useEffect(()=>{f()},[s,h,u,f]);const p=A=>{const g=A.target.files?.[0];if(g){const v=new FileReader;v.onload=y=>{const b=y.target?.result;b instanceof ArrayBuffer&&(c(new Uint8Array(b)),d(""))},v.readAsArrayBuffer(g)}},m=A=>{const g=A.target.value.trim();d(g),c(null)};return D.jsxs("div",{children:[D.jsx("input",{type:"file",accept:"application/pdf",onChange:p}),D.jsx("input",{type:"text",placeholder:"Enter DOI or PDF URL",value:u,onChange:m,style:{marginLeft:"10px"}}),D.jsx("div",{style:{marginTop:"20px"},children:o?e(o):r?n(r):t({loaded:0,total:100})})]})},Kx=({addHighlight:s})=>{const[t,e]=N.useState(!0),i=N.useRef(null),{getCurrentSelection:n,removeGhostHighlight:r,setTip:a,updateTipPosition:o}=Bo();return N.useLayoutEffect(()=>{o()},[t]),D.jsx("div",{className:"Tip",children:t?D.jsx("button",{className:"Tip__compact",onClick:()=>{e(!1),i.current=n(),i.current.makeGhostHighlight()},children:"Add highlight"}):D.jsx(Ap,{placeHolder:"Your comment...",onSubmit:l=>{s({content:i.current.content,type:i.current.type,position:i.current.position},l),r(),a(null)}})})},Qx=({highlight:s})=>s.comment?D.jsx("div",{className:"Highlight__popup",children:s.comment}):D.jsx("div",{className:"Highlight__popup",children:"Comment has no Text"}),Zx=({editHighlight:s,onContextMenu:t})=>{const{highlight:e,viewportToScaled:i,screenshot:n,isScrolledTo:r,highlightBindings:a}=pb(),{toggleEditInProgress:o}=Bo(),l=e.type==="text"?D.jsx(Tb,{isScrolledTo:r,highlight:e,onContextMenu:c=>t&&t(c,e)}):D.jsx(Iw,{isScrolledTo:r,highlight:e,onChange:c=>{const u={position:{boundingRect:i(c),rects:[]},content:{image:n(c)}};s(e.id,u),o(!1)},bounds:a.textLayer,onContextMenu:c=>t&&t(c,e),onEditStart:()=>o(!0)}),h={position:e.position,content:D.jsx(Qx,{highlight:e})};return D.jsx(Rb,{highlightTip:h,children:l},e.id)},Jx=s=>{document.location.hash=`highlight-${s.id}`},$x=({highlights:s,toggleDocument:t,resetHighlights:e})=>D.jsxs("div",{className:"sidebar",style:{width:"25vw",maxWidth:"500px"},children:[D.jsxs("div",{className:"description",style:{padding:"1rem"},children:[D.jsx("h2",{style:{marginBottom:"1rem"},children:"Project-0  v1.0"}),D.jsx("p",{children:D.jsx("small",{children:"To create an area highlight hold ⌥ Option key (Alt), then click and drag."})})]}),s&&D.jsx("ul",{className:"sidebar__highlights",children:s.map((i,n)=>D.jsxs("li",{className:"sidebar__highlight",onClick:()=>{Jx(i)},children:[D.jsxs("div",{children:[D.jsx("strong",{children:i.comment}),i.content.text&&D.jsx("blockquote",{style:{marginTop:"0.5rem"},children:`${i.content.text.slice(0,90).trim()}…`}),i.content.image&&D.jsx("div",{className:"highlight__image__container",style:{marginTop:"0.5rem"},children:D.jsx("img",{src:i.content.image,alt:"Screenshot",className:"highlight__image"})})]}),D.jsxs("div",{className:"highlight__location",children:["Page ",i.position.boundingRect.pageNumber]})]},n))}),D.jsx("div",{style:{padding:"0.5rem"},children:D.jsx("button",{onClick:t,className:"sidebar__toggle",children:"Toggle PDF document"})}),s&&s.length>0&&D.jsx("div",{style:{padding:"0.5rem"},children:D.jsx("button",{onClick:e,className:"sidebar__reset",children:"Reset highlights"})})]}),tC=({setPdfScaleValue:s,toggleHighlightPen:t})=>{const[e,i]=N.useState(null),[n,r]=N.useState(!1),a=()=>{e?e<4&&(s(e+.1),i(e+.1)):(s(1),i(1))},o=()=>{e?e>.2&&(s(e-.1),i(e-.1)):(s(1),i(1))};return D.jsxs("div",{className:"Toolbar",children:[D.jsxs("div",{className:"ZoomControls",children:[D.jsx("button",{title:"Zoom in",onClick:a,children:"+"}),D.jsx("button",{title:"Zoom out",onClick:o,children:"-"}),e?`${(e*100).toFixed(0)}%`:"Auto"]}),D.jsx("button",{title:"Highlight",className:`HighlightButton ${n?"active":""}`,onClick:()=>{t(),r(!n)},children:"Toggle Highlights"})]})},eC={"https://arxiv.org/pdf/2203.11115":[{content:{text:"The analysis indicates that TS applications exhibit significantly better code quality and understandability than JS applications."},type:"text",position:{boundingRect:{x1:48.42552185058594,y1:353.2035827636719,x2:264.80804443359375,y2:372.0717468261719,width:551,height:713.0588235294117,pageNumber:1},rects:[{x1:57.39482116699219,y1:353.2035827636719,x2:264.80804443359375,y2:362.2035827636719,width:551,height:713.0588235294117,pageNumber:1},{x1:48.42552185058594,y1:363.0717468261719,x2:248.294189453125,y2:372.0717468261719,width:551,height:713.0588235294117,pageNumber:1}]},comment:"Better code!",id:"32604966305545835"},{type:"area",content:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcAAAACwCAYAAACYcL4GAAAAAXNSR0IArs4c6QAAIABJREFUeF7snQdUVEcbhh+RIGJXFBUJQWJBxF4RFbFhQwUVK8UutliwB8Tee++ADXvBhtiwYRcREZUgwYYNgogrrsv/7y4KKLKLYiyZe07OId4p3zwze9/7zcydL1tSUlIS4hIEBAFBQBAQBP5jBLIJAfyP9bhoriAgCAgCgoCCgBBAMRAEAUFAEBAE/pMEhAD+J7tdNFoQEAQEAUFACKAYA4KAICAICAL/SQJCAP+T3S4aLQgIAoKAICAEUIwBQUAQEAQEgf8kAfUFUP6xRLasYyR5ANNXQUw0dBwFtQyyruysLkmaEENQUCj5fyuPcbG8WVL8k1A/1pxLYKRTmywp76sUcmojRBaFqgkQkAi9bVOqeRABr5P/V1MHDPS+igk/ZKFrp4J5byhTKAvMl8LkP6D3HPAZD83HQMncWVCuKEIQEARUCmBMVDALJo9Ds+0cxjY1znJiw9tBdXewN1O/6E3zILYS9LNUP8/npoy+to3Of2ygg4MNYQd3oGHpyqy+9d4XFxmwmvnnCjDHNZU4qFHZs1sBrDsTyzAnGzVSf6Mkm4bC2cpg+xesfg3eU1IM2e8Jq9YBtaFrI7C1+kZGfsVq5w2FSgPB0ihzlaybDeZOUDorBFAG9XOC50sYVgFGnYLqBTNnj0gtCAgC6RLIWACT4rlyPoINC13QdvRiUuNMPgjUgP4pAYy+DQcDwbA8WFZOKSjoNMwYDyYOYFUSqtQBbTXqiboVxPO4l1yPiseqigFHz4TSqHUb9HQ0iAg5jzSfMaVKKB9YESFn0ChaBcNC2szv14zoVguY0rwUkEBMjAYFCihrlOfzWzEZ3/gmjO5eGSOzGhTLq6m49zAiBEnOYjwPPsX1p4k0amaDfn6t9/ciHvxDrsIGVCyd4vpKnkVx7ZEUfR7if/ke9Zq1xEhX533roq4dZaPvJWo3a4P0/kW0TawxNy6QYeuT3kpJfCNNkyZbdk20flHameG1fwxctYbmUeClCXPs0yb36Ak4gHvKC4GqIpFK4Mh+ePwK6lmDYbJI3AqCuJcQFQ9VDOBMKLRuAzoaKoskLhr8/EGWB6ytIa+Ss1pXUABciwDjamBumpxFAqcvw/ju4LAASupBnYrJ96Rw/jKUMoTDByG3MTSzSJ4dSc4nT2lWA5LHgiJjyHkobAyBR0CzBDQ3TzEvKRG2r4X7WmBjAf7B0MMW3jW9hSVsPg6D6sPEE1BCrZaJRIKAIKCCgEoPUJ7fo2dD3tiv+tcEMGwvuGyGOWPAZyrkag5jOytbst8b5s6Ays5gWhjsuoE6E0LyNpzRaYn5s13sS6hDf7NwzhUewpKBtbjtOxWXvXk5vLw/yJ7RulYL5p0IxCgnhPnOxX68H1OWLqF59bQvABeO7mDDnFmEFm9G57q/YtG8E8aFlA9fn6F2uO6PwMZpIDbGCRyP1GfKcOV0Z/iFo/juWsie6EocWeX+vouiTnhQobMnzr2HUM8glnHLIwk8t0rRvuhL6+k6/Spz3Dszp3cH8jgswL1zIwrlyfhh/yIyHP+dd9IMgzymv9OosRrefEIMvM0FWonwSgPyp4ixosDPEUCfhRBfBH7LA2PHg5c/lM4LPRuCTkt4tgsS6oBZOBQeAgNrqf4RTx8BZZvA2wiY5gsnd0MO1dnYOAl2J8D4LrB2AtQdD61MgHjw3g4zBoDzIihcGLo1Ty4wHkyNQLcSDHaFC1ug2xwoJ58aT863YAysCQOzVCOzXTn4xxj69YENbtBiNXRPfrPz6AQFukHFZ9B5NuzbDhWMUwQwOhr09OBJNBTSS/l3uUUv/maKwxYsp/bAvGzGL0NqEBFJBIH/FIHvUgB7N4QGE6BWcZBGgcUMiPZN6ZeeVuDgBfUy8SYsF0C6raPBcQ92lR6Is6Y382/YsEruvbx5SNMqrVh09iIFw1bTcUk8h1cPfl/h/esBzJ01mzORGkxZugLLsoXf35ML3YXa45nVPu0crvzfV720UopqOpdc7Jy8+UgAq0y4z8MjK9AkDrtytRgfeAOzvHB0Und2/dqfBQ5VOTq1O7sMBrKgayrX+FsM288RQLmdMikkSmFCLygxCFyqKwWw2zo47gGlB4KmN9ywUd+7lEpB/l+HCjDnOvyuhhe4dhxsvA+z3KCCIQplSb3ObZUNvJI+8LjkApgHlj8Ai2LpU5eLnfv5jwWw01awM1W2cT2gePmRT3GWgx03oZD870qw8xqoO8uZ9Jorh65Som41CufK/i1GgahTEPhhCXyXAih/RujZgN67uc3fwN0xhbFcawYfAovi6nNPLYB7yg3GEc8UAQQ2jbPjguFISl2aiKbTKnrV+nhTx5OQPdTttY1rZ7x493id0qshsc0WMMP23fSZ0qZPCeM7iz8lgE0XvuDGtlkKb8LOtAbjzyoFMP5eIE3a/4GlVT3OnQtniY8PZQqpnsb85/Z1tnoGpwFVoIoZdrbl1Yf3qZSZFkAZzBgEtzVAPt18fDdYzlOKXGoBLCd/+fBUTwBfPYShI0CzGOjmAp9F4BORVnw+2VIZHNoK23bApfuwdAPUlAuh/IoHMz049BLSjDO5ANaAszfgU/uhPiWAAw9BfQM44QHe7wQQWOcGPpFgJAGtejAv/ZemL+8wUYIgIAikJvBdCqBHBygyGPrVUZoqkYB2qoW+rjXBYRM0KQmS16CtxnSXKgGURB3F3NaDfHl02eG/nQLJ6y9n/I5S3spKsZwjeXiKKrYruHo2RQAX929BWM0JCs8sUSJBK9nQrBbA2Oue9FmUwJxxNugV10dTjaWxrz7UMyuAD06B7QoI9FKa5tIM9EZ/mQDuGgH+prDIEd7GgbkxrFJTAK+FQIXkF5cdI+BAflg5JhlbItTMAZveQEngtQbkkEP/CgLo1h4sp4BZYSicP9PdFvP0KXkK6aKZhbu0M22EyCAI/IAEVArgmQNrGTt8LK9NOzN/ymiq/54VO9vgeSgMmQ6XjkPhSvBrTfAcrSQYFwmOfaGYCSTeB5NOMCzV1wJbpoObD5gYQHs36FxVNXlVAiifihpnV56IajPYMLrl+wJ9Fw1nwuZgalUpQ+iVa3T1WI2jVcr6WeTx5TTsNZeqVUpRqv5gJrk0UuTNSAB3rZ7Khu0+nL4DjW17sHzaQMVGHrlX+CkPMCFsPxbtZ1OrpgHPEl5BrmqsXOZK3m8ihBIY1QcOngWMoVI9WJfceRl1hSwGWreG38xB9gROn4W2y75MAB9dATv5Tk1LePgATu6FHeoIoAxmu8CRZ1CuGASGwrL1UD6V5z+9p9KbNNACtzVQVT7lmYEAvoqCfuPg+B6o1BycxkEb+ZoiIPcKP+UBTnOGC4ko3mqS4qDNMOis5saif24xwsqHmhO7Ytc86zepqf5liRSCwI9LQKUAfsumJUpAQxM005npk8q/QZPfy4JlD4lEovAwBzWxxHZtAJb6H6wfvZUieSNFK4c2Gum8ZUulicjQQCs9Q7MIoEeHctSccg3r35UwXKzL0XnNjUxNA2eRKV9ejNyl19RSPvCz4kqSwetEyKGd+W9V30pBvks29RRDaptey23VhiwYZ+k29Z9Q6DAFDsnnROW7nc5A13VweIXaZA54LEG7bUcaVFB34VDtokVCQeCnJvBdC+C/Q17GBJfWXLkvIb95D9aO7PjvVJvJWi7vWMhEnwvoFyuITBJPQRNrJgxu936nfCaLE8m/GwLx4NoPHuSCwjrwIhb6uEONd2uRGRsqjb2Dp/cDnAfWE2Phu+lTYciPQkAI4I/SU8JOQUAQEAQEgSwlIAQwS3GKwgQBQUAQEAR+FAJCAH+UnhJ2CgKCgCAgCGQpASGAWYpTFCYICAKCgCDwoxAQAvij9JSwUxAQBAQBQSBLCaglgFL59wia2lm2a/2LW/AmgeCga2gUNMS05CeOo8pkJfFR55m99y5jXTrIv674zi8JwRfDMalmmspWGZGhQTynIBVNDLN8R+Cli2t5XLgFzQyLfMBGwqq9S7FpOoQiapw+9iVgYx/fIfTpS0xLmpJXO2t6aVfATAqU7EH9El/5E4LX9xm9cQPDnEagKz5Y/5JhoCKvhEWbBtHAegWm4mjUr8j55yg6YwF8/YSls9ZhUNUUv+WLqdx3Ac5fISRSZlAmPg6mVac/aNKxK69uHiQkmxWbZvV5X8Tz4E2M2BrLqgn9MlMs8fcuM2/vX4zq1+67F8Dza8ZQc3YYL0K2Kw8CT4rHo3cXYkrUQzfmDH5xtfBf4/r+uLZMgUgvsfQpNpNtmTjkOBU/+PL+aZg3Lf3/4kx/9ywX3dSmbPN1YeMzfWxK5GbHxQO4dttG3eIph00v8GxOxcZ7qF88c8K459R8Chh1o67+VxbAlyGYjnPl4Nz9fMehL794qHz7AuJpP06PQQNfUleEqPz23fGdW5ChAEYHrqSzVzxHlgwh4vA4mi5J4NbOOVnSJHm4oMcxL7h+5ylWdU046X+J2ja2GOTTzDA8UeACFxY+bMmGqcrT+Z/FxFCogPJVTx7y6NTOGay4bMLkQVYYlK2CQSHlGWpxjyKIeqWN9tNgTt18QrUGzTEtocz3LOo2YX8/QTN/MWrIT/pPvqRxDzkfHk+pfPHsP32DGlatMNFPOQAy5u9g1m3ai2GtFhjLonimbYJVbRVRFmRveZ34Jg3DbBqaaGmp9+CWRF+kUx93gm5rc+2dAAL3Hz5Ev5jcG5bSu2FpHLz/yrKP5EMDpzIsoij7Ozl/0PcyJi6vR7G6O+hZ7kPPMJ1h8jaOC2GRSF7dgYJVyP3Pde5rlqRleRPFCSgXgkIxNqlJQfnRdtI4zt6IpHIFM7R5THPXdsyfHEApLUiIi0UjT3605Z7U6+ecDQvGfUs/HGzWYpy/ELVL//6uBwm5EUSxEgacunaYxBwlsalWGy2FByYh6FoQ/48FwW/GVSmWK4V/xF+X0CxgxK2wY8RkL0GbajVTjhlLSuRYoDeXXmrR2qQ2l26GYN2gNflVfdOfLIDrXacSfOs6ZqWaUllfNwXSmzgOXzrMk7c6NKnSGN2cqcZDkpTgG8e48iSOqiYNMNVLEevEF4/wDTqCVt4KWJuZKe3MiHNyjZHhpzkRdZcyRg2paVg0xQ55XdePcOXZU0oZ1qe2kfonzj++dwX/OzfIna8s1pWqJnPO+HEhffmIC/fjKZX7Jftv3aR6uWaYFFH+xp5H3+EZBSklb6+8TSGRmCnGg1TRr/Fvn/MkWwlMcjziUowWttXroJlNKYA9HUL458FpChU3p2HpVCfkJCVy4ephQl8kUrdCU4xSRTi5fescBYqW4nzwYeKzF6Fl9QbofK0DELLkKSoK+VICak2Byis5tbA3s580YOeETl9apyK//Kiw2Q8q4Fz4Mguv6zGpDWx9asOmiS0zDE/07KYvDe3HM3DqEhyb1Uhz/mHQqf1sXTGXEy8q09PWlEpWdlTUV3oJwVuH02KYL7VtnOnRypgdxyNZNnWY4t79oFPs37eZuZe1kw+iVjYxPtiHPA2H0b/nQJpU1GLc5OMcubybwpqQ+PgiLbrMZOJsN/zm9eJsLkfWeHShWMGMgzMlPvmbfRtC0zDUNv6VZoowPKouCW5OnWg5egxOttM4n0oA3+eURNPMsgUL/C9SKpUpxxeu5uLr3xk+vL6qStLeT4rHebo1Ts7+1H9/OnkynweHsVq/j4AR89SKyYhCBOxw7TyTJZt6Y2ezkRNH/mTuuFOUyQFTV1qQr/Y2XMoX5XnYBlqefsyZ7kMUoj5vbXP8aMBi28EY5UsVlinhAV7n9zJrz2KcWo1EN3dJHKrXTm6D/GFoSkQuMwZYDiEhcjvFa02jzW/K0EX7j+9myWl3HDpepYNxCizXxVU4EFuS4VbdCbkyCa3yS5lcTxkPcP12R4JydaZz8efYe89nfu9NNDQ2QkstAWxEvdrjaPdrQUbum8pQp6N0NtYF6XP6z++KicVYqmveYdihY+wasQ5duQYmxeO+uA1P9bvR1iA/S44sZrDjHuoX1SY++gzNV0+gb0NXHt1Zi+/bOvg79ENDBeezJyYwNVyLyQ1asGL3YEwarsPF7FdF+zbudGLP6wa41yjPukN/Usd6GzZGH4TBSm8EvbzDyF0baGJqTcTtlfi+rcuujqlOsP/EqIsP306+5aNwqdiXxoZauPmfxP/PLehmh5MHXfCiCyut66AcO+88aHm/GlDeagtXTjqgV2EO3J1NK9tTtDSUKgQwxnA8I6qUY7X/WMrX8+LP2hWU42hNRx7qO9L1Vx0Gb5/M3AF+VMyvfNnoNT0XF143pKdVf3I/PUzi78PpXT7Vy0Hmfjki9Q9AQC0BTHgYzIApW5k8fTzF1AlQqkbD352VKY/KMDe4OR4NT/LH7rJslwddVRGeKO5+CIvnzMbn7F+MmLKczpZl3tcY4NETLxyUYY5SXQoBXBHPrcPL0n1Yy8WuhseFjwWw8zZeBG9VTDX2bJANB+8kRRimyKOTGLDTgL0LHYk8Op1Bu4qze0E3NVr++Ukuerqx421LprTLSbna4z8WQGkcE53aI2vigbtD2jh6T27d5F5ifipn8gd9P3g5nc7HE9BD+bKQ+lri3ZwXJosZWU3NMyjlD7Gpkzk3aQXO42yZNcGPSTOrMGjAZcxywaPrK7E5G8v5Xq6s2dKO+DLzGFQx2QNJknIycDWzT25Ao2hrVnQchu77Ncd7NBrSm7UfTS8qvYEGHcMVopreJRe76tYBHwkglTcw09yEqKuTcb4G/g5jFaGLekytgku/q1TNL/+7FgNczlM5nxp9qniAD2H/bD8MNSDo5AjG3Tdmb8c+3A9aSPuzz9jQ2klR0JwdXTG12kVfE12ehq6m0dG7XO4/UTHFHBcXS+68+RV/L9lgQ4TRdIWdcqHsNKEGA1yuUUcnLAPOcbR3s6KnwzZK54LYv3bTLzSewJ7y9sG6rV3ZGGfCzGa9qFhUFzRUKXvatsv3C0jjQqi4ZDHBbmtUTsMrBNBrJ/+MX0/ubNBrWi4cnJXTlxkLYD3cRl/Ga10VmtteJOBwS0zqbKGDMYo+d+n/ggbFNIi9vYkyvheIHjIH6ePTlFm+lIM9JymWOU4HjOFcEVcWNlCGFZML4K/1L/FnrbJqdKhI8jMQUCmAkugQRi06ztix/SisnbkfQ0aAUgugPC6fu+WxFAFUMzyR5GkoVnWc8b4WiHFyRIitw9pzWG8wK0ZYfCSA489WVwpsOtcnBXDwYZKOrlLk6GmVDQcvpQASH4VdE3v0La2IOHeW/ou2YG2i+qDw1w9u4b3kUhoLcpYtRZeu1VSMp6e0KFIBneaN0XkTy54DQTR3/ZMNo3so872NY2LX1sisp+LuqEYQWbVGr5SR8y2pbuNLO6O0UQqkzy9hvng+fmO9VE//vasrjQB2YM6k/UyYniKAyGJp59GIkQN2M3F5f1aN2kWRdGaG9+xyYPsv3fBs0VhZ8stQzP505eAcX/TTtEsugMoHpVxgMyOAuevswb1SiQ8EEM6dnMSQK39TV1dCuLQOmx36qLdm/MEaoFxY2557zcU+Ewg+OYZOF/+mvUnKLIBlpYHUL5pXcW/cA1N223f5yHy5eJs18sehjHJKdNj/PdeacjEvGplKAD/kLH9ZaErFpp3fR3MqXKgWLtUbKsuXSTgU6MmO4H1ceq7F0u7rqK6nOuT0w7uHGbV7A0VLGqPDM5ace0z4pI0qg1UrBHDbEd6OXPJehBycMieANu0uc/RQ8zQC+H4NMPo02Zet5KX7OqTh2zHeuDilrUDl37th87vS+5UL4Lu61fp5iEQ/PIGMBVASTR/ncYxfvVzh+Xn6eOJor3paQx0qqgTwU+GJIs74gakVRvkU8YloXKUty66kCOD+0V3ZrOGA1+QmJL6WKA6wll9yDzBLBTA2hIZ9FuM1dzQFCuuj80vWvRyo5BcX/JEHuG2CPad0+zHPxTLd7G9exvEKbfLmUn+rZmz4Vhrtu0bgoIkfPeQ37+hMkK4rU+tlIiivKgEEjh1yweP6Y3R/s2ebXXtlW5LiOXYpiAbVlPGxTvsPYsXrVikCmBhOrZG92DDzKMZJEhKzaydPSWa9AHrt6EqC0Xha/aaLfoFMhC5SCKAjWyZdxDQXHNjbnS0anVjbojHxEdsx33GW80NnKdY1Ja8T0c6h7Kf4ewcwW7mSc2N2UCQHxMY+JW9+XYUH6Lu3O+vf2rG5TQuQPKDRlJbMH3kZU1J72h8KYCL9ZpnTrP1RbAzzKgRP8lYb7V+UqIPvBGH2u3K6d8eOrhzK1Y/lTZPjkmUwMEcuq4VpfV8cTHSJ+/sQpVZ4frEAXjkxAo/oiuzq0IW4u/swmr+YqwovP6Vf5R5gegJo7xxNO+Pc3L4wE8dgTeVU+stQqkx3Zf84X4pqgfS1BA35AffJ7RICqPLJ89MlyFAAg7eOwvKPbVQzNYa3CeQ2bsf2FSmR0r+EhioB/FR4oqC9Cxk0wYcytasQffMKVTtPxM0p5aH/7NoWatq6UbWyCfo12jPHtbNKAQzctJCFPjvYf/UJNpZdmLtutCIgt2IN8JMe4G2a1rXDsHYtXj17QTx5mLNiGUb5/gUh/FAAY4L4tWgzanZqjGK1RpaIo9tqrH5PWbvx/XMBxx8UY+rq9iQ/61R239SVVhSovZ6+5T+IPJxwB4sZg/AZvR99NWIxvq9IDQGUxV2ngkczpg0JpWWJZM8j4R6unn0JfluUMgVkBD+Elb1XYfx+R6qUWSss2fyiBCXeJuLeYwuVFcGCMxBAxWcJHuwL34euXlO61h1J90rKqXS5Z/UpD3D/nr7MuZOIQTYNXr2Jo1rdwQyvrVog5GtY9Wb1oVTh8mjpxHHlSW58XJZhmEs+XmRs3vMHXpEJmBXPTWhUDla5TH//WYnfUXdGnbpA9d+KE3Jfwsp+6zCRr1slPGDgiu481S3Pi3sXsag3k1Hm1ZXrZe+nmj/2tB9HHqb75vkYl6pCbNR16jacQ8/yv4EsjjmeffFPyI1pYS3ORcSytNcqTAumCsb5iVFz5dxcBp+8QP0yv/Hg7l18o/liAZS9vIvNXCcMy5kT//gRp8IecVwdAfSwIG/xKmjraHHur79Z3GszNYsqN9acC5zH6JPnqV7qV0LvPGBy91WYFVS+bAgBVPlI+OkSqJwC/RYtVhmeKEmmeEvW/EU73XBIMqkUaRJo/aLezsrPaeMWd3uumU9hUvJnIav7NSW2yxqGWaSdhPucsr9Gnpe3zjN73T+4TUmeNlRZiZSTF89SvWpd5W7LVJf05QNOR8VSv2w5laWon0DepzJ4cQGrtRs47rroo/UjedgpqUwD7U/smJV7/Jpa6YesUt+ODFLGh1F+4Uyujl6l9IifnaP8Gm+uuy5Sv3j52E2UvvfwUmeUvZWS+FaGttbHXrrinlSWbr7ERAka2bXQzJ6Jly+FHcm/oQ+yZWRHRg1V5uOT/aM+pFQpM+ClqrxPjgdZcnizrzlWVBkn7n8XBL5DAfwxwhNFXdrBiCk+FCpWDI23EhILmjBjwmDyfpfbppPwW7aZ0u1s+U03My7bvzdGZc+v0GblRCRvE+nefhkdS6m//f5fszIpnkWb/+DCMx0K6ukQHx1LU+sxtEteQ/rX7BAVCQKCQJYQ+A4FMEvaJQoRBAQBQUAQEAQyJCAEUAwQQUAQEAQEgf8kASGA/8luF40WBAQBQUAQEAIoxoAgIAgIAoLAf5KAEMD/ZLeLRgsCgoAgIAioJYCKD0bFlmExWgQBQUAQEAR+IgIZCqDkcSjTFvhSrZYxi+ctx91zJ7X01TgY9ycCJJoiCAgCgoAg8HMSyFAAQ3Yu5ryuDc51DZjqVBcNh/WMtDL8OUmIVgkCgoAgIAj8pwiongKVSTm/bzlep+KZOGkkBdQ9R+s/hVE0VhAQBAQBQeBHI6BSAJ/duYDvqctsWbmaRkNXM8TO7Edro7BXEBAEBAFBQBD4iIBKAXyXQx4R3nz2cx4eVIYtEZcgIAgIAoKAIPAjE8hYAJNkyLJpKMKFhGwfTt9D+pxcIY/QLS5BQBAQBAQBQeDHJpChAAZtm87QLdG4OlZn/8Er9Bs7HpOiYhfoj93lwnpBQBAQBAQBOQGVU6Dy0EKKMCza6gdSFWgFAUFAEBAEBIHvnYBKAfzeGyDsEwQEAUFAEBAEPoeAEMDPoSbyCAKCgCAgCPzwBIQA/vBdKBogCAgCgoAg8DkEhAB+DjWRRxAQBAQBQeCHJyAE8IfvQtEAQUAQEAQEgc8hIATwc6iJPIKAICAICAI/PAG1BVD+OQSamoqP4rPikjyA6asgJho6joJaBllR6tcpIzHuIZeDIyhWugKGhXMnVyJh4ag+WA3zxLTwp+t9GLSfdZcTGe3c5usY99VLlRIU4MfVyCc0auOIfh55hfHs996OpJAx1k0s0NH86kaICgQBQUAQyHICagmgLC6S1rUGMS9oN8ZZfBj28HZQ3R3sM3HE6KZ5EFsJ+llmOY+PCow6502XEdto0rQmJ3fuwHaKD30aGytEwM40D4MPJVGvxKfteHYrgHVnYhnmZPPlxr6KxLHbfOZum0PBLy9NrRI2TupEAM1xaGBMmSrmFMopzyYh6PRlom4eZrp/do5tGofQQLVwikSCgCDwHRFQQwAT2TRvGvMXHGTTrTMYZfGT7lMCGH0bDgaCYXmwrJxCLOg0zBgPJg5gVRKq1AFtNYBG3QriedxLrkfFY1XFgKNnQmnUug16OhpEhJxHms+YUiUKKUqKCDmDRtEqGBYCR0tzem06g0UxbeIj/KjSdjWXr/qQO1kAe234i7jgAAqWs6BRVbkwKi9p3EPOB0co/s5V2ICKpVO5uEmJXPA/yI2nidRr3Bwj3VSn6yRJCT7rz+XwOKo1aIhpsk1xjyK4fs6Pph6+HFo4mnzFjTA1Kqay5UlvpSS+kaZJly27Jlq/qNeRPa2y4eD1KZGPomE2J9YlHeE7duCMRa27AAAgAElEQVRVMhIJBAFB4L9JQKUAXt61msdlG7HSrhOzgv4dAQzbCy6bYc4Y8JkKuZrD2M7KDtrvDXNnQGVnFFOPdt3g3aRkRl3o0bMhZ3RaYv5sF/sS6tDfLJxzhYewZGAtbvtOxWVvXg4v7w+yZ7Su1YJ5JwIxenWF323mc/PUumQPR0LXapUYeeQmZvmUHmCsxWRGtivPylEjMBvqg1uXigozEp+Fs2n/KWJv7mJPdCWOrHJ/J43M7duWh6Y96FZDh0FDxjNvTwAVdeWCFI9be2uemjljW7MAi93nMXiLH5a/aiOPyrFjxwbGbA5l1pDOGJS1wKp6iuB+qu0vIsPx33knze08pr/TSOHFqr56NihAz80x1NJLL+19GudxYM2LDwUwEZ9hS0is3oRuHcuprkSkEAQEAUHgGxBQERH+MvN9/2Zk90bYmTb51wSwd0NoMAFqFQdpFFjMgGjfFDo9rcDBiwynHj9kKRdAuq2jwXEPdpUeiLOmN/Nv2LDKvR68eUjTKq1YdPYiBcNW03FJPIdXD4Z7AWRz8CLp6Kr3xfW0yoGD92vq6SsFsP/+t1gZahB7xZtS487xZN+iNFVHnfDAyZv3Aii9F0Bpu4Uc2jxDIaqnZg/nXPkxLOpblSfnl9NwegRXt09TrLXGxcSSu0D+9+uu8cE+1PC4wI1ts77+UHn1DD/fzSz3j2HD8nGf9LJXj+1CWPG2DOnWhmJ5U7zKuxcv86ZwSUoZ5v/6tooaBAFBQBD4DAIZCqD38O6c1TREL+drfBavp0nfIQxxHYxhnqzaCgPpTYHamYKeDei9m9v8DdwdU1rX3gwGHwKL4uq3OLUA7ik3GEc8UwQQ2DTOjguGIyl1aSKaTqvoJXd5Xt+mRrUR+AXvRPkYj6VtmUbMuHaRUjk+WAOUi2Xrpby6tCmNWHwogHIRM7JfwAD7Ju+Nr1zfCRtLQ4K3DmdMgBl7F6ZqbKom3g+YQrNFsVzbMkPthv9z+zpbPYPTpC9QxQw72/IZl/HqCRs8F7LjghYbVn9aADdMcubS23oMGdINg1QCqLaBIqEgIAgIAt+IgMopUKVd8of9v+cBenSAIoOhXx1l7RIJaKda6OtaExw2QZOSIHkN2jlU01MlgJKoo5jbepAvjy47/LdTQKHxMtzsalHYxYeBDY2IvuBJw/FBXN03B83kNcCOPi9oXz43t/dNpZuPJoFerhl6gLwIoVKtPzhw6TDFtEH6SoJGTm2Flxd/25fyNks5d2WfQvxjnj4hn27h9x7g0/OLqTExjL/2LkAiSfwXDiiX4mRRgWH7bmCWLz3Gz2lRoi1L/j6B4QfvRAn/PIOcBdHRyqa6c0QKQUAQEAS+AQE1BDCRo5sX0tdlGu1mb2K8cyOyIi7E81AYMh0uHYfCleDXmuA5WkkgLhIc+0IxE0i8DyadYFiqrwi2TAc3HzAxgPZu0LmqanKqBFAuduPsyhNRbQYbRrd8X2Bc5Hnad+yLjoER4X89Z8X23dQyzKt8KahXjXy/V0VbKweBlyNZsnVn8r0Uez70AOV3AjfNZLR3INXLGxJ64z5T1nhjVkRJ1W/lGEasPEeNCsW5flfC6s2bMFGsD8qrjKRZ5YZoVK4KOUrh4z1JrfVP1XQ+lSKe9mY1cDt9AzN5kz+64rAr14wZQac/2B2cyCqHmTwpVYfRf/4LW3U/v4EipyAgCPyHCaghgN+OTqIENDQVnx9+dElfg3wRTTP7l9snkUgUHuagJpbYrg3AUv9DiZcpPC6tHNpopOPQJEokaH5wL/JuOIa/GXPF+w/GB5mye1avtIa+lSJ5I0VLW+n9pb4yDEElkyJJ/LfCU8lwsf6dRjOvYpuOAsr+CaaS6SiO3tuH7gdtuHNgH0cfFKd3j1RbeL+8q0QJgoAgIAhkGYHvWgCzrJUZFiRjgktrrtyXkN+8B2tHdvzyal9HM6BtB8JzFIXsOsxZshSTIup8rPHlVWd1CZEXduC+YD9lKpjQrscwSik+QIzBc+YaLt0KoUxTF/q3q/aBgkvwmb2bxoPsKajG9HRW2yzKEwQEAUFAHQJCANWhJNIIAoKAICAI/HQEhAD+dF0qGiQICAKCgCCgDgEhgOpQEmkEAUFAEBAEfjoCQgB/ui4VDRIEBAFBQBBQh8BPJYBPHkSQo4ABeXNmfM5lYqIULS31zsJUB+LnppHEPeRacAR6aaJMfG5pX55PlpiAREMn3egO8QkJ5NZJdWbpl1eXqRKePr3LizegpZ0f/QLidJlMwVOR+Pmze2jlKU5uLfUOuJC+jiM4PBTtgsaYFE27/1f6JhHNX7LiQ6m0RsfG/D98TM4i5Nf+9r/brGQvyvq2BFQK4B5PD67cBd6+oWKrXrSpbvhtLUaK7/KprN13Hk3dMkyYNokyyTss5Qc3N57/AnuzT58OGn99B4WaLufu/UOoPkpaVVNl3D5/HJ1yVuircyBpquJibu3HpsdyHHq2JGCTHyM2bcWsgKr6vu59373dOazTi/kNa6etKOEOFjP+YNsYX4pm/bNNrUadvrCBS7f3skdqhr/DWLXyqEwkjeNkyB1qV6zyr0WziLhzGgrXxCjf9/Mgd11cBZt2l6mb7nmvaSnK4u5gvagvNrWciQz3oaalF+1KJb+QSG5RY3RL5o+9Re0Pv4tR2RkZJ/Dwao5JnS10MM7kD+0L6xXZf24CKgQwDrcRo2jbriuv3oChSRX0C37b7fxnVo7AI8yIvTP6Eek/l7YeYQSeXqb4IFwdAZR3p+ytFI3sWfEAek6rkk2YEyo/Gi1zA2WXqz2BFhOY1roMUokEjXS+B8xciV+Y+vU9LKd0Ze3I4xh94OgdO+SCl7Qta1s0/sJKvix71NXJOF8jywRQev8Y+j67iR4678sMUzu3FOfJxrj0i6T6vxXPSg3bMiOAoWfGMelxTTa0aQVSCRINbbRTOY7StzI0s6vnSaph2vskQgAzQ0ukVZdAxgL4+jZufxxnwtIPPuJWt/QM0vkvc2fl+SdoxtynWNlKxN25ipnTLAa2KEWApxunZdaMdjZXHEc2d2gnag/1pFYJDXrWr0Xf7Reppiv/kUnpaVWaDqtv0sRISyGASWZjyRZ3m/AnMmYuXk01xaktQEIEo4ZOJ/athIhcZhyaN+y9dU9u+jN68gYKFslFrGYpZk0ZTN7kD+yjrh5k4sy1vPpFE8lbA2YtnoJhXg0SIk4xdPpyfJcfo0GfluibWjFtYAe1yPhtWczKeYt5WsYay9+M6TuqP3rJAvrs9hmGjZ/Nm2yQy7gJc9z6kDvZljObZjJ7dwi8ekGTPm70aa6MPPHuio0M59azHNSokkGAwk9YeO6YK3P/MWdzm7ZpU0gf03ySLbOHBWCi5hmwspd/8+fmSUg0CvFI8ga3jpMoU0Ab3sYyZvFQHLuvoYz8jeVFKP12nWBxt76KwwDCrm9igt9+dPgFSSET5nZyRTeVx5meACbcO0b/0xGste+usHvOWhsqNN5MoxI68OYp0zaPJuzJL7yQxdHG2o2u5Usr0gWf82bBia3sinlMu+I1qFmjN041leejftJ++bF8z28ycusMtLWLEf5PNL1bT6KJYVHV/f78Ov02LMEvcg9VS9hSqEh1lnbupswni2fFTjdORMbwMnt2RrabQW19NRTyVTjOqzexeMA45O8s6/eOIqFEL3pXNkbOxdb3CE1yxXLm3l8UMnFkaRt75aELSRK8do3gQMQrtDR1iI4/zNgeN5QeYJKE9XvcOP0oOxLJE9q2cMPm918VZoaEbmfJycWce1OaVsYGtKvhimlBZQclPDjDsO0beSTJzTLXaaR2JuV98raQJddvX+O+VMr83mswLaDMF3lnH+MP7ENXS5PEIjWZ3qYL2orDJmTsOeiO14375NTQJObNNRxs/YUHqHqkiRSZIJCxAD4JZsQ0HzQ14zh5OZypqzZh8U5QMlFJekl9htpxoqwrzhobmRBUlSV2d/ljT1m2z7FHcS5n142cObEKreeXMbebz/Fjnmjzcfgdjx4NyN9zM4Nr6ykEsGjva0zqaEbQZjc6bYcbWyekrf7DCA+yGOxqNWOk73FqFNHGc0QL7ladgbu9KcRHYG5hz+IDx6lcTIfLO5aTULVTCoMXIZSv6caZG9tJ96SwTzB6Fh3F5rG9ud3kTwZXN0Df0ADF8subaFpVbcawvcexNMzN4oGNCSvnwYJ+FkRfWE2zUUEc91tA7peRNK7ZDI+jV7EolqIQFz034huWD/cpLcjUCZyyWGwn2vDn4KNUzp/WMw465YH7w7Lsam+vdo8v8rJGYrqU4VWNCL80nz43tPDv1k+Rf+PWjoQWH8fEOuUJDZzMvLh6LG9SV3Ev/vkjyFdUIfhePu2IMJqOe42UsE3pCWB8+HZqHrxESP8pijJ6Tc9F43bRyQ9KGQ+fPKVY4SLI/rmM2fxFXHFb8/4ov/tBM+l2NZGjjmmnVDOyf/+e7mzK1gnvVo2Jj75CkNSIOvrqrkk+oNGQ7qydcxCDVB10aJ8LK183ZJutHY//2k4j772ccltHXlWd+DIE06mTOTdpo2IGRO4lxRvNZGZdU+Rc8i0Zj//w0zTQA9vxVflz2G0q54MH15bjcFGCX/fByF7cxHxCVWYPf6kQwODTExl9ryS+9l2QPL+I5cJ5+LuvV5QfH/eY0ycnsO5VA6bUqUrhQr9+sG54j0ZDerN27v408SHlfRLzuxfb7Ow4dqAv62R2eMpnE17fw2paT1YO349xLpizuglaNdYzwKwocX9tp/m+YPwHjEc78QFNJpSiZ/d3/ar2UBQJBYEMCahcA3yX++ic7nhcN+PEmiFZglQugBdqj38flcHd8hh/7FYKoNyzG9qiEtWnnsQ48E/WJHZk2QAL4CktirRl0YOT7wPzjnOsi+GA3fSqXjDtFGhsEKVLj+HM4w+O6fpQAB+cIk/V7tg2Va57xf59Cc1KfyrsiD47n1aLozm/Xvlw/eh6egF9qxncvrZV8QaemUve/put5+FePyWUbMKNXRi6+r8PqfT8kidWM0K46jMD+ZSpv9FwFrlUV1TjObAVIQ1nMKONSWaqTTdt2LnpDAzXxa9zj7T3ZXF0mWKNS7/j1Cmk7uJfAp3cjXlVohUF5FoqeYxXXHHejlyiFLmoA5hv3Mv5kQsYPb8d3Z13YJZXOWWWEBuBV+BmIhNfcS/iINpl5rLSOvlEdCDTApgk5dKVney6H4w0KY7Nx24RkOrhHH5hPP1u5sOvW+oxrcL+x5fpvnYQz3OXw7aiHU7mTdFRd8bvzV+YjxzE1jm+6Kci3WemHq07RtHcQM5YPk2qT8/e0dQprKJrVQngtiPvuctFyMFJKXK+e7pzrMAwZtc1Vb40TMuFg7Py3hzvlqx/mp+K+eUjWsrxG1fZM/4yZrmUtgSfHMOCly3S9EuKlZ8WwHcvJfL8Ex5XZaudHQkRe9FfPZ42xsrDfKOjA9GvtFRR9oUjf7DijR0rrZUvR8MWV6GmdYDwAL/41y4KSE1AbQGUh+rptk2bqz6TsoRgxgKIIkjtAF8djKK209v7OFUKKp8yI9pWodak49iaKg+ktq9UDdcjN6lWKHkNcN4/2FfIC08uoN9oFreDfNKK04cC+PQSetaziLyYNoyRvK7nl1ZSYfQl7votS3+ThLyspvN5EbI904dSpyeAiX8dxLCTNxHnNihCKj08s5DWS59z3tudg5Md8JZ1ZMOfzRUcFvZpyvM2S3Bvpl5g2092WlI8ztOb4OB0lAZF067vRlyZj3OQJsed+meizxNxnFgJF5fr1CyUnjJI6TerFnVqDGZHRBw7HJPLTviberOdmOy4kToGRTl5yIX1dFFDAHdSdf85wgZOU0yb9Ziah6YdlJ7CkUN/sDC2Ml5tupBX6xFWQ3vjmUoA5Q/jIRG5PlhTzNh+mQw0NOD54zDm7xrITV1HfGy7qMdHLljjXDn4gYc0eH4pKjc9i1NZ+c4RCV3Gl2XoH3epqsqxfBmK2WQPTk/ZrJiBcF/XhATjuSke4CcE8Kz/Hyx73ULphSGhm0chevdVCuCyze2INJrC1JrKqeIPr6wUwMR7hzDZcoDbQ+d9dB5uWOBYRv1djp0dlGz7zzGkfusQIYDqjTSRSk0CGQpg9JUdbA7TZXBHC2Z2bYFW1wUMti6lZtEZJ1MlgPLpwGZmpYmpOJRAn3fR1CHy+GJaDzvOgtXjidy7kJUPTTi+ZLDiBySfAo2uuowVri3ZOLE7V4v3wXu0bVpDPgpyK2WCvTmJ1jMY1akaF3d4kqtON6rLp3plMQyo0wCdTm4MbFcV35WLqdjDDfMSyTvRXodT67emjNqzGy6fomKXPhil2qR26/BxLj7KTeduH5yVCaQngPKH0ahW5mi2m8fwZvqMsu+EmftW+lsaInl4BvNmo5i3cRP6L8/Rqd9Cth4/huEH9V1+nBf7LlXUngK9f30l9mdjOdUrbRgnuS0DZ1nR1N6PlgaZ23l3zG8EE++XYHOHnry4d4zTr4xwqJQSGT74tAc1tq1k7YDrdDROfsq/CMZohiv+w3dRKOEGHVfZYlB9Q7IAyngc/TfhoUtwDQNvG5eU6beECGpNtmf+ID9yP9iMtddoZg+IUjwo123ryImcPVhtXZc9B0bT6UgYt1KJz/OwtZhtO8D+LuM5cScMl0ZtFS86n7ZfxtT1fTEy649NKQM273XhZK4urG3ZSs3fxHPajq5Oq467MIwLoIhpH8wKahJ2cS5dTkay1Xk8f1+cy8jbOpzqN1KNnanxOE62oKGtL41yhtFyaTsatjylUgDjHx7DfPlkVvfyIvGOJy13TWLPKKUAPg33oeW2Q6x2mkUxHrEjJJTuVnbvBepTAiiVxBIVE0a3GaOZOWINZqmmR1NPS6f2AEmKZ8js5hjUnUvfiqU4cnYDJSv1UKwPSmOvUW2OC3OdN5L/2V5sNoxg9gAxBarmQBPJ1CSQoQDKEqJZu2I9efSLkV2vMnb1vny67Z1dIYe2cL9EfSoSxLknZbA0iuDgzcJ0aKqclpFf83s2RNpxDcMapf304vaZXazdE0gufVMG9u1G3l+U6fdsWksJIz227QqgkLE5/XvaJC+op6IRdZxsjuvTRHknMQaflcu4EvUPxUqZ08vJBp3kjSdKBqu4/egFBpUb0ce+UZoHU/ARbzYcDsGgshW9OjQhdfi7yDMXCH6sQ8s2KW1K3f4nZa2x/GBNVV7f6qXLCX8iwayRPV0apWx0iQ47w3LPPUiy5cHeZTAVP/j2IvLYYeZOu8uEQ73UXpP02tgTndqzaGeU1t2QPr5Ax91H2dJr5Edv5yrHVpKUc5c2sOdBONq/6ONk0QODPKnWFhPuMefsWVwatk8TPPh26F7W3b6gyGNZVJeYPNWTN2AksuXoTEITU2pOvQEj4vYhVoWeplD+OpT85RalyvRRbM6QvXrMmoDVhL9+TWXDhiQ8/Btb6y4pbJIk+J5YzukX/2D+e0damSR7PRnYn3qatlj+mvS0aKH+FCgQHnaANWFn0ZPnrdPi/TgLCtrElshQtHMY0c/SGV01dxXHPrzCwos7QcsYiyJaSAs1pPGvRUh8foOpNyJwt2ih/G2cmkzFymMxTJ7KDL91iDU3T1NMtyHFZeepWGEYxslT0VHhR1h34wSSbLmxqeREzRJF3oN//PcRAhNLvd8Y8+5G3KOTzL0a8D5d6v6R121cTrlhRp7/+MtidDBRvhBJXz3G6+Q6bkviMdBtQO/aDdBMXvu8f/cEa4KPkCdPbUrq3MOwZDcq6n7bXegqx75I8EMRUHsK9N9s1Z6dmzAslos+Q1ey98ReCicL3OfbkMhU10FUb9ePiB2TOJrXnk1j231+cd9pzgen/DlwV48eXc2+UwuFWYKAICAIfD8EvkMBlBG4dy2Hgp9j69gPs8x+Yf4JtvdDTrF+2xGKVmxAp9b10nhq3093fJklt6/cwLBSuZ+ybV9GRuQWBAQBQeBjAt+hAIpuEgQEAUFAEBAEvj4BIYBfn7GoQRAQBAQBQeA7JCAE8DvsFGGSICAICAKCwNcnIATw6zMWNQgCgoAgIAh8hwSEAH6HnSJMEgQEAUFAEPj6BNQTQGkCfgcOYlLPBoPvKIzL18cjahAEBAFBQBD4WQmoFEDJ41DGjF5Lj0njMC2WmSOff1Zkol2CgCAgCAgCPwOBjAVQfhRYU1s6rtmHhUFmj3v+GfCINggCgoAgIAj8rAQyFMDII7Np4HaRVZMcCQwIwLKbK+Ylv3HY8p+1J0S7BAFBQBAQBP5VAhkKoO/orvhodMV7sjWR/rOpMzucvw8syfzZkP9qk0RlgoAgIAgIAoKAagIZCuBBDye8JR3YMLU53AsgR6vFxFz5ILyQ6jpECkFAEBAEBAFB4LsjkKEAxtzYQdPhfgTsX0bUgelMuGaK98iW310jhEGCgCAgCAgCgkBmCajcBSoPPRRwV0bO7Bq0sWuDTqqoNpmtTKQXBAQBQUAQEAS+FwIqBfB7MVTYIQgIAoKAICAIZCUBIYBZSVOUJQgIAoKAIPDDEBAC+MN0lTBUEBAEBAFBICsJCAHMSpqiLEFAEBAEBIEfhoAQwB+mq4ShgoAgIAgIAllJQAhgVtIUZQkCgoAgIAj8MAS+CwGMCIEnr6FSZdDK9u3YJb4BrV++Xf3fc80JL+LRzpNbjVOAZCS8TEQnl/b33BxhmyAgCAgCZCiAkofBTFmxg+zJoLLrmTGqry1Z+Sng/P4QUgAq54Hgl7BkwtfrFckzuHoPalX8uI6HZ6D0YHhyAcSjOy2fAK8JeGx7wLqNyzDIraJ/ZDG4NGiJnrMH7k6NMt2Z57fMZalfGDl0TZkzbSDiCPZMIxQZBAFBQE0CGQrg7f0eLL9dEdtqRZA+usTaEAPWurVRs2g1kr2EShYQeEUpOokS0PqK6nPJC+aGwvqp6dsmk4JGVqq7Ggi+9ySRJxZjPysKv13TyPvuTUiV0ZJoBjVvjdEQT4a0KqMqdcr91+HUqujC7pBD6Klbl/qli5SCgCAgCKQhkKEAPouKJEdxQ3JnB//ZI9BoNwErw6xRqMTHMHUuLNoMA5zApBZ0aKq07Yo3HAWGdQNegmNbmOEHeoD/MvB7ALFREB4JPSZD59rJbXoLq6eDfygkxoFlNxjYTnlvy0LY4AW3gXpVoetIsDBS3gv2hcU74JUBeHqkHSFB+2GKF/AGqrUD107K+9GXYKgXlE6Cq7ehlA3M6Kfu6JLgOXkEZ59ow7NwSlj1YYxzE8X0ojz+4tDhbrzR0iFn9hyE5SzDoXnD5DUytMl0RvrNSebgTlCuNgzrVllR6eXti5m+I5Bc2RLRMqjHrMn9yS0vkATcnfpR0MyAUxciSHwZz5D53liWlMd2lOA9ZRSnH2sieRyN7dBJ2FQzTNUICT3rm9PZ+wxWv6b0uywhmjHD3OkyYQFmBSVMHDQKG7dZVNRL8dckD09RzXI6x0L2Uljdl4q4YMrVHs/5kO2ocjTVJS3SCQKCgCDwKQLqrQHKYhgxfC5T5kzIsulP2WuIvAVN+8Kh9aCTD/QKKs0M8AC55qxyB+KgXD44lAQGgM9QGBsElw8B16GcG9zbo8znNxeWPoPtk0BDAovXQr9+vF+32joMztaEOR0+xhEfDDU84Ma2lHvxd8CiKxw6rhRfO3PovBHsykLUCfi1I1y7Cmb5oL4JrLkJxjlUDzZJ2H4KO23kydn1aEvjOX7qKpaWFoAMN7sqFBuyj34W+gSucaH2+kSSjq4ComiYzYl1SUeSOdhxON9gVrnXU1QY8+g+OfX00c4G0x3MyT1gD/1r6ALx2JnmIb7FCvbN6EVCVBivdMuglxOCN7sx6rIx+2Y4Inl8nnotZnL0wtYU8Xl6id9t5nPjjBdaHzQr4shCOi19zri6T9j+xpq1wz8+I3Z4u/KYjTmFY5X8qqHI5TjyKBYD93N+zyw11hrVKlIkEgQEAUHgkwTUEsCoo/NZ/sSSSfbpLJ59CVy5uLWBG3J3L9WlSgAP50sWx3uQzQGSkvO7WEPLRdD89/SNWjkAblvBDFv1BPDULFj2LGXK1H8cbMkPK4YrBbDpwhTBtDOF8WfBTO5Yqbpk8cwf6szqc89p2dyWXv2cMdKVe0/3aZijM2tencBQA+KDfcgz+LB6AngvhPVem7gfJyXs6C6MXbcyq71ZsgAaMexINOZFFS7h+2t278Z4R+VP9tyknNhzhb13b7xvg1yoq4w9yo1ts9Jt0fJhjXE7UpCbl3wokM6U5YY/2nKl7iRmyeGouKIu+NK+5xgGrzhEp5rFVCUX9wUBQUAQ+GICagigjHE9u9Bp1gZM86d9gH5x7Z8SwCmwTgJr5BtiYqF0ATiSygP8lAAOsgGTkdCvTvqWefSEF01hVnv1BPDKSnALgr2LlOl3/X/a1N8IFvX9QgFMkiHLpoEs4RkHN89n0KRQLv+1lfzE0tqoCn9euEM1XQ2enl9J4VHnkgUwrTjKxeVYgSEKD1D6LJhaLUawest6Kv5aCJ8hdlwwH59KAGsw/myKsL1r/dIBrYhsOotpn1qne3oJg5bzCQ/82ANEEo1909aExcuYtP4ALU0KfQTVw6EWui676V9L7j+rvhJu7cdiVACXd0xTnVikEAQEAUHgCwmoFEBJ1FHau55m9+Y/s35a6hMC+OQiNBgKR/bD0YXgNAbuqCGA4fvBbhws8Aa9OPA+BxP+SJkCPTgZZkYpBezKHeicvD4Y/xwiL0Db+XBoMRgYoZjqlcVADSsYtwqq5oBOzrD0IJgV+jIBDNs1lcWhvzG2f2ueX91El0EBBFz1VEw9bpxoz8pHNVjv3pG1w+z5837ZZAGUMqpVeQr3241D2RjsrFtQustOhQAmRvpTwWYhR05vRyPqDG2bt8JiximVAvjk6kZaDNrH2o0LKcZDth8OoYdzh1T9LMHRvBKdvC9ibZx2Vc7Tw45LBWP/ANIAACAASURBVPvj0VRC0+5r2eu/Fb3Uy8PxEZjX7MSGi4EY5VRzlD69gH67pdw/vkbNDCKZICAICAKfT0ClAIYe20hY7jq0qZ56c8TnV5gm52tYvBn6O35c3tFN4BcEFRtC/Bmwdwf57GLIIQjPATaWyvVBj53gnir/7UDw3A2ynErBMpMvHCZfsnhYOB+i34K9E1T8VXlDXua2wJR0Q5Lrkv9LXBQsXAYv/r/ZpY0z1CqlTBcXqRTY/snriVuWQP0eoKfGGiDSBPZv9eRUUCQaeYrh2KsXpYokbyB5m8Cu1UsJjHiJtWVZGkz3SxZASHgUytyF3rzSMaCJWSFi89bExlLZL0F+3vgcDSFX0VLUNtBGWrYRTUzlnlciW5aspH6P/unaFnXVj7VbjiLJlgcbx57UKp3WWwvdMQXHzW8I2OKe8nnIq4csXOqH42BHxc7Qi3s8eWzYiOYV9d+RZuWo1gTrD2bBwEx8ChEdSAG7ZTw5tS7L1pqzaKSKYgQBQeAnJKBSAH/CNv84TboXQDYHr/cC+G0Ml+Hp0Y1tD8uzbt5oCqnaBJz4jPlj+uL32oLtCwdn8pvKOLpXNqd43z9pXrk8NWqYCiH8Np0uahUE/hMEhAB+z9384j6eJyNwbC7fIfptryuHj/KrpRWFVJ2UI4vh6IHbWLao8VlT5tJXMQRdDeV19nxCAL9tl4vaBYGfnoAQwJ++i0UDBQFBQBAQBNIjIARQjAtBQBAQBASB/yQBIYD/yW4XjRYEBAFBQBAQAijGgCAgCAgCgsB/koAQwP9kt4tGCwKCgCAgCKgUwPDzvpz5O5H45y/o6OxIAVW7AH9CptL4ZwRHvKSyWfKHgz9hG0WTBAFBQBD4rxHIUAATH52hVf+N7Nu+iJAtQ5kTYY3nyCb/NUbcDzjChlM5GDHm23+O8Lnw4yKPs/WyjB5trT63CJFPEBAEBIGfikDGAngvgCotpnPg1G5OLejN42pjGdzU+AcFkMCmkRvIWVaP0It/I5X+gu3Yzpj+mgfexnNw/i7uvEzidexbmvRrjdnvBRTtPLvFh2O+94h5oUGxMjrUdmpH7bLycy+fsrLHQWxXd0X+f5d9thGVswKtbUor8u2evJi3xX/n1vnbSN9mx/oPe6qVK8iz4PN47Y6i6Nt/uPPXPxhaN8ShUwXVTN/EMWHYcCyHz6Her5rMHTqcmgOmYK4Ia5TB9SqakEeaGPxzkC6rpeye1ZaHsaCvl3E+dUIePbl1k/tvClBJceKMuAQBQUAQ+LEIqJwCvbRzOl16zaP28OWsHWXzY7UujbXxLLSZyxuLegxyrY/k0T1eFyihONnkqrcP5xNL07tHZeIjrzDN4w7ua9rzbrb3ysotXHlbhu59U0fDeMikytvoeWUgReUhnGavJjxXNZyT06x1msiDotUYPrUZ2Z4/5NkvRSiWNzuPAk8weUwQf/j0xjhvDJNbbsFp32D0P4w3lA7p6CubaD3iNJM6F2bxrV/ZOdVZZX8kPAjCbeJiEhKecfyOBlZmhbFo05+O1qojNKgKeXR84WrOS4wZ4So/l05cgoAgIAj8WAQyFEBZXCTjRqyj19iuLB3SnjjzcSwbmk4soR+izXIBXEiD1SMpXzhtVIvtw2ZxK1GPwvnkR2C/JmzfC4YlC5u8aecWrSc0Z0WcesjDC727VAtgGTdXzEumPTtMLoDzfeKZOreFIlTRQpulNNvoyu9qRoDdNdWeLiuec+fGYYqpe8j02zhGdXck6EkiY5duwsJQnZhNynaqCnn0Q3S9MFIQEAQEgXQIZCiAAfN64/vbEGa0Mflfe2ceV2P2x/H3mJgky9i3mGSPsdfYG0Kyr2VIKFv2NdvPmn3fdykZFCahSJItNdbGklSSGApJUsl1+73uvaSM7r3lZj3Pf9yzfL/vc57n85zveTpfpNEB6HVbT9QZp2wdcfX56WcuNu6TV5CvRx9a1ZUlkP3v9f7qTlEimnn19tDv/EhK5wK/xVuIyN8gwwqw1vz/Ufe91HYfJYCv4xnZrjUBd6UM3rIPm0bpTvpWAth1Vg+u6E1gyu8JmFpv5ODxPRRT52MmNVIeff5xFRYIAoKAIJA9AkoF8LrrbGbfqsGeaV2Jv+mBzab7uC0bmr2ePnutzAXwgb8vm7Y8xnZRW/K+iCbwShJtO71b7QW7HsD1dCp9R1QjLExCK3NZ+FDCbrvl5OthQZMKyawb6krpjh1yVAB9Vg1n49PG7BhkgElne3YdO45+AdU5GpNjnyIt/DOyfBOxTx5RuEgxtUZDVcqjqweOEiYtS5cuqsOpanUoCgkCgoAg8AkJqNgDlOCzx5EY7RKkJkKn7h3RVWfl8AkdUL+rFAJ3nadSt8YU/sB+291Ll7hy5hFo5aF65/pULJ3/XdMv4/DdeYHniT9Q0bwOhhUKy39LfhSFz55gpFp5KVc1H6m6ZahTX/FByGX3k5Q0bU6p90KbCfciCbiWgqmZLK+Scpsy+Pb6KVuX76b98KHyvHvBvq4Ea9Wja7Mc+ihJZcojCHE/wLp9iSzZ0Sttv1T98RAlBQFBQBD4vARUfgTzec0TvX/JBEIPehBEDbp3qPAlmylsEwQEAUHggwSEAIqJkU0Cqdy8HELlOlW/0j3hbLotqgkCgsA3Q0AI4DczlMIRQUAQEAQEgawQEAKYFVqirCAgCAgCgsA3Q0AI4DczlMIRQUAQEAQEgawQEAKYFVqirCAgCAgCgsA3Q0AI4DczlMIRQUAQEAQEgawQUCmA9//xxe/mY2Jf/IhN327o/JiV5jMvG3HGlYUuPiS9KsTs5Qsor8YfdGumZ9GKICAICAKCgCAASgUw+V9/Oox1xWv3CkL/msX4wHIcXqD6AOasgPXfaMeGxx1xnmqWlWqirCAgCAgCgoAg8FEElArg+XXDcbjZgAOrrOHxeco0X0DI9X2oeW6zWoZddRvPzHMN2LfMQq3yopAgIAgIAoKAIKAJAkoFMPivWXRwSuKW+wJyxQVR+ddJnI30otgPmuha0Ub0ufX02ZzIsW3jNNeoaEkQEAQEAUFAEFBBQPke4OsEHJc6EFfUCAOJH+M9dbnpPk/DJ3+kML5NIx40HsXO6VZiwAQBQUAQEAQEgU9CQOVHMAorpCzs1Zaio7dhY1xGo4bFXXGk87IY/JztNdquaEwQEAQEAUFAEFBGQA0BlOCxfjY3fjJl0oBmGqcZ7jWFicdqiT1AjZMVDQoCgoAgIAh8lABe9t7PK4OmGBmol0Muq7jDj0xh9CEDDq6xyWpVUV4QEAQEAUFAEMg2ATVWgNluW2nF+IcRXLsZysYZE6k+Zg/2navkTEeiVUFAEBAEBAFB4AMEPq8Ahj8gf4ny1Kyo2X1FMdKCgCAgCAgCgoAqAp9NAFUZJn4XBAQBQUAQEARykoAQwJykK9oWBAQBQUAQ+GIJCAH8YodGGCYICAKCgCCQkwSEAOYkXdG2ICAICAKCwBdLQAhgFoZG+jKB5Fy66OR+W0kCj55DsYIQ/QRKqPmnIq8S4QWQPxc8TYGiBdKsSHiRiG4+nSxYpbmi0pREknPpoKP13zYTEhPR1fk8dsmsefz4Ds9fQR7tQpT5uZDmnBYtZY9AqoSEJAm6OtrZq/+t1JKmEBUdQ4mSZcmjwSMiE5IS0c37+e63b2V4VPnxngBK8D/mT+1WzXiLPj4qiAN+/0AhA6w6NFLV3jf7e9TlQ9iOW4v9BhdaVC6i8DP0CFg4wfFJUG4sPD+unv9HpsB2CdjXggmnwWdDWj2n6b1xf1Yfp2VjKKCh1FPqGQWHDg7gmM5AVrZsmLFKYhhNFo1m75RDlMyjbmuaLXf2/E4uhh7EQ1ITn75TNdO4JJ7T18NoWKsuH9B8zfTxXisRYWehmDH6BT++x3vBbqyOlLLQTHGQvM9xB+6V7Ec/w7JKbI9lgaMDnbosolohLXgShNWRAHb0Hqy2v8nPwhixbSTVGjsw1qiuvF7wFScOxJVmkkkr+b9dDk6iaM0pmP3y7uUusw5io8OIeqVDrbKl1bYhuwU/xs4P9vniOobTJnBkuSd62TXqA/WcXQfgnlyH7X1GIDLFaRDse02lCeCT21c5dGAHo9eEcDv8AD/LCiZE0q3vTDbsceTcAisi681mhLl+zlnzhbYseXId0/ZDWXvAG8Pi6d54752CIXvBbRiYzIFAF/U8ODkL3ErD8BLgEAAu89LVk+A6y5odKS04OPcTHg7w8h4m8/rgaO+H/nsvnieO2uEs6YJjO8XD7XNdUVfm0v8fNCaAkvsnKLPnANFjV3wilyT0n2uA3dBIGhT++C6vnp5C7f072DU8iJ4GhXHd9wfBBouYUVuZAN7DdEwVJLUX4Wc9DKLPYrj3MNeHpZ+DSmxLTWDMsvYYtnXGtnq5tIKnj9hhctQHH/tL/F5Sl1nO5lRr7EpPA9W5Y5z3dCfkl4XMNTb4eCgqWvgYOz+lAJIqwXX/IFwkzfGwsM5xLt9rBxlXgPFXqV5nGmffCGDQzklM8a/C4bX9iT2/mSaLQrjhtkRjrLydHNh1LoZ8PEGqZ8qyyf3RzgW8jmflhOH8HaeLNJeUXE+SmOniRKV8sHGGNQZW6zGtqEP0xR1M9EjEaZbi7fXRTR/Gz95K7nw/8SxRB4eVK6hSVLFk2bFkLLe1ynDtpD+5cqXQ7A8HhnWrJf/tssdqlh4MofCPzynxmxVT+5lm8HHXtG5crz4dhz8U5dOupChwPAd2prDoAExMlyvRZwdsOwR5tECnBiyfDD+9qRkVAOe0oGU+OBgO/dpnbPd1PBbGRljvuYD5ew+QuMhwbj35CaO6yh5yWR+iwBMTWP6sEbs7d8lYWRKDuUNXlo47RTVZyFaNS/riLv/b7UByriI8TH7FdEsHqvysDa/jmLJ2LNYDtlFF9lx8HsxQ95OstRoiP2A95NouZnt7okNukotUY3mvCbwZPnmvHxLAxHsnGHY2AkeLAfIyyxw78mur3ZiW1YFXj1mwezIhj3LzXBpPZ7Pp9KlRWV7uauAOVp10w/1pDN1LG2FsNIh+xjXkv2VqP5AcexN7t0Voa5ci/Fk0gzo50Lp8SdVUYq8xdOc6vCM9qFe2K0WKN2D9H28Of5cmsOmv6ZyMfMqLH3/EvvsiGpZRrZAyAZz6TwIPX+bl1JiFeOxPJ4CZ+n4P06lDKFowlp4WnnTVvp4lAYwKWovVZfDrNyyDzzJhWR4m5d/c+vgPtmdOegHM1L9E1mydhHOEF+RrTj3dUkwcOAd9NaKqCTFXGOe2DIlUh6epefif5TzqFFcttsrslK2gbxfuxaA6BvKVsdmug+wfPg2dpHD6r59KYd3iREmhUh5tgp5q4TJmHoWSZCtAG8yNGhFzN4xnxRqyqc9kir+JlESGHWam12GK5tEipbgxCzv3RlseKk1k5prRFNYvy5kbd0iRvVj02ULz0ulWzNJ4LOc1w7r/GdqWUe2b6kkoSrxPQKkAuo3rwaG8A3FyaA1RfvxgvpYXV93SwqMfhTM5FKNiVux8FEAlbQnefmcwNTGRPwj9VtmxPq41e6Z3Jj7EE4Oq4/F9doOaBWB89+o0mPE3FjV1iTo5izarn3Njr0KUpQnRPEotQon8WlxwGsmK22a4zDKX/zbLtiWO18oR6OdICR4REq1FlfI/kxzlRxOrbfged6YA8fRt1gJbN3+alX4b60uh72+/MsbzJnVUP5PeIYl+AEVKIY+tjegAbZeBeSW1kZ1aYcu2xJ5sn9I6Q50LTn9yKKQgM+a1Q2NbDtI4us7pyP9G+VJHFhZLdwWdmcWMB1Vx76F+vsY1zmYkG65nfD19wi+uZPCNPPhYDZW3+qebJcGlpzGncQ2CA+ayIr4ZG1s3lf+WEPsQCpZE90eQrQoi9Bcyw+jdquBDApgQvg/jIxfTVjADF+ajVffoNysPKQ8ePaZUseJIn12i5so1XJ6+jbcjez9oMVZXUvC1zhhSVWa/p8cAdv3Qix0dWpEQfZkgiT6Ny6i7J/kvpmMG4LjsCHrpBu/oYTs2v2zJ3q7diLm9D9MdBzkzfTsFVAywTABXvWhLtftzeVljBQb3ZqdbAWbm+z1Mp01kU582dPe8iX/v9tTLwgpww+7uxFVczKT6GSNBMmHxyDcQrYvD0G+1lwcXbdNWgKr8m7CuPg1a+9KzoupwadrUTInjQZI2pQpqE3FhKSPDdDloqTqMq8xO2Qr6fPGpLG5qKF8Z/7h6Lc8c/kRXFuacPZUT87dhM7kZM6f8w4b19Rk54hI1kQlgF9bZX6J5SR3WOJlztdRUxZx+eY8WC2zZPN4Tg3ywbGtr8hi5MLym7IUpgR7TSvC8+hoO9epP4qNbJBeoTPoAk8zX00ft2Pa6G47mLdV+doiC6hNQKoA7R3fBW3eoXAAlET7k7rhRcwKIFI+V45m2zZ8m5uYMGDiU+hUUH5GM71GDOlP96V1bdkNE0fKHNqxQQwAlLx7h5ryNoMinxEedJSSvKce3zEgTwKSO61jQMeORa8HuE2k7JYDmRoobOsj/GF02BzKj+duI/gPalOrDlgfHsxbjfxwOW3fC00Q46wmma2CG+oeJR/pOZ8AubY5vnqL+aGazZEjgQkaEF8X7j/dCrtJ4es8zw26oH42LqLv5l0ivGQYkle3AzzItTY7BOb40r+3XKUQuyotGfx7kb/tVTF7ZnQH991PzzSZHYlwEzgG7iUxJ4l7EEbSrLGezWeM0r7IsgKkSLl7+C/f7V5GkxrP7xC1OpdurCT8/k6E3C+JtNSYdORX2x1xigONIYnWr07VWN/o1aoOOegtjeHWbRvYjcVt2iPRnHw1eXIJOllGY68kYy8KkZbAdFE1jFd9UKQSwHavratFow3wGVNbhSdU3IdBMfVcIoLuDC6s3teCnsrZsjbihdgh08qZm1Gnp+Z/QpkJYhjG13G1Md3nRvOQdjJsqQqCq/Bu1oiLNO/1D1/dj78rm86s49vvv4uKzByQ/vcWRhApq+aDMTqUCOH8ugQ6b6D+tJ8scPJm9sC4jh78VwHd7gJGX52Bx8TUBtjNJjDhIma0z6WxQT+5JdHQAZWqvfzOnZQJoyNgxETQskvkEkrVnc1Ubn74Tsnl3i2rKCCgVwAubR7IwpCluS3oQe9EJk3nBXNm3QGP5AKVSWbgzkQDvPQwYPod9l29jWAjmWzfitYUT02QrppehGGl3YutbAUwnjjKRaLsu8c0KMAG7JqbUm+eEdZMqPDg1i34uZBBArLanEzYFlnCvWQz3KInX+szeHmUrwGqMOhROvaJqTqaESGjZC3bsg8qlZMtPoG+WBPDitpEsv9UalwXvhUfVNEHtYqkJ9F/Ymr79fPm9ZMbYU8TllfQP0vpPuEt52ylYz6mNnd01jD94Y0sYuuQ3GhuNYn9EPPtl+1CyK/EuzZb2Y671nzTWKyl/83WhtxoC+Bf1PAMJGbFAnrbLZn5+2vRUrACPHx3N6rg6OHfuTYE8D2kxdhBO6QRQJiBjIvK9t6eo3H7ZnM2VC2JjQljpPoKbRa3Z07W3ergz+WBi1MpK1Glzjn5VZRMsmd4zqzJ29B3qqVhYvhVA2UvCfve+DDt7giG9z8n3ADP3/a0A/olWzDmaLevJCz0rtcRD5qRsBRhtsJgZDT60AhwmXz1t2tmeqVeCWDskWD4OqvzLuGpXB6WEOetMyFt3PSONapJ8ex8Nj76LAihr4a0AfsjOvfv7cK6oPUub1UT64CS51258twJUKoDjOPJmVR/690yGhRTB22oEKfeOUs3Vi9CxKz7wzJQJYDOmT75EzXyZW3zRbzwr4luyo2NbdcCIMlkkkFEAH5+nQuWJnIw+gV5ukMaF0NZ6MfsObOHUAjtC645jVGvNbFTH33Rn4LpgFkwbRp7HV+hhNRJHvytUyQ+RvmvpMMWfXa5LiNy3lC6TPLnwSBEC9VzUl41PW7LT3pTZVu049JPpGwGMo0t5Iwb7nMOkaALje7UluKyFSgGUfejTvKUFo9bsxKyKLjud3ek4cDAl3u7XAVvHdSC41kyW9FW8yam84oLAaDSc84Ln18C8HVi4ZUEAJUzpVB+D6cexqffmi9M3nd465selmAJY9K6rkRDo/WubsTgXx5mB779hJjNiSQvaWHjTXi9r+w8nvCcy535Zdve05fm9E5xN0qdv7epp2K6enYXR3s04Dr+GpcGbp/zzq+gvmoDPeHeKJN7AcktX9BrsfCOAUmKi7xIevI4JIbCjox3FipRDN08uSIzgt7kWrBzpje6/uzFznszS4VHyB+/2vZaczGvDVrOmeHhNptfxEG6lE8DYEEdq7vXCs/dMToaFYGfaRR6xztx+KfNdhqBfcxgdK+mx+6Adp/P1xrF9B5VTQlEgli6TG9DB0p3y8acobjiYmoW1CLmwnN6nI3HrP5O7F5ZjH6rDmaH2Kr9MTS+AshcIk7m1+L3HVbkAZu77OwGUjaps1TPr4S9qC2DExeX0viLF32ZcBp/TC4sk7hr15xozZYjiRUSVfwu2mhBZfBxDfoFQrV/pXq28Cp4p2Mw34vcunliWy8UcZ0v2vm6klg/K7Ay/uJRuAfH49R+Dyz5bJoTk4dHbEKhSAWyBVddDWFfKyyRnWxq3288gw9Ig29dbao5e0+UMqVWJ4+d2UqG2DYY/y1b66gighKmrm2DQ2pMBVbKy/6LmdBTFSBNASWwEW13cefg0nkKl62EzsD2yG+T+Pz54X3tM/sIV6WpWX2OrP1mo54KXG+6ngpD+mJ+OfW35rXKJtCEJ8nZil28wVUzMODTOjpnnFALIq6dsXbWa0Cdg1rYJ1x9IGNZTsU8WHeLPRicPkrUL0rp5NSKfFcK6o4n8Nz8PJ6jVBZPy/91nSIwJYfPmHTx4LqWOaS8sTGtmmBrJ9/35zXwqf50+jr663yT7u4NHABTUg2rFoJAxmKi6sRXdXndfjI1LIqf2zkjbr3prUOSJYyxfcIfZRweShR2TTKe685+26DRcQnf9jMsNScx5LA/44jrQPutjnioh8OJOPP4NRzt3Gfo1sUEvf7q9xcR7LDt3DruWPUi/5gwNPsj20PPyOiYli/I0fwM6VpR9aZiCq+9iglPeudHdaAKGhRVh2YjQo2wJPkuRQo2pkPsWlaoMlv8mTYph26mthL98SZ3yLUl8cJeuZr3fcUtN5tDJjZx9/oxGFS3pUE3xgYzsC7zM7E8fpi1VyBjbJu3UD4HKIg4hXmwLOUcJWd3G7dB586cuQUG7cI0MRvsnfYaa9KdouhewzAYv5u5xAlIqvWEE14P38fjnVjQvWUCJ7/E4+x7DskU3+dySffDjciOUvg3U3GOSxmE9vzVtLQ5hWbF4mmmyjz1u5WlAq3KK/zsftBMdvR5pY6TMv4RH11gV4MprLdlc6Y9eftXh9vjoq6w5v48X6NBaz5jrKRLs1PBBqZ2pEjxPr+V03FOa/tKKW48fYifjlBLDujOnsW3RAXdfN8xa9MbvzEZ+MxpMcWLYffkiJVLv4R1zn5q/dOOPX989PyRJMTif3k5ocgJ6RX9nUMPf0ZLv7crmtCMmTQanfTDz/jhfP7+CgYEv8Bs+9T/PAaFdmiHwFfwhfALdDI3eCaBm/M5yK9cPrWTQ0jNscHGkZg5+keXrOItpLrfY9dcOyn9AbP8944PXnRLY9Mko0ll2SFQQBLJJIP7heTputmd4jy10r1ohm62IasoInDg1l/8FhLNz2BbK51N3k1kwzSqBr0AAU/Ddf4ha7bui9ncYWaWgZvnom/481P2VWmWzFhJUs3l5sQC/I1RvbEaBtNNmMtYOvXyD8rWra/TUiazYJ8oKAvL1y/N7BD5IpmnligJIDhAIvHKMaoatMn0O5ECX32WTX4EAfpfjIpwWBAQBQUAQyGECQgBzGLBoXhAQBAQBQeDLJCAE8MscF2GVICAICAKCQA4TEAKYw4BF84KAICAICAJfJgEhgFkYl/+mQ8pCZQ0UzelUSSIdkgYGSTQhCAgCXw0BlemQZJ48vXuZ4ORyNHqbBuircU9zhn4wHZKseUkCly/+Sw3jymTy4abGjMjpVEkiHZLGhirThjSZDknWSVzMdVZ6L6eU4WTFIc7iEgQEAbUJKE+HlJqA7z4P5jtMxHjxaRxafX+pkOQal1k6JNlvdy8xcd4dlm3oqjb07BfMwVRJIh1S9odF7ZqaTYckTbjDQl83YqOOwq8rFYc4i0sQEATUJqD0LNC3rcgyKbyy2KJxAfza0yGF+hzlwP4bRIVJKV9XlyqmprQzVbyFR/n74f13ApI7d4lLlaBbtQF2QxvyQ1Ikq2aex3Zhd3lWjdPbXEiq2pTWjRSnxFw94IVP4ENyv0qhgllrzFu+99KRQ6mSRDqkry8d0tv7M8Mhzmrf+qKgICAIfD4B/EbSIUUHnmSzJ0yb1TzDbArzPMzKRaEMdrahRjkdIiNiKK9fChJCmfzHKaZ62MiPmvOcuZoEIzN6mlfi+c1AFq16wP/WdiZPSizL+2yno+NY3s8pqvFUSSIdUoax+1rSIQkBFA9wQeDjCHw+AfxG0iHd9fNh56k8TJ6eMdWRTAD/ulSACdMUue7SLiUCeMXRjb1eT/mlcn558fsXbvP7ilE0q5rx5BlNp0oS6ZC+znRIQgA/7uEnagsCn1EA4VtIhyQTut1/6zJt5n9XgF7BRRkxzjjjLHsRxpQefkzytJUfynz4f6t40bCtfAV4fbc7J6PLYjeqvtKZqdFUSSId0lebDkkIoHiACwIfR0BpOqS3TU+xakxyuw0ss9TcAczfSjqkZ1f9mTP7FoPnNyf8Sgym3Y3laWxkwvhBASSRTRZrMJhkza860awZegDD8ZZyAZQ8iWDeME86zepOxRJw5vAtGls2lWdIf3dpNlWSSIf09aZDEgL4cQ8/UVsQUJkOyd/LEb+/74JOIVp16UODihnz02Uf4TeSDin1JX+7+XP/4WvKE6t9TgAAAS5JREFUNqlKg7pl5UhiQ0MJfaSDcaP0ub8VtOLv3ubkgTDQzU/ZclrkKWeAYSVFvq/n/0Zwyj2MFMkPlG1SjQZ1M9bXdKokkQ7p602H9Pbek6VB+jdf07RURNm/J0VNQeD7IvAV/CH895UOSdn0E6mSvq+bU3grCAgCOUvgKxDA7ysdkrLhFqmScvZmEK0LAoLA90XgKxDA72tAhLeCgCAgCAgCn4aAEMBPw1n0IggIAoKAIPCFERAC+IUNiDBHEBAEBAFB4NMQEAL4aTiLXgQBQUAQEAS+MAJCAL+wARHmCAKCgCAgCHwaAkIAPw1n0YsgIAgIAoLAF0ZACOAXNiDCHEFAEBAEBIFPQ0AI4KfhLHoRBAQBQUAQ+MIICAH8wgZEmCMICAKCgCDwaQj8H9TZnIWnw/P4AAAAAElFTkSuQmCC"},position:{boundingRect:{x1:501,y1:514.5,x2:949,y2:690.5,width:1019.9999999999999,height:1319.9999999999998,pageNumber:2},rects:[]},comment:"JavaScript",id:"9850481941481022"},{type:"text",content:{text:" Frequently used instruments to evaluate code quality are code smells, i.e., indicators of low code quality which may impact maintainability "},position:{boundingRect:{x1:89.6534423828125,y1:635.3316650390625,x2:509.9925537109375,y2:688.3629150390625,width:1019.9999999999999,height:1319.9999999999998,pageNumber:4},rects:[{x1:197.78125,y1:635.3316650390625,x2:509.154052734375,y2:653.5894775390625,width:1019.9999999999999,height:1319.9999999999998,pageNumber:4},{x1:89.6534423828125,y1:653.5972900390625,x2:509.9925537109375,y2:670.0972900390625,width:1019.9999999999999,height:1319.9999999999998,pageNumber:4},{x1:89.6556396484375,y1:671.8629150390625,x2:270.62860107421875,y2:688.3629150390625,width:1019.9999999999999,height:1319.9999999999998,pageNumber:4}]},id:"7523977432979492"},{type:"area",content:{image:"data:image/png;base64,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"},position:{boundingRect:{x1:526,y1:103.5,x2:964,y2:566.5,width:1019.9999999999999,height:1319.9999999999998,pageNumber:8},rects:[]},id:"9252832906467952"},{type:"text",content:{text:"We examined a total of 604 repositories (299 JS, 305 TS) with over 16M lines of code."},position:{boundingRect:{x1:203.21282958984375,y1:142.84837341308594,x2:755.388427734375,y2:1182.17626953125,width:1019.9999999999999,height:1319.9999999999998,pageNumber:11},rects:[{x1:529.91796875,y1:142.84837341308594,x2:755.388427734375,y2:159.34837341308594,width:1019.9999999999999,height:1319.9999999999998,pageNumber:11},{x1:203.21282958984375,y1:1165.67626953125,x2:491.7064208984375,y2:1182.17626953125,width:1019.9999999999999,height:1319.9999999999998,pageNumber:11}]},id:"9298580906684795"}],"https://arxiv.org/pdf/1604.02480":[{type:"text",content:{text:"SSA"},position:{boundingRect:{x1:816.4599609375,y1:360.1875,x2:848.4677734375,y2:380.1875,width:1019.9999999999999,height:1319.9999999999998,pageNumber:1},rects:[{x1:816.4599609375,y1:360.1875,x2:848.4677734375,y2:380.1875,width:1019.9999999999999,height:1319.9999999999998,pageNumber:1}]},comment:"Static Single Assignment",id:"29668244118038056"}]},op=eC,Jl="https://arxiv.org/pdf/2203.11115",iC="https://arxiv.org/pdf/1604.02480",sC=()=>String(Math.random()).slice(2),nC=()=>document.location.hash.slice(11),rC=()=>{document.location.hash=""},aC=()=>{const[s,t]=N.useState(Jl),[e,i]=N.useState(op[Jl]??[]),n=N.useRef(0),[r,a]=N.useState(null),[o,l]=N.useState(void 0),[h,c]=N.useState(!1),[u,d]=N.useState("url"),f=N.useRef(),p=()=>{const C=[Jl,iC];n.current=(n.current+1)%C.length,t(C[n.current]),i(op[C[n.current]]??[])};N.useEffect(()=>{const C=()=>{r&&a(null)};return document.addEventListener("click",C),()=>{document.removeEventListener("click",C)}},[r]);const m=(C,T)=>{C.preventDefault(),a({xPos:C.clientX,yPos:C.clientY,deleteHighlight:()=>g(T),editComment:()=>w(T)})},A=(C,T)=>{console.log("Saving highlight",C),i([{...C,comment:T,id:sC()},...e])},g=C=>{console.log("Deleting highlight",C),i(e.filter(T=>T.id!==C.id))},v=(C,T)=>{console.log(`Editing highlight ${C} with `,T),i(e.map(R=>R.id===C?{...R,...T}:R))},y=()=>{i([])},b=C=>e.find(T=>T.id===C),w=C=>{if(!f.current)return;const T={position:C.position,content:D.jsx(Ap,{placeHolder:C.comment,onSubmit:R=>{v(C.id,{comment:R}),f.current.setTip(null),f.current.toggleEditInProgress(!1)}})};f.current.setTip(T),f.current.toggleEditInProgress(!0)},S=()=>{const C=b(nC());C&&f.current&&f.current.scrollToHighlight(C)};N.useEffect(()=>(window.addEventListener("hashchange",S),()=>{window.removeEventListener("hashchange",S)}),[S]);const E=C=>{const T=C.target.files?.[0];if(T){const R=new FileReader;R.onload=()=>{if(R.result instanceof ArrayBuffer){const I=new Uint8Array(R.result);t(I),i([])}},R.readAsArrayBuffer(T)}},x=C=>{const T=C.target.value.trim();t(`https://doi.org/${T}`),i([])};return D.jsxs("div",{className:"App",style:{display:"flex",height:"100vh"},children:[D.jsx($x,{highlights:e,resetHighlights:y,toggleDocument:p}),D.jsxs("div",{style:{height:"100vh",width:"75vw",overflow:"hidden",position:"relative",flexGrow:1},children:[D.jsx(tC,{setPdfScaleValue:C=>l(C),toggleHighlightPen:()=>c(!h)}),D.jsxs("div",{style:{padding:"10px",display:"flex",gap:"10px"},children:[D.jsxs("label",{children:[D.jsx("input",{type:"radio",checked:u==="url",onChange:()=>d("url")}),"Enter DOI Link:",u==="url"&&D.jsx("input",{type:"text",placeholder:"Enter DOI link",onBlur:x,style:{marginLeft:"10px"}})]}),D.jsxs("label",{children:[D.jsx("input",{type:"radio",checked:u==="upload",onChange:()=>d("upload")}),"Upload PDF:",u==="upload"&&D.jsx("input",{type:"file",accept:"application/pdf",onChange:E,style:{marginLeft:"10px"}})]})]}),s&&D.jsx(qx,{document:s,children:C=>D.jsx(Cb,{enableAreaSelection:T=>T.altKey,pdfDocument:C,onScrollAway:rC,utilsRef:T=>{f.current=T},pdfScaleValue:o,textSelectionColor:h?"rgba(255, 226, 143, 1)":void 0,onSelection:h?T=>A(T.makeGhostHighlight(),""):void 0,selectionTip:h?void 0:D.jsx(Kx,{addHighlight:A}),highlights:e,style:{height:"calc(100% - 41px)"},children:D.jsx(Zx,{editHighlight:v,onContextMenu:m})})})]}),r&&D.jsx(ky,{...r})]})};th.createRoot(document.getElementById("root")).render(D.jsx(by.StrictMode,{children:D.jsx(aC,{})}));
